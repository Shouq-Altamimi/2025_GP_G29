/*! For license information please see main.3801359b.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),i=n(43),s=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function h(e){if(l(e)!==e)throw Error(a(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),x=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.scope");var T=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var N=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var I=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var _=Symbol.for("react.client.reference");function R(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===_?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case y:return"Fragment";case b:return"Profiler";case v:return"StrictMode";case A:return"Suspense";case k:return"SuspenseList";case T:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case x:return e.displayName||"Context";case w:return(e._context.displayName||"Context")+".Consumer";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case S:return null!==(t=e.displayName||null)?t:R(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return R(e(t))}catch(Oy){}}return null}var D=Array.isArray,O=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},M=[],F=-1;function B(e){return{current:e}}function U(e){0>F||(e.current=M[F],M[F]=null,F--)}function z(e,t){F++,M[F]=e.current,e.current=t}var V,H,G=B(null),q=B(null),W=B(null),Q=B(null);function K(e,t){switch(z(W,t),z(q,e),z(G,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?yh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=vh(t=yh(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(G),z(G,e)}function J(){U(G),U(q),U(W)}function Y(e){null!==e.memoizedState&&z(Q,e);var t=G.current,n=vh(t,e.type);t!==n&&(z(q,e),z(G,n))}function X(e){q.current===e&&(U(G),U(q)),Q.current===e&&(U(Q),ud._currentValue=L)}function Z(e){if(void 0===V)try{throw Error()}catch(Oy){var t=Oy.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||"",H=-1<Oy.stack.indexOf("\n    at")?" (<anonymous>)":-1<Oy.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+V+e+H}var $=!1;function ee(e,t){if(!e||$)return"";$=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(Oy){var r=Oy}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(s){r=s}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(a){if(a&&r&&"string"===typeof a.stack)return[a.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),a=s[0],o=s[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{$=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Z(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return Z(e.type);case 16:return Z("Lazy");case 13:return e.child!==t&&null!==t?Z("Suspense Fallback"):Z("Suspense");case 19:return Z("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return Z("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(Oy){return"\nError generating stack: "+Oy.message+"\n"+Oy.stack}}var re=Object.prototype.hasOwnProperty,ie=r.unstable_scheduleCallback,se=r.unstable_cancelCallback,ae=r.unstable_shouldYield,oe=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,he=r.unstable_UserBlockingPriority,de=r.unstable_NormalPriority,fe=r.unstable_LowPriority,pe=r.unstable_IdlePriority,me=r.log,ge=r.unstable_setDisableYieldValue,ye=null,ve=null;function be(e){if("function"===typeof me&&ge(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(ye,e)}catch(t){}}var we=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(xe(e)/Ee|0)|0},xe=Math.log,Ee=Math.LN2;var Ae=256,ke=262144,Se=4194304;function Ce(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Te(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~s)?i=Ce(r):0!==(a&=o)?i=Ce(a):n||0!==(n=o&~e)&&(i=Ce(n)):0!==(o=r&~s)?i=Ce(o):0!==a?i=Ce(a):n||0!==(n=r&~e)&&(i=Ce(n)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:i}function Ne(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ie(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Pe(){var e=Se;return 0===(62914560&(Se<<=1))&&(Se=4194304),e}function _e(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Re(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function De(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-we(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Oe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-we(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function je(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Le(n))&(e.suspendedLanes|t))?0:n}function Le(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Me(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Fe(){var e=j.p;return 0!==e?e:void 0===(e=window.event)?32:Cd(e.type)}function Be(e,t){var n=j.p;try{return j.p=e,t()}finally{j.p=n}}var Ue=Math.random().toString(36).slice(2),ze="__reactFiber$"+Ue,Ve="__reactProps$"+Ue,He="__reactContainer$"+Ue,Ge="__reactEvents$"+Ue,qe="__reactListeners$"+Ue,We="__reactHandles$"+Ue,Qe="__reactResources$"+Ue,Ke="__reactMarker$"+Ue;function Je(e){delete e[ze],delete e[Ve],delete e[Ge],delete e[qe],delete e[We]}function Ye(e){var t=e[ze];if(t)return t;for(var n=e.parentNode;n;){if(t=n[He]||n[ze]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Lh(e);null!==e;){if(n=e[ze])return n;e=Lh(e)}return t}n=(e=n).parentNode}return null}function Xe(e){if(e=e[ze]||e[He]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Ze(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function $e(e){var t=e[Qe];return t||(t=e[Qe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Ke]=!0}var tt=new Set,nt={};function rt(e,t){it(e,t),it(e+"Capture",t)}function it(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var st=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),at={},ot={};function lt(e,t,n){if(i=t,re.call(ot,i)||!re.call(at,i)&&(st.test(i)?ot[i]=!0:(at[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function ht(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function dt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){if(!e._valueTracker){var t=dt(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function pt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=dt(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function yt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vt(e,t,n,r,i,s,a,o){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ht(t)):e.value!==""+ht(t)&&(e.value=""+ht(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?wt(e,a,ht(t)):null!=n?wt(e,a,ht(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ht(o):e.removeAttribute("name")}function bt(e,t,n,r,i,s,a,o){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return void ft(e);n=null!=n?""+ht(n):"",t=null!=t?""+ht(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a),ft(e)}function wt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function xt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ht(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Et(e,t,n){null==t||((t=""+ht(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ht(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function At(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(D(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ht(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),ft(e)}function kt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ct(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||St.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Tt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&Ct(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&Ct(e,s,t[s])}function Nt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var It=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _t(e){return Pt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Rt(){}var Dt=null;function Ot(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var jt=null,Lt=null;function Mt(e){var t=Xe(e);if(t&&(e=t.stateNode)){var n=e[Ve]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Ve]||null;if(!i)throw Error(a(90));vt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&pt(r)}break e;case"textarea":Et(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&xt(e,!!n.multiple,t,!1)}}}var Ft=!1;function Bt(e,t,n){if(Ft)return e(t,n);Ft=!0;try{return e(t)}finally{if(Ft=!1,(null!==jt||null!==Lt)&&($c(),jt&&(t=jt,e=Lt,Lt=jt=null,Mt(t),e)))for(t=0;t<e.length;t++)Mt(e[t])}}function Ut(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Ve]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var zt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Vt=!1;if(zt)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){Vt=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch(Xd){Vt=!1}var Gt=null,qt=null,Wt=null;function Qt(){if(Wt)return Wt;var e,t,n=qt,r=n.length,i="value"in Gt?Gt.value:Gt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Wt=i.slice(e,1<t?1-t:void 0)}function Kt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Jt(){return!0}function Yt(){return!1}function Xt(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Jt:Yt,this.isPropagationStopped=Yt,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Jt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Jt)},persist:function(){},isPersistent:Jt}),t}var Zt,$t,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Xt(tn),rn=f({},tn,{view:0,detail:0}),sn=Xt(rn),an=f({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?(Zt=e.screenX-en.screenX,$t=e.screenY-en.screenY):$t=Zt=0,en=e),Zt)},movementY:function(e){return"movementY"in e?e.movementY:$t}}),on=Xt(an),ln=Xt(f({},an,{dataTransfer:0})),cn=Xt(f({},rn,{relatedTarget:0})),un=Xt(f({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),hn=Xt(f({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),dn=Xt(f({},tn,{data:0})),fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function yn(){return gn}var vn=Xt(f({},rn,{key:function(e){if(e.key){var t=fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Kt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?pn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yn,charCode:function(e){return"keypress"===e.type?Kt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Kt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),bn=Xt(f({},an,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),wn=Xt(f({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yn})),xn=Xt(f({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),En=Xt(f({},an,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),An=Xt(f({},tn,{newState:0,oldState:0})),kn=[9,13,27,32],Sn=zt&&"CompositionEvent"in window,Cn=null;zt&&"documentMode"in document&&(Cn=document.documentMode);var Tn=zt&&"TextEvent"in window&&!Cn,Nn=zt&&(!Sn||Cn&&8<Cn&&11>=Cn),In=String.fromCharCode(32),Pn=!1;function _n(e,t){switch(e){case"keyup":return-1!==kn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Dn=!1;var On={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!On[e.type]:"textarea"===t}function Ln(e,t,n,r){jt?Lt?Lt.push(r):Lt=[r]:jt=r,0<(t=rh(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Mn=null,Fn=null;function Bn(e){Ju(e,0)}function Un(e){if(pt(Ze(e)))return e}function zn(e,t){if("change"===e)return t}var Vn=!1;if(zt){var Hn;if(zt){var Gn="oninput"in document;if(!Gn){var qn=document.createElement("div");qn.setAttribute("oninput","return;"),Gn="function"===typeof qn.oninput}Hn=Gn}else Hn=!1;Vn=Hn&&(!document.documentMode||9<document.documentMode)}function Wn(){Mn&&(Mn.detachEvent("onpropertychange",Qn),Fn=Mn=null)}function Qn(e){if("value"===e.propertyName&&Un(Fn)){var t=[];Ln(t,Fn,e,Ot(e)),Bt(Bn,t)}}function Kn(e,t,n){"focusin"===e?(Wn(),Fn=n,(Mn=t).attachEvent("onpropertychange",Qn)):"focusout"===e&&Wn()}function Jn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Un(Fn)}function Yn(e,t){if("click"===e)return Un(t)}function Xn(e,t){if("input"===e||"change"===e)return Un(t)}var Zn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function $n(e,t){if(Zn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!re.call(t,i)||!Zn(e[i],t[i]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function ir(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var sr=zt&&"documentMode"in document&&11>=document.documentMode,ar=null,or=null,lr=null,cr=!1;function ur(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;cr||null==ar||ar!==mt(r)||("selectionStart"in(r=ar)&&ir(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},lr&&$n(lr,r)||(lr=r,0<(r=rh(or,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ar)))}function hr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var dr={animationend:hr("Animation","AnimationEnd"),animationiteration:hr("Animation","AnimationIteration"),animationstart:hr("Animation","AnimationStart"),transitionrun:hr("Transition","TransitionRun"),transitionstart:hr("Transition","TransitionStart"),transitioncancel:hr("Transition","TransitionCancel"),transitionend:hr("Transition","TransitionEnd")},fr={},pr={};function mr(e){if(fr[e])return fr[e];if(!dr[e])return e;var t,n=dr[e];for(t in n)if(n.hasOwnProperty(t)&&t in pr)return fr[e]=n[t];return e}zt&&(pr=document.createElement("div").style,"AnimationEvent"in window||(delete dr.animationend.animation,delete dr.animationiteration.animation,delete dr.animationstart.animation),"TransitionEvent"in window||delete dr.transitionend.transition);var gr=mr("animationend"),yr=mr("animationiteration"),vr=mr("animationstart"),br=mr("transitionrun"),wr=mr("transitionstart"),xr=mr("transitioncancel"),Er=mr("transitionend"),Ar=new Map,kr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(e,t){Ar.set(e,t),rt(t,[e])}kr.push("scrollEnd");var Cr="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Tr=[],Nr=0,Ir=0;function Pr(){for(var e=Nr,t=Ir=Nr=0;t<e;){var n=Tr[t];Tr[t++]=null;var r=Tr[t];Tr[t++]=null;var i=Tr[t];Tr[t++]=null;var s=Tr[t];if(Tr[t++]=null,null!==r&&null!==i){var a=r.pending;null===a?i.next=i:(i.next=a.next,a.next=i),r.pending=i}0!==s&&Or(n,i,s)}}function _r(e,t,n,r){Tr[Nr++]=e,Tr[Nr++]=t,Tr[Nr++]=n,Tr[Nr++]=r,Ir|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Rr(e,t,n,r){return _r(e,t,n,r),jr(e)}function Dr(e,t){return _r(e,null,null,t),jr(e)}function Or(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-we(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),s):null}function jr(e){if(50<Gc)throw Gc=0,qc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Lr={};function Mr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(e,t,n,r){return new Mr(e,t,n,r)}function Br(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ur(e,t){var n=e.alternate;return null===n?((n=Fr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function zr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Vr(e,t,n,r,i,s){var o=0;if(r=e,"function"===typeof e)Br(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,G.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case T:return(e=Fr(31,n,t,i)).elementType=T,e.lanes=s,e;case y:return Hr(n.children,i,s,t);case v:o=8,i|=24;break;case b:return(e=Fr(12,n,t,2|i)).elementType=b,e.lanes=s,e;case A:return(e=Fr(13,n,t,i)).elementType=A,e.lanes=s,e;case k:return(e=Fr(19,n,t,i)).elementType=k,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:o=10;break e;case w:o=9;break e;case E:o=11;break e;case S:o=14;break e;case C:o=16,r=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Fr(o,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Hr(e,t,n,r){return(e=Fr(7,e,r,t)).lanes=n,e}function Gr(e,t,n){return(e=Fr(6,e,null,t)).lanes=n,e}function qr(e){var t=Fr(18,null,null,0);return t.stateNode=e,t}function Wr(e,t,n){return(t=Fr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Qr=new WeakMap;function Kr(e,t){if("object"===typeof e&&null!==e){var n=Qr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Qr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Jr=[],Yr=0,Xr=null,Zr=0,$r=[],ei=0,ti=null,ni=1,ri="";function ii(e,t){Jr[Yr++]=Zr,Jr[Yr++]=Xr,Xr=e,Zr=t}function si(e,t,n){$r[ei++]=ni,$r[ei++]=ri,$r[ei++]=ti,ti=e;var r=ni;e=ri;var i=32-we(r)-1;r&=~(1<<i),n+=1;var s=32-we(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,ni=1<<32-we(t)+i|n<<i|r,ri=s+e}else ni=1<<s|n<<i|r,ri=e}function ai(e){null!==e.return&&(ii(e,1),si(e,1,0))}function oi(e){for(;e===Xr;)Xr=Jr[--Yr],Jr[Yr]=null,Zr=Jr[--Yr],Jr[Yr]=null;for(;e===ti;)ti=$r[--ei],$r[ei]=null,ri=$r[--ei],$r[ei]=null,ni=$r[--ei],$r[ei]=null}function li(e,t){$r[ei++]=ni,$r[ei++]=ri,$r[ei++]=ti,ni=t.id,ri=t.overflow,ti=e}var ci=null,ui=null,hi=!1,di=null,fi=!1,pi=Error(a(519));function mi(e){throw xi(Kr(Error(a(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),pi}function gi(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[ze]=e,t[Ve]=r,n){case"dialog":Yu("cancel",t),Yu("close",t);break;case"iframe":case"object":case"embed":Yu("load",t);break;case"video":case"audio":for(n=0;n<Qu.length;n++)Yu(Qu[n],t);break;case"source":Yu("error",t);break;case"img":case"image":case"link":Yu("error",t),Yu("load",t);break;case"details":Yu("toggle",t);break;case"input":Yu("invalid",t),bt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Yu("invalid",t);break;case"textarea":Yu("invalid",t),At(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||ch(t.textContent,n)?(null!=r.popover&&(Yu("beforetoggle",t),Yu("toggle",t)),null!=r.onScroll&&Yu("scroll",t),null!=r.onScrollEnd&&Yu("scrollend",t),null!=r.onClick&&(t.onclick=Rt),t=!0):t=!1,t||mi(e,!0)}function yi(e){for(ci=e.return;ci;)switch(ci.tag){case 5:case 31:case 13:return void(fi=!1);case 27:case 3:return void(fi=!0);default:ci=ci.return}}function vi(e){if(e!==ci)return!1;if(!hi)return yi(e),hi=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||bh(e.type,e.memoizedProps)),t=!t),t&&ui&&mi(e),yi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));ui=jh(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));ui=jh(e)}else 27===n?(n=ui,Ch(e.type)?(e=Oh,Oh=null,ui=e):ui=n):ui=ci?Dh(e.stateNode.nextSibling):null;return!0}function bi(){ui=ci=null,hi=!1}function wi(){var e=di;return null!==e&&(null===Pc?Pc=e:Pc.push.apply(Pc,e),di=null),e}function xi(e){null===di?di=[e]:di.push(e)}var Ei=B(null),Ai=null,ki=null;function Si(e,t,n){z(Ei,t._currentValue),t._currentValue=n}function Ci(e){e._currentValue=Ei.current,U(Ei)}function Ti(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ni(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var o=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Ti(s.return,n,e),r||(o=null);break e}s=l.next}}else if(18===i.tag){if(null===(o=i.return))throw Error(a(341));o.lanes|=n,null!==(s=o.alternate)&&(s.lanes|=n),Ti(o,n,e),o=null}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===e){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}}function Ii(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(0!==(524288&i.flags))s=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var o=i.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=i.type;Zn(i.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(i===Q.current){if(null===(o=i.alternate))throw Error(a(387));o.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(ud):e=[ud])}i=i.return}null!==e&&Ni(t,e,n,r),t.flags|=262144}function Pi(e){for(e=e.firstContext;null!==e;){if(!Zn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function _i(e){Ai=e,ki=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ri(e){return Oi(Ai,e)}function Di(e,t){return null===Ai&&_i(e),Oi(e,t)}function Oi(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===ki){if(null===e)throw Error(a(308));ki=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ki=ki.next=t;return n}var ji="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Li=r.unstable_scheduleCallback,Mi=r.unstable_NormalPriority,Fi={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bi(){return{controller:new ji,data:new Map,refCount:0}}function Ui(e){e.refCount--,0===e.refCount&&Li(Mi,function(){e.controller.abort()})}var zi=null,Vi=0,Hi=0,Gi=null;function qi(){if(0===--Vi&&null!==zi){null!==Gi&&(Gi.status="fulfilled");var e=zi;zi=null,Hi=0,Gi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Wi=O.S;O.S=function(e,t){Dc=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===zi){var n=zi=[];Vi=0,Hi=Vu(),Gi={status:"pending",value:void 0,then:function(e){n.push(e)}}}Vi++,t.then(qi,qi)}(0,t),null!==Wi&&Wi(e,t)};var Qi=B(null);function Ki(){var e=Qi.current;return null!==e?e:pc.pooledCache}function Ji(e,t){z(Qi,null===t?Qi.current:t.pool)}function Yi(){var e=Ki();return null===e?null:{parent:Fi._currentValue,pool:e}}var Xi=Error(a(460)),Zi=Error(a(474)),$i=Error(a(542)),es={then:function(){}};function ts(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ns(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Rt,Rt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw as(e=t.reason),e;default:if("string"===typeof t.status)t.then(Rt,Rt);else{if(null!==(e=pc)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw as(e=t.reason),e}throw is=t,Xi}}function rs(e){try{return(0,e._init)(e._payload)}catch(Oy){if(null!==Oy&&"object"===typeof Oy&&"function"===typeof Oy.then)throw is=Oy,Xi;throw Oy}}var is=null;function ss(){if(null===is)throw Error(a(459));var e=is;return is=null,e}function as(e){if(e===Xi||e===$i)throw Error(a(483))}var os=null,ls=0;function cs(e){var t=ls;return ls+=1,null===os&&(os=[]),ns(os,e,t)}function us(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function hs(e,t){if(t.$$typeof===p)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ds(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Ur(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Gr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===y?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===C&&rs(s)===t.type)?(us(t=i(t,n.props),n),t.return=e,t):(us(t=Vr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Wr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Hr(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Gr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return us(n=Vr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Wr(t,e.mode,n)).return=e,t;case C:return d(e,t=rs(t),n)}if(D(t)||P(t))return(t=Hr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return d(e,cs(t),n);if(t.$$typeof===x)return d(e,Di(e,t),n);hs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===i?c(e,t,n,r):null;case g:return n.key===i?u(e,t,n,r):null;case C:return f(e,t,n=rs(n),r)}if(D(n)||P(n))return null!==i?null:h(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,cs(n),r);if(n.$$typeof===x)return f(e,t,Di(e,n),r);hs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case C:return p(e,t,n,r=rs(r),i)}if(D(r)||P(r))return h(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return p(e,t,n,cs(r),i);if(r.$$typeof===x)return p(e,t,n,Di(t,r),i);hs(t,r)}return null}function v(l,c,u,h){if("object"===typeof u&&null!==u&&u.type===y&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===y){if(7===c.tag){n(l,c.sibling),(h=i(c,u.props.children)).return=l,l=h;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===C&&rs(b)===c.type){n(l,c.sibling),us(h=i(c,u.props),u),h.return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===y?((h=Hr(u.props.children,l.mode,h,u.key)).return=l,l=h):(us(h=Vr(u.type,u.key,u.props,null,l.mode,h),u),h.return=l,l=h)}return o(l);case g:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(h=i(c,u.children||[])).return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}(h=Wr(u,l.mode,h)).return=l,l=h}return o(l);case C:return v(l,c,u=rs(u),h)}if(D(u))return function(i,a,o,l){for(var c=null,u=null,h=a,m=a=0,g=null;null!==h&&m<o.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var y=f(i,h,o[m],l);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(i,h),a=s(y,a,m),null===u?c=y:u.sibling=y,u=y,h=g}if(m===o.length)return n(i,h),hi&&ii(i,m),c;if(null===h){for(;m<o.length;m++)null!==(h=d(i,o[m],l))&&(a=s(h,a,m),null===u?c=h:u.sibling=h,u=h);return hi&&ii(i,m),c}for(h=r(h);m<o.length;m++)null!==(g=p(h,i,m,o[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),a=s(g,a,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(i,e)}),hi&&ii(i,m),c}(l,c,u,h);if(P(u)){if("function"!==typeof(b=P(u)))throw Error(a(150));return function(i,o,l,c){if(null==l)throw Error(a(151));for(var u=null,h=null,m=o,g=o=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),o=s(b,o,g),null===h?u=b:h.sibling=b,h=b,m=y}if(v.done)return n(i,m),hi&&ii(i,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=d(i,v.value,c))&&(o=s(v,o,g),null===h?u=v:h.sibling=v,h=v);return hi&&ii(i,g),u}for(m=r(m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),o=s(v,o,g),null===h?u=v:h.sibling=v,h=v);return e&&m.forEach(function(e){return t(i,e)}),hi&&ii(i,g),u}(l,c,u=b.call(u),h)}if("function"===typeof u.then)return v(l,c,cs(u),h);if(u.$$typeof===x)return v(l,c,Di(l,u),h);hs(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(h=i(c,u)).return=l,l=h):(n(l,c),(h=Gr(u,l.mode,h)).return=l,l=h),o(l)):n(l,c)}return function(e,t,n,r){try{ls=0;var i=v(e,t,n,r);return os=null,i}catch(Oy){if(Oy===Xi||Oy===$i)throw Oy;var s=Fr(29,Oy,null,e.mode);return s.lanes=r,s.return=e,s}}}var fs=ds(!0),ps=ds(!1),ms=!1;function gs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ys(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function vs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function bs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&fc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=jr(e),Or(e,null,n),t}return _r(e,r,t,n),jr(e)}function ws(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}function xs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Es=!1;function As(){if(Es){if(null!==Gi)throw Gi}}function ks(e,t,n,r){Es=!1;var i=e.updateQueue;ms=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(a=0,u=c=l=null,o=s;;){var d=-536870913&o.lane,p=d!==o.lane;if(p?(gc&d)===d:(r&d)===d){0!==d&&d===Hi&&(Es=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=e,g=o;d=t;var y=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){h=m.call(y,h,d);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(d="function"===typeof(m=g.payload)?m.call(y,h,d):m)||void 0===d)break e;h=f({},h,d);break e;case 2:ms=!0}}null!==(d=o.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[d]:p.push(d))}else p={lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,a|=d;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(p=o).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===s&&(i.shared.lanes=0),kc|=a,e.lanes=a,e.memoizedState=h}}function Ss(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function Cs(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Ss(n[e],t)}var Ts=B(null),Ns=B(0);function Is(e,t){z(Ns,e=Ec),z(Ts,t),Ec=e|t.baseLanes}function Ps(){z(Ns,Ec),z(Ts,Ts.current)}function _s(){Ec=Ns.current,U(Ts),U(Ns)}var Rs=B(null),Ds=null;function Os(e){var t=e.alternate;z(Bs,1&Bs.current),z(Rs,e),null===Ds&&(null===t||null!==Ts.current||null!==t.memoizedState)&&(Ds=e)}function js(e){z(Bs,Bs.current),z(Rs,e),null===Ds&&(Ds=e)}function Ls(e){22===e.tag?(z(Bs,Bs.current),z(Rs,e),null===Ds&&(Ds=e)):Ms()}function Ms(){z(Bs,Bs.current),z(Rs,Rs.current)}function Fs(e){U(Rs),Ds===e&&(Ds=null),U(Bs)}var Bs=B(0);function Us(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||_h(n)||Rh(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var zs=0,Vs=null,Hs=null,Gs=null,qs=!1,Ws=!1,Qs=!1,Ks=0,Js=0,Ys=null,Xs=0;function Zs(){throw Error(a(321))}function $s(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zn(e[n],t[n]))return!1;return!0}function ea(e,t,n,r,i,s){return zs=s,Vs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?go:yo,Qs=!1,s=n(r,i),Qs=!1,Ws&&(s=na(t,n,r,i)),ta(e),s}function ta(e){O.H=mo;var t=null!==Hs&&null!==Hs.next;if(zs=0,Gs=Hs=Vs=null,qs=!1,Js=0,Ys=null,t)throw Error(a(300));null===e||Do||null!==(e=e.dependencies)&&Pi(e)&&(Do=!0)}function na(e,t,n,r){Vs=e;var i=0;do{if(Ws&&(Ys=null),Js=0,Ws=!1,25<=i)throw Error(a(301));if(i+=1,Gs=Hs=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}O.H=vo,s=t(n,r)}while(Ws);return s}function ra(){var e=O.H,t=e.useState()[0];return t="function"===typeof t.then?ca(t):t,e=e.useState()[0],(null!==Hs?Hs.memoizedState:null)!==e&&(Vs.flags|=1024),t}function ia(){var e=0!==Ks;return Ks=0,e}function sa(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function aa(e){if(qs){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}qs=!1}zs=0,Gs=Hs=Vs=null,Ws=!1,Js=Ks=0,Ys=null}function oa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Gs?Vs.memoizedState=Gs=e:Gs=Gs.next=e,Gs}function la(){if(null===Hs){var e=Vs.alternate;e=null!==e?e.memoizedState:null}else e=Hs.next;var t=null===Gs?Vs.memoizedState:Gs.next;if(null!==t)Gs=t,Hs=e;else{if(null===e){if(null===Vs.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(Hs=e).memoizedState,baseState:Hs.baseState,baseQueue:Hs.baseQueue,queue:Hs.queue,next:null},null===Gs?Vs.memoizedState=Gs=e:Gs=Gs.next=e}return Gs}function ca(e){var t=Js;return Js+=1,null===Ys&&(Ys=[]),e=ns(Ys,e,t),t=Vs,null===(null===Gs?t.memoizedState:Gs.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?go:yo),e}function ua(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return ca(e);if(e.$$typeof===x)return Ri(e)}throw Error(a(438,String(e)))}function ha(e){var t=null,n=Vs.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=Vs.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},Vs.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=N;return t.index++,n}function da(e,t){return"function"===typeof t?t(e):t}function fa(e){return pa(la(),Hs,e)}function pa(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var o=i.next;i.next=s.next,s.next=o}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var l=o=null,c=null,u=t=i.next,h=!1;do{var d=-536870913&u.lane;if(d!==u.lane?(gc&d)===d:(zs&d)===d){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===Hi&&(h=!0);else{if((zs&f)===f){u=u.next,f===Hi&&(h=!0);continue}d={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=d,o=s):c=c.next=d,Vs.lanes|=f,kc|=f}d=u.action,Qs&&n(s,d),s=u.hasEagerState?u.eagerState:n(s,d)}else f={lane:d,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=s):c=c.next=f,Vs.lanes|=d,kc|=d;u=u.next}while(null!==u&&u!==t);if(null===c?o=s:c.next=l,!Zn(s,e.memoizedState)&&(Do=!0,h&&null!==(n=Gi)))throw n;e.memoizedState=s,e.baseState=o,e.baseQueue=c,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function ma(e){var t=la(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{s=e(s,o.action),o=o.next}while(o!==i);Zn(s,t.memoizedState)||(Do=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function ga(e,t,n){var r=Vs,i=la(),s=hi;if(s){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!Zn((Hs||i).memoizedState,n);if(o&&(i.memoizedState=n,Do=!0),i=i.queue,za(ba.bind(null,r,i,e),[e]),i.getSnapshot!==t||o||null!==Gs&&1&Gs.memoizedState.tag){if(r.flags|=2048,La(9,{destroy:void 0},va.bind(null,r,i,n,t),null),null===pc)throw Error(a(349));s||0!==(127&zs)||ya(r,t,n)}return n}function ya(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Vs.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Vs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function va(e,t,n,r){t.value=n,t.getSnapshot=r,wa(t)&&xa(e)}function ba(e,t,n){return n(function(){wa(t)&&xa(e)})}function wa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Zn(e,n)}catch(r){return!0}}function xa(e){var t=Dr(e,2);null!==t&&Kc(t,e,2)}function Ea(e){var t=oa();if("function"===typeof e){var n=e;if(e=n(),Qs){be(!0);try{n()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:e},t}function Aa(e,t,n,r){return e.baseState=n,pa(e,Hs,"function"===typeof r?r:da)}function ka(e,t,n,r,i){if(ho(e))throw Error(a(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==O.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,Sa(t,s)):(s.next=n.next,t.pending=n.next=s)}}function Sa(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=O.T,a={};O.T=a;try{var o=n(i,r),l=O.S;null!==l&&l(a,o),Ca(e,t,o)}catch(c){Na(e,t,c)}finally{null!==s&&null!==a.types&&(s.types=a.types),O.T=s}}else try{Ca(e,t,s=n(i,r))}catch(u){Na(e,t,u)}}function Ca(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){Ta(e,t,n)},function(n){return Na(e,t,n)}):Ta(e,t,n)}function Ta(e,t,n){t.status="fulfilled",t.value=n,Ia(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Sa(e,n)))}function Na(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Ia(t),t=t.next}while(t!==r)}e.action=null}function Ia(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Pa(e,t){return t}function _a(e,t){if(hi){var n=pc.formState;if(null!==n){e:{var r=Vs;if(hi){if(ui){t:{for(var i=ui,s=fi;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=Dh(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){ui=Dh(i.nextSibling),r="F!"===i.data;break e}}mi(r)}r=!1}r&&(t=n[0])}}return(n=oa()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:t},n.queue=r,n=lo.bind(null,Vs,r),r.dispatch=n,r=Ea(!1),s=uo.bind(null,Vs,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=oa()).queue=i,n=ka.bind(null,Vs,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function Ra(e){return Da(la(),Hs,e)}function Da(e,t,n){if(t=pa(e,t,Pa)[0],e=fa(da)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=ca(t)}catch(Oy){if(Oy===Xi)throw $i;throw Oy}else r=t;var i=(t=la()).queue,s=i.dispatch;return n!==t.memoizedState&&(Vs.flags|=2048,La(9,{destroy:void 0},Oa.bind(null,i,n),null)),[r,s,e]}function Oa(e,t){e.action=t}function ja(e){var t=la(),n=Hs;if(null!==n)return Da(t,n,e);la(),t=t.memoizedState;var r=(n=la()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function La(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=Vs.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Vs.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ma(){return la().memoizedState}function Fa(e,t,n,r){var i=oa();Vs.flags|=e,i.memoizedState=La(1|t,{destroy:void 0},n,void 0===r?null:r)}function Ba(e,t,n,r){var i=la();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==Hs&&null!==r&&$s(r,Hs.memoizedState.deps)?i.memoizedState=La(t,s,n,r):(Vs.flags|=e,i.memoizedState=La(1|t,s,n,r))}function Ua(e,t){Fa(8390656,8,e,t)}function za(e,t){Ba(2048,8,e,t)}function Va(e){var t=la().memoizedState;return function(e){Vs.flags|=4;var t=Vs.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Vs.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&fc))throw Error(a(440));return t.impl.apply(void 0,arguments)}}function Ha(e,t){return Ba(4,2,e,t)}function Ga(e,t){return Ba(4,4,e,t)}function qa(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Wa(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Ba(4,4,qa.bind(null,t,e),n)}function Qa(){}function Ka(e,t){var n=la();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&$s(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ja(e,t){var n=la();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&$s(t,r[1]))return r[0];if(r=e(),Qs){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r}function Ya(e,t,n){return void 0===n||0!==(1073741824&zs)&&0===(261930&gc)?e.memoizedState=t:(e.memoizedState=n,e=Qc(),Vs.lanes|=e,kc|=e,n)}function Xa(e,t,n,r){return Zn(n,t)?n:null!==Ts.current?(e=Ya(e,n,r),Zn(e,t)||(Do=!0),e):0===(42&zs)||0!==(1073741824&zs)&&0===(261930&gc)?(Do=!0,e.memoizedState=n):(e=Qc(),Vs.lanes|=e,kc|=e,t)}function Za(e,t,n,r,i){var s=j.p;j.p=0!==s&&8>s?s:8;var a=O.T,o={};O.T=o,uo(e,!1,t,n);try{var l=i(),c=O.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)co(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Wc());else co(e,t,r,Wc())}catch(u){co(e,t,{then:function(){},status:"rejected",reason:u},Wc())}finally{j.p=s,null!==a&&null!==o.types&&(a.types=o.types),O.T=a}}function $a(){}function eo(e,t,n,r){if(5!==e.tag)throw Error(a(476));var i=to(e).queue;Za(e,i,t,L,null===n?$a:function(){return no(e),n(r)})}function to(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:L},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function no(e){var t=to(e);null===t.next&&(t=e.alternate.memoizedState),co(e,t.next.queue,{},Wc())}function ro(){return Ri(ud)}function io(){return la().memoizedState}function so(){return la().memoizedState}function ao(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Wc(),r=bs(t,e=vs(n),n);return null!==r&&(Kc(r,t,n),ws(r,t,n)),t={cache:Bi()},void(e.payload=t)}t=t.return}}function oo(e,t,n){var r=Wc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ho(e)?fo(t,n):null!==(n=Rr(e,t,n,r))&&(Kc(n,e,r),po(n,t,r))}function lo(e,t,n){co(e,t,n,Wc())}function co(e,t,n,r){var i={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ho(e))fo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,Zn(o,a))return _r(e,t,i,0),null===pc&&Pr(),!1}catch(l){}if(null!==(n=Rr(e,t,i,r)))return Kc(n,e,r),po(n,t,r),!0}return!1}function uo(e,t,n,r){if(r={lane:2,revertLane:Vu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},ho(e)){if(t)throw Error(a(479))}else null!==(t=Rr(e,n,r,2))&&Kc(t,e,2)}function ho(e){var t=e.alternate;return e===Vs||null!==t&&t===Vs}function fo(e,t){Ws=qs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function po(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Oe(e,n)}}var mo={readContext:Ri,use:ua,useCallback:Zs,useContext:Zs,useEffect:Zs,useImperativeHandle:Zs,useLayoutEffect:Zs,useInsertionEffect:Zs,useMemo:Zs,useReducer:Zs,useRef:Zs,useState:Zs,useDebugValue:Zs,useDeferredValue:Zs,useTransition:Zs,useSyncExternalStore:Zs,useId:Zs,useHostTransitionStatus:Zs,useFormState:Zs,useActionState:Zs,useOptimistic:Zs,useMemoCache:Zs,useCacheRefresh:Zs};mo.useEffectEvent=Zs;var go={readContext:Ri,use:ua,useCallback:function(e,t){return oa().memoizedState=[e,void 0===t?null:t],e},useContext:Ri,useEffect:Ua,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Fa(4194308,4,qa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fa(4194308,4,e,t)},useInsertionEffect:function(e,t){Fa(4,2,e,t)},useMemo:function(e,t){var n=oa();t=void 0===t?null:t;var r=e();if(Qs){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=oa();if(void 0!==n){var i=n(t);if(Qs){be(!0);try{n(t)}finally{be(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=oo.bind(null,Vs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},oa().memoizedState=e},useState:function(e){var t=(e=Ea(e)).queue,n=lo.bind(null,Vs,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Qa,useDeferredValue:function(e,t){return Ya(oa(),e,t)},useTransition:function(){var e=Ea(!1);return e=Za.bind(null,Vs,e.queue,!0,!1),oa().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=Vs,i=oa();if(hi){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===pc)throw Error(a(349));0!==(127&gc)||ya(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Ua(ba.bind(null,r,s,e),[e]),r.flags|=2048,La(9,{destroy:void 0},va.bind(null,r,s,n,t),null),n},useId:function(){var e=oa(),t=pc.identifierPrefix;if(hi){var n=ri;t="_"+t+"R_"+(n=(ni&~(1<<32-we(ni)-1)).toString(32)+n),0<(n=Ks++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Xs++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ro,useFormState:_a,useActionState:_a,useOptimistic:function(e){var t=oa();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=uo.bind(null,Vs,!0,n),n.dispatch=t,[e,t]},useMemoCache:ha,useCacheRefresh:function(){return oa().memoizedState=ao.bind(null,Vs)},useEffectEvent:function(e){var t=oa(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&fc))throw Error(a(440));return n.impl.apply(void 0,arguments)}}},yo={readContext:Ri,use:ua,useCallback:Ka,useContext:Ri,useEffect:za,useImperativeHandle:Wa,useInsertionEffect:Ha,useLayoutEffect:Ga,useMemo:Ja,useReducer:fa,useRef:Ma,useState:function(){return fa(da)},useDebugValue:Qa,useDeferredValue:function(e,t){return Xa(la(),Hs.memoizedState,e,t)},useTransition:function(){var e=fa(da)[0],t=la().memoizedState;return["boolean"===typeof e?e:ca(e),t]},useSyncExternalStore:ga,useId:io,useHostTransitionStatus:ro,useFormState:Ra,useActionState:Ra,useOptimistic:function(e,t){return Aa(la(),0,e,t)},useMemoCache:ha,useCacheRefresh:so};yo.useEffectEvent=Va;var vo={readContext:Ri,use:ua,useCallback:Ka,useContext:Ri,useEffect:za,useImperativeHandle:Wa,useInsertionEffect:Ha,useLayoutEffect:Ga,useMemo:Ja,useReducer:ma,useRef:Ma,useState:function(){return ma(da)},useDebugValue:Qa,useDeferredValue:function(e,t){var n=la();return null===Hs?Ya(n,e,t):Xa(n,Hs.memoizedState,e,t)},useTransition:function(){var e=ma(da)[0],t=la().memoizedState;return["boolean"===typeof e?e:ca(e),t]},useSyncExternalStore:ga,useId:io,useHostTransitionStatus:ro,useFormState:ja,useActionState:ja,useOptimistic:function(e,t){var n=la();return null!==Hs?Aa(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ha,useCacheRefresh:so};function bo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:f({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}vo.useEffectEvent=Va;var wo={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Wc(),i=vs(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=bs(e,i,r))&&(Kc(t,e,r),ws(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Wc(),i=vs(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=bs(e,i,r))&&(Kc(t,e,r),ws(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Wc(),r=vs(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=bs(e,r,n))&&(Kc(t,e,n),ws(t,e,n))}};function xo(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!$n(n,r)||!$n(i,s))}function Eo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&wo.enqueueReplaceState(t,t.state,null)}function Ao(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=f({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}function ko(e){Cr(e)}function So(e){console.error(e)}function Co(e){Cr(e)}function To(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function No(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Io(e,t,n){return(n=vs(n)).tag=3,n.payload={element:null},n.callback=function(){To(e,t)},n}function Po(e){return(e=vs(e)).tag=3,e}function _o(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){No(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){No(t,n,r),"function"!==typeof i&&(null===Lc?Lc=new Set([this]):Lc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ro=Error(a(461)),Do=!1;function Oo(e,t,n,r){t.child=null===e?ps(t,null,n,r):fs(t,e.child,n,r)}function jo(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return _i(t),r=ea(e,t,n,a,s,i),o=ia(),null===e||Do?(hi&&o&&ai(t),t.flags|=1,Oo(e,t,r,i),t.child):(sa(e,t,i),il(e,t,i))}function Lo(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Br(s)||void 0!==s.defaultProps||null!==n.compare?((e=Vr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Mo(e,t,s,r,i))}if(s=e.child,!sl(e,i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:$n)(a,r)&&e.ref===t.ref)return il(e,t,i)}return t.flags|=1,(e=Ur(s,r)).ref=t.ref,e.return=t,t.child=e}function Mo(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if($n(s,r)&&e.ref===t.ref){if(Do=!1,t.pendingProps=r=s,!sl(e,i))return t.lanes=e.lanes,il(e,t,i);0!==(131072&e.flags)&&(Do=!0)}}return Go(e,t,n,r,i)}function Fo(e,t,n,r){var i=r.children,s=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(s=null!==s?s.baseLanes|n:n,null!==e){for(r=t.child=e.child,i=0;null!==r;)i=i|r.lanes|r.childLanes,r=r.sibling;r=i&~s}else r=0,t.child=null;return Uo(e,t,s,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,Uo(e,t,null!==s?s.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Ji(0,null!==s?s.cachePool:null),null!==s?Is(t,s):Ps(),Ls(t)}else null!==s?(Ji(0,s.cachePool),Is(t,s),Ms(),t.memoizedState=null):(null!==e&&Ji(0,null),Ps(),Ms());return Oo(e,t,i,n),t.child}function Bo(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Uo(e,t,n,r,i){var s=Ki();return s=null===s?null:{parent:Fi._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&Ji(0,null),Ps(),Ls(t),null!==e&&Ii(e,t,r,!0),t.childLanes=i,null}function zo(e,t){return(t=$o({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Vo(e,t,n){return fs(t,e.child,null,n),(e=zo(t,t.pendingProps)).flags|=2,Fs(t),t.memoizedState=null,e}function Ho(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Go(e,t,n,r,i){return _i(t),n=ea(e,t,n,r,void 0,i),r=ia(),null===e||Do?(hi&&r&&ai(t),t.flags|=1,Oo(e,t,n,i),t.child):(sa(e,t,i),il(e,t,i))}function qo(e,t,n,r,i,s){return _i(t),t.updateQueue=null,n=na(t,r,n,i),ta(e),r=ia(),null===e||Do?(hi&&r&&ai(t),t.flags|=1,Oo(e,t,n,s),t.child):(sa(e,t,s),il(e,t,s))}function Wo(e,t,n,r,i){if(_i(t),null===t.stateNode){var s=Lr,a=n.contextType;"object"===typeof a&&null!==a&&(s=Ri(a)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=wo,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},gs(t),a=n.contextType,s.context="object"===typeof a&&null!==a?Ri(a):Lr,s.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(bo(t,n,a,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(a=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),a!==s.state&&wo.enqueueReplaceState(s,s.state,null),ks(t,r,s,i),As(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var o=t.memoizedProps,l=Ao(n,o);s.props=l;var c=s.context,u=n.contextType;a=Lr,"object"===typeof u&&null!==u&&(a=Ri(u));var h=n.getDerivedStateFromProps;u="function"===typeof h||"function"===typeof s.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o||c!==a)&&Eo(t,s,r,a),ms=!1;var d=t.memoizedState;s.state=d,ks(t,r,s,i),As(),c=t.memoizedState,o||d!==c||ms?("function"===typeof h&&(bo(t,n,h,r),c=t.memoizedState),(l=ms||xo(t,n,l,r,d,c,a))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=a,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,ys(e,t),u=Ao(n,a=t.memoizedProps),s.props=u,h=t.pendingProps,d=s.context,c=n.contextType,l=Lr,"object"===typeof c&&null!==c&&(l=Ri(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||d!==l)&&Eo(t,s,r,l),ms=!1,d=t.memoizedState,s.state=d,ks(t,r,s,i),As();var f=t.memoizedState;a!==h||d!==f||ms||null!==e&&null!==e.dependencies&&Pi(e.dependencies)?("function"===typeof o&&(bo(t,n,o,r),f=t.memoizedState),(u=ms||xo(t,n,u,r,d,f,l)||null!==e&&null!==e.dependencies&&Pi(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Ho(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=fs(t,e.child,null,i),t.child=fs(t,null,n,i)):Oo(e,t,n,i),t.memoizedState=s.state,e=t.child):e=il(e,t,i),e}function Qo(e,t,n,r){return bi(),t.flags|=256,Oo(e,t,n,r),t.child}var Ko={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jo(e){return{baseLanes:e,cachePool:Yi()}}function Yo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Tc),e}function Xo(e,t,n){var r,i=t.pendingProps,s=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Bs.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(hi){if(s?Os(t):Ms(),(e=ui)?null!==(e=null!==(e=Ph(e,fi))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ti?{id:ni,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},(n=qr(e)).return=t,t.child=n,ci=t,ui=null):e=null,null===e)throw mi(t);return Rh(e)?t.lanes=32:t.lanes=536870912,null}var l=i.children;return i=i.fallback,s?(Ms(),l=$o({mode:"hidden",children:l},s=t.mode),i=Hr(i,s,n,null),l.return=t,i.return=t,l.sibling=i,t.child=l,(i=t.child).memoizedState=Jo(n),i.childLanes=Yo(e,r,n),t.memoizedState=Ko,Bo(null,i)):(Os(t),Zo(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(o)256&t.flags?(Os(t),t.flags&=-257,t=el(e,t,n)):null!==t.memoizedState?(Ms(),t.child=e.child,t.flags|=128,t=null):(Ms(),l=i.fallback,s=t.mode,i=$o({mode:"visible",children:i.children},s),(l=Hr(l,s,n,null)).flags|=2,i.return=t,l.return=t,i.sibling=l,t.child=i,fs(t,e.child,null,n),(i=t.child).memoizedState=Jo(n),i.childLanes=Yo(e,r,n),t.memoizedState=Ko,t=Bo(null,i));else if(Os(t),Rh(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(a(419))).stack="",i.digest=r,xi({value:i,source:null,stack:null}),t=el(e,t,n)}else if(Do||Ii(e,t,n,!1),r=0!==(n&e.childLanes),Do||r){if(null!==(r=pc)&&(0!==(i=je(r,n))&&i!==c.retryLane))throw c.retryLane=i,Dr(e,i),Kc(r,e,i),Ro;_h(l)||au(),t=el(e,t,n)}else _h(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ui=Dh(l.nextSibling),ci=t,hi=!0,di=null,fi=!1,null!==e&&li(t,e),(t=Zo(t,i.children)).flags|=4096);return t}return s?(Ms(),l=i.fallback,s=t.mode,u=(c=e.child).sibling,(i=Ur(c,{mode:"hidden",children:i.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=Ur(u,l):(l=Hr(l,s,n,null)).flags|=2,l.return=t,i.return=t,i.sibling=l,t.child=i,Bo(null,i),i=t.child,null===(l=e.child.memoizedState)?l=Jo(n):(null!==(s=l.cachePool)?(c=Fi._currentValue,s=s.parent!==c?{parent:c,pool:c}:s):s=Yi(),l={baseLanes:l.baseLanes|n,cachePool:s}),i.memoizedState=l,i.childLanes=Yo(e,r,n),t.memoizedState=Ko,Bo(e.child,i)):(Os(t),e=(n=e.child).sibling,(n=Ur(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Zo(e,t){return(t=$o({mode:"visible",children:t},e.mode)).return=e,e.child=t}function $o(e,t){return(e=Fr(22,e,null,t)).lanes=0,e}function el(e,t,n){return fs(t,e.child,null,n),(e=Zo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function tl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ti(e.return,t,n)}function nl(e,t,n,r,i,s){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,treeForkCount:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.treeForkCount=s)}function rl(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;r=r.children;var a=Bs.current,o=0!==(2&a);if(o?(a=1&a|2,t.flags|=128):a&=1,z(Bs,a),Oo(e,t,r,n),r=hi?Zr:0,!o&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&tl(e,n,t);else if(19===e.tag)tl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Us(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),nl(t,!1,i,n,s,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Us(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}nl(t,!0,n,null,s,r);break;case"together":nl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function il(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),kc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ii(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ur(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ur(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function sl(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Pi(e))}function al(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Do=!0;else{if(!sl(e,n)&&0===(128&t.flags))return Do=!1,function(e,t,n){switch(t.tag){case 3:K(t,t.stateNode.containerInfo),Si(0,Fi,e.memoizedState.cache),bi();break;case 27:case 5:Y(t);break;case 4:K(t,t.stateNode.containerInfo);break;case 10:Si(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,js(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Os(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Xo(e,t,n):(Os(t),null!==(e=il(e,t,n))?e.sibling:null);Os(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ii(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return rl(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),z(Bs,Bs.current),r)break;return null;case 22:return t.lanes=0,Fo(e,t,n,t.pendingProps);case 24:Si(0,Fi,e.memoizedState.cache)}return il(e,t,n)}(e,t,n);Do=0!==(131072&e.flags)}else Do=!1,hi&&0!==(1048576&t.flags)&&si(t,Zr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=rs(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var i=e.$$typeof;if(i===E){t.tag=11,t=jo(null,t,e,r,n);break e}if(i===S){t.tag=14,t=Lo(null,t,e,r,n);break e}}throw t=R(e)||e,Error(a(306,t,""))}Br(e)?(r=Ao(e,r),t.tag=1,t=Wo(null,t,e,r,n)):(t.tag=0,t=Go(null,t,e,r,n))}return t;case 0:return Go(e,t,t.type,t.pendingProps,n);case 1:return Wo(e,t,r=t.type,i=Ao(r,t.pendingProps),n);case 3:e:{if(K(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var s=t.memoizedState;i=s.element,ys(e,t),ks(t,r,null,n);var o=t.memoizedState;if(r=o.cache,Si(0,Fi,r),r!==s.cache&&Ni(t,[Fi],n,!0),As(),r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Qo(e,t,r,n);break e}if(r!==i){xi(i=Kr(Error(a(424)),t)),t=Qo(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ui=Dh(e.firstChild),ci=t,hi=!0,di=null,fi=!0,n=ps(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(bi(),r===i){t=il(e,t,n);break e}Oo(e,t,r,n)}t=t.child}return t;case 26:return Ho(e,t),null===e?(n=qh(t.type,null,t.pendingProps,null))?t.memoizedState=n:hi||(n=t.type,e=t.pendingProps,(r=gh(W.current).createElement(n))[ze]=t,r[Ve]=e,dh(r,n,e),et(r),t.stateNode=r):t.memoizedState=qh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Y(t),null===e&&hi&&(r=t.stateNode=Mh(t.type,t.pendingProps,W.current),ci=t,fi=!0,i=ui,Ch(t.type)?(Oh=i,ui=Dh(r.firstChild)):ui=i),Oo(e,t,t.pendingProps.children,n),Ho(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&hi&&((i=r=ui)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ke])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=Dh(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,fi))?(t.stateNode=r,ci=t,ui=Dh(r.firstChild),fi=!1,i=!0):i=!1),i||mi(t)),Y(t),i=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,r=s.children,bh(i,s)?r=null:null!==o&&bh(i,o)&&(t.flags|=32),null!==t.memoizedState&&(i=ea(e,t,ra,null,null,n),ud._currentValue=i),Ho(e,t),Oo(e,t,r,n),t.child;case 6:return null===e&&hi&&((e=n=ui)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Dh(e.nextSibling)))return null}return e}(n,t.pendingProps,fi))?(t.stateNode=n,ci=t,ui=null,e=!0):e=!1),e||mi(t)),null;case 13:return Xo(e,t,n);case 4:return K(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=fs(t,null,r,n):Oo(e,t,r,n),t.child;case 11:return jo(e,t,t.type,t.pendingProps,n);case 7:return Oo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Oo(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Si(0,t.type,r.value),Oo(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,_i(t),r=r(i=Ri(i)),t.flags|=1,Oo(e,t,r,n),t.child;case 14:return Lo(e,t,t.type,t.pendingProps,n);case 15:return Mo(e,t,t.type,t.pendingProps,n);case 19:return rl(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,i=0!==(128&t.flags);if(t.flags&=-129,null===e){if(hi){if("hidden"===r.mode)return e=zo(t,r),t.lanes=536870912,Bo(null,e);if(js(t),(e=ui)?null!==(e=null!==(e=Ph(e,fi))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ti?{id:ni,overflow:ri}:null,retryLane:536870912,hydrationErrors:null},(n=qr(e)).return=t,t.child=n,ci=t,ui=null):e=null,null===e)throw mi(t);return t.lanes=536870912,null}return zo(t,r)}var s=e.memoizedState;if(null!==s){var o=s.dehydrated;if(js(t),i)if(256&t.flags)t.flags&=-257,t=Vo(e,t,n);else{if(null===t.memoizedState)throw Error(a(558));t.child=e.child,t.flags|=128,t=null}else if(Do||Ii(e,t,n,!1),i=0!==(n&e.childLanes),Do||i){if(null!==(r=pc)&&0!==(o=je(r,n))&&o!==s.retryLane)throw s.retryLane=o,Dr(e,o),Kc(r,e,o),Ro;au(),t=Vo(e,t,n)}else e=s.treeContext,ui=Dh(o.nextSibling),ci=t,hi=!0,di=null,fi=!1,null!==e&&li(t,e),(t=zo(t,r)).flags|=4096;return t}return(e=Ur(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Fo(e,t,n,t.pendingProps);case 24:return _i(t),r=Ri(Fi),null===e?(null===(i=Ki())&&(i=pc,s=Bi(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},gs(t),Si(0,Fi,i)):(0!==(e.lanes&n)&&(ys(e,t),ks(t,null,null,n),As()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),Si(0,Fi,r)):(r=s.cache,Si(0,Fi,r),r!==i.cache&&Ni(t,[Fi],n,!0))),Oo(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function ol(e){e.flags|=4}function ll(e,t,n,r,i){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&i)===i)if(e.stateNode.complete)e.flags|=8192;else{if(!ru())throw is=es,Zi;e.flags|=8192}}else e.flags&=-16777217}function cl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!id(t)){if(!ru())throw is=es,Zi;e.flags|=8192}}function ul(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Pe():536870912,e.lanes|=t,Nc|=t)}function hl(e,t){if(!hi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function dl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function fl(e,t,n){var r=t.pendingProps;switch(oi(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return dl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Ci(Fi),J(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(vi(t)?ol(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,wi())),dl(t),null;case 26:var i=t.type,s=t.memoizedState;return null===e?(ol(t),null!==s?(dl(t),cl(t,s)):(dl(t),ll(t,i,0,0,n))):s?s!==e.memoizedState?(ol(t),dl(t),cl(t,s)):(dl(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&ol(t),dl(t),ll(t,i,0,0,n)),null;case 27:if(X(t),n=W.current,i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return dl(t),null}e=G.current,vi(t)?gi(t):(e=Mh(i,r,n),t.stateNode=e,ol(t))}return dl(t),null;case 5:if(X(t),i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return dl(t),null}if(s=G.current,vi(t))gi(t);else{var o=gh(W.current);switch(s){case 1:s=o.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:s=o.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":s=o.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":s=o.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":(s=o.createElement("div")).innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s="string"===typeof r.is?o.createElement("select",{is:r.is}):o.createElement("select"),r.multiple?s.multiple=!0:r.size&&(s.size=r.size);break;default:s="string"===typeof r.is?o.createElement(i,{is:r.is}):o.createElement(i)}}s[ze]=t,s[Ve]=r;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)s.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=s;e:switch(dh(s,i,r),i){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ol(t)}}return dl(t),ll(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&ol(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=W.current,vi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ci))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[ze]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||ch(e.nodeValue,n)))||mi(t,!0)}else(e=gh(e).createTextNode(r))[ze]=t,t.stateNode=e}return dl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=vi(t),null!==n){if(null===e){if(!r)throw Error(a(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(a(557));e[ze]=t}else bi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;dl(t),e=!1}else n=wi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Fs(t),t):(Fs(t),null);if(0!==(128&t.flags))throw Error(a(558))}return dl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=vi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[ze]=t}else bi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;dl(t),i=!1}else i=wi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(Fs(t),t):(Fs(t),null)}return Fs(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool),s=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),ul(t,t.updateQueue),dl(t),null);case 4:return J(),null===e&&$u(t.stateNode.containerInfo),dl(t),null;case 10:return Ci(t.type),dl(t),null;case 19:if(U(Bs),null===(r=t.memoizedState))return dl(t),null;if(i=0!==(128&t.flags),null===(s=r.rendering))if(i)hl(r,!1);else{if(0!==Ac||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=Us(e))){for(t.flags|=128,hl(r,!1),e=s.updateQueue,t.updateQueue=e,ul(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)zr(n,e),n=n.sibling;return z(Bs,1&Bs.current|2),hi&&ii(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&le()>Oc&&(t.flags|=128,i=!0,hl(r,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=Us(s))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,ul(t,e),hl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate&&!hi)return dl(t),null}else 2*le()-r.renderingStartTime>Oc&&536870912!==n&&(t.flags|=128,i=!0,hl(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=r.last)?e.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=le(),e.sibling=null,n=Bs.current,z(Bs,i?1&n|2:1&n),hi&&ii(t,r.treeForkCount),e):(dl(t),null);case 22:case 23:return Fs(t),_s(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(dl(t),6&t.subtreeFlags&&(t.flags|=8192)):dl(t),null!==(n=t.updateQueue)&&ul(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&U(Qi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Ci(Fi),dl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function pl(e,t){switch(oi(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ci(Fi),J(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return X(t),null;case 31:if(null!==t.memoizedState){if(Fs(t),null===t.alternate)throw Error(a(340));bi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Fs(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));bi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return U(Bs),null;case 4:return J(),null;case 10:return Ci(t.type),null;case 22:case 23:return Fs(t),_s(),null!==e&&U(Qi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Ci(Fi),null;default:return null}}function ml(e,t){switch(oi(t),t.tag){case 3:Ci(Fi),J();break;case 26:case 27:case 5:X(t);break;case 4:J();break;case 31:null!==t.memoizedState&&Fs(t);break;case 13:Fs(t);break;case 19:U(Bs);break;case 10:Ci(t.type);break;case 22:case 23:Fs(t),_s(),null!==e&&U(Qi);break;case 24:Ci(Fi)}}function gl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,a=n.inst;r=s(),a.destroy=r}n=n.next}while(n!==i)}}catch(o){Au(t,t.return,o)}}function yl(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,i=t;var l=n,c=o;try{c()}catch(u){Au(i,l,u)}}}r=r.next}while(r!==s)}}catch(u){Au(t,t.return,u)}}function vl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Cs(t,n)}catch(r){Au(e,e.return,r)}}}function bl(e,t,n){n.props=Ao(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){Au(e,t,r)}}function wl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){Au(e,t,i)}}function xl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){Au(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){Au(e,t,s)}else n.current=null}function El(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){Au(e,e.return,i)}}function Al(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,o=null,l=null,c=null,u=null,h=null;for(p in n){var d=n[p];if(n.hasOwnProperty(p)&&null!=d)switch(p){case"checked":case"value":break;case"defaultValue":c=d;default:r.hasOwnProperty(p)||uh(e,t,p,null,r,d)}}for(var f in r){var p=r[f];if(d=n[f],r.hasOwnProperty(f)&&(null!=p||null!=d))switch(f){case"type":s=p;break;case"name":i=p;break;case"checked":u=p;break;case"defaultChecked":h=p;break;case"value":o=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:p!==d&&uh(e,t,f,p,r,d)}}return void vt(e,o,l,c,u,h,s,i);case"select":for(s in p=o=l=f=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(s)||uh(e,t,s,null,r,c)}for(i in r)if(s=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=s||null!=c))switch(i){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":o=s;default:s!==c&&uh(e,t,i,s,r,c)}return t=l,n=o,r=p,void(null!=f?xt(e,!!n,f,!1):!!r!==!!n&&(null!=t?xt(e,!!n,t,!0):xt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:uh(e,t,l,null,r,i)}for(o in r)if(i=r[o],s=n[o],r.hasOwnProperty(o)&&(null!=i||null!=s))switch(o){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(a(91));break;default:i!==s&&uh(e,t,o,i,r,s)}return void Et(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else uh(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else uh(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&uh(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:uh(e,t,u,f,r,p)}return;default:if(Nt(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&hh(e,t,y,void 0,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||void 0===f&&void 0===p||hh(e,t,h,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&uh(e,t,v,null,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||null==f&&null==p||uh(e,t,d,f,r,p)}(r,e.type,n,t),r[Ve]=t}catch(i){Au(e,e.return,i)}}function kl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Ch(e.type)||4===e.tag}function Sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||kl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Ch(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Rt));else if(4!==r&&(27===r&&Ch(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Cl(e,t,n),e=e.sibling;null!==e;)Cl(e,t,n),e=e.sibling}function Tl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Ch(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Tl(e,t,n),e=e.sibling;null!==e;)Tl(e,t,n),e=e.sibling}function Nl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);dh(t,r,n),t[ze]=e,t[Ve]=n}catch(s){Au(e,e.return,s)}}var Il=!1,Pl=!1,_l=!1,Rl="function"===typeof WeakSet?WeakSet:Set,Dl=null;function Ol(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Kl(e,n),4&r&&gl(5,n);break;case 1:if(Kl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){Au(n,n.return,a)}else{var i=Ao(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){Au(n,n.return,o)}}64&r&&vl(n),512&r&&wl(n,n.return);break;case 3:if(Kl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Cs(e,t)}catch(a){Au(n,n.return,a)}}break;case 27:null===t&&4&r&&Nl(n);case 26:case 5:Kl(e,n),null===t&&4&r&&El(n),512&r&&wl(n,n.return);break;case 12:Kl(e,n);break;case 31:Kl(e,n),4&r&&Ul(e,n);break;case 13:Kl(e,n),4&r&&zl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Tu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||Il)){t=null!==t&&null!==t.memoizedState||Pl,i=Il;var s=Pl;Il=r,(Pl=t)&&!s?Yl(e,n,0!==(8772&n.subtreeFlags)):Kl(e,n),Il=i,Pl=s}break;case 30:break;default:Kl(e,n)}}function jl(e){var t=e.alternate;null!==t&&(e.alternate=null,jl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Je(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ll=null,Ml=!1;function Fl(e,t,n){for(n=n.child;null!==n;)Bl(e,t,n),n=n.sibling}function Bl(e,t,n){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(ye,n)}catch(s){}switch(n.tag){case 26:Pl||xl(n,t),Fl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Pl||xl(n,t);var r=Ll,i=Ml;Ch(n.type)&&(Ll=n.stateNode,Ml=!1),Fl(e,t,n),Fh(n.stateNode),Ll=r,Ml=i;break;case 5:Pl||xl(n,t);case 6:if(r=Ll,i=Ml,Ll=null,Fl(e,t,n),Ml=i,null!==(Ll=r))if(Ml)try{(9===Ll.nodeType?Ll.body:"HTML"===Ll.nodeName?Ll.ownerDocument.body:Ll).removeChild(n.stateNode)}catch(a){Au(n,t,a)}else try{Ll.removeChild(n.stateNode)}catch(a){Au(n,t,a)}break;case 18:null!==Ll&&(Ml?(Th(9===(e=Ll).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Gd(e)):Th(Ll,n.stateNode));break;case 4:r=Ll,i=Ml,Ll=n.stateNode.containerInfo,Ml=!0,Fl(e,t,n),Ll=r,Ml=i;break;case 0:case 11:case 14:case 15:yl(2,n,t),Pl||yl(4,n,t),Fl(e,t,n);break;case 1:Pl||(xl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&bl(n,t,r)),Fl(e,t,n);break;case 21:Fl(e,t,n);break;case 22:Pl=(r=Pl)||null!==n.memoizedState,Fl(e,t,n),Pl=r;break;default:Fl(e,t,n)}}function Ul(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Gd(e)}catch(n){Au(t,t.return,n)}}}function zl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Gd(e)}catch(n){Au(t,t.return,n)}}function Vl(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Rl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Rl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Nu.bind(null,e,t);t.then(r,r)}})}function Hl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(Ch(l.type)){Ll=l.stateNode,Ml=!1;break e}break;case 5:Ll=l.stateNode,Ml=!1;break e;case 3:case 4:Ll=l.stateNode.containerInfo,Ml=!0;break e}l=l.return}if(null===Ll)throw Error(a(160));Bl(s,o,i),Ll=null,Ml=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)ql(t,e),t=t.sibling}var Gl=null;function ql(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Hl(t,e),Wl(e),4&r&&(yl(3,e,e.return),gl(3,e),yl(5,e,e.return));break;case 1:Hl(t,e),Wl(e),512&r&&(Pl||null===n||xl(n,n.return)),64&r&&Il&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Gl;if(Hl(t,e),Wl(e),512&r&&(Pl||null===n||xl(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[Ke]||s[ze]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),dh(s,r,n),s[ze]=e,et(s),r=s;break e;case"link":var o=nd("link","href",i).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((s=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}dh(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(o=nd("meta","content",i).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((s=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}dh(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(a(468,r))}s[ze]=e,et(s),r=s}e.stateNode=r}else rd(i,e.type,e.stateNode);else e.stateNode=Xh(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?rd(i,e.type,e.stateNode):Xh(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&Al(e,e.memoizedProps,n.memoizedProps)}break;case 27:Hl(t,e),Wl(e),512&r&&(Pl||null===n||xl(n,n.return)),null!==n&&4&r&&Al(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Hl(t,e),Wl(e),512&r&&(Pl||null===n||xl(n,n.return)),32&e.flags){i=e.stateNode;try{kt(i,"")}catch(m){Au(e,e.return,m)}}4&r&&null!=e.stateNode&&Al(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(_l=!0);break;case 6:if(Hl(t,e),Wl(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){Au(e,e.return,m)}}break;case 3:if(td=null,i=Gl,Gl=zh(t.containerInfo),Hl(t,e),Gl=i,Wl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Gd(t.containerInfo)}catch(m){Au(e,e.return,m)}_l&&(_l=!1,Ql(e));break;case 4:r=Gl,Gl=zh(e.stateNode.containerInfo),Hl(t,e),Wl(e),Gl=r;break;case 12:default:Hl(t,e),Wl(e);break;case 31:case 19:Hl(t,e),Wl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Vl(e,r)));break;case 13:Hl(t,e),Wl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Rc=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Vl(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=Il,h=Pl;if(Il=u||i,Pl=h||c,Hl(t,e),Pl=h,Il=u,Wl(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||Il||Pl||Jl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(s=c.stateNode,i)"function"===typeof(o=s.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var d=c.memoizedProps.style,f=void 0!==d&&null!==d&&d.hasOwnProperty("display")?d.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(m){Au(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(m){Au(c,c.return,m)}}}else if(18===t.tag){if(null===n){c=t;try{var p=c.stateNode;i?Nh(p,!0):Nh(c.stateNode,!1)}catch(m){Au(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Vl(e,n))));case 30:case 21:}}function Wl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(kl(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var i=n.stateNode;Tl(e,Sl(e),i);break;case 5:var s=n.stateNode;32&n.flags&&(kt(s,""),n.flags&=-33),Tl(e,Sl(e),s);break;case 3:case 4:var o=n.stateNode.containerInfo;Cl(e,Sl(e),o);break;default:throw Error(a(161))}}catch(l){Au(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ql(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ql(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Kl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ol(e,t.alternate,t),t=t.sibling}function Jl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:yl(4,t,t.return),Jl(t);break;case 1:xl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&bl(t,t.return,n),Jl(t);break;case 27:Fh(t.stateNode);case 26:case 5:xl(t,t.return),Jl(t);break;case 22:null===t.memoizedState&&Jl(t);break;default:Jl(t)}e=e.sibling}}function Yl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,a=s.flags;switch(s.tag){case 0:case 11:case 15:Yl(i,s,n),gl(4,s);break;case 1:if(Yl(i,s,n),"function"===typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){Au(r,r.return,c)}if(null!==(i=(r=s).updateQueue)){var o=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)Ss(l[i],o)}catch(c){Au(r,r.return,c)}}n&&64&a&&vl(s),wl(s,s.return);break;case 27:Nl(s);case 26:case 5:Yl(i,s,n),n&&null===r&&4&a&&El(s),wl(s,s.return);break;case 12:Yl(i,s,n);break;case 31:Yl(i,s,n),n&&4&a&&Ul(i,s);break;case 13:Yl(i,s,n),n&&4&a&&zl(i,s);break;case 22:null===s.memoizedState&&Yl(i,s,n),wl(s,s.return);break;case 30:break;default:Yl(i,s,n)}t=t.sibling}}function Xl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ui(n))}function Zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ui(e))}function $l(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ec(e,t,n,r),t=t.sibling}function ec(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:$l(e,t,n,r),2048&i&&gl(9,t);break;case 1:case 31:case 13:default:$l(e,t,n,r);break;case 3:$l(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ui(e)));break;case 12:if(2048&i){$l(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,a=s.id,o=s.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Au(t,t.return,l)}}else $l(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,a=t.alternate,null!==t.memoizedState?2&s._visibility?$l(e,t,n,r):nc(e,t):2&s._visibility?$l(e,t,n,r):(s._visibility|=2,tc(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&i&&Xl(a,t);break;case 24:$l(e,t,n,r),2048&i&&Zl(t.alternate,t)}}function tc(e,t,n,r,i){for(i=i&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var s=e,a=t,o=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:tc(s,a,o,l,i),gl(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?tc(s,a,o,l,i):nc(s,a):(u._visibility|=2,tc(s,a,o,l,i)),i&&2048&c&&Xl(a.alternate,a);break;case 24:tc(s,a,o,l,i),i&&2048&c&&Zl(a.alternate,a);break;default:tc(s,a,o,l,i)}t=t.sibling}}function nc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:nc(n,r),2048&i&&Xl(r.alternate,r);break;case 24:nc(n,r),2048&i&&Zl(r.alternate,r);break;default:nc(n,r)}t=t.sibling}}var rc=8192;function ic(e,t,n){if(e.subtreeFlags&rc)for(e=e.child;null!==e;)sc(e,t,n),e=e.sibling}function sc(e,t,n){switch(e.tag){case 26:ic(e,t,n),e.flags&rc&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var i=Wh(r.href),s=t.querySelector(Qh(i));if(s)return null!==(t=s._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=ad.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=s,void et(s);s=t.ownerDocument||t,r=Kh(r),(i=Bh.get(i))&&$h(r,i),et(s=s.createElement("link"));var a=s;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),dh(s,"link",r),n.instance=s}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=ad.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Gl,e.memoizedState,e.memoizedProps);break;case 5:default:ic(e,t,n);break;case 3:case 4:var r=Gl;Gl=zh(e.stateNode.containerInfo),ic(e,t,n),Gl=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=rc,rc=16777216,ic(e,t,n),rc=r):ic(e,t,n))}}function ac(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function oc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Dl=r,uc(r,e)}ac(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)lc(e),e=e.sibling}function lc(e){switch(e.tag){case 0:case 11:case 15:oc(e),2048&e.flags&&yl(9,e,e.return);break;case 3:case 12:default:oc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,cc(e)):oc(e)}}function cc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Dl=r,uc(r,e)}ac(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:yl(8,t,t.return),cc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,cc(t));break;default:cc(t)}e=e.sibling}}function uc(e,t){for(;null!==Dl;){var n=Dl;switch(n.tag){case 0:case 11:case 15:yl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ui(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Dl=r;else e:for(n=e;null!==Dl;){var i=(r=Dl).sibling,s=r.return;if(jl(r),r===n){Dl=null;break e}if(null!==i){i.return=s,Dl=i;break e}Dl=s}}}var hc={getCacheForType:function(e){var t=Ri(Fi),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Ri(Fi).controller.signal}},dc="function"===typeof WeakMap?WeakMap:Map,fc=0,pc=null,mc=null,gc=0,yc=0,vc=null,bc=!1,wc=!1,xc=!1,Ec=0,Ac=0,kc=0,Sc=0,Cc=0,Tc=0,Nc=0,Ic=null,Pc=null,_c=!1,Rc=0,Dc=0,Oc=1/0,jc=null,Lc=null,Mc=0,Fc=null,Bc=null,Uc=0,zc=0,Vc=null,Hc=null,Gc=0,qc=null;function Wc(){return 0!==(2&fc)&&0!==gc?gc&-gc:null!==O.T?Vu():Fe()}function Qc(){if(0===Tc)if(0===(536870912&gc)||hi){var e=ke;0===(3932160&(ke<<=1))&&(ke=262144),Tc=e}else Tc=536870912;return null!==(e=Rs.current)&&(e.flags|=32),Tc}function Kc(e,t,n){(e!==pc||2!==yc&&9!==yc)&&null===e.cancelPendingCommit||(tu(e,0),Zc(e,gc,Tc,!1)),Re(e,n),0!==(2&fc)&&e===pc||(e===pc&&(0===(2&fc)&&(Sc|=n),4===Ac&&Zc(e,gc,Tc,!1)),ju(e))}function Jc(e,t,n){if(0!==(6&fc))throw Error(a(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Ne(e,t),i=r?function(e,t){var n=fc;fc|=2;var r=iu(),i=su();pc!==e||gc!==t?(jc=null,Oc=le()+500,tu(e,t)):wc=Ne(e,t);e:for(;;)try{if(0!==yc&&null!==mc){t=mc;var s=vc;t:switch(yc){case 1:yc=0,vc=null,du(e,t,s,1);break;case 2:case 9:if(ts(s)){yc=0,vc=null,hu(t);break}t=function(){2!==yc&&9!==yc||pc!==e||(yc=7),ju(e)},s.then(t,t);break e;case 3:yc=7;break e;case 4:yc=5;break e;case 7:ts(s)?(yc=0,vc=null,hu(t)):(yc=0,vc=null,du(e,t,s,7));break;case 5:var o=null;switch(mc.tag){case 26:o=mc.memoizedState;case 5:case 27:var l=mc;if(o?id(o):l.stateNode.complete){yc=0,vc=null;var c=l.sibling;if(null!==c)mc=c;else{var u=l.return;null!==u?(mc=u,fu(u)):mc=null}break t}}yc=0,vc=null,du(e,t,s,5);break;case 6:yc=0,vc=null,du(e,t,s,6);break;case 8:eu(),Ac=6;break e;default:throw Error(a(462))}}cu();break}catch(h){nu(e,h)}return ki=Ai=null,O.H=r,O.A=i,fc=n,null!==mc?0:(pc=null,gc=0,Pr(),Ac)}(e,t):ou(e,t,!0),s=r;;){if(0===i){wc&&!r&&Zc(e,t,0,!1);break}if(n=e.current.alternate,!s||Xc(n)){if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;i=Ic;var c=l.current.memoizedState.isDehydrated;if(c&&(tu(l,o).flags|=256),2!==(o=ou(l,o,!1))){if(xc&&!c){l.errorRecoveryDisabledLanes|=s,Sc|=s,i=4;break e}s=Pc,Pc=i,null!==s&&(null===Pc?Pc=s:Pc.push.apply(Pc,s))}i=o}if(s=!1,2!==i)continue}}if(1===i){tu(e,0),Zc(e,t,0,!0);break}e:{switch(r=e,s=i){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:Zc(r,t,Tc,!bc);break e;case 2:Pc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(i=Rc+300-le())){if(Zc(r,t,Tc,!bc),0!==Te(r,0,!0))break e;Uc=t,r.timeoutHandle=xh(Yc.bind(null,r,n,Pc,jc,_c,t,Tc,Sc,Nc,bc,s,"Throttled",-0,0),i)}else Yc(r,n,Pc,jc,_c,t,Tc,Sc,Nc,bc,s,null,-0,0)}break}i=ou(e,t,!1),s=!1}ju(e)}function Yc(e,t,n,r,i,s,a,o,l,c,u,h,d,f){if(e.timeoutHandle=-1,8192&(h=t.subtreeFlags)||16785408===(16785408&h)){sc(t,s,h={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Rt});var p=(62914560&s)===s?Rc-le():(4194048&s)===s?Dc-le():0;if(p=function(e,t){return e.stylesheets&&0===e.count&&ld(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&ld(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===sd&&(sd=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var i=n[r],s=i.transferSize,a=i.initiatorType,o=i.duration;if(s&&o&&fh(a)){for(a=0,o=i.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>o)break;var u=l.transferSize,h=l.initiatorType;u&&fh(h)&&(a+=u*((l=l.responseEnd)<o?1:(o-c)/(l-c)))}if(--r,t+=8*(s+a)/(i.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,"number"===typeof e)?e:5}());var i=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&ld(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>sd?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(i)}}:null}(h,p),null!==p)return Uc=s,e.cancelPendingCommit=p(mu.bind(null,e,t,s,n,r,i,a,o,l,u,h,null,d,f)),void Zc(e,s,a,!c)}mu(e,t,s,n,r,i,a,o,l)}function Xc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Zn(s(),i))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zc(e,t,n,r){t&=~Cc,t&=~Sc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-we(i),a=1<<s;r[s]=-1,i&=~a}0!==n&&De(e,n,t)}function $c(){return 0!==(6&fc)||(Lu(0,!1),!1)}function eu(){if(null!==mc){if(0===yc)var e=mc.return;else ki=Ai=null,aa(e=mc),os=null,ls=0,e=mc;for(;null!==e;)ml(e.alternate,e),e=e.return;mc=null}}function tu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Eh(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Uc=0,eu(),pc=e,mc=n=Ur(e.current,null),gc=t,yc=0,vc=null,bc=!1,wc=Ne(e,t),xc=!1,Nc=Tc=Cc=Sc=kc=Ac=0,Pc=Ic=null,_c=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-we(r),s=1<<i;t|=e[i],r&=~s}return Ec=t,Pr(),n}function nu(e,t){Vs=null,O.H=mo,t===Xi||t===$i?(t=ss(),yc=3):t===Zi?(t=ss(),yc=4):yc=t===Ro?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,vc=t,null===mc&&(Ac=1,To(e,Kr(t,e.current)))}function ru(){var e=Rs.current;return null===e||((4194048&gc)===gc?null===Ds:((62914560&gc)===gc||0!==(536870912&gc))&&e===Ds)}function iu(){var e=O.H;return O.H=mo,null===e?mo:e}function su(){var e=O.A;return O.A=hc,e}function au(){Ac=4,bc||(4194048&gc)!==gc&&null!==Rs.current||(wc=!0),0===(134217727&kc)&&0===(134217727&Sc)||null===pc||Zc(pc,gc,Tc,!1)}function ou(e,t,n){var r=fc;fc|=2;var i=iu(),s=su();pc===e&&gc===t||(jc=null,tu(e,t)),t=!1;var a=Ac;e:for(;;)try{if(0!==yc&&null!==mc){var o=mc,l=vc;switch(yc){case 8:eu(),a=6;break e;case 3:case 2:case 9:case 6:null===Rs.current&&(t=!0);var c=yc;if(yc=0,vc=null,du(e,o,l,c),n&&wc){a=0;break e}break;default:c=yc,yc=0,vc=null,du(e,o,l,c)}}lu(),a=Ac;break}catch(u){nu(e,u)}return t&&e.shellSuspendCounter++,ki=Ai=null,fc=r,O.H=i,O.A=s,null===mc&&(pc=null,gc=0,Pr()),a}function lu(){for(;null!==mc;)uu(mc)}function cu(){for(;null!==mc&&!ae();)uu(mc)}function uu(e){var t=al(e.alternate,e,Ec);e.memoizedProps=e.pendingProps,null===t?fu(e):mc=t}function hu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=qo(n,t,t.pendingProps,t.type,void 0,gc);break;case 11:t=qo(n,t,t.pendingProps,t.type.render,t.ref,gc);break;case 5:aa(t);default:ml(n,t),t=al(n,t=mc=zr(t,Ec),Ec)}e.memoizedProps=e.pendingProps,null===t?fu(e):mc=t}function du(e,t,n,r){ki=Ai=null,aa(t),os=null,ls=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ii(t,n,i,!0),null!==(n=Rs.current)){switch(n.tag){case 31:case 13:return null===Ds?au():null===n.alternate&&0===Ac&&(Ac=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===es?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),ku(e,r,i)),!1;case 22:return n.flags|=65536,r===es?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),ku(e,r,i)),!1}throw Error(a(435,n.tag))}return ku(e,r,i),au(),!1}if(hi)return null!==(t=Rs.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==pi&&xi(Kr(e=Error(a(422),{cause:r}),n))):(r!==pi&&xi(Kr(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Kr(r,n),xs(e,i=Io(e.stateNode,r,i)),4!==Ac&&(Ac=2)),!1;var s=Error(a(520),{cause:r});if(s=Kr(s,n),null===Ic?Ic=[s]:Ic.push(s),4!==Ac&&(Ac=2),null===t)return!0;r=Kr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,xs(n,e=Io(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===Lc||!Lc.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,_o(i=Po(i),e,n,r),xs(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,gc))return Ac=1,To(e,Kr(n,e.current)),void(mc=null)}catch(s){if(null!==i)throw mc=i,s;return Ac=1,To(e,Kr(n,e.current)),void(mc=null)}32768&t.flags?(hi||1===r?e=!0:wc||0!==(536870912&gc)?e=!1:(bc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Rs.current)&&13===r.tag&&(r.flags|=16384))),pu(t,e)):fu(t)}function fu(e){var t=e;do{if(0!==(32768&t.flags))return void pu(t,bc);e=t.return;var n=fl(t.alternate,t,Ec);if(null!==n)return void(mc=n);if(null!==(t=t.sibling))return void(mc=t);mc=t=e}while(null!==t);0===Ac&&(Ac=5)}function pu(e,t){do{var n=pl(e.alternate,e);if(null!==n)return n.flags&=32767,void(mc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(mc=e);mc=e=n}while(null!==e);Ac=6,mc=null}function mu(e,t,n,r,i,s,o,l,c){e.cancelPendingCommit=null;do{wu()}while(0!==Mc);if(0!==(6&fc))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(s=t.lanes|t.childLanes,function(e,t,n,r,i,s){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-we(n),h=1<<u;o[u]=0,l[u]=-1;var d=c[u];if(null!==d)for(c[u]=null,u=0;u<d.length;u++){var f=d[u];null!==f&&(f.lane&=-536870913)}n&=~h}0!==r&&De(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(a&~t))}(e,n,s|=Ir,o,l,c),e===pc&&(mc=pc=null,gc=0),Bc=t,Fc=e,Uc=n,zc=s,Vc=i,Hc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,ie(de,function(){return xu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=O.T,O.T=null,i=j.p,j.p=2,o=fc,fc|=4;try{!function(e,t){if(e=e.containerInfo,ph=bd,ir(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=o+i),d!==s||0!==r&&3!==d.nodeType||(c=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=o),f===s&&++h===r&&(c=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(mh={focusedElem:e,selectionRange:n},bd=!1,Dl=t;null!==Dl;)if(e=(t=Dl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Dl=e;else for(;null!==Dl;){switch(s=(t=Dl).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(i=e[n]).ref.impl=i.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var m=Ao(n.type,i);e=r.getSnapshotBeforeUpdate(m,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){Au(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))Ih(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ih(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,Dl=e;break}Dl=t.return}}(e,t)}finally{fc=o,j.p=i,O.T=r}}Mc=1,gu(),yu(),vu()}}function gu(){if(1===Mc){Mc=0;var e=Fc,t=Bc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=O.T,O.T=null;var r=j.p;j.p=2;var i=fc;fc|=4;try{ql(t,e);var s=mh,a=rr(e.containerInfo),o=s.focusedElem,l=s.selectionRange;if(a!==o&&o&&o.ownerDocument&&nr(o.ownerDocument.documentElement,o)){if(null!==l&&ir(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var h=o.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var f=d.getSelection(),p=o.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(a=g,g=m,m=a);var y=tr(o,m),v=tr(o,g);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var b=h.createRange();b.setStart(y.node,y.offset),f.removeAllRanges(),m>g?(f.addRange(b),f.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),f.addRange(b))}}}}for(h=[],f=o;f=f.parentNode;)1===f.nodeType&&h.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<h.length;o++){var w=h[o];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}bd=!!ph,mh=ph=null}finally{fc=i,j.p=r,O.T=n}}e.current=t,Mc=2}}function yu(){if(2===Mc){Mc=0;var e=Fc,t=Bc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=O.T,O.T=null;var r=j.p;j.p=2;var i=fc;fc|=4;try{Ol(e,t.alternate,t)}finally{fc=i,j.p=r,O.T=n}}Mc=3}}function vu(){if(4===Mc||3===Mc){Mc=0,oe();var e=Fc,t=Bc,n=Uc,r=Hc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Mc=5:(Mc=0,Bc=Fc=null,bu(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Lc=null),Me(n),t=t.stateNode,ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(ye,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=O.T,i=j.p,j.p=2,O.T=null;try{for(var s=e.onRecoverableError,a=0;a<r.length;a++){var o=r[a];s(o.value,{componentStack:o.stack})}}finally{O.T=t,j.p=i}}0!==(3&Uc)&&wu(),ju(e),i=e.pendingLanes,0!==(261930&n)&&0!==(42&i)?e===qc?Gc++:(Gc=0,qc=e):Gc=0,Lu(0,!1)}}function bu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ui(t)))}function wu(){return gu(),yu(),vu(),xu()}function xu(){if(5!==Mc)return!1;var e=Fc,t=zc;zc=0;var n=Me(Uc),r=O.T,i=j.p;try{j.p=32>n?32:n,O.T=null,n=Vc,Vc=null;var s=Fc,o=Uc;if(Mc=0,Bc=Fc=null,Uc=0,0!==(6&fc))throw Error(a(331));var l=fc;if(fc|=4,lc(s.current),ec(s,s.current,o,n),fc=l,Lu(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(ye,s)}catch(c){}return!0}finally{j.p=i,O.T=r,bu(e,t)}}function Eu(e,t,n){t=Kr(n,t),null!==(e=bs(e,t=Io(e.stateNode,t,2),2))&&(Re(e,2),ju(e))}function Au(e,t,n){if(3===e.tag)Eu(e,e,n);else for(;null!==t;){if(3===t.tag){Eu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Lc||!Lc.has(r))){e=Kr(n,e),null!==(r=bs(t,n=Po(2),2))&&(_o(n,r,t,e),Re(r,2),ju(r));break}}t=t.return}}function ku(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new dc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(xc=!0,i.add(n),e=Su.bind(null,e,t,n),t.then(e,e))}function Su(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,pc===e&&(gc&n)===n&&(4===Ac||3===Ac&&(62914560&gc)===gc&&300>le()-Rc?0===(2&fc)&&tu(e,0):Cc|=n,Nc===gc&&(Nc=0)),ju(e)}function Cu(e,t){0===t&&(t=Pe()),null!==(e=Dr(e,t))&&(Re(e,t),ju(e))}function Tu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cu(e,n)}function Nu(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),Cu(e,n)}var Iu=null,Pu=null,_u=!1,Ru=!1,Du=!1,Ou=0;function ju(e){e!==Pu&&null===e.next&&(null===Pu?Iu=Pu=e:Pu=Pu.next=e),Ru=!0,_u||(_u=!0,kh(function(){0!==(6&fc)?ie(ue,Mu):Fu()}))}function Lu(e,t){if(!Du&&Ru){Du=!0;do{for(var n=!1,r=Iu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var a=r.suspendedLanes,o=r.pingedLanes;s=(1<<31-we(42|e)+1)-1,s=201326741&(s&=i&~(a&~o))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,zu(r,s))}else s=gc,0===(3&(s=Te(r,r===pc?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Ne(r,s)||(n=!0,zu(r,s));r=r.next}}while(n);Du=!1}}function Mu(){Fu()}function Fu(){Ru=_u=!1;var e=0;0!==Ou&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==wh&&(wh=e,!0);return wh=null,!1}()&&(e=Ou);for(var t=le(),n=null,r=Iu;null!==r;){var i=r.next,s=Bu(r,t);0===s?(r.next=null,null===n?Iu=i:n.next=i,null===i&&(Pu=n)):(n=r,(0!==e||0!==(3&s))&&(Ru=!0)),r=i}0!==Mc&&5!==Mc||Lu(e,!1),0!==Ou&&(Ou=0)}function Bu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var a=31-we(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=Ie(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}if(n=gc,n=Te(e,e===(t=pc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===yc||9===yc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&se(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Ne(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&se(r),Me(n)){case 2:case 8:n=he;break;case 32:default:n=de;break;case 268435456:n=pe}return r=Uu.bind(null,e),n=ie(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&se(r),e.callbackPriority=2,e.callbackNode=null,2}function Uu(e,t){if(0!==Mc&&5!==Mc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(wu()&&e.callbackNode!==n)return null;var r=gc;return 0===(r=Te(e,e===pc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Jc(e,r,t),Bu(e,le()),null!=e.callbackNode&&e.callbackNode===n?Uu.bind(null,e):null)}function zu(e,t){if(wu())return null;Jc(e,t,!0)}function Vu(){if(0===Ou){var e=Hi;0===e&&(e=Ae,0===(261888&(Ae<<=1))&&(Ae=256)),Ou=e}return Ou}function Hu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:_t(""+e)}function Gu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var qu=0;qu<kr.length;qu++){var Wu=kr[qu];Sr(Wu.toLowerCase(),"on"+(Wu[0].toUpperCase()+Wu.slice(1)))}Sr(gr,"onAnimationEnd"),Sr(yr,"onAnimationIteration"),Sr(vr,"onAnimationStart"),Sr("dblclick","onDoubleClick"),Sr("focusin","onFocus"),Sr("focusout","onBlur"),Sr(br,"onTransitionRun"),Sr(wr,"onTransitionStart"),Sr(xr,"onTransitionCancel"),Sr(Er,"onTransitionEnd"),it("onMouseEnter",["mouseout","mouseover"]),it("onMouseLeave",["mouseout","mouseover"]),it("onPointerEnter",["pointerout","pointerover"]),it("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ku=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qu));function Ju(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=c;try{s(i)}catch(u){Cr(u)}i.currentTarget=null,s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;s=o,i.currentTarget=c;try{s(i)}catch(u){Cr(u)}i.currentTarget=null,s=l}}}}function Yu(e,t){var n=t[Ge];void 0===n&&(n=t[Ge]=new Set);var r=e+"__bubble";n.has(r)||(eh(t,e,2,!1),n.add(r))}function Xu(e,t,n){var r=0;t&&(r|=4),eh(n,e,r,t)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function $u(e){if(!e[Zu]){e[Zu]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Ku.has(t)||Xu(t,!1,e),Xu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Zu]||(t[Zu]=!0,Xu("selectionchange",!1,t))}}function eh(e,t,n,r){switch(Cd(t)){case 2:var i=wd;break;case 8:i=xd;break;default:i=Ed}n=i.bind(null,t,n,e),i=void 0,!Vt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function th(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===i)return;a=a.return}for(;null!==o;){if(null===(a=Ye(o)))return;if(5===(c=a.tag)||6===c||26===c||27===c){r=s=a;continue e}o=o.parentNode}}r=r.return}Bt(function(){var r=s,i=Ot(n),a=[];e:{var o=Ar.get(e);if(void 0!==o){var c=nn,u=e;switch(e){case"keypress":if(0===Kt(n))break e;case"keydown":case"keyup":c=vn;break;case"focusin":u="focus",c=cn;break;case"focusout":u="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=on;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=wn;break;case gr:case yr:case vr:c=un;break;case Er:c=xn;break;case"scroll":case"scrollend":c=sn;break;case"wheel":c=En;break;case"copy":case"cut":case"paste":c=hn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=bn;break;case"toggle":case"beforetoggle":c=An}var h=0!==(4&t),d=!h&&("scroll"===e||"scrollend"===e),f=h?null!==o?o+"Capture":null:o;h=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Ut(m,f))&&h.push(nh(m,g,p)),d)break;m=m.return}0<h.length&&(o=new c(o,u,null,n,i),a.push({event:o,listeners:h}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Dt||!(u=n.relatedTarget||n.fromElement)||!Ye(u)&&!u[He])&&(c||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Ye(u):null)&&(d=l(u),h=u.tag,u!==d||5!==h&&27!==h&&6!==h)&&(u=null)):(c=null,u=r),c!==u)){if(h=on,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(h=bn,g="onPointerLeave",f="onPointerEnter",m="pointer"),d=null==c?o:Ze(c),p=null==u?o:Ze(u),(o=new h(g,m+"leave",c,n,i)).target=d,o.relatedTarget=p,g=null,Ye(i)===r&&((h=new h(f,m+"enter",u,n,i)).target=p,h.relatedTarget=d,g=h),d=g,c&&u)e:{for(h=ih,m=u,p=0,g=f=c;g;g=h(g))p++;g=0;for(var y=m;y;y=h(y))g++;for(;0<p-g;)f=h(f),p--;for(;0<g-p;)m=h(m),g--;for(;p--;){if(f===m||null!==m&&f===m.alternate){h=f;break e}f=h(f),m=h(m)}h=null}else h=null;null!==c&&sh(a,o,c,h,!1),null!==u&&null!==d&&sh(a,d,u,h,!0)}if("select"===(c=(o=r?Ze(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var v=zn;else if(jn(o))if(Vn)v=Xn;else{v=Jn;var b=Kn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&Nt(r.elementType)&&(v=zn):v=Yn;switch(v&&(v=v(e,r))?Ln(a,v,n,i):(b&&b(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&wt(o,"number",o.value)),b=r?Ze(r):window,e){case"focusin":(jn(b)||"true"===b.contentEditable)&&(ar=b,or=r,lr=null);break;case"focusout":lr=or=ar=null;break;case"mousedown":cr=!0;break;case"contextmenu":case"mouseup":case"dragend":cr=!1,ur(a,n,i);break;case"selectionchange":if(sr)break;case"keydown":case"keyup":ur(a,n,i)}var w;if(Sn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Dn?_n(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Nn&&"ko"!==n.locale&&(Dn||"onCompositionStart"!==x?"onCompositionEnd"===x&&Dn&&(w=Qt()):(qt="value"in(Gt=i)?Gt.value:Gt.textContent,Dn=!0)),0<(b=rh(r,x)).length&&(x=new dn(x,e,null,n,i),a.push({event:x,listeners:b}),w?x.data=w:null!==(w=Rn(n))&&(x.data=w))),(w=Tn?function(e,t){switch(e){case"compositionend":return Rn(t);case"keypress":return 32!==t.which?null:(Pn=!0,In);case"textInput":return(e=t.data)===In&&Pn?null:e;default:return null}}(e,n):function(e,t){if(Dn)return"compositionend"===e||!Sn&&_n(e,t)?(e=Qt(),Wt=qt=Gt=null,Dn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Nn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(x=rh(r,"onBeforeInput")).length&&(b=new dn("onBeforeInput","beforeinput",null,n,i),a.push({event:b,listeners:x}),b.data=w)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=Hu((i[Ve]||null).action),a=r.submitter;a&&null!==(t=(t=a[Ve]||null)?Hu(t.formAction):a.getAttribute("formAction"))&&(s=t,a=null);var o=new nn("action","action",null,r,i);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Ou){var e=a?Gu(i,a):new FormData(i);eo(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"===typeof s&&(o.preventDefault(),e=a?Gu(i,a):new FormData(i),eo(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(a,e,r,n,i)}Ju(a,t)})}function nh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rh(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Ut(e,n))&&r.unshift(nh(e,i,s)),null!=(i=Ut(e,t))&&r.push(nh(e,i,s))),3===e.tag)return r;e=e.return}return[]}function ih(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function sh(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,i?null!=(c=Ut(n,s))&&a.unshift(nh(n,c,l)):i||null!=(c=Ut(n,s))&&a.push(nh(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var ah=/\r\n?/g,oh=/\u0000|\uFFFD/g;function lh(e){return("string"===typeof e?e:""+e).replace(ah,"\n").replace(oh,"")}function ch(e,t){return t=lh(t),lh(e)===t}function uh(e,t,n,r,i,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||kt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&kt(e,""+r);break;case"className":ct(e,"class",r);break;case"tabIndex":ct(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,r);break;case"style":Tt(e,r,s);break;case"data":if("object"!==t){ct(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=_t(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&uh(e,t,"name",i.name,i,null),uh(e,t,"formEncType",i.formEncType,i,null),uh(e,t,"formMethod",i.formMethod,i,null),uh(e,t,"formTarget",i.formTarget,i,null)):(uh(e,t,"encType",i.encType,i,null),uh(e,t,"method",i.method,i,null),uh(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=_t(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Rt);break;case"onScroll":null!=r&&Yu("scroll",e);break;case"onScrollEnd":null!=r&&Yu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=_t(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Yu("beforetoggle",e),Yu("toggle",e),lt(e,"popover",r);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":lt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=It.get(n)||n,r)}}function hh(e,t,n,r,i,s){switch(n){case"style":Tt(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?kt(e,r):("number"===typeof r||"bigint"===typeof r)&&kt(e,""+r);break;case"onScroll":null!=r&&Yu("scroll",e);break;case"onScrollEnd":null!=r&&Yu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Rt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(s=null!=(s=e[Ve]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):lt(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function dh(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Yu("error",e),Yu("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:uh(e,t,r,o,n,null)}}return s&&uh(e,t,"srcSet",n.srcSet,n,null),void(i&&uh(e,t,"src",n.src,n,null));case"input":Yu("invalid",e);var l=r=o=s=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(null!=h)switch(i){case"name":s=h;break;case"type":o=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":r=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(a(137,t));break;default:uh(e,t,i,h,n,null)}}return void bt(e,r,l,c,u,o,s,!1);case"select":for(s in Yu("invalid",e),i=o=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":i=l;default:uh(e,t,s,l,n,null)}return t=r,n=o,e.multiple=!!i,void(null!=t?xt(e,!!i,t,!1):null!=n&&xt(e,!!i,n,!0));case"textarea":for(o in Yu("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:uh(e,t,o,l,n,null)}return void At(e,i,s,r);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else uh(e,t,c,i,n,null);return;case"dialog":Yu("beforetoggle",e),Yu("toggle",e),Yu("cancel",e),Yu("close",e);break;case"iframe":case"object":Yu("load",e);break;case"video":case"audio":for(i=0;i<Qu.length;i++)Yu(Qu[i],e);break;case"image":Yu("error",e),Yu("load",e);break;case"details":Yu("toggle",e);break;case"embed":case"source":case"link":Yu("error",e),Yu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:uh(e,t,u,i,n,null)}return;default:if(Nt(t)){for(h in n)n.hasOwnProperty(h)&&(void 0!==(i=n[h])&&hh(e,t,h,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&uh(e,t,l,i,n,null))}function fh(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var ph=null,mh=null;function gh(e){return 9===e.nodeType?e:e.ownerDocument}function yh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vh(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function bh(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var wh=null;var xh="function"===typeof setTimeout?setTimeout:void 0,Eh="function"===typeof clearTimeout?clearTimeout:void 0,Ah="function"===typeof Promise?Promise:void 0,kh="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Ah?function(e){return Ah.resolve(null).then(e).catch(Sh)}:xh;function Sh(e){setTimeout(function(){throw e})}function Ch(e){return"head"===e}function Th(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)||"/&"===n){if(0===r)return e.removeChild(i),void Gd(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)Fh(e.ownerDocument.documentElement);else if("head"===n){Fh(n=e.ownerDocument.head);for(var s=n.firstChild;s;){var a=s.nextSibling,o=s.nodeName;s[Ke]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===s.rel.toLowerCase()||n.removeChild(s),s=a}}else"body"===n&&Fh(e.ownerDocument.body);n=i}while(n);Gd(t)}function Nh(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function Ih(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Ih(n),Je(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Ph(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Dh(e.nextSibling)))return null}return e}function _h(e){return"$?"===e.data||"$~"===e.data}function Rh(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Dh(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Oh=null;function jh(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Dh(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Lh(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Mh(e,t,n){switch(t=gh(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function Fh(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Je(e)}var Bh=new Map,Uh=new Set;function zh(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Vh=j.d;j.d={f:function(){var e=Vh.f(),t=$c();return e||t},r:function(e){var t=Xe(e);null!==t&&5===t.tag&&"form"===t.type?no(t):Vh.r(e)},D:function(e){Vh.D(e),Gh("dns-prefetch",e,null)},C:function(e,t){Vh.C(e,t),Gh("preconnect",e,t)},L:function(e,t,n){Vh.L(e,t,n);var r=Hh;if(r&&e&&t){var i='link[rel="preload"][as="'+yt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+yt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+yt(n.imageSizes)+'"]')):i+='[href="'+yt(e)+'"]';var s=i;switch(t){case"style":s=Wh(e);break;case"script":s=Jh(e)}Bh.has(s)||(e=f({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Bh.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Qh(s))||"script"===t&&r.querySelector(Yh(s))||(dh(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){Vh.m(e,t);var n=Hh;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+yt(r)+'"][href="'+yt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Jh(e)}if(!Bh.has(s)&&(e=f({rel:"modulepreload",href:e},t),Bh.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Yh(s)))return}dh(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){Vh.X(e,t);var n=Hh;if(n&&e){var r=$e(n).hoistableScripts,i=Jh(e),s=r.get(i);s||((s=n.querySelector(Yh(i)))||(e=f({src:e,async:!0},t),(t=Bh.get(i))&&ed(e,t),et(s=n.createElement("script")),dh(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){Vh.S(e,t,n);var r=Hh;if(r&&e){var i=$e(r).hoistableStyles,s=Wh(e);t=t||"default";var a=i.get(s);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(Qh(s)))o.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Bh.get(s))&&$h(e,n);var l=a=r.createElement("link");et(l),dh(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Zh(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:o},i.set(s,a)}}},M:function(e,t){Vh.M(e,t);var n=Hh;if(n&&e){var r=$e(n).hoistableScripts,i=Jh(e),s=r.get(i);s||((s=n.querySelector(Yh(i)))||(e=f({src:e,async:!0,type:"module"},t),(t=Bh.get(i))&&ed(e,t),et(s=n.createElement("script")),dh(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var Hh="undefined"===typeof document?null:document;function Gh(e,t,n){var r=Hh;if(r&&"string"===typeof t&&t){var i=yt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),Uh.has(i)||(Uh.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(dh(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function qh(e,t,n,r){var i,s,o,l,c=(c=W.current)?zh(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Wh(n.href),(r=(n=$e(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Wh(n.href);var u=$e(c).hoistableStyles,h=u.get(e);if(h||(c=c.ownerDocument||c,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=c.querySelector(Qh(e)))&&!u._p&&(h.instance=u,h.state.loading=5),Bh.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Bh.set(e,n),u||(i=c,s=e,o=n,l=h.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),dh(s,"link",o),et(s),i.head.appendChild(s))))),t&&null===r)throw Error(a(528,""));return h}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Jh(n),(r=(n=$e(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Wh(e){return'href="'+yt(e)+'"'}function Qh(e){return'link[rel="stylesheet"]['+e+"]"}function Kh(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Jh(e){return'[src="'+yt(e)+'"]'}function Yh(e){return"script[async]"+e}function Xh(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+yt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var i=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),dh(r,"style",i),Zh(r,n.precedence,e),t.instance=r;case"stylesheet":i=Wh(n.href);var s=e.querySelector(Qh(i));if(s)return t.state.loading|=4,t.instance=s,et(s),s;r=Kh(n),(i=Bh.get(i))&&$h(r,i),et(s=(e.ownerDocument||e).createElement("link"));var o=s;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),dh(s,"link",r),t.state.loading|=4,Zh(s,n.precedence,e),t.instance=s;case"script":return s=Jh(n.src),(i=e.querySelector(Yh(s)))?(t.instance=i,et(i),i):(r=n,(i=Bh.get(s))&&ed(r=f({},n),i),et(i=(e=e.ownerDocument||e).createElement("script")),dh(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Zh(r,n.precedence,e));return t.instance}function Zh(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===t)s=o;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function $h(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function ed(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var td=null;function nd(e,t,n){if(null===td){var r=new Map,i=td=new Map;i.set(n,r)}else(r=(i=td).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[Ke]||s[ze]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var a=s.getAttribute(t)||"";a=e+a;var o=r.get(a);o?o.push(s):r.set(a,[s])}}return r}function rd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function id(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var sd=0;function ad(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)ld(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var od=null;function ld(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,od=new Map,t.forEach(cd,e),od=null,ad.call(e))}function cd(e,t){if(!(4&t.state.loading)){var n=od.get(e);if(n)var r=n.get(null);else{n=new Map,od.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var a=i[s];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(i=t.instance).getAttribute("data-precedence"),(s=n.get(a)||r)===r&&n.set(null,i),n.set(a,i),this.count++,r=ad.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var ud={$$typeof:x,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function hd(e,t,n,r,i,s,a,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_e(0),this.hiddenUpdates=_e(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function dd(e,t,n,r,i,s,a,o,l,c,u,h){return e=new hd(e,t,n,a,l,c,u,h,o),t=1,!0===s&&(t|=24),s=Fr(3,null,null,t),e.current=s,s.stateNode=e,(t=Bi()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},gs(s),e}function fd(e){return e?e=Lr:Lr}function pd(e,t,n,r,i,s){i=fd(i),null===r.context?r.context=i:r.pendingContext=i,(r=vs(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=bs(e,r,t))&&(Kc(n,0,t),ws(n,e,t))}function md(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function gd(e,t){md(e,t),(e=e.alternate)&&md(e,t)}function yd(e){if(13===e.tag||31===e.tag){var t=Dr(e,67108864);null!==t&&Kc(t,0,67108864),gd(e,67108864)}}function vd(e){if(13===e.tag||31===e.tag){var t=Wc(),n=Dr(e,t=Le(t));null!==n&&Kc(n,0,t),gd(e,t)}}var bd=!0;function wd(e,t,n,r){var i=O.T;O.T=null;var s=j.p;try{j.p=2,Ed(e,t,n,r)}finally{j.p=s,O.T=i}}function xd(e,t,n,r){var i=O.T;O.T=null;var s=j.p;try{j.p=8,Ed(e,t,n,r)}finally{j.p=s,O.T=i}}function Ed(e,t,n,r){if(bd){var i=Ad(r);if(null===i)th(e,t,r,kd,n),jd(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Nd=Ld(Nd,e,t,n,r,i),!0;case"dragenter":return Id=Ld(Id,e,t,n,r,i),!0;case"mouseover":return Pd=Ld(Pd,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return _d.set(s,Ld(_d.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rd.set(s,Ld(Rd.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(jd(e,r),4&t&&-1<Od.indexOf(e)){for(;null!==i;){var s=Xe(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var a=Ce(s.pendingLanes);if(0!==a){var o=s;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-we(a);o.entanglements[1]|=l,a&=~l}ju(s),0===(6&fc)&&(Oc=le()+500,Lu(0,!1))}}break;case 31:case 13:null!==(o=Dr(s,2))&&Kc(o,0,2),$c(),gd(s,2)}if(null===(s=Ad(r))&&th(e,t,r,kd,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else th(e,t,r,null,n)}}function Ad(e){return Sd(e=Ot(e))}var kd=null;function Sd(e){if(kd=null,null!==(e=Ye(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return kd=e,null}function Cd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case he:return 8;case de:case fe:return 32;case pe:return 268435456;default:return 32}default:return 32}}var Td=!1,Nd=null,Id=null,Pd=null,_d=new Map,Rd=new Map,Dd=[],Od="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jd(e,t){switch(e){case"focusin":case"focusout":Nd=null;break;case"dragenter":case"dragleave":Id=null;break;case"mouseover":case"mouseout":Pd=null;break;case"pointerover":case"pointerout":_d.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rd.delete(t.pointerId)}}function Ld(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=Xe(t))&&yd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Md(e){var t=Ye(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void Be(e.priority,function(){vd(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void Be(e.priority,function(){vd(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Fd(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ad(e.nativeEvent);if(null!==n)return null!==(t=Xe(n))&&yd(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Dt=r,n.target.dispatchEvent(r),Dt=null,t.shift()}return!0}function Bd(e,t,n){Fd(e)&&n.delete(t)}function Ud(){Td=!1,null!==Nd&&Fd(Nd)&&(Nd=null),null!==Id&&Fd(Id)&&(Id=null),null!==Pd&&Fd(Pd)&&(Pd=null),_d.forEach(Bd),Rd.forEach(Bd)}function zd(e,t){e.blockedOn===t&&(e.blockedOn=null,Td||(Td=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ud)))}var Vd=null;function Hd(e){Vd!==e&&(Vd=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Vd===e&&(Vd=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===Sd(r||n))continue;break}var s=Xe(n);null!==s&&(e.splice(t,3),t-=3,eo(s,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Gd(e){function t(t){return zd(t,e)}null!==Nd&&zd(Nd,e),null!==Id&&zd(Id,e),null!==Pd&&zd(Pd,e),_d.forEach(t),Rd.forEach(t);for(var n=0;n<Dd.length;n++){var r=Dd[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Dd.length&&null===(n=Dd[0]).blockedOn;)Md(n),null===n.blockedOn&&Dd.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],a=i[Ve]||null;if("function"===typeof s)a||Hd(n);else if(a){var o=null;if(s&&s.hasAttribute("formAction")){if(i=s,a=s[Ve]||null)o=a.formAction;else if(null!==Sd(i))continue}else o=a.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Hd(n)}}}function qd(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return i=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==i&&(i(),i=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,i=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==i&&(i(),i=null)}}}function Wd(e){this._internalRoot=e}function Qd(e){this._internalRoot=e}Qd.prototype.render=Wd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));pd(t.current,Wc(),e,t,null,null)},Qd.prototype.unmount=Wd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;pd(e.current,2,null,e,null,null),$c(),t[He]=null}},Qd.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dd.length&&0!==t&&t<Dd[n].priority;n++);Dd.splice(n,0,e),0===n&&Md(e)}};var Kd=i.version;if("19.2.0"!==Kd)throw Error(a(527,Kd,"19.2.0"));j.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return h(i),e;if(s===r)return h(i),t;s=s.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o){for(c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Jd={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.2.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Yd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yd.isDisabled&&Yd.supportsFiber)try{ye=Yd.inject(Jd),ve=Yd}catch(Zd){}}t.createRoot=function(e,t){if(!o(e))throw Error(a(299));var n=!1,r="",i=ko,s=So,l=Co;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=dd(e,1,!1,null,0,n,r,null,i,s,l,qd),e[He]=t.current,$u(e),new Wd(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(a(299));var r=!1,i="",s=ko,l=So,c=Co,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=dd(e,1,!0,t,0,r,i,u,s,l,c,qd)).context=fd(null),n=t.current,(i=vs(r=Le(r=Wc()))).callback=null,bs(n,i,r),n=r,t.current.lanes=n,Re(t,n),ju(t),e[He]=t.current,$u(e),new Qd(t)},t.version="19.2.0"},43:(e,t,n)=>{e.exports=n(288)},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function v(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||m}function b(){}function w(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var x=w.prototype=new b;x.constructor=w,g(x,v.prototype),x.isPureReactComponent=!0;var E=Array.isArray;function A(){}var k={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function C(e,t,r){var i=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==i?i:null,props:r}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case d:return P((u=e._init)(e._payload),t,i,s,a)}}if(u)return a=a(e),u=""===s?"."+I(e,0):s,E(a)?(i="",null!=u&&(i=u.replace(N,"$&/")+"/"),P(a,t,i,"",function(e){return e})):null!=a&&(T(a)&&(l=a,c=i+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(N,"$&/")+"/")+u,a=C(l.type,c,l.props)),t.push(a)),1;u=0;var h,f=""===s?".":s+":";if(E(e))for(var m=0;m<e.length;m++)u+=P(s=e[m],t,i,o=f+I(s,m),a);else if("function"===typeof(m=null===(h=e)||"object"!==typeof h?null:"function"===typeof(h=p&&h[p]||h["@@iterator"])?h:null))for(e=m.call(e),m=0;!(s=e.next()).done;)u+=P(s=s.value,t,i,o=f+I(s,m++),a);else if("object"===o){if("function"===typeof e.then)return P(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(A,A):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,s,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function _(e,t,n){if(null==e)return e;var r=[],i=0;return P(e,r,"","",function(e){return t.call(n,e,i++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},O={map:_,forEach:function(e,t,n){_(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return _(e,function(){t++}),t},toArray:function(e){return _(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=f,t.Children=O,t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return k.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.key&&(i=""+t.key),t)!S.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var a=Array(s),o=0;o<s;o++)a[o]=arguments[o+2];r.children=a}return C(e.type,i,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)S.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];i.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return C(e,s,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.T,n={};k.T=n;try{var r=e(),i=k.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(A,D)}catch(s){D(s)}finally{null!==t&&null!==n.types&&(t.types=n.types),k.T=t}},t.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},t.use=function(e){return k.H.use(e)},t.useActionState=function(e,t,n){return k.H.useActionState(e,t,n)},t.useCallback=function(e,t){return k.H.useCallback(e,t)},t.useContext=function(e){return k.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return k.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return k.H.useEffect(e,t)},t.useEffectEvent=function(e){return k.H.useEffectEvent(e)},t.useId=function(){return k.H.useId()},t.useImperativeHandle=function(e,t,n){return k.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.H.useMemo(e,t)},t.useOptimistic=function(e,t){return k.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return k.H.useReducer(e,t,n)},t.useRef=function(e){return k.H.useRef(e)},t.useState=function(e){return k.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.H.useTransition()},t.version="19.2.0"},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},672:(e,t,n)=>{var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var a={d:{f:s,r:function(){throw Error(i(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.0"},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function E(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,k||(k=!0,A());else{var t=r(u);null!==t&&R(E,t.startTime-e)}}var A,k=!1,S=-1,C=5,T=-1;function N(){return!!y||!(t.unstable_now()-T<C)}function I(){if(y=!1,k){var e=t.unstable_now();T=e;var n=!0;try{e:{m=!1,g&&(g=!1,b(S),S=-1),p=!0;var s=f;try{t:{for(x(e),d=r(c);null!==d&&!(d.expirationTime>e&&N());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){d.callback=o,x(e),n=!0;break t}d===r(c)&&i(c),x(e)}else i(c);d=r(c)}if(null!==d)n=!0;else{var l=r(u);null!==l&&R(E,l.startTime-e),n=!1}}break e}finally{d=null,f=s,p=!1}n=void 0}}finally{n?A():k=!1}}}if("function"===typeof w)A=function(){w(I)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,_=P.port2;P.port1.onmessage=I,A=function(){_.postMessage(null)}}else A=function(){v(I,0)};function R(e,n){S=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(b(S),S=-1):g=!0,R(E,s-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,k||(k=!0,A()))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};n.r(r),n.d(r,{OG:()=>vu,My:()=>cu,Ph:()=>du,lX:()=>fu,Id:()=>yu,fg:()=>xu,qj:()=>gu,aT:()=>hu,lq:()=>pu,z:()=>mu,Q5:()=>Au});var i=n(43),s=n(391);function a(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function l(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function c(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const d=["sri"],f=["page"],p=["page","matches"],m=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],g=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],y=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var v="popstate";function b(){return C(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return A("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:k(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function w(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function x(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function E(e,t){return{usr:e.state,key:e.key,idx:t}}function A(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return h(h({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?S(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function k(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function S(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function C(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o="POP",l=null,c=u();function u(){return(a.state||{idx:null}).idx}function d(){o="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:o,location:p.location,delta:t})}function f(e){return T(e)}null==c&&(c=0,a.replaceState(h(h({},a.state),{},{idx:c}),""));let p={get action(){return o},get location(){return e(i,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(v,d),l=e,()=>{i.removeEventListener(v,d),l=null}},createHref:e=>t(i,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let r=A(p.location,e,t);n&&n(r,e),c=u()+1;let h=E(r,c),d=p.createHref(r);try{a.pushState(h,"",d)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;i.location.assign(d)}s&&l&&l({action:o,location:p.location,delta:1})},replace:function(e,t){o="REPLACE";let r=A(p.location,e,t);n&&n(r,e),c=u();let i=E(r,c),h=p.createHref(r);a.replaceState(i,"",h),s&&l&&l({action:o,location:p.location,delta:0})},go:e=>a.go(e)};return p}function T(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),w(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:k(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function N(e,t){return I(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function I(e,t,n,r){let i=G(("string"===typeof t?S(t):t).pathname||"/",n);if(null==i)return null;let s=P(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let e=H(i);a=U(s[o],e,r)}return a}function P(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=function(e,s){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,o=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&a)return;w(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length)}let c=J([r,l.relativePath]),u=n.concat(l);e.children&&e.children.length>0&&(w(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(c,'".')),P(e.children,t,u,c,a)),(null!=e.path||e.index)&&t.push({path:c,score:B(c,e.index),routesMeta:u})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of _(e.path))s(e,t,!0,r);else s(e,t)}),t}function _(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let a=_(r.join("/")),o=[];return o.push(...a.map(e=>""===e?s:[s,e].join("/"))),i&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}var R=/^:[\w-]+$/,D=3,O=2,j=1,L=10,M=-2,F=e=>"*"===e;function B(e,t){let n=e.split("/"),r=n.length;return n.some(F)&&(r+=M),t&&(r+=O),n.filter(e=>!F(e)).reduce((e,t)=>e+(R.test(t)?D:""===t?j:L),r)}function U(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=z({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=z({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:J([s,u.pathname]),pathnameBase:Y(J([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=J([s,u.pathnameBase]))}return a}function z(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=V(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:a,pattern:e}}function V(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];x("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function H(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return x(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function G(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function q(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function W(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function Q(e){let t=W(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function K(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=S(e):(r=h({},e),w(!r.pathname||!r.pathname.includes("?"),q("?","pathname","search",r)),w(!r.pathname||!r.pathname.includes("#"),q("#","pathname","hash",r)),w(!r.search||!r.search.includes("#"),q("#","search","hash",r)));let s,a=""===e||""===r.pathname,o=a?"/":r.pathname;if(null==o)s=n;else{let e=t.length-1;if(!i&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:i=""}="string"===typeof e?S(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:X(r),hash:Z(i)}}(r,s),c=o&&"/"!==o&&o.endsWith("/"),u=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var J=e=>e.join("/").replace(/\/\/+/g,"/"),Y=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),X=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function $(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var ee=["POST","PUT","PATCH","DELETE"],te=(new Set(ee),["GET",...ee]);new Set(te),Symbol("ResetLoaderData");var ne=i.createContext(null);ne.displayName="DataRouter";var re=i.createContext(null);re.displayName="DataRouterState";var ie=i.createContext(!1);var se=i.createContext({isTransitioning:!1});se.displayName="ViewTransition";var ae=i.createContext(new Map);ae.displayName="Fetchers";var oe=i.createContext(null);oe.displayName="Await";var le=i.createContext(null);le.displayName="Navigation";var ce=i.createContext(null);ce.displayName="Location";var ue=i.createContext({outlet:null,matches:[],isDataRoute:!1});ue.displayName="Route";var he=i.createContext(null);he.displayName="RouteError";function de(){return null!=i.useContext(ce)}function fe(){return w(de(),"useLocation() may be used only in the context of a <Router> component."),i.useContext(ce).location}var pe="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function me(e){i.useContext(le).static||i.useLayoutEffect(e)}function ge(){let{isDataRoute:e}=i.useContext(ue);return e?function(){let{router:e}=Ce("useNavigate"),t=Ne("useNavigate"),n=i.useRef(!1);me(()=>{n.current=!0});let r=i.useCallback(async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};x(n.current,pe),n.current&&("number"===typeof r?e.navigate(r):await e.navigate(r,h({fromRouteId:t},i)))},[e,t]);return r}():function(){w(de(),"useNavigate() may be used only in the context of a <Router> component.");let e=i.useContext(ne),{basename:t,navigator:n}=i.useContext(le),{matches:r}=i.useContext(ue),{pathname:s}=fe(),a=JSON.stringify(Q(r)),o=i.useRef(!1);me(()=>{o.current=!0});let l=i.useCallback(function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(x(o.current,pe),!o.current)return;if("number"===typeof r)return void n.go(r);let l=K(r,JSON.parse(a),s,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:J([t,l.pathname])),(i.replace?n.replace:n.push)(l,i.state,i)},[t,n,a,s,e]);return l}()}var ye=i.createContext(null);function ve(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=i.useContext(ue),{pathname:r}=fe(),s=JSON.stringify(Q(n));return i.useMemo(()=>K(e,JSON.parse(s),r,"path"===t),[e,s,r,t])}function be(e,t,n,r,s){w(de(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=i.useContext(le),{matches:o}=i.useContext(ue),l=o[o.length-1],c=l?l.params:{},u=l?l.pathname:"/",d=l?l.pathnameBase:"/",f=l&&l.route;{let e=f&&f.path||"";_e(u,!f||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,m=fe();if(t){var g;let e="string"===typeof t?S(t):t;w("/"===d||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(d)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(d,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=m;let y=p.pathname||"/",v=y;if("/"!==d){let e=d.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=N(e,{pathname:v});x(f||null!=b,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),x(null==b||void 0!==b[b.length-1].route.element||void 0!==b[b.length-1].route.Component||void 0!==b[b.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let E=ke(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:J([d,a.encodeLocation?a.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:J([d,a.encodeLocation?a.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),o,n,r,s);return t&&E?i.createElement(ce.Provider,{value:{location:h({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},E):E}function we(){let e=Ie(),t=$(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=i.createElement(i.Fragment,null,i.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),i.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",i.createElement("code",{style:a},"ErrorBoundary")," or"," ",i.createElement("code",{style:a},"errorElement")," prop on your route.")),i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:s},n):null,o)}var xe=i.createElement(we,null),Ee=class extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?i.createElement(ue.Provider,{value:this.props.routeContext},i.createElement(he.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ae(e){let{routeContext:t,match:n,children:r}=e,s=i.useContext(ne);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(ue.Provider,{value:t},r)}function ke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let s=e,a=null===n||void 0===n?void 0:n.errors;if(null!=a){let e=s.findIndex(e=>e.route.id&&void 0!==(null===a||void 0===a?void 0:a[e.route.id]));w(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(a).join(","))),s=s.slice(0,Math.min(s.length,e+1))}let o=!1,l=-1;if(n)for(let i=0;i<s.length;i++){let e=s[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=i),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){o=!0,s=l>=0?s.slice(0,l+1):[s[0]];break}}}return s.reduceRight((e,c,u)=>{let h,d=!1,f=null,p=null;n&&(h=a&&c.route.id?a[c.route.id]:void 0,f=c.route.errorElement||xe,o&&(l<0&&0===u?(_e("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):l===u&&(d=!0,p=c.route.hydrateFallbackElement||null)));let m=t.concat(s.slice(0,u+1)),g=()=>{let t;return t=h?f:d?p:c.route.Component?i.createElement(c.route.Component,null):c.route.element?c.route.element:e,i.createElement(Ae,{match:c,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(c.route.ErrorBoundary||c.route.errorElement||0===u)?i.createElement(Ee,{location:n.location,revalidation:n.revalidation,component:f,error:h,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},unstable_onError:r}):g()},null)}function Se(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Ce(e){let t=i.useContext(ne);return w(t,Se(e)),t}function Te(e){let t=i.useContext(re);return w(t,Se(e)),t}function Ne(e){let t=function(e){let t=i.useContext(ue);return w(t,Se(e)),t}(e),n=t.matches[t.matches.length-1];return w(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function Ie(){var e;let t=i.useContext(he),n=Te("useRouteError"),r=Ne("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[r]}var Pe={};function _e(e,t,n){t||Pe[e]||(Pe[e]=!0,x(!1,n))}var Re={};function De(e,t){e||Re[t]||(Re[t]=!0,console.warn(t))}i.memo(function(e){let{routes:t,future:n,state:r,unstable_onError:i}=e;return be(t,void 0,r,i,n)});function Oe(e){let{to:t,replace:n,state:r,relative:s}=e;w(de(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=i.useContext(le);x(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=i.useContext(ue),{pathname:l}=fe(),c=ge(),u=K(t,Q(o),l,"path"===s),h=JSON.stringify(u);return i.useEffect(()=>{c(JSON.parse(h),{replace:n,state:r,relative:s})},[c,h,s,n,r]),null}function je(e){return function(e){let t=i.useContext(ue).outlet;return i.useMemo(()=>t&&i.createElement(ye.Provider,{value:e},t),[t,e])}(e.context)}function Le(e){w(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Me(e){let{basename:t="/",children:n=null,location:r,navigationType:s="POP",navigator:a,static:o=!1}=e;w(!de(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),c=i.useMemo(()=>({basename:l,navigator:a,static:o,future:{}}),[l,a,o]);"string"===typeof r&&(r=S(r));let{pathname:u="/",search:h="",hash:d="",state:f=null,key:p="default"}=r,m=i.useMemo(()=>{let e=G(u,l);return null==e?null:{location:{pathname:e,search:h,hash:d,state:f,key:p},navigationType:s}},[l,u,h,d,f,p,s]);return x(null!=m,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(h).concat(d,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==m?null:i.createElement(le.Provider,{value:c},i.createElement(ce.Provider,{children:n,value:m}))}function Fe(e){let{children:t,location:n}=e;return be(Be(t),n)}i.Component;function Be(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return i.Children.forEach(e,(e,r)=>{if(!i.isValidElement(e))return;let s=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,Be(e.props.children,s));w(e.type===Le,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),w(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Be(e.props.children,s)),n.push(a)}),n}var Ue="get",ze="application/x-www-form-urlencoded";function Ve(e){return null!=e&&"string"===typeof e.tagName}function He(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}var Ge=null;var qe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function We(e){return null==e||qe.has(e)?e:(x(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(ze,'"')),null)}function Qe(e,t){let n,r,i,s,a;if(function(e){return Ve(e)&&"form"===e.tagName.toLowerCase()}(e)){let a=e.getAttribute("action");r=a?G(a,t):null,n=e.getAttribute("method")||Ue,i=We(e.getAttribute("enctype"))||ze,s=new FormData(e)}else if(function(e){return Ve(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Ve(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let o=e.getAttribute("formaction")||a.getAttribute("action");if(r=o?G(o,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Ue,i=We(e.getAttribute("formenctype"))||We(a.getAttribute("enctype"))||ze,s=new FormData(a,e),!function(){if(null===Ge)try{new FormData(document.createElement("form"),0),Ge=!1}catch(e){Ge=!0}return Ge}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";s.append("".concat(e,"x"),"0"),s.append("".concat(e,"y"),"0")}else t&&s.append(t,r)}}else{if(Ve(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ue,r=null,i=ze,a=e}return s&&"text/plain"===i&&(a=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Ke(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function Je(e,t,n){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.".concat(n):t&&"/"===G(r.pathname,t)?r.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):r.pathname="".concat(r.pathname.replace(/\/$/,""),".").concat(n),r}async function Ye(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Xe(e){return null!=e&&"string"===typeof e.page}function Ze(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function $e(e,t,n,r,i,s){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,o=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===s?t.filter((e,t)=>a(e,t)||o(e,t)):"data"===s?t.filter((t,s)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(a(t,s)||o(t,s))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null===(c=n[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function et(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1),[...new Set(r)];var r}function tt(e,t){let n=new Set,r=new Set(t);return e.reduce((e,i)=>{if(t&&!Xe(i)&&"script"===i.as&&i.href&&r.has(i.href))return e;let s=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(i));return n.has(s)||(n.add(s),e.push({key:s,link:i})),e},[])}function nt(e,t){return"lazy"===e.mode&&!0===t}function rt(){let e=i.useContext(ne);return Ke(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function it(){let e=i.useContext(re);return Ke(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var st=i.createContext(void 0);function at(){let e=i.useContext(st);return Ke(e,"You must render this element inside a <HydratedRouter> element"),e}function ot(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function lt(e,t,n){if(n&&!dt)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}st.displayName="FrameworkContext";function ct(e){let{page:t}=e,n=a(e,f),{router:r}=rt(),s=i.useMemo(()=>N(r.routes,t,r.basename),[r.routes,t,r.basename]);return s?i.createElement(ht,h({page:t,matches:s},n)):null}function ut(e){let{manifest:t,routeModules:n}=at(),[r,s]=i.useState([]);return i.useEffect(()=>{let r=!1;return async function(e,t,n){return tt((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await Ye(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Ze).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?h(h({},e),{},{rel:"prefetch",as:"style"}):h(h({},e),{},{rel:"prefetch"})))}(e,t,n).then(e=>{r||s(e)}),()=>{r=!0}},[e,t,n]),r}function ht(e){let{page:t,matches:n}=e,r=a(e,p),s=fe(),{manifest:o,routeModules:l}=at(),{basename:c}=rt(),{loaderData:u,matches:d}=it(),f=i.useMemo(()=>$e(t,n,d,o,s,"data"),[t,n,d,o,s]),m=i.useMemo(()=>$e(t,n,d,o,s,"assets"),[t,n,d,o,s]),g=i.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let e=new Set,r=!1;if(n.forEach(t=>{var n;let i=o.routes[t.route.id];i&&i.hasLoader&&(!f.some(e=>e.route.id===t.route.id)&&t.route.id in u&&null!==(n=l[t.route.id])&&void 0!==n&&n.shouldRevalidate||i.hasClientLoader?r=!0:e.add(t.route.id))}),0===e.size)return[];let i=Je(t,c,"data");return r&&e.size>0&&i.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[i.pathname+i.search]},[c,u,s,o,f,n,t,l]),y=i.useMemo(()=>et(m,o),[m,o]),v=ut(m);return i.createElement(i.Fragment,null,g.map(e=>i.createElement("link",h({key:e,rel:"prefetch",as:"fetch",href:e},r))),y.map(e=>i.createElement("link",h({key:e,rel:"modulepreload",href:e},r))),v.map(e=>{let{key:t,link:n}=e;return i.createElement("link",h({key:t,nonce:r.nonce},n))}))}var dt=!1;function ft(e){let{manifest:t,serverHandoffString:n,isSpaMode:r,renderMeta:s,routeDiscovery:o,ssr:l}=at(),{router:c,static:u,staticContext:f}=rt(),{matches:p}=it(),m=i.useContext(ie),g=nt(o,l);s&&(s.didRenderScripts=!0);let y=lt(p,null,r);i.useEffect(()=>{dt=!0},[]);let v=i.useMemo(()=>{var r;if(m)return null;let s=f?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",o=u?"".concat(null!==(r=t.hmr)&&void 0!==r&&r.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(y.map((e,n)=>{let r="route".concat(n),i=t.routes[e.route.id];Ke(i,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:s,clientLoaderModule:a,clientMiddlewareModule:o,hydrateFallbackModule:l,module:c}=i,u=[...s?[{module:s,varName:"".concat(r,"_clientAction")}]:[],...a?[{module:a,varName:"".concat(r,"_clientLoader")}]:[],...o?[{module:o,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=a(e,d),i=new Set(t.state.matches.map(e=>e.route.id)),s=t.state.location.pathname.split("/").filter(Boolean),o=["/"];for(s.pop();s.length>0;)o.push("/".concat(s.join("/"))),s.pop();o.forEach(e=>{let n=N(t.routes,e,t.basename);n&&n.forEach(e=>i.add(e.route.id))});let l=[...i].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return h(h({},r),{},{routes:l,sri:!!n||void 0})}(t,c),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(y.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return i.createElement(i.Fragment,null,i.createElement("script",h(h({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:s},type:void 0})),i.createElement("script",h(h({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:o},type:"module",async:!0})))},[]),b=dt||m?[]:(w=t.entry.imports.concat(et(y,t,{includeHydrateFallback:!0})),[...new Set(w)]);var w;let x="object"===typeof t.sri?t.sri:{};return De(!m,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),dt||m?null:i.createElement(i.Fragment,null,"object"===typeof t.sri?i.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:x})}}):null,g?null:i.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:x[t.url],suppressHydrationWarning:!0}),i.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:x[t.entry.module],suppressHydrationWarning:!0}),b.map(t=>i.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:x[t],suppressHydrationWarning:!0})),v)}function pt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}i.Component;function mt(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let r,s=i.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if($(t))return i.createElement(gt,{title:"Unhandled Thrown Response!"},i.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),s);if(t instanceof Error)r=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);r=new Error(e)}return i.createElement(gt,{title:"Application Error!",isOutsideRemixApp:n},i.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),i.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},r.stack),s)}function gt(e){var t;let{title:n,renderScripts:r,isOutsideRemixApp:s,children:a}=e,{routeModules:o}=at();return null!==(t=o.root)&&void 0!==t&&t.Layout&&!s?a:i.createElement("html",{lang:"en"},i.createElement("head",null,i.createElement("meta",{charSet:"utf-8"}),i.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),i.createElement("title",null,n)),i.createElement("body",null,i.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},a,r?i.createElement(ft,null):null)))}var yt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{yt&&(window.__reactRouterVersion="7.9.4")}catch(zR){}function vt(e){let{basename:t,children:n,window:r}=e,s=i.useRef();null==s.current&&(s.current=b({window:r,v5Compat:!0}));let a=s.current,[o,l]=i.useState({action:a.action,location:a.location}),c=i.useCallback(e=>{i.startTransition(()=>l(e))},[l]);return i.useLayoutEffect(()=>a.listen(c),[a,c]),i.createElement(Me,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:a})}var bt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wt=i.forwardRef(function(e,t){let n,{onClick:r,discover:s="render",prefetch:o="none",relative:l,reloadDocument:c,replace:u,state:d,target:f,to:p,preventScrollReset:g,viewTransition:y}=e,v=a(e,m),{basename:b}=i.useContext(le),E="string"===typeof p&&bt.test(p),A=!1;if("string"===typeof p&&E&&(n=p,yt))try{let e=new URL(window.location.href),t=p.startsWith("//")?new URL(e.protocol+p):new URL(p),n=G(t.pathname,b);t.origin===e.origin&&null!=n?p=n+t.search+t.hash:A=!0}catch(zR){x(!1,'<Link to="'.concat(p,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let S=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};w(de(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=i.useContext(le),{hash:s,pathname:a,search:o}=ve(e,{relative:t}),l=a;return"/"!==n&&(l="/"===a?n:J([n,a])),r.createHref({pathname:l,search:o,hash:s})}(p,{relative:l}),[C,T,N]=function(e,t){let n=i.useContext(st),[r,s]=i.useState(!1),[a,o]=i.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:d}=t,f=i.useRef(null);i.useEffect(()=>{if("render"===e&&o(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{o(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[e]),i.useEffect(()=>{if(r){let e=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(e)}}},[r]);let p=()=>{s(!0)},m=()=>{s(!1),o(!1)};return n?"intent"!==e?[a,f,{}]:[a,f,{onFocus:ot(l,p),onBlur:ot(c,m),onMouseEnter:ot(u,p),onMouseLeave:ot(h,m),onTouchStart:ot(d,p)}]:[!1,f,{}]}(o,v),I=function(e){let{target:t,replace:n,state:r,preventScrollReset:s,relative:a,viewTransition:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=ge(),c=fe(),u=ve(e,{relative:a});return i.useCallback(i=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(i,t)){i.preventDefault();let t=void 0!==n?n:k(c)===k(u);l(e,{replace:t,state:r,preventScrollReset:s,relative:a,viewTransition:o})}},[c,l,u,n,r,t,e,s,a,o])}(p,{replace:u,state:d,target:f,preventScrollReset:g,relative:l,viewTransition:y});let P=i.createElement("a",h(h(h({},v),N),{},{href:n||S,onClick:A||c?r:function(e){r&&r(e),e.defaultPrevented||I(e)},ref:pt(t,T),target:f,"data-discover":E||"render"!==s?void 0:"true"}));return C&&!E?i.createElement(i.Fragment,null,P,i.createElement(ct,{page:S})):P});wt.displayName="Link",i.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:s="",end:o=!1,style:l,to:c,viewTransition:u,children:d}=e,f=a(e,g),p=ve(c,{relative:f.relative}),m=fe(),y=i.useContext(re),{navigator:v,basename:b}=i.useContext(le),x=null!=y&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.useContext(se);w(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=At("useViewTransitionState"),s=ve(e,{relative:t});if(!n.isTransitioning)return!1;let a=G(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=G(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=z(s.pathname,o)||null!=z(s.pathname,a)}(p)&&!0===u,E=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,A=m.pathname,k=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;r||(A=A.toLowerCase(),k=k?k.toLowerCase():null,E=E.toLowerCase()),k&&b&&(k=G(k,b)||k);const S="/"!==E&&E.endsWith("/")?E.length-1:E.length;let C,T=A===E||!o&&A.startsWith(E)&&"/"===A.charAt(S),N=null!=k&&(k===E||!o&&k.startsWith(E)&&"/"===k.charAt(E.length)),I={isActive:T,isPending:N,isTransitioning:x},P=T?n:void 0;C="function"===typeof s?s(I):[s,T?"active":null,N?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let _="function"===typeof l?l(I):l;return i.createElement(wt,h(h({},f),{},{"aria-current":P,className:C,ref:t,style:_,to:c,viewTransition:u}),"function"===typeof d?d(I):d)}).displayName="NavLink";var xt=i.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:r,navigate:s,reloadDocument:o,replace:l,state:c,method:u=Ue,action:d,onSubmit:f,relative:p,preventScrollReset:m,viewTransition:g}=e,v=a(e,y),b=Tt(),x=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=i.useContext(le),r=i.useContext(ue);w(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),a=h({},ve(e||".",{relative:t})),o=fe();if(null==e){a.search=o.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();a.search=n?"?".concat(n):""}}e&&"."!==e||!s.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(a.pathname="/"===a.pathname?n:J([n,a.pathname]));return k(a)}(d,{relative:p}),E="get"===u.toLowerCase()?"get":"post",A="string"===typeof d&&bt.test(d);return i.createElement("form",h(h({ref:t,method:E,action:x,onSubmit:o?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||u;b(t||e.currentTarget,{fetcherKey:r,method:n,navigate:s,replace:l,state:c,relative:p,preventScrollReset:m,viewTransition:g})}},v),{},{"data-discover":A||"render"!==n?void 0:"true"}))});function Et(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function At(e){let t=i.useContext(ne);return w(t,Et(e)),t}function kt(e){x("undefined"!==typeof URLSearchParams,"You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=i.useRef(He(e)),n=i.useRef(!1),r=fe(),s=i.useMemo(()=>function(e,t){let n=He(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}(r.search,n.current?null:t.current),[r.search]),a=ge(),o=i.useCallback((e,t)=>{const r=He("function"===typeof e?e(new URLSearchParams(s)):e);n.current=!0,a("?"+r,t)},[a,s]);return[s,o]}xt.displayName="Form";var St=0,Ct=()=>"__".concat(String(++St),"__");function Tt(){let{router:e}=At("useSubmit"),{basename:t}=i.useContext(le),n=Ne("useRouteId");return i.useCallback(async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:s,method:a,encType:o,formData:l,body:c}=Qe(r,t);if(!1===i.navigate){let t=i.fetcherKey||Ct();await e.fetch(t,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||a,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}const Nt=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},It=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var Pt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const _t=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],Rt=(0,i.forwardRef)((e,t)=>{let{color:n="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:l="",children:c,iconNode:u}=e,d=a(e,_t);return(0,i.createElement)("svg",h(h(h({ref:t},Pt),{},{width:r,height:r,stroke:n,strokeWidth:o?24*Number(s)/Number(r):s,className:It("lucide",l)},!c&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(d)&&{"aria-hidden":"true"}),d),[...u.map(e=>{let[t,n]=e;return(0,i.createElement)(t,n)}),...Array.isArray(c)?c:[c]])}),Dt=["className"],Ot=(e,t)=>{const n=(0,i.forwardRef)((n,r)=>{let{className:s}=n,o=a(n,Dt);return(0,i.createElement)(Rt,h({ref:r,iconNode:t,className:It("lucide-".concat((l=Nt(e),l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),s)},o));var l});return n.displayName=Nt(e),n},jt=Ot("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),Lt=Ot("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Mt=Ot("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Ft=Ot("stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]),Bt=Ot("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),Ut=Ot("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),zt=Ot("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Vt=Ot("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Ht=Ot("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),Gt=Ot("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),qt=Ot("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Wt=Ot("thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]),Qt=Ot("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function Kt(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Jt(e,t,n){Kt(e,t),t.set(e,n)}function Yt(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function Xt(e,t){return e.get(Yt(e,t))}function Zt(e,t,n){return e.set(Yt(e,t),n),n}function $t(e,t,n){const r=t.split("|").map(e=>e.trim());for(let s=0;s<r.length;s++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}const i=new Error("invalid value for type ".concat(t));throw i.code="INVALID_ARGUMENT",i.argument="value.".concat(n),i.value=e,i}async function en(e){const t=Object.keys(e),n=await Promise.all(t.map(t=>Promise.resolve(e[t])));return n.reduce((e,n,r)=>(e[t[r]]=n,e),{})}function tn(e,t,n){for(let r in t){let i=t[r];const s=n?n[r]:null;s&&$t(i,s,r),Object.defineProperty(e,r,{enumerable:!0,value:i,writable:!1})}}function nn(e,t){if(null==e)return"null";if(null==t&&(t=new Set),"object"===typeof e){if(t.has(e))return"[Circular]";t.add(e)}if(Array.isArray(e))return"[ "+e.map(e=>nn(e,t)).join(", ")+" ]";if(e instanceof Uint8Array){const t="0123456789abcdef";let n="0x";for(let r=0;r<e.length;r++)n+=t[e[r]>>4],n+=t[15&e[r]];return n}if("object"===typeof e&&"function"===typeof e.toJSON)return nn(e.toJSON(),t);switch(typeof e){case"boolean":case"number":case"symbol":return e.toString();case"bigint":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{const n=Object.keys(e);return n.sort(),"{ "+n.map(n=>"".concat(nn(n,t),": ").concat(nn(e[n],t))).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function rn(e,t){return e&&e.code===t}function sn(e){return rn(e,"CALL_EXCEPTION")}function an(e,t,n){let r,i=e;{const r=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error("value will overwrite populated values: ".concat(nn(n)));for(const e in n){if("shortMessage"===e)continue;const t=n[e];r.push(e+"="+nn(t))}}r.push("code=".concat(t)),r.push("version=".concat("6.15.0")),r.length&&(e+=" ("+r.join(", ")+")")}switch(t){case"INVALID_ARGUMENT":r=new TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":r=new RangeError(e);break;default:r=new Error(e)}return tn(r,{code:t}),n&&Object.assign(r,n),null==r.shortMessage&&tn(r,{shortMessage:i}),r}function on(e,t,n,r){if(!e)throw an(t,n,r)}function ln(e,t,n,r){on(e,t,"INVALID_ARGUMENT",{argument:n,value:r})}function cn(e,t,n){null==n&&(n=""),n&&(n=": "+n),on(e>=t,"missing argument"+n,"MISSING_ARGUMENT",{count:e,expectedCount:t}),on(e<=t,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:e,expectedCount:t})}const un=["NFD","NFC","NFKD","NFKC"].reduce((e,t)=>{try{if("test"!=="test".normalize(t))throw new Error("bad");if("NFD"===t){const e=String.fromCharCode(233).normalize("NFD");if(e!==String.fromCharCode(101,769))throw new Error("broken")}e.push(t)}catch(n){}return e},[]);function hn(e,t,n){if(null==n&&(n=""),e!==t){let e=n,t="new";n&&(e+=".",t+=" "+n),on(!1,"private constructor; use ".concat(e,"from* methods"),"UNSUPPORTED_OPERATION",{operation:t})}}function dn(e,t){Kt(e,t),t.add(e)}function fn(e,t,n){if(e instanceof Uint8Array)return n?new Uint8Array(e):e;if("string"===typeof e&&e.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const t=new Uint8Array((e.length-2)/2);let n=2;for(let r=0;r<t.length;r++)t[r]=parseInt(e.substring(n,n+2),16),n+=2;return t}ln(!1,"invalid BytesLike value",t||"value",e)}function pn(e,t){return fn(e,t,!1)}function mn(e,t){return fn(e,t,!0)}function gn(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(("number"!==typeof t||e.length===2+2*t)&&(!0!==t||e.length%2===0))}function yn(e){return gn(e,!0)||e instanceof Uint8Array}const vn="0123456789abcdef";function bn(e){const t=pn(e);let n="0x";for(let r=0;r<t.length;r++){const e=t[r];n+=vn[(240&e)>>4]+vn[15&e]}return n}function wn(e){return"0x"+e.map(e=>bn(e).substring(2)).join("")}function xn(e){return gn(e,!0)?(e.length-2)/2:pn(e).length}function En(e,t,n){const r=pn(e);return null!=n&&n>r.length&&on(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),bn(r.slice(null==t?0:t,null==n?r.length:n))}function An(e,t,n){const r=pn(e);on(t>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:t,offset:t+1});const i=new Uint8Array(t);return i.fill(0),n?i.set(r,t-r.length):i.set(r,0),bn(i)}function kn(e,t){return An(e,t,!0)}const Sn=BigInt(0),Cn=BigInt(1),Tn=9007199254740991;function Nn(e,t){let n=Pn(e,"value");const r=BigInt(On(t,"width")),i=Cn<<r-Cn;if(n<Sn){n=-n,on(n<=i,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e});return(~n&(Cn<<r)-Cn)+Cn}return on(n<i,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),n}function In(e,t){const n=_n(e,"value"),r=BigInt(On(t,"bits"));return n&(Cn<<r)-Cn}function Pn(e,t){switch(typeof e){case"bigint":return e;case"number":return ln(Number.isInteger(e),"underflow",t||"value",e),ln(e>=-Tn&&e<=Tn,"overflow",t||"value",e),BigInt(e);case"string":try{if(""===e)throw new Error("empty string");return"-"===e[0]&&"-"!==e[1]?-BigInt(e.substring(1)):BigInt(e)}catch(zR){ln(!1,"invalid BigNumberish string: ".concat(zR.message),t||"value",e)}}ln(!1,"invalid BigNumberish value",t||"value",e)}function _n(e,t){const n=Pn(e,t);return on(n>=Sn,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),n}const Rn="0123456789abcdef";function Dn(e){if(e instanceof Uint8Array){let t="0x0";for(const n of e)t+=Rn[n>>4],t+=Rn[15&n];return BigInt(t)}return Pn(e)}function On(e,t){switch(typeof e){case"bigint":return ln(e>=-Tn&&e<=Tn,"overflow",t||"value",e),Number(e);case"number":return ln(Number.isInteger(e),"underflow",t||"value",e),ln(e>=-Tn&&e<=Tn,"overflow",t||"value",e),e;case"string":try{if(""===e)throw new Error("empty string");return On(BigInt(e),t)}catch(zR){ln(!1,"invalid numeric string: ".concat(zR.message),t||"value",e)}}ln(!1,"invalid numeric value",t||"value",e)}function jn(e,t){let n=_n(e,"value").toString(16);if(null==t)n.length%2&&(n="0"+n);else{const r=On(t,"width");for(on(2*r>=n.length,"value exceeds width (".concat(r," bytes)"),"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});n.length<2*r;)n="0"+n}return"0x"+n}function Ln(e){const t=_n(e,"value");if(t===Sn)return new Uint8Array([]);let n=t.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let i=0;i<r.length;i++){const e=2*i;r[i]=parseInt(n.substring(e,e+2),16)}return r}function Mn(e){let t=bn(yn(e)?e:Ln(e)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return""===t&&(t="0"),"0x"+t}const Fn=32,Bn=new Uint8Array(Fn),Un=["then"],zn={},Vn=new WeakMap;function Hn(e){return Vn.get(e)}function Gn(e,t){Vn.set(e,t)}function qn(e,t){const n=new Error("deferred error during ABI decoding triggered accessing ".concat(e));throw n.error=t,n}function Wn(e,t,n){return e.indexOf(null)>=0?t.map((e,t)=>e instanceof Kn?Wn(Hn(e),e,n):e):e.reduce((e,r,i)=>{let s=t.getValue(r);return r in e||(n&&s instanceof Kn&&(s=Wn(Hn(s),s,n)),e[r]=s),e},{})}var Qn=new WeakMap;class Kn extends Array{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t[0];let i=t[1],s=(t[2]||[]).slice(),a=!0;r!==zn&&(i=t,s=[],a=!1),super(i.length),Jt(this,Qn,void 0),i.forEach((e,t)=>{this[t]=e});const o=s.reduce((e,t)=>("string"===typeof t&&e.set(t,(e.get(t)||0)+1),e),new Map);if(Gn(this,Object.freeze(i.map((e,t)=>{const n=s[t];return null!=n&&1===o.get(n)?n:null}))),Zt(Qn,this,[]),null==Xt(Qn,this)&&Xt(Qn,this),!a)return;Object.freeze(this);const l=new Proxy(this,{get:(e,t,n)=>{if("string"===typeof t){if(t.match(/^[0-9]+$/)){const n=On(t,"%index");if(n<0||n>=this.length)throw new RangeError("out of result range");const r=e[n];return r instanceof Error&&qn("index ".concat(n),r),r}if(Un.indexOf(t)>=0)return Reflect.get(e,t,n);const r=e[t];if(r instanceof Function)return function(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];return r.apply(this===n?e:this,i)};if(!(t in e))return e.getValue.apply(this===n?e:this,[t])}return Reflect.get(e,t,n)}});return Gn(l,Hn(this)),l}toArray(e){const t=[];return this.forEach((n,r)=>{n instanceof Error&&qn("index ".concat(r),n),e&&n instanceof Kn&&(n=n.toArray(e)),t.push(n)}),t}toObject(e){const t=Hn(this);return t.reduce((n,r,i)=>(on(null!=r,"value at index ".concat(i," unnamed"),"UNSUPPORTED_OPERATION",{operation:"toObject()"}),Wn(t,this,e)),{})}slice(e,t){null==e&&(e=0),e<0&&(e+=this.length)<0&&(e=0),null==t&&(t=this.length),t<0&&(t+=this.length)<0&&(t=0),t>this.length&&(t=this.length);const n=Hn(this),r=[],i=[];for(let s=e;s<t;s++)r.push(this[s]),i.push(n[s]);return new Kn(zn,r,i)}filter(e,t){const n=Hn(this),r=[],i=[];for(let s=0;s<this.length;s++){const a=this[s];a instanceof Error&&qn("index ".concat(s),a),e.call(t,a,s,this)&&(r.push(a),i.push(n[s]))}return new Kn(zn,r,i)}map(e,t){const n=[];for(let r=0;r<this.length;r++){const i=this[r];i instanceof Error&&qn("index ".concat(r),i),n.push(e.call(t,i,r,this))}return n}getValue(e){const t=Hn(this).indexOf(e);if(-1===t)return;const n=this[t];return n instanceof Error&&qn("property ".concat(JSON.stringify(e)),n.error),n}static fromItems(e,t){return new Kn(zn,e,t)}}function Jn(e){let t=Ln(e);return on(t.length<=Fn,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:Fn,offset:t.length}),t.length!==Fn&&(t=mn(wn([Bn.slice(t.length%Fn),t]))),t}class Yn{constructor(e,t,n,r){c(this,"name",void 0),c(this,"type",void 0),c(this,"localName",void 0),c(this,"dynamic",void 0),tn(this,{name:e,type:t,localName:n,dynamic:r},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){ln(!1,e,this.localName,t)}}var Xn=new WeakMap,Zn=new WeakMap,$n=new WeakSet;class er{constructor(){dn(this,$n),Jt(this,Xn,void 0),Jt(this,Zn,void 0),Zt(Xn,this,[]),Zt(Zn,this,0)}get data(){return wn(Xt(Xn,this))}get length(){return Xt(Zn,this)}appendWriter(e){return Yt($n,this,tr).call(this,mn(e.data))}writeBytes(e){let t=mn(e);const n=t.length%Fn;return n&&(t=mn(wn([t,Bn.slice(n)]))),Yt($n,this,tr).call(this,t)}writeValue(e){return Yt($n,this,tr).call(this,Jn(e))}writeUpdatableValue(){const e=Xt(Xn,this).length;return Xt(Xn,this).push(Bn),Zt(Zn,this,Xt(Zn,this)+Fn),t=>{Xt(Xn,this)[e]=Jn(t)}}}function tr(e){return Xt(Xn,this).push(e),Zt(Zn,this,Xt(Zn,this)+e.length),e.length}var nr=new WeakMap,rr=new WeakMap,ir=new WeakMap,sr=new WeakMap,ar=new WeakMap,or=new WeakSet;class lr{constructor(e,t,n){dn(this,or),c(this,"allowLoose",void 0),Jt(this,nr,void 0),Jt(this,rr,void 0),Jt(this,ir,void 0),Jt(this,sr,void 0),Jt(this,ar,void 0),tn(this,{allowLoose:!!t}),Zt(nr,this,mn(e)),Zt(ir,this,0),Zt(sr,this,null),Zt(ar,this,null!=n?n:1024),Zt(rr,this,0)}get data(){return bn(Xt(nr,this))}get dataLength(){return Xt(nr,this).length}get consumed(){return Xt(rr,this)}get bytes(){return new Uint8Array(Xt(nr,this))}subReader(e){const t=new lr(Xt(nr,this).slice(Xt(rr,this)+e),this.allowLoose,Xt(ar,this));return Zt(sr,t,this),t}readBytes(e,t){let n=Yt(or,this,ur).call(this,0,e,!!t);return Yt(or,this,cr).call(this,e),Zt(rr,this,Xt(rr,this)+n.length),n.slice(0,e)}readValue(){return Dn(this.readBytes(Fn))}readIndex(){return On(Dn(this.readBytes(Fn)))}}function cr(e){var t;if(Xt(sr,this))return Yt(or,t=Xt(sr,this),cr).call(t,e);Zt(ir,this,Xt(ir,this)+e),on(Xt(ar,this)<1||Xt(ir,this)<=Xt(ar,this)*this.dataLength,"compressed ABI data exceeds inflation ratio of ".concat(Xt(ar,this)," ( see: https://github.com/ethers-io/ethers.js/issues/4537 )"),"BUFFER_OVERRUN",{buffer:mn(Xt(nr,this)),offset:Xt(rr,this),length:e,info:{bytesRead:Xt(ir,this),dataLength:this.dataLength}})}function ur(e,t,n){let r=Math.ceil(t/Fn)*Fn;return Xt(rr,this)+r>Xt(nr,this).length&&(this.allowLoose&&n&&Xt(rr,this)+t<=Xt(nr,this).length?r=t:on(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:mn(Xt(nr,this)),length:Xt(nr,this).length,offset:Xt(rr,this)+r})),Xt(nr,this).slice(Xt(rr,this),Xt(rr,this)+r)}function hr(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("Wrong positive integer: ".concat(e))}function dr(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error("Expected Uint8Array of length ".concat(n,", not of length=").concat(e.length))}function fr(e){if("function"!==typeof e||"function"!==typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");hr(e.outputLen),hr(e.blockLen)}function pr(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function mr(e,t){dr(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least ".concat(n))}const gr=BigInt(2**32-1),yr=BigInt(32);function vr(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{h:Number(e&gr),l:Number(e>>yr&gr)}:{h:0|Number(e>>yr&gr),l:0|Number(e&gr)}}function br(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:a}=vr(e[i],t);[n[i],r[i]]=[s,a]}return[n,r]}const wr=(e,t,n)=>e<<n|t>>>32-n,xr=(e,t,n)=>t<<n|e>>>32-n,Er=(e,t,n)=>t<<n-32|e>>>64-n,Ar=(e,t,n)=>e<<n-32|t>>>64-n;const kr={fromBig:vr,split:br,toBig:(e,t)=>BigInt(e>>>0)<<yr|BigInt(t>>>0),shrSH:(e,t,n)=>e>>>n,shrSL:(e,t,n)=>e<<32-n|t>>>n,rotrSH:(e,t,n)=>e>>>n|t<<32-n,rotrSL:(e,t,n)=>e<<32-n|t>>>n,rotrBH:(e,t,n)=>e<<64-n|t>>>n-32,rotrBL:(e,t,n)=>e>>>n-32|t<<64-n,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:wr,rotlSL:xr,rotlBH:Er,rotlBL:Ar,add:function(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:0|i}},add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,r)=>t+n+r+(e/2**32|0)|0,add4L:(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),add4H:(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0,add5H:(e,t,n,r,i,s)=>t+n+r+i+s+(e/2**32|0)|0,add5L:(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0)},Sr="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,Cr=e=>e instanceof Uint8Array,Tr=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Nr=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function Ir(e){if("string"===typeof e&&(e=function(e){if("string"!==typeof e)throw new Error("utf8ToBytes expected string, got ".concat(typeof e));return new Uint8Array((new TextEncoder).encode(e))}(e)),!Cr(e))throw new Error("expected Uint8Array, got ".concat(typeof e));return e}class Pr{clone(){return this._cloneInto()}}function _r(e){const t=t=>e().update(Ir(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function Rr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(Sr&&"function"===typeof Sr.getRandomValues)return Sr.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const[Dr,Or,jr]=[[],[],[]],Lr=BigInt(0),Mr=BigInt(1),Fr=BigInt(2),Br=BigInt(7),Ur=BigInt(256),zr=BigInt(113);for(let VR=0,HR=Mr,GR=1,qR=0;VR<24;VR++){[GR,qR]=[qR,(2*GR+3*qR)%5],Dr.push(2*(5*qR+GR)),Or.push((VR+1)*(VR+2)/2%64);let e=Lr;for(let t=0;t<7;t++)HR=(HR<<Mr^(HR>>Br)*zr)%Ur,HR&Fr&&(e^=Mr<<(Mr<<BigInt(t))-Mr);jr.push(e)}const[Vr,Hr]=br(jr,!0),Gr=(e,t,n)=>n>32?Er(e,t,n):wr(e,t,n),qr=(e,t,n)=>n>32?Ar(e,t,n):xr(e,t,n);class Wr extends Pr{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:24;if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=r,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,hr(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var s;this.state=new Uint8Array(200),this.state32=(s=this.state,new Uint32Array(s.buffer,s.byteOffset,Math.floor(s.byteLength/4)))}keccak(){!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24;const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let r=0;r<10;r++)n[r]=e[r]^e[r+10]^e[r+20]^e[r+30]^e[r+40];for(let r=0;r<10;r+=2){const t=(r+8)%10,i=(r+2)%10,s=n[i],a=n[i+1],o=Gr(s,a,1)^n[t],l=qr(s,a,1)^n[t+1];for(let n=0;n<50;n+=10)e[r+n]^=o,e[r+n+1]^=l}let t=e[2],i=e[3];for(let n=0;n<24;n++){const r=Or[n],s=Gr(t,i,r),a=qr(t,i,r),o=Dr[n];t=e[o],i=e[o+1],e[o]=s,e[o+1]=a}for(let r=0;r<50;r+=10){for(let t=0;t<10;t++)n[t]=e[r+t];for(let t=0;t<10;t++)e[r+t]^=~n[(t+2)%10]&n[(t+4)%10]}e[0]^=Vr[r],e[1]^=Hr[r]}n.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){pr(this);const{blockLen:t,state:n}=this,r=(e=Ir(e)).length;for(let i=0;i<r;){const s=Math.min(t-this.pos,r-i);for(let t=0;t<s;t++)n[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:r}=this;e[n]^=t,0!==(128&t)&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){pr(this,!1),dr(e),this.finish();const t=this.state,{blockLen:n}=this;for(let r=0,i=e.length;r<i;){this.posOut>=n&&this.keccak();const s=Math.min(n-this.posOut,i-r);e.set(t.subarray(this.posOut,this.posOut+s),r),this.posOut+=s,r+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return hr(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(mr(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:r,rounds:i,enableXOF:s}=this;return e||(e=new Wr(t,n,r,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=r,e.enableXOF=s,e.destroyed=this.destroyed,e}}const Qr=(e,t,n)=>_r(()=>new Wr(t,e,n)),Kr=Qr(1,136,32);let Jr=!1;const Yr=function(e){return Kr(e)};let Xr=Yr;function Zr(e){const t=pn(e,"data");return bn(Xr(t))}Zr._=Yr,Zr.lock=function(){Jr=!0},Zr.register=function(e){if(Jr)throw new TypeError("keccak256 is locked");Xr=e},Object.freeze(Zr);const $r=BigInt(0),ei=BigInt(36);function ti(e){const t=(e=e.toLowerCase()).substring(2).split(""),n=new Uint8Array(40);for(let i=0;i<40;i++)n[i]=t[i].charCodeAt(0);const r=pn(Zr(n));for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&(t[i]=t[i].toUpperCase()),(15&r[i>>1])>=8&&(t[i+1]=t[i+1].toUpperCase());return"0x"+t.join("")}const ni={};for(let VR=0;VR<10;VR++)ni[String(VR)]=String(VR);for(let VR=0;VR<26;VR++)ni[String.fromCharCode(65+VR)]=String(10+VR);function ri(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map(e=>ni[e]).join("");for(;t.length>=15;){let e=t.substring(0,15);t=parseInt(e,10)%97+t.substring(e.length)}let n=String(98-parseInt(t,10)%97);for(;n.length<2;)n="0"+n;return n}const ii=function(){const e={};for(let t=0;t<36;t++){e["0123456789abcdefghijklmnopqrstuvwxyz"[t]]=BigInt(t)}return e}();function si(e){if(ln("string"===typeof e,"invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);const t=ti(e);return ln(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){ln(e.substring(2,4)===ri(e),"bad icap checksum","address",e);let t=function(e){e=e.toLowerCase();let t=$r;for(let n=0;n<e.length;n++)t=t*ei+ii[e[n]];return t}(e.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return ti("0x"+t)}ln(!1,"invalid address","address",e)}const ai={};function oi(e,t){let n=!1;return t<0&&(n=!0,t*=-1),new hi(ai,"".concat(n?"":"u","int").concat(t),e,{signed:n,width:t})}function li(e,t){return new hi(ai,"bytes".concat(t||""),e,{size:t})}const ci=Symbol.for("_ethers_typed");var ui=new WeakMap;class hi{constructor(e,t,n,r){c(this,"type",void 0),c(this,"value",void 0),Jt(this,ui,void 0),c(this,"_typedSymbol",void 0),null==r&&(r=null),hn(ai,e,"Typed"),tn(this,{_typedSymbol:ci,type:t,value:n}),Zt(ui,this,r),this.format()}format(){if("array"===this.type)throw new Error("");if("dynamicArray"===this.type)throw new Error("");return"tuple"===this.type?"tuple(".concat(this.value.map(e=>e.format()).join(","),")"):this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return Xt(ui,this)}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===Xt(ui,this)?-1:!1===Xt(ui,this)?this.value.length:null}static from(e,t){return new hi(ai,e,t)}static uint8(e){return oi(e,8)}static uint16(e){return oi(e,16)}static uint24(e){return oi(e,24)}static uint32(e){return oi(e,32)}static uint40(e){return oi(e,40)}static uint48(e){return oi(e,48)}static uint56(e){return oi(e,56)}static uint64(e){return oi(e,64)}static uint72(e){return oi(e,72)}static uint80(e){return oi(e,80)}static uint88(e){return oi(e,88)}static uint96(e){return oi(e,96)}static uint104(e){return oi(e,104)}static uint112(e){return oi(e,112)}static uint120(e){return oi(e,120)}static uint128(e){return oi(e,128)}static uint136(e){return oi(e,136)}static uint144(e){return oi(e,144)}static uint152(e){return oi(e,152)}static uint160(e){return oi(e,160)}static uint168(e){return oi(e,168)}static uint176(e){return oi(e,176)}static uint184(e){return oi(e,184)}static uint192(e){return oi(e,192)}static uint200(e){return oi(e,200)}static uint208(e){return oi(e,208)}static uint216(e){return oi(e,216)}static uint224(e){return oi(e,224)}static uint232(e){return oi(e,232)}static uint240(e){return oi(e,240)}static uint248(e){return oi(e,248)}static uint256(e){return oi(e,256)}static uint(e){return oi(e,256)}static int8(e){return oi(e,-8)}static int16(e){return oi(e,-16)}static int24(e){return oi(e,-24)}static int32(e){return oi(e,-32)}static int40(e){return oi(e,-40)}static int48(e){return oi(e,-48)}static int56(e){return oi(e,-56)}static int64(e){return oi(e,-64)}static int72(e){return oi(e,-72)}static int80(e){return oi(e,-80)}static int88(e){return oi(e,-88)}static int96(e){return oi(e,-96)}static int104(e){return oi(e,-104)}static int112(e){return oi(e,-112)}static int120(e){return oi(e,-120)}static int128(e){return oi(e,-128)}static int136(e){return oi(e,-136)}static int144(e){return oi(e,-144)}static int152(e){return oi(e,-152)}static int160(e){return oi(e,-160)}static int168(e){return oi(e,-168)}static int176(e){return oi(e,-176)}static int184(e){return oi(e,-184)}static int192(e){return oi(e,-192)}static int200(e){return oi(e,-200)}static int208(e){return oi(e,-208)}static int216(e){return oi(e,-216)}static int224(e){return oi(e,-224)}static int232(e){return oi(e,-232)}static int240(e){return oi(e,-240)}static int248(e){return oi(e,-248)}static int256(e){return oi(e,-256)}static int(e){return oi(e,-256)}static bytes1(e){return li(e,1)}static bytes2(e){return li(e,2)}static bytes3(e){return li(e,3)}static bytes4(e){return li(e,4)}static bytes5(e){return li(e,5)}static bytes6(e){return li(e,6)}static bytes7(e){return li(e,7)}static bytes8(e){return li(e,8)}static bytes9(e){return li(e,9)}static bytes10(e){return li(e,10)}static bytes11(e){return li(e,11)}static bytes12(e){return li(e,12)}static bytes13(e){return li(e,13)}static bytes14(e){return li(e,14)}static bytes15(e){return li(e,15)}static bytes16(e){return li(e,16)}static bytes17(e){return li(e,17)}static bytes18(e){return li(e,18)}static bytes19(e){return li(e,19)}static bytes20(e){return li(e,20)}static bytes21(e){return li(e,21)}static bytes22(e){return li(e,22)}static bytes23(e){return li(e,23)}static bytes24(e){return li(e,24)}static bytes25(e){return li(e,25)}static bytes26(e){return li(e,26)}static bytes27(e){return li(e,27)}static bytes28(e){return li(e,28)}static bytes29(e){return li(e,29)}static bytes30(e){return li(e,30)}static bytes31(e){return li(e,31)}static bytes32(e){return li(e,32)}static address(e){return new hi(ai,"address",e)}static bool(e){return new hi(ai,"bool",!!e)}static bytes(e){return new hi(ai,"bytes",e)}static string(e){return new hi(ai,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new hi(ai,"overrides",Object.assign({},e))}static isTyped(e){return e&&"object"===typeof e&&"_typedSymbol"in e&&e._typedSymbol===ci}static dereference(e,t){if(hi.isTyped(e)){if(e.type!==t)throw new Error("invalid type: expecetd ".concat(t,", got ").concat(e.type));return e.value}return e}}class di extends Yn{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let n=hi.dereference(t,"string");try{n=si(n)}catch(r){return this._throwError(r.message,t)}return e.writeValue(n)}decode(e){return si(jn(e.readValue(),20))}}class fi extends Yn{constructor(e){super(e.name,e.type,"_",e.dynamic),c(this,"coder",void 0),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}function pi(e,t,n){let r=[];if(Array.isArray(n))r=n;else if(n&&"object"===typeof n){let e={};r=t.map(t=>{const r=t.localName;return on(r,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:n}),on(!e[r],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:n}),e[r]=!0,n[r]})}else ln(!1,"invalid tuple value","tuple",n);ln(t.length===r.length,"types/value length mismatch","tuple",n);let i=new er,s=new er,a=[];t.forEach((e,t)=>{let n=r[t];if(e.dynamic){let t=s.length;e.encode(s,n);let r=i.writeUpdatableValue();a.push(e=>{r(e+t)})}else e.encode(i,n)}),a.forEach(e=>{e(i.length)});let o=e.appendWriter(i);return o+=e.appendWriter(s),o}function mi(e,t){let n=[],r=[],i=e.subReader(0);return t.forEach(t=>{let s=null;if(t.dynamic){let n=e.readIndex(),r=i.subReader(n);try{s=t.decode(r)}catch(a){if(rn(a,"BUFFER_OVERRUN"))throw a;s=a,s.baseType=t.name,s.name=t.localName,s.type=t.type}}else try{s=t.decode(e)}catch(a){if(rn(a,"BUFFER_OVERRUN"))throw a;s=a,s.baseType=t.name,s.name=t.localName,s.type=t.type}if(void 0==s)throw new Error("investigate");n.push(s),r.push(t.localName||null)}),Kn.fromItems(n,r)}class gi extends Yn{constructor(e,t,n){super("array",e.type+"["+(t>=0?t:"")+"]",n,-1===t||e.dynamic),c(this,"coder",void 0),c(this,"length",void 0),tn(this,{coder:e,length:t})}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let n=0;n<this.length;n++)t.push(e);return t}encode(e,t){const n=hi.dereference(t,"array");Array.isArray(n)||this._throwError("expected array value",n);let r=this.length;-1===r&&(r=n.length,e.writeValue(n.length)),cn(n.length,r,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let s=0;s<n.length;s++)i.push(this.coder);return pi(e,i,n)}decode(e){let t=this.length;-1===t&&(t=e.readIndex(),on(t*Fn<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*Fn,length:e.dataLength}));let n=[];for(let r=0;r<t;r++)n.push(new fi(this.coder));return mi(e,n)}}class yi extends Yn{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const n=hi.dereference(t,"bool");return e.writeValue(n?1:0)}decode(e){return!!e.readValue()}}class vi extends Yn{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=mn(t);let n=e.writeValue(t.length);return n+=e.writeBytes(t),n}decode(e){return e.readBytes(e.readIndex(),!0)}}class bi extends vi{constructor(e){super("bytes",e)}decode(e){return bn(super.decode(e))}}class wi extends Yn{constructor(e,t){let n="bytes"+String(e);super(n,n,t,!1),c(this,"size",void 0),tn(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let n=mn(hi.dereference(t,this.type));return n.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(n)}decode(e){return bn(e.readBytes(this.size))}}const xi=new Uint8Array([]);class Ei extends Yn{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes(xi)}decode(e){return e.readBytes(0),null}}const Ai=BigInt(0),ki=BigInt(1),Si=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class Ci extends Yn{constructor(e,t,n){const r=(t?"int":"uint")+8*e;super(r,r,n,!1),c(this,"size",void 0),c(this,"signed",void 0),tn(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let n=Pn(hi.dereference(t,this.type)),r=In(Si,256);if(this.signed){let e=In(r,8*this.size-1);(n>e||n<-(e+ki))&&this._throwError("value out-of-bounds",t),n=Nn(n,256)}else(n<Ai||n>In(r,8*this.size))&&this._throwError("value out-of-bounds",t);return e.writeValue(n)}decode(e){let t=In(e.readValue(),8*this.size);return this.signed&&(t=function(e,t){const n=_n(e,"value"),r=BigInt(On(t,"width"));if(on(n>>r===Sn,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e}),n>>r-Cn)return-((~n&(Cn<<r)-Cn)+Cn);return n}(t,8*this.size)),t}}function Ti(e,t,n,r,i){if("BAD_PREFIX"===e||"UNEXPECTED_CONTINUE"===e){let e=0;for(let r=t+1;r<n.length&&n[r]>>6===2;r++)e++;return e}return"OVERRUN"===e?n.length-t-1:0}const Ni=Object.freeze({error:function(e,t,n,r,i){ln(!1,"invalid codepoint at offset ".concat(t,"; ").concat(e),"bytes",n)},ignore:Ti,replace:function(e,t,n,r,i){return"OVERLONG"===e?(ln("number"===typeof i,"invalid bad code point for replacement","badCodepoint",i),r.push(i),0):(r.push(65533),Ti(e,t,n))}});function Ii(e,t){null==t&&(t=Ni.error);const n=pn(e,"bytes"),r=[];let i=0;for(;i<n.length;){const e=n[i++];if(e>>7===0){r.push(e);continue}let s=null,a=null;if(192===(224&e))s=1,a=127;else if(224===(240&e))s=2,a=2047;else{if(240!==(248&e)){i+=t(128===(192&e)?"UNEXPECTED_CONTINUE":"BAD_PREFIX",i-1,n,r);continue}s=3,a=65535}if(i-1+s>=n.length){i+=t("OVERRUN",i-1,n,r);continue}let o=e&(1<<8-s-1)-1;for(let l=0;l<s;l++){let e=n[i];if(128!=(192&e)){i+=t("MISSING_CONTINUE",i,n,r),o=null;break}o=o<<6|63&e,i++}null!==o&&(o>1114111?i+=t("OUT_OF_RANGE",i-1-s,n,r,o):o>=55296&&o<=57343?i+=t("UTF16_SURROGATE",i-1-s,n,r,o):o<=a?i+=t("OVERLONG",i-1-s,n,r,o):r.push(o))}return r}function Pi(e,t){ln("string"===typeof e,"invalid string value","str",e),null!=t&&(!function(e){on(un.indexOf(e)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:e}})}(t),e=e.normalize(t));let n=[];for(let r=0;r<e.length;r++){const t=e.charCodeAt(r);if(t<128)n.push(t);else if(t<2048)n.push(t>>6|192),n.push(63&t|128);else if(55296==(64512&t)){r++;const i=e.charCodeAt(r);ln(r<e.length&&56320===(64512&i),"invalid surrogate pair","str",e);const s=65536+((1023&t)<<10)+(1023&i);n.push(s>>18|240),n.push(s>>12&63|128),n.push(s>>6&63|128),n.push(63&s|128)}else n.push(t>>12|224),n.push(t>>6&63|128),n.push(63&t|128)}return new Uint8Array(n)}function _i(e,t){return Ii(e,t).map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e)))).join("")}class Ri extends vi{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Pi(hi.dereference(t,"string")))}decode(e){return _i(super.decode(e))}}class Di extends Yn{constructor(e,t){let n=!1;const r=[];e.forEach(e=>{e.dynamic&&(n=!0),r.push(e.type)});super("tuple","tuple("+r.join(",")+")",t,n),c(this,"coders",void 0),tn(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(t=>{e.push(t.defaultValue())});const t=this.coders.reduce((e,t)=>{const n=t.localName;return n&&(e[n]||(e[n]=0),e[n]++),e},{});return this.coders.forEach((n,r)=>{let i=n.localName;i&&1===t[i]&&("length"===i&&(i="_length"),null==e[i]&&(e[i]=e[r]))}),Object.freeze(e)}encode(e,t){const n=hi.dereference(t,"tuple");return pi(e,this.coders,n)}decode(e){return mi(e,this.coders)}}function Oi(e){return Zr(Pi(e))}var ji;function Li(e){const t=new Set;return e.forEach(e=>t.add(e)),Object.freeze(t)}const Mi=Li("external public payable override".split(" ")),Fi="constant external internal payable private public pure view override",Bi=Li(Fi.split(" ")),Ui="constructor error event fallback function receive struct",zi=Li(Ui.split(" ")),Vi="calldata memory storage payable indexed",Hi=Li(Vi.split(" ")),Gi=Li([Ui,Vi,"tuple returns",Fi].join(" ").split(" ")),qi={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Wi=new RegExp("^(\\s*)"),Qi=new RegExp("^([0-9]+)"),Ki=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Ji=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),Yi=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Xi=new WeakMap,Zi=new WeakMap,$i=new WeakSet;class es{get offset(){return Xt(Xi,this)}get length(){return Xt(Zi,this).length-Xt(Xi,this)}constructor(e){dn(this,$i),Jt(this,Xi,void 0),Jt(this,Zi,void 0),Zt(Xi,this,0),Zt(Zi,this,e.slice())}clone(){return new es(Xt(Zi,this))}reset(){Zt(Xi,this,0)}popKeyword(e){const t=this.peek();if("KEYWORD"!==t.type||!e.has(t.text))throw new Error("expected keyword ".concat(t.text));return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error("expected ".concat(e,"; got ").concat(t.type," ").concat(JSON.stringify(t.text)))}return this.pop().text}popParen(){const e=this.peek();if("OPEN_PAREN"!==e.type)throw new Error("bad start");const t=Yt($i,this,ts).call(this,Xt(Xi,this)+1,e.match+1);return Zt(Xi,this,e.match+1),t}popParams(){const e=this.peek();if("OPEN_PAREN"!==e.type)throw new Error("bad start");const t=[];for(;Xt(Xi,this)<e.match-1;){const e=this.peek().linkNext;t.push(Yt($i,this,ts).call(this,Xt(Xi,this)+1,e)),Zt(Xi,this,e)}return Zt(Xi,this,e.match+1),t}peek(){if(Xt(Xi,this)>=Xt(Zi,this).length)throw new Error("out-of-bounds");return Xt(Zi,this)[Xt(Xi,this)]}peekKeyword(e){const t=this.peekType("KEYWORD");return null!=t&&e.has(t)?t:null}peekType(e){if(0===this.length)return null;const t=this.peek();return t.type===e?t.text:null}pop(){var e;const t=this.peek();return Zt(Xi,this,(e=Xt(Xi,this),e++,e)),t}toString(){const e=[];for(let t=Xt(Xi,this);t<Xt(Zi,this).length;t++){const n=Xt(Zi,this)[t];e.push("".concat(n.type,":").concat(n.text))}return"<TokenString ".concat(e.join(" "),">")}}function ts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new ji(Xt(Zi,this).slice(e,t).map(t=>Object.freeze(Object.assign({},t,{match:t.match-e,linkBack:t.linkBack-e,linkNext:t.linkNext-e}))))}function ns(e){const t=[],n=t=>{const n=s<e.length?JSON.stringify(e[s]):"$EOI";throw new Error("invalid token ".concat(n," at ").concat(s,": ").concat(t))};let r=[],i=[],s=0;for(;s<e.length;){let a=e.substring(s),o=a.match(Wi);o&&(s+=o[1].length,a=e.substring(s));const l={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};t.push(l);let c=qi[a[0]]||"";if(c){if(l.type=c,l.text=a[0],s++,"OPEN_PAREN"===c)r.push(t.length-1),i.push(t.length-1);else if("CLOSE_PAREN"==c)0===r.length&&n("no matching open bracket"),l.match=r.pop(),t[l.match].match=t.length-1,l.depth--,l.linkBack=i.pop(),t[l.linkBack].linkNext=t.length-1;else if("COMMA"===c)l.linkBack=i.pop(),t[l.linkBack].linkNext=t.length-1,i.push(t.length-1);else if("OPEN_BRACKET"===c)l.type="BRACKET";else if("CLOSE_BRACKET"===c){let e=t.pop().text;if(t.length>0&&"NUMBER"===t[t.length-1].type){const n=t.pop().text;e=n+e,t[t.length-1].value=On(n)}if(0===t.length||"BRACKET"!==t[t.length-1].type)throw new Error("missing opening bracket");t[t.length-1].text+=e}}else if(o=a.match(Ki),o){if(l.text=o[1],s+=l.text.length,Gi.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(Yi)){l.type="TYPE";continue}l.type="ID"}else{if(o=a.match(Qi),!o)throw new Error("unexpected token ".concat(JSON.stringify(a[0])," at position ").concat(s));l.text=o[1],l.type="NUMBER",s+=l.text.length}}return new es(t.map(e=>Object.freeze(e)))}function rs(e,t){let n=[];for(const r in t.keys())e.has(r)&&n.push(r);if(n.length>1)throw new Error("conflicting types: ".concat(n.join(", ")))}function is(e,t){if(t.peekKeyword(zi)){const n=t.pop().text;if(n!==e)throw new Error("expected ".concat(e,", got ").concat(n))}return t.popType("ID")}function ss(e,t){const n=new Set;for(;;){const r=e.peekType("KEYWORD");if(null==r||t&&!t.has(r))break;if(e.pop(),n.has(r))throw new Error("duplicate keywords: ".concat(JSON.stringify(r)));n.add(r)}return Object.freeze(n)}function as(e){let t=ss(e,Bi);return rs(t,Li("constant payable nonpayable".split(" "))),rs(t,Li("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function os(e,t){return e.popParams().map(e=>Es.from(e,t))}function ls(e){if(e.peekType("AT")){if(e.pop(),e.peekType("NUMBER"))return Pn(e.pop().text);throw new Error("invalid gas")}return null}function cs(e){if(e.length)throw new Error("unexpected tokens at offset ".concat(e.offset,": ").concat(e.toString()))}ji=es;const us=new RegExp(/^(.*)\[([0-9]*)\]$/);function hs(e){const t=e.match(Yi);if(ln(t,"invalid type","type",e),"uint"===e)return"uint256";if("int"===e)return"int256";if(t[2]){const n=parseInt(t[2]);ln(0!==n&&n<=32,"invalid bytes length","type",e)}else if(t[3]){const n=parseInt(t[3]);ln(0!==n&&n<=256&&n%8===0,"invalid numeric width","type",e)}return e}const ds={},fs=Symbol.for("_ethers_internal"),ps="_ParamTypeInternal",ms="_ErrorInternal",gs="_EventInternal",ys="_ConstructorInternal",vs="_FallbackInternal",bs="_FunctionInternal",ws="_StructInternal";var xs=new WeakSet;class Es{constructor(e,t,n,r,i,s,a,o){if(dn(this,xs),c(this,"name",void 0),c(this,"type",void 0),c(this,"baseType",void 0),c(this,"indexed",void 0),c(this,"components",void 0),c(this,"arrayLength",void 0),c(this,"arrayChildren",void 0),hn(e,ds,"ParamType"),Object.defineProperty(this,fs,{value:ps}),s&&(s=Object.freeze(s.slice())),"array"===r){if(null==a||null==o)throw new Error("")}else if(null!=a||null!=o)throw new Error("");if("tuple"===r){if(null==s)throw new Error("")}else if(null!=s)throw new Error("");tn(this,{name:t,type:n,baseType:r,indexed:i,components:s,arrayLength:a,arrayChildren:o})}format(e){if(null==e&&(e="sighash"),"json"===e){const t=this.name||"";if(this.isArray()){const e=JSON.parse(this.arrayChildren.format("json"));return e.name=t,e.type+="[".concat(this.arrayLength<0?"":String(this.arrayLength),"]"),JSON.stringify(e)}const n={type:"tuple"===this.baseType?"tuple":this.type,name:t};return"boolean"===typeof this.indexed&&(n.indexed=this.indexed),this.isTuple()&&(n.components=this.components.map(t=>JSON.parse(t.format(e)))),JSON.stringify(n)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+="[".concat(this.arrayLength<0?"":String(this.arrayLength),"]")):this.isTuple()?t+="("+this.components.map(t=>t.format(e)).join("full"===e?", ":",")+")":t+=this.type,"sighash"!==e&&(!0===this.indexed&&(t+=" indexed"),"full"===e&&this.name&&(t+=" "+this.name)),t}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return e.map(e=>n.arrayChildren.walk(e,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const n=this;return e.map((e,r)=>n.components[r].walk(e,t))}return t(this.type,e)}async walkAsync(e,t){const n=[],r=[e];return Yt(xs,this,As).call(this,n,e,t,e=>{r[0]=e}),n.length&&await Promise.all(n),r[0]}static from(e,t){if(Es.isParamType(e))return e;if("string"===typeof e)try{return Es.from(ns(e),t)}catch(a){ln(!1,"invalid param type","obj",e)}else if(e instanceof es){let n="",r="",i=null;ss(e,Li(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(r="tuple",i=e.popParams().map(e=>Es.from(e)),n="tuple(".concat(i.map(e=>e.format()).join(","),")")):(n=hs(e.popType("TYPE")),r=n);let s=null,a=null;for(;e.length&&e.peekType("BRACKET");){const t=e.pop();s=new Es(ds,"",n,r,null,i,a,s),a=t.value,n+=t.text,r="array",i=null}let o=null;if(ss(e,Hi).has("indexed")){if(!t)throw new Error("");o=!0}const l=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new Es(ds,l,n,r,o,i,a,s)}const n=e.name;ln(!n||"string"===typeof n&&n.match(Ji),"invalid name","obj.name",n);let r=e.indexed;null!=r&&(ln(t,"parameter cannot be indexed","obj.indexed",e.indexed),r=!!r);let i=e.type,s=i.match(us);if(s){const t=parseInt(s[2]||"-1"),a=Es.from({type:s[1],components:e.components});return new Es(ds,n||"",i,"array",r,null,t,a)}if("tuple"===i||i.startsWith("tuple(")||i.startsWith("(")){const t=null!=e.components?e.components.map(e=>Es.from(e)):null;return new Es(ds,n||"",i,"tuple",r,t,null,null)}return i=hs(e.type),new Es(ds,n||"",i,i,r,null,null,null)}static isParamType(e){return e&&e[fs]===ps}}function As(e,t,n,r){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw new Error("array is wrong length");const i=this.arrayChildren,s=t.slice();return s.forEach((t,r)=>{Yt(xs,i,As).call(i,e,t,n,e=>{s[r]=e})}),void r(s)}if(this.isTuple()){const i=this.components;let s;if(Array.isArray(t))s=t.slice();else{if(null==t||"object"!==typeof t)throw new Error("invalid tuple value");s=i.map(e=>{if(!e.name)throw new Error("cannot use object value with unnamed components");if(!(e.name in t))throw new Error("missing value for component ".concat(e.name));return t[e.name]})}if(s.length!==this.components.length)throw new Error("array is wrong length");return s.forEach((t,r)=>{var a;Yt(xs,a=i[r],As).call(a,e,t,n,e=>{s[r]=e})}),void r(s)}const i=n(this.type,t);i.then?e.push(async function(){r(await i)}()):r(i)}class ks{constructor(e,t,n){c(this,"type",void 0),c(this,"inputs",void 0),hn(e,ds,"Fragment"),tn(this,{type:t,inputs:n=Object.freeze(n.slice())})}static from(e){if("string"===typeof e){try{ks.from(JSON.parse(e))}catch(zR){}return ks.from(ns(e))}if(e instanceof es){switch(e.peekKeyword(zi)){case"constructor":return Is.from(e);case"error":return Ts.from(e);case"event":return Ns.from(e);case"fallback":case"receive":return Ps.from(e);case"function":return _s.from(e);case"struct":return Rs.from(e)}}else if("object"===typeof e){switch(e.type){case"constructor":return Is.from(e);case"error":return Ts.from(e);case"event":return Ns.from(e);case"fallback":case"receive":return Ps.from(e);case"function":return _s.from(e);case"struct":return Rs.from(e)}on(!1,"unsupported type: ".concat(e.type),"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}ln(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return Is.isFragment(e)}static isError(e){return Ts.isFragment(e)}static isEvent(e){return Ns.isFragment(e)}static isFunction(e){return _s.isFragment(e)}static isStruct(e){return Rs.isFragment(e)}}class Ss extends ks{constructor(e,t,n,r){super(e,t,r),c(this,"name",void 0),ln("string"===typeof n&&n.match(Ji),"invalid identifier","name",n),r=Object.freeze(r.slice()),tn(this,{name:n})}}function Cs(e,t){return"("+t.map(t=>t.format(e)).join("full"===e?", ":",")+")"}class Ts extends Ss{constructor(e,t,n){super(e,"error",t,n),Object.defineProperty(this,fs,{value:ms})}get selector(){return Oi(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});const t=[];return"sighash"!==e&&t.push("error"),t.push(this.name+Cs(e,this.inputs)),t.join(" ")}static from(e){if(Ts.isFragment(e))return e;if("string"===typeof e)return Ts.from(ns(e));if(e instanceof es){const t=is("error",e),n=os(e);return cs(e),new Ts(ds,t,n)}return new Ts(ds,e.name,e.inputs?e.inputs.map(Es.from):[])}static isFragment(e){return e&&e[fs]===ms}}class Ns extends Ss{constructor(e,t,n,r){super(e,"event",t,n),c(this,"anonymous",void 0),Object.defineProperty(this,fs,{value:gs}),tn(this,{anonymous:r})}get topicHash(){return Oi(this.format("sighash"))}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});const t=[];return"sighash"!==e&&t.push("event"),t.push(this.name+Cs(e,this.inputs)),"sighash"!==e&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){t=(t||[]).map(e=>Es.from(e));return new Ns(ds,e,t,!1).topicHash}static from(e){if(Ns.isFragment(e))return e;if("string"===typeof e)try{return Ns.from(ns(e))}catch(t){ln(!1,"invalid event fragment","obj",e)}else if(e instanceof es){const t=is("event",e),n=os(e,!0),r=!!ss(e,Li(["anonymous"])).has("anonymous");return cs(e),new Ns(ds,t,n,r)}return new Ns(ds,e.name,e.inputs?e.inputs.map(e=>Es.from(e,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[fs]===gs}}class Is extends ks{constructor(e,t,n,r,i){super(e,t,n),c(this,"payable",void 0),c(this,"gas",void 0),Object.defineProperty(this,fs,{value:ys}),tn(this,{payable:r,gas:i})}format(e){if(on(null!=e&&"sighash"!==e,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),"json"===e)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});const t=["constructor".concat(Cs(e,this.inputs))];return this.payable&&t.push("payable"),null!=this.gas&&t.push("@".concat(this.gas.toString())),t.join(" ")}static from(e){if(Is.isFragment(e))return e;if("string"===typeof e)try{return Is.from(ns(e))}catch(t){ln(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof es){ss(e,Li(["constructor"]));const t=os(e),n=!!ss(e,Mi).has("payable"),r=ls(e);return cs(e),new Is(ds,"constructor",t,n,r)}return new Is(ds,"constructor",e.inputs?e.inputs.map(Es.from):[],!!e.payable,null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[fs]===ys}}class Ps extends ks{constructor(e,t,n){super(e,"fallback",t),c(this,"payable",void 0),Object.defineProperty(this,fs,{value:vs}),tn(this,{payable:n})}format(e){const t=0===this.inputs.length?"receive":"fallback";if("json"===e){const e=this.payable?"payable":"nonpayable";return JSON.stringify({type:t,stateMutability:e})}return"".concat(t,"()").concat(this.payable?" payable":"")}static from(e){if(Ps.isFragment(e))return e;if("string"===typeof e)try{return Ps.from(ns(e))}catch(t){ln(!1,"invalid fallback fragment","obj",e)}else if(e instanceof es){const t=e.toString();ln(e.peekKeyword(Li(["fallback","receive"])),"type must be fallback or receive","obj",t);if("receive"===e.popKeyword(Li(["fallback","receive"]))){const t=os(e);return ln(0===t.length,"receive cannot have arguments","obj.inputs",t),ss(e,Li(["payable"])),cs(e),new Ps(ds,[],!0)}let n=os(e);n.length?ln(1===n.length&&"bytes"===n[0].type,"invalid fallback inputs","obj.inputs",n.map(e=>e.format("minimal")).join(", ")):n=[Es.from("bytes")];const r=as(e);if(ln("nonpayable"===r||"payable"===r,"fallback cannot be constants","obj.stateMutability",r),ss(e,Li(["returns"])).has("returns")){const t=os(e);ln(1===t.length&&"bytes"===t[0].type,"invalid fallback outputs","obj.outputs",t.map(e=>e.format("minimal")).join(", "))}return cs(e),new Ps(ds,n,"payable"===r)}if("receive"===e.type)return new Ps(ds,[],!0);if("fallback"===e.type){const t=[Es.from("bytes")],n="payable"===e.stateMutability;return new Ps(ds,t,n)}ln(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[fs]===vs}}class _s extends Ss{constructor(e,t,n,r,i,s){super(e,"function",t,r),c(this,"constant",void 0),c(this,"outputs",void 0),c(this,"stateMutability",void 0),c(this,"payable",void 0),c(this,"gas",void 0),Object.defineProperty(this,fs,{value:bs});tn(this,{constant:"view"===n||"pure"===n,gas:s,outputs:i=Object.freeze(i.slice()),payable:"payable"===n,stateMutability:n})}get selector(){return Oi(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map(t=>JSON.parse(t.format(e))),outputs:this.outputs.map(t=>JSON.parse(t.format(e)))});const t=[];return"sighash"!==e&&t.push("function"),t.push(this.name+Cs(e,this.inputs)),"sighash"!==e&&("nonpayable"!==this.stateMutability&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(Cs(e,this.outputs))),null!=this.gas&&t.push("@".concat(this.gas.toString()))),t.join(" ")}static getSelector(e,t){t=(t||[]).map(e=>Es.from(e));return new _s(ds,e,"view",t,[],null).selector}static from(e){if(_s.isFragment(e))return e;if("string"===typeof e)try{return _s.from(ns(e))}catch(n){ln(!1,"invalid function fragment","obj",e)}else if(e instanceof es){const t=is("function",e),n=os(e),r=as(e);let i=[];ss(e,Li(["returns"])).has("returns")&&(i=os(e));const s=ls(e);return cs(e),new _s(ds,t,r,n,i,s)}let t=e.stateMutability;return null==t&&(t="payable","boolean"===typeof e.constant?(t="view",e.constant||(t="payable","boolean"!==typeof e.payable||e.payable||(t="nonpayable"))):"boolean"!==typeof e.payable||e.payable||(t="nonpayable")),new _s(ds,e.name,t,e.inputs?e.inputs.map(Es.from):[],e.outputs?e.outputs.map(Es.from):[],null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[fs]===bs}}class Rs extends Ss{constructor(e,t,n){super(e,"struct",t,n),Object.defineProperty(this,fs,{value:ws})}format(){throw new Error("@TODO")}static from(e){if("string"===typeof e)try{return Rs.from(ns(e))}catch(t){ln(!1,"invalid struct fragment","obj",e)}else if(e instanceof es){const t=is("struct",e),n=os(e);return cs(e),new Rs(ds,t,n)}return new Rs(ds,e.name,e.inputs?e.inputs.map(Es.from):[])}static isFragment(e){return e&&e[fs]===ws}}const Ds=new Map;Ds.set(0,"GENERIC_PANIC"),Ds.set(1,"ASSERT_FALSE"),Ds.set(17,"OVERFLOW"),Ds.set(18,"DIVIDE_BY_ZERO"),Ds.set(33,"ENUM_RANGE_ERROR"),Ds.set(34,"BAD_STORAGE_DATA"),Ds.set(49,"STACK_UNDERFLOW"),Ds.set(50,"ARRAY_RANGE_ERROR"),Ds.set(65,"OUT_OF_MEMORY"),Ds.set(81,"UNINITIALIZED_FUNCTION_CALL");const Os=new RegExp(/^bytes([0-9]*)$/),js=new RegExp(/^(u?int)([0-9]*)$/);let Ls=null,Ms=1024;var Fs=new WeakSet;class Bs{constructor(){dn(this,Fs)}getDefaultValue(e){const t=e.map(e=>Yt(Fs,this,Us).call(this,Es.from(e)));return new Di(t,"_").defaultValue()}encode(e,t){cn(t.length,e.length,"types/values length mismatch");const n=e.map(e=>Yt(Fs,this,Us).call(this,Es.from(e))),r=new Di(n,"_"),i=new er;return r.encode(i,t),i.data}decode(e,t,n){const r=e.map(e=>Yt(Fs,this,Us).call(this,Es.from(e)));return new Di(r,"_").decode(new lr(t,n,Ms))}static _setDefaultMaxInflation(e){ln("number"===typeof e&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),Ms=e}static defaultAbiCoder(){return null==Ls&&(Ls=new Bs),Ls}static getBuiltinCallException(e,t,n){return function(e,t,n,r){let i="missing revert data",s=null,a=null;if(n){i="execution reverted";const e=pn(n);if(n=bn(n),0===e.length)i+=" (no data present; likely require(false) occurred",s="require(false)";else if(e.length%32!==4)i+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===bn(e.slice(0,4)))try{s=r.decode(["string"],e.slice(4))[0],a={signature:"Error(string)",name:"Error",args:[s]},i+=": ".concat(JSON.stringify(s))}catch(l){i+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===bn(e.slice(0,4)))try{const t=Number(r.decode(["uint256"],e.slice(4))[0]);a={signature:"Panic(uint256)",name:"Panic",args:[t]},s="Panic due to ".concat(Ds.get(t)||"UNKNOWN","(").concat(t,")"),i+=": ".concat(s)}catch(l){i+=" (could not decode panic code)"}else i+=" (unknown custom error)"}const o={to:t.to?si(t.to):null,data:t.data||"0x"};return t.from&&(o.from=si(t.from)),an(i,"CALL_EXCEPTION",{action:e,data:n,reason:s,transaction:o,invocation:null,revert:a})}(e,t,n,Bs.defaultAbiCoder())}}function Us(e){if(e.isArray())return new gi(Yt(Fs,this,Us).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new Di(e.components.map(e=>Yt(Fs,this,Us).call(this,e)),e.name);switch(e.baseType){case"address":return new di(e.name);case"bool":return new yi(e.name);case"string":return new Ri(e.name);case"bytes":return new bi(e.name);case"":return new Ei(e.name)}let t=e.type.match(js);if(t){let n=parseInt(t[2]||"256");return ln(0!==n&&n<=256&&n%8===0,"invalid "+t[1]+" bit length","param",e),new Ci(n/8,"int"===t[1],e.name)}if(t=e.type.match(Os),t){let n=parseInt(t[1]);return ln(0!==n&&n<=32,"invalid bytes length","param",e),new wi(n,e.name)}ln(!1,"invalid type","type",e.type)}function zs(e){return e&&"function"===typeof e.getAddress}function Vs(e){try{return si(e),!0}catch(t){}return!1}async function Hs(e,t){const n=await t;return null!=n&&"0x0000000000000000000000000000000000000000"!==n||(on("string"!==typeof e,"unconfigured name","UNCONFIGURED_NAME",{value:e}),ln(!1,"invalid AddressLike value; did not resolve to a value address","target",e)),si(n)}function Gs(e,t){return"string"===typeof e?e.match(/^0x[0-9a-f]{40}$/i)?si(e):(on(null!=t,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Hs(e,t.resolveName(e))):zs(e)?Hs(e,e.getAddress()):e&&"function"===typeof e.then?Hs(e,e):void ln(!1,"unsupported addressable value","target",e)}const qs=new Uint8Array(32);qs.fill(0);const Ws=BigInt(-1),Qs=BigInt(0),Ks=BigInt(1),Js=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const Ys=jn(Ks,32),Xs=jn(Qs,32),Zs={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},$s=["name","version","chainId","verifyingContract","salt"];function ea(e){return function(t){return ln("string"===typeof t,"invalid domain value for ".concat(JSON.stringify(e)),"domain.".concat(e),t),t}}const ta={name:ea("name"),version:ea("version"),chainId:function(e){const t=Pn(e,"domain.chainId");return ln(t>=0,"invalid chain ID","domain.chainId",e),Number.isSafeInteger(t)?Number(t):Mn(t)},verifyingContract:function(e){try{return si(e).toLowerCase()}catch(t){}ln(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){const t=pn(e,"domain.salt");return ln(32===t.length,'invalid domain value "salt"',"domain.salt",e),bn(t)}};function na(e){{const t=e.match(/^(u?)int(\d+)$/);if(t){const n=""===t[1],r=parseInt(t[2]);ln(r%8===0&&0!==r&&r<=256&&t[2]===String(r),"invalid numeric width","type",e);const i=In(Js,n?r-1:r),s=n?(i+Ks)*Ws:Qs;return function(t){const r=Pn(t,"value");return ln(r>=s&&r<=i,"value out-of-bounds for ".concat(e),"value",r),jn(n?Nn(r,256):r,32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const n=parseInt(t[1]);return ln(0!==n&&n<=32&&t[1]===String(n),"invalid bytes width","type",e),function(t){return ln(pn(t).length===n,"invalid length for ".concat(e),"value",t),function(e){const t=pn(e),n=t.length%32;return n?wn([t,qs.slice(n)]):bn(t)}(t)}}}switch(e){case"address":return function(e){return kn(si(e),32)};case"bool":return function(e){return e?Ys:Xs};case"bytes":return function(e){return Zr(e)};case"string":return function(e){return Oi(e)}}return null}function ra(e,t){return"".concat(e,"(").concat(t.map(e=>{let{name:t,type:n}=e;return n+" "+t}).join(","),")")}function ia(e){const t=e.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:e}}var sa=new WeakMap,aa=new WeakMap,oa=new WeakMap,la=new WeakSet;class ca{get types(){return JSON.parse(Xt(sa,this))}constructor(e){dn(this,la),c(this,"primaryType",void 0),Jt(this,sa,void 0),Jt(this,aa,void 0),Jt(this,oa,void 0),Zt(aa,this,new Map),Zt(oa,this,new Map);const t=new Map,n=new Map,r=new Map,i={};Object.keys(e).forEach(s=>{i[s]=e[s].map(t=>{let{name:n,type:r}=t,{base:i,index:s}=ia(r);return"int"!==i||e.int||(i="int256"),"uint"!==i||e.uint||(i="uint256"),{name:n,type:i+(s||"")}}),t.set(s,new Set),n.set(s,[]),r.set(s,new Set)}),Zt(sa,this,JSON.stringify(i));for(const a in i){const r=new Set;for(const s of i[a]){ln(!r.has(s.name),"duplicate variable name ".concat(JSON.stringify(s.name)," in ").concat(JSON.stringify(a)),"types",e),r.add(s.name);const i=ia(s.type).base;ln(i!==a,"circular type reference to ".concat(JSON.stringify(i)),"types",e);na(i)||(ln(n.has(i),"unknown type ".concat(JSON.stringify(i)),"types",e),n.get(i).push(a),t.get(a).add(i))}}const s=Array.from(n.keys()).filter(e=>0===n.get(e).length);ln(0!==s.length,"missing primary type","types",e),ln(1===s.length,"ambiguous primary types or unused types: ".concat(s.map(e=>JSON.stringify(e)).join(", ")),"types",e),tn(this,{primaryType:s[0]}),function i(s,a){ln(!a.has(s),"circular type reference to ".concat(JSON.stringify(s)),"types",e),a.add(s);for(const e of t.get(s))if(n.has(e)){i(e,a);for(const t of a)r.get(t).add(e)}a.delete(s)}(this.primaryType,new Set);for(const[a,o]of r){const e=Array.from(o);e.sort(),Xt(aa,this).set(a,ra(a,i[a])+e.map(e=>ra(e,i[e])).join(""))}}getEncoder(e){let t=Xt(oa,this).get(e);return t||(t=Yt(la,this,ua).call(this,e),Xt(oa,this).set(e,t)),t}encodeType(e){const t=Xt(aa,this).get(e);return ln(t,"unknown type: ".concat(JSON.stringify(e)),"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Zr(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,n){if(na(e))return n(e,t);const r=ia(e).array;if(r)return ln(-1===r.count||r.count===t.length,"array length mismatch; expected length ".concat(r.count),"value",t),t.map(e=>this._visit(r.prefix,e,n));const i=this.types[e];if(i)return i.reduce((e,r)=>{let{name:i,type:s}=r;return e[i]=this._visit(s,t[i],n),e},{});ln(!1,"unknown type: ".concat(e),"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new ca(e)}static getPrimaryType(e){return ca.from(e).primaryType}static hashStruct(e,t,n){return ca.from(t).hashStruct(e,n)}static hashDomain(e){const t=[];for(const n in e){if(null==e[n])continue;const r=Zs[n];ln(r,"invalid typed-data domain key: ".concat(JSON.stringify(n)),"domain",e),t.push({name:n,type:r})}return t.sort((e,t)=>$s.indexOf(e.name)-$s.indexOf(t.name)),ca.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,n){return wn(["0x1901",ca.hashDomain(e),ca.from(t).hash(n)])}static hash(e,t,n){return Zr(ca.encode(e,t,n))}static async resolveNames(e,t,n,r){e=Object.assign({},e);for(const a in e)null==e[a]&&delete e[a];const i={};e.verifyingContract&&!gn(e.verifyingContract,20)&&(i[e.verifyingContract]="0x");const s=ca.from(t);s.visit(n,(e,t)=>("address"!==e||gn(t,20)||(i[t]="0x"),t));for(const a in i)i[a]=await r(a);return e.verifyingContract&&i[e.verifyingContract]&&(e.verifyingContract=i[e.verifyingContract]),{domain:e,value:n=s.visit(n,(e,t)=>"address"===e&&i[t]?i[t]:t)}}static getPayload(e,t,n){ca.hashDomain(e);const r={},i=[];$s.forEach(t=>{const n=e[t];null!=n&&(r[t]=ta[t](n),i.push({name:t,type:Zs[t]}))});const s=ca.from(t);t=s.types;const a=Object.assign({},t);return ln(null==a.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",t),a.EIP712Domain=i,s.encode(n),{types:a,domain:r,primaryType:s.primaryType,message:s.visit(n,(e,t)=>{if(e.match(/^bytes(\d*)/))return bn(pn(t));if(e.match(/^u?int/))return Pn(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return ln("string"===typeof t,"invalid string","value",t),t}ln(!1,"unsupported type","type",e)})}}}function ua(e){{const t=na(e);if(t)return t}const t=ia(e).array;if(t){const e=t.prefix,n=this.getEncoder(e);return r=>{ln(-1===t.count||t.count===r.length,"array length mismatch; expected length ".concat(t.count),"value",r);let i=r.map(n);return Xt(aa,this).has(e)&&(i=i.map(Zr)),Zr(wn(i))}}const n=this.types[e];if(n){const t=Oi(Xt(aa,this).get(e));return e=>{const r=n.map(t=>{let{name:n,type:r}=t;const i=this.getEncoder(r)(e[n]);return Xt(aa,this).has(r)?Zr(i):i});return r.unshift(t),wn(r)}}ln(!1,"unknown type: ".concat(e),"type",e)}function ha(e,t){return{address:si(e),storageKeys:t.map((e,t)=>(ln(gn(e,32),"invalid slot","storageKeys[".concat(t,"]"),e),e.toLowerCase()))}}function da(e){if(Array.isArray(e))return e.map((t,n)=>Array.isArray(t)?(ln(2===t.length,"invalid slot set","value[".concat(n,"]"),t),ha(t[0],t[1])):(ln(null!=t&&"object"===typeof t,"invalid address-slot set","value",e),ha(t.address,t.storageKeys)));ln(null!=e&&"object"===typeof e,"invalid access list","value",e);const t=Object.keys(e).map(t=>{const n=e[t].reduce((e,t)=>(e[t]=!0,e),{});return ha(t,Object.keys(n).sort())});return t.sort((e,t)=>e.address.localeCompare(t.address)),t}const fa="0x0000000000000000000000000000000000000000000000000000000000000000",pa=BigInt(0),ma=BigInt(1),ga=BigInt(2),ya=BigInt(27),va=BigInt(28),ba=BigInt(35),wa={};function xa(e){return kn(Ln(e),32)}var Ea=new WeakMap,Aa=new WeakMap,ka=new WeakMap,Sa=new WeakMap;class Ca{get r(){return Xt(Ea,this)}set r(e){ln(32===xn(e),"invalid r","value",e),Zt(Ea,this,bn(e))}get s(){return ln(parseInt(Xt(Aa,this).substring(0,3))<8,"non-canonical s; use ._s","s",Xt(Aa,this)),Xt(Aa,this)}set s(e){ln(32===xn(e),"invalid s","value",e),Zt(Aa,this,bn(e))}get _s(){return Xt(Aa,this)}isValid(){return parseInt(Xt(Aa,this).substring(0,3))<8}get v(){return Xt(ka,this)}set v(e){const t=On(e,"value");ln(27===t||28===t,"invalid v","v",e),Zt(ka,this,t)}get networkV(){return Xt(Sa,this)}get legacyChainId(){const e=this.networkV;return null==e?null:Ca.getChainId(e)}get yParity(){return 27===this.v?0:1}get yParityAndS(){const e=pn(this.s);return this.yParity&&(e[0]|=128),bn(e)}get compactSerialized(){return wn([this.r,this.yParityAndS])}get serialized(){return wn([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,n,r){Jt(this,Ea,void 0),Jt(this,Aa,void 0),Jt(this,ka,void 0),Jt(this,Sa,void 0),hn(e,wa,"Signature"),Zt(Ea,this,t),Zt(Aa,this,n),Zt(ka,this,r),Zt(Sa,this,null)}[Symbol.for("nodejs.util.inspect.custom")](){return'Signature { r: "'.concat(this.r,'", s: "').concat(this._s,'"').concat(this.isValid()?"":', valid: "false"',", yParity: ").concat(this.yParity,", networkV: ").concat(this.networkV," }")}clone(){const e=new Ca(wa,this.r,this._s,this.v);return this.networkV&&Zt(Sa,e,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:null!=e?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const t=Pn(e,"v");return t==ya||t==va?pa:(ln(t>=ba,"invalid EIP-155 v","v",e),(t-ba)/ga)}static getChainIdV(e,t){return Pn(e)*ga+BigInt(35+t-27)}static getNormalizedV(e){const t=Pn(e);return t===pa||t===ya?27:t===ma||t===va?28:(ln(t>=ba,"invalid v","v",e),t&ma?27:28)}static from(e){function t(t,n){ln(t,n,"signature",e)}if(null==e)return new Ca(wa,fa,fa,27);if("string"===typeof e){const n=pn(e,"signature");if(64===n.length){const e=bn(n.slice(0,32)),t=n.slice(32,64),r=128&t[0]?28:27;return t[0]&=127,new Ca(wa,e,bn(t),r)}if(65===n.length){const e=bn(n.slice(0,32)),t=bn(n.slice(32,64)),r=Ca.getNormalizedV(n[64]);return new Ca(wa,e,t,r)}t(!1,"invalid raw signature length")}if(e instanceof Ca)return e.clone();const n=e.r;t(null!=n,"missing r");const r=xa(n),i=function(e,n){if(null!=e)return xa(e);if(null!=n){t(gn(n,32),"invalid yParityAndS");const e=pn(n);return e[0]&=127,bn(e)}t(!1,"missing s")}(e.s,e.yParityAndS),{networkV:s,v:a}=function(e,n,r){if(null!=e){const t=Pn(e);return{networkV:t>=ba?t:void 0,v:Ca.getNormalizedV(t)}}if(null!=n)return t(gn(n,32),"invalid yParityAndS"),{v:128&pn(n)[0]?28:27};if(null!=r){switch(On(r,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),o=new Ca(wa,r,i,a);return s&&Zt(Sa,o,s),t(null==e.yParity||On(e.yParity,"sig.yParity")===o.yParity,"yParity mismatch"),t(null==e.yParityAndS||e.yParityAndS===o.yParityAndS,"yParityAndS mismatch"),o}}function Ta(e){return{address:si(e.address),nonce:Pn(null!=e.nonce?e.nonce:0),chainId:Pn(null!=e.chainId?e.chainId:0),signature:Ca.from(e.signature)}}function Na(e){return async function(t,n){on(null==n||!n.cancelled,"request cancelled before sending","CANCELLED");const r=t.url.split(":")[0].toLowerCase();on("http"===r||"https"===r,"unsupported protocol ".concat(r),"UNSUPPORTED_OPERATION",{info:{protocol:r},operation:"request"}),on("https"===r||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let i=null;const s=new AbortController,a=setTimeout(()=>{i=an("request timeout","TIMEOUT"),s.abort()},t.timeout);n&&n.addListener(()=>{i=an("request cancelled","CANCELLED"),s.abort()});const o=Object.assign({},e,{method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:s.signal});let l;try{l=await fetch(t.url,o)}catch(uo){if(clearTimeout(a),i)throw i;throw uo}clearTimeout(a);const c={};l.headers.forEach((e,t)=>{c[t.toLowerCase()]=e});const u=await l.arrayBuffer(),h=null==u?null:new Uint8Array(u);return{statusCode:l.status,statusMessage:l.statusText,headers:c,body:h}}}Na({});let Ia=Na();const Pa=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),_a=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let Ra=!1;async function Da(e,t){try{const t=e.match(Pa);if(!t)throw new Error("invalid data");return new ho(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?function(e){e=atob(e);const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return pn(t)}(t[3]):Pi(t[3].replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16)))))}catch(n){return new ho(599,"BAD REQUEST (invalid data: URI)",{},null,new ro(e))}}function Oa(e){return async function(t,n){try{const n=t.match(_a);if(!n)throw new Error("invalid link");return new ro("".concat(e).concat(n[2]))}catch(r){return new ho(599,"BAD REQUEST (invalid IPFS URI)",{},null,new ro(t))}}}const ja={data:Da,ipfs:Oa("https://gateway.ipfs.io/ipfs/")},La=new WeakMap;var Ma=new WeakMap,Fa=new WeakMap;class Ba{constructor(e){Jt(this,Ma,void 0),Jt(this,Fa,void 0),Zt(Ma,this,[]),Zt(Fa,this,!1),La.set(e,()=>{if(!Xt(Fa,this)){Zt(Fa,this,!0);for(const e of Xt(Ma,this))setTimeout(()=>{e()},0);Zt(Ma,this,[])}})}addListener(e){on(!Xt(Fa,this),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),Xt(Ma,this).push(e)}get cancelled(){return Xt(Fa,this)}checkSignal(){on(!this.cancelled,"cancelled","CANCELLED",{})}}function Ua(e){if(null==e)throw new Error("missing signal; should not happen");return e.checkSignal(),e}var za=new WeakMap,Va=new WeakMap,Ha=new WeakMap,Ga=new WeakMap,qa=new WeakMap,Wa=new WeakMap,Qa=new WeakMap,Ka=new WeakMap,Ja=new WeakMap,Ya=new WeakMap,Xa=new WeakMap,Za=new WeakMap,$a=new WeakMap,eo=new WeakMap,to=new WeakMap,no=new WeakSet;class ro{get url(){return Xt(Wa,this)}set url(e){Zt(Wa,this,String(e))}get body(){return null==Xt(Qa,this)?null:new Uint8Array(Xt(Qa,this))}set body(e){if(null==e)Zt(Qa,this,void 0),Zt(Ka,this,void 0);else if("string"===typeof e)Zt(Qa,this,Pi(e)),Zt(Ka,this,"text/plain");else if(e instanceof Uint8Array)Zt(Qa,this,e),Zt(Ka,this,"application/octet-stream");else{if("object"!==typeof e)throw new Error("invalid body");Zt(Qa,this,Pi(JSON.stringify(e))),Zt(Ka,this,"application/json")}}hasBody(){return null!=Xt(Qa,this)}get method(){return Xt(Ga,this)?Xt(Ga,this):this.hasBody()?"POST":"GET"}set method(e){null==e&&(e=""),Zt(Ga,this,String(e).toUpperCase())}get headers(){const e=Object.assign({},Xt(Ha,this));return Xt(Ja,this)&&(e.authorization="Basic ".concat(function(e){const t=pn(e);let n="";for(let r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(Pi(Xt(Ja,this))))),this.allowGzip&&(e["accept-encoding"]="gzip"),null==e["content-type"]&&Xt(Ka,this)&&(e["content-type"]=Xt(Ka,this)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){Xt(Ha,this)[String(e).toLowerCase()]=String(t)}clearHeaders(){Zt(Ha,this,{})}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const r=t[n++];return{value:[r,e[r]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return Xt(Ja,this)||null}setCredentials(e,t){ln(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),Zt(Ja,this,"".concat(e,":").concat(t))}get allowGzip(){return Xt(Va,this)}set allowGzip(e){Zt(Va,this,!!e)}get allowInsecureAuthentication(){return!!Xt(za,this)}set allowInsecureAuthentication(e){Zt(za,this,!!e)}get timeout(){return Xt(qa,this)}set timeout(e){ln(e>=0,"timeout must be non-zero","timeout",e),Zt(qa,this,e)}get preflightFunc(){return Xt(Ya,this)||null}set preflightFunc(e){Zt(Ya,this,e)}get processFunc(){return Xt(Xa,this)||null}set processFunc(e){Zt(Xa,this,e)}get retryFunc(){return Xt(Za,this)||null}set retryFunc(e){Zt(Za,this,e)}get getUrlFunc(){return Xt(to,this)||Ia}set getUrlFunc(e){Zt(to,this,e)}constructor(e){dn(this,no),Jt(this,za,void 0),Jt(this,Va,void 0),Jt(this,Ha,void 0),Jt(this,Ga,void 0),Jt(this,qa,void 0),Jt(this,Wa,void 0),Jt(this,Qa,void 0),Jt(this,Ka,void 0),Jt(this,Ja,void 0),Jt(this,Ya,void 0),Jt(this,Xa,void 0),Jt(this,Za,void 0),Jt(this,$a,void 0),Jt(this,eo,void 0),Jt(this,to,void 0),Zt(Wa,this,String(e)),Zt(za,this,!1),Zt(Va,this,!0),Zt(Ha,this,{}),Zt(Ga,this,""),Zt(qa,this,3e5),Zt(eo,this,{slotInterval:250,maxAttempts:12}),Zt(to,this,null)}toString(){return"<FetchRequest method=".concat(JSON.stringify(this.method)," url=").concat(JSON.stringify(this.url)," headers=").concat(JSON.stringify(this.headers)," body=").concat(Xt(Qa,this)?bn(Xt(Qa,this)):"null",">")}setThrottleParams(e){null!=e.slotInterval&&(Xt(eo,this).slotInterval=e.slotInterval),null!=e.maxAttempts&&(Xt(eo,this).maxAttempts=e.maxAttempts)}send(){return on(null==Xt($a,this),"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),Zt($a,this,new Ba(this)),Yt(no,this,io).call(this,0,fo()+this.timeout,0,this,new ho(0,"",{},null,this))}cancel(){on(null!=Xt($a,this),"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=La.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),n=e.split(":")[0].toLowerCase();on("GET"===this.method&&("https"!==t||"http"!==n)&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:"redirect(".concat(this.method," ").concat(JSON.stringify(this.url)," => ").concat(JSON.stringify(e),")")});const r=new ro(e);return r.method="GET",r.allowGzip=this.allowGzip,r.timeout=this.timeout,Zt(Ha,r,Object.assign({},Xt(Ha,this))),Xt(Qa,this)&&Zt(Qa,r,new Uint8Array(Xt(Qa,this))),Zt(Ka,r,Xt(Ka,this)),r}clone(){const e=new ro(this.url);return Zt(Ga,e,Xt(Ga,this)),Xt(Qa,this)&&Zt(Qa,e,Xt(Qa,this)),Zt(Ka,e,Xt(Ka,this)),Zt(Ha,e,Object.assign({},Xt(Ha,this))),Zt(Ja,e,Xt(Ja,this)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),Zt(Ya,e,Xt(Ya,this)),Zt(Xa,e,Xt(Xa,this)),Zt(Za,e,Xt(Za,this)),Zt(eo,e,Object.assign({},Xt(eo,this))),Zt(to,e,Xt(to,this)),e}static lockConfig(){Ra=!0}static getGateway(e){return ja[e.toLowerCase()]||null}static registerGateway(e,t){if("http"===(e=e.toLowerCase())||"https"===e)throw new Error("cannot intercept ".concat(e,"; use registerGetUrl"));if(Ra)throw new Error("gateways locked");ja[e]=t}static registerGetUrl(e){if(Ra)throw new Error("gateways locked");Ia=e}static createGetUrlFunc(e){return Na(e)}static createDataGateway(){return Da}static createIpfsGatewayFunc(e){return Oa(e)}}async function io(e,t,n,r,i){if(e>=Xt(eo,this).maxAttempts)return i.makeServerError("exceeded maximum retry limit");on(fo()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:r}),n>0&&await function(e){return new Promise(t=>setTimeout(t,e))}(n);let s=this.clone();const a=(s.url.split(":")[0]||"").toLowerCase();if(a in ja){const e=await ja[a](s.url,Ua(Xt($a,r)));if(e instanceof ho){let t=e;if(this.processFunc){Ua(Xt($a,r));try{t=await this.processFunc(s,t)}catch(d){null!=d.throttle&&"number"===typeof d.stall||t.makeServerError("error in post-processing function",d).assertOk()}}return t}s=e}this.preflightFunc&&(s=await this.preflightFunc(s));const o=await this.getUrlFunc(s,Ua(Xt($a,r)));let l=new ho(o.statusCode,o.statusMessage,o.headers,o.body,r);if(301===l.statusCode||302===l.statusCode){try{var c;const n=l.headers.location||"";return Yt(no,c=s.redirect(n),io).call(c,e+1,t,0,r,l)}catch(d){}return l}if(429===l.statusCode&&(null==this.retryFunc||await this.retryFunc(s,l,e))){var u;const n=l.headers["retry-after"];let i=Xt(eo,this).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return"string"===typeof n&&n.match(/^[1-9][0-9]*$/)&&(i=parseInt(n)),Yt(no,u=s.clone(),io).call(u,e+1,t,i,r,l)}if(this.processFunc){Ua(Xt($a,r));try{l=await this.processFunc(s,l)}catch(d){var h;null!=d.throttle&&"number"===typeof d.stall||l.makeServerError("error in post-processing function",d).assertOk();let n=Xt(eo,this).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return d.stall>=0&&(n=d.stall),Yt(no,h=s.clone(),io).call(h,e+1,t,n,r,l)}}return l}var so=new WeakMap,ao=new WeakMap,oo=new WeakMap,lo=new WeakMap,co=new WeakMap,uo=new WeakMap;class ho{toString(){return"<FetchResponse status=".concat(this.statusCode," body=").concat(Xt(lo,this)?bn(Xt(lo,this)):"null",">")}get statusCode(){return Xt(so,this)}get statusMessage(){return Xt(ao,this)}get headers(){return Object.assign({},Xt(oo,this))}get body(){return null==Xt(lo,this)?null:new Uint8Array(Xt(lo,this))}get bodyText(){try{return null==Xt(lo,this)?"":_i(Xt(lo,this))}catch(e){on(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(e){on(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const r=t[n++];return{value:[r,e[r]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,t,n,r,i){Jt(this,so,void 0),Jt(this,ao,void 0),Jt(this,oo,void 0),Jt(this,lo,void 0),Jt(this,co,void 0),Jt(this,uo,void 0),Zt(so,this,e),Zt(ao,this,t),Zt(oo,this,Object.keys(n).reduce((e,t)=>(e[t.toLowerCase()]=String(n[t]),e),{})),Zt(lo,this,null==r?null:new Uint8Array(r)),Zt(co,this,i||null),Zt(uo,this,{message:""})}makeServerError(e,t){let n;e?n="CLIENT ESCALATED SERVER ERROR (".concat(this.statusCode," ").concat(this.statusMessage,"; ").concat(e,")"):(e="".concat(this.statusCode," ").concat(this.statusMessage),n="CLIENT ESCALATED SERVER ERROR (".concat(e,")"));const r=new ho(599,n,this.headers,this.body,Xt(co,this)||void 0);return Zt(uo,r,{message:e,error:t}),r}throwThrottleError(e,t){null==t?t=-1:ln(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const n=new Error(e||"throttling requests");throw tn(n,{stall:t,throttle:!0}),n}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return null!=Xt(lo,this)}get request(){return Xt(co,this)}ok(){return""===Xt(uo,this).message&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=Xt(uo,this);""===e&&(e="server response ".concat(this.statusCode," ").concat(this.statusMessage));let n=null;this.request&&(n=this.request.url);let r=null;try{Xt(lo,this)&&(r=_i(Xt(lo,this)))}catch(zR){}on(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:n,responseBody:r,responseStatus:"".concat(this.statusCode," ").concat(this.statusMessage)}})}}function fo(){return(new Date).getTime()}const po="0x0000000000000000000000000000000000000000";class mo{constructor(e,t,n){c(this,"fragment",void 0),c(this,"name",void 0),c(this,"signature",void 0),c(this,"topic",void 0),c(this,"args",void 0);const r=e.name,i=e.format();tn(this,{fragment:e,name:r,signature:i,topic:t,args:n})}}class go{constructor(e,t,n,r){c(this,"fragment",void 0),c(this,"name",void 0),c(this,"args",void 0),c(this,"signature",void 0),c(this,"selector",void 0),c(this,"value",void 0);const i=e.name,s=e.format();tn(this,{fragment:e,name:i,args:n,signature:s,selector:t,value:r})}}class yo{constructor(e,t,n){c(this,"fragment",void 0),c(this,"name",void 0),c(this,"args",void 0),c(this,"signature",void 0),c(this,"selector",void 0);const r=e.name,i=e.format();tn(this,{fragment:e,name:r,args:n,signature:i,selector:t})}}class vo{static isIndexed(e){return!(!e||!e._isIndexed)}constructor(e){c(this,"hash",void 0),c(this,"_isIndexed",void 0),tn(this,{hash:e,_isIndexed:!0})}}const bo={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},wo={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:e=>"reverted with reason string ".concat(JSON.stringify(e))},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:e=>{let t="unknown panic code";return e>=0&&e<=255&&bo[e.toString()]&&(t=bo[e.toString()]),"reverted with panic code 0x".concat(e.toString(16)," (").concat(t,")")}}};var xo=new WeakMap,Eo=new WeakMap,Ao=new WeakMap,ko=new WeakMap,So=new WeakSet;class Co{constructor(e){dn(this,So),c(this,"fragments",void 0),c(this,"deploy",void 0),c(this,"fallback",void 0),c(this,"receive",void 0),Jt(this,xo,void 0),Jt(this,Eo,void 0),Jt(this,Ao,void 0),Jt(this,ko,void 0);let t=[];t="string"===typeof e?JSON.parse(e):e,Zt(Ao,this,new Map),Zt(xo,this,new Map),Zt(Eo,this,new Map);const n=[];for(const a of t)try{n.push(ks.from(a))}catch(s){console.log("[Warning] Invalid Fragment ".concat(JSON.stringify(a),":"),s.message)}tn(this,{fragments:Object.freeze(n)});let r=null,i=!1;Zt(ko,this,this.getAbiCoder()),this.fragments.forEach((e,t)=>{let n;switch(e.type){case"constructor":return this.deploy?void console.log("duplicate definition - constructor"):void tn(this,{deploy:e});case"fallback":return void(0===e.inputs.length?i=!0:(ln(!r||e.payable!==r.payable,"conflicting fallback fragments","fragments[".concat(t,"]"),e),r=e,i=r.payable));case"function":n=Xt(Ao,this);break;case"event":n=Xt(Eo,this);break;case"error":n=Xt(xo,this);break;default:return}const s=e.format();n.has(s)||n.set(s,e)}),this.deploy||tn(this,{deploy:Is.from("constructor()")}),tn(this,{fallback:r,receive:i})}format(e){const t=e?"minimal":"full";return this.fragments.map(e=>e.format(t))}formatJson(){const e=this.fragments.map(e=>e.format("json"));return JSON.stringify(e.map(e=>JSON.parse(e)))}getAbiCoder(){return Bs.defaultAbiCoder()}getFunctionName(e){const t=Yt(So,this,To).call(this,e,null,!1);return ln(t,"no matching function","key",e),t.name}hasFunction(e){return!!Yt(So,this,To).call(this,e,null,!1)}getFunction(e,t){return Yt(So,this,To).call(this,e,t||null,!0)}forEachFunction(e){const t=Array.from(Xt(Ao,this).keys());t.sort((e,t)=>e.localeCompare(t));for(let n=0;n<t.length;n++){const r=t[n];e(Xt(Ao,this).get(r),n)}}getEventName(e){const t=Yt(So,this,No).call(this,e,null,!1);return ln(t,"no matching event","key",e),t.name}hasEvent(e){return!!Yt(So,this,No).call(this,e,null,!1)}getEvent(e,t){return Yt(So,this,No).call(this,e,t||null,!0)}forEachEvent(e){const t=Array.from(Xt(Eo,this).keys());t.sort((e,t)=>e.localeCompare(t));for(let n=0;n<t.length;n++){const r=t[n];e(Xt(Eo,this).get(r),n)}}getError(e,t){if(gn(e)){const t=e.toLowerCase();if(wo[t])return Ts.from(wo[t].signature);for(const e of Xt(xo,this).values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){const t=[];for(const[n,r]of Xt(xo,this))n.split("(")[0]===e&&t.push(r);if(0===t.length)return"Error"===e?Ts.from("error Error(string)"):"Panic"===e?Ts.from("error Panic(uint256)"):null;if(t.length>1){const n=t.map(e=>JSON.stringify(e.format())).join(", ");ln(!1,"ambiguous error description (i.e. ".concat(n,")"),"name",e)}return t[0]}if("Error(string)"===(e=Ts.from(e).format()))return Ts.from("error Error(string)");if("Panic(uint256)"===e)return Ts.from("error Panic(uint256)");const n=Xt(xo,this).get(e);return n||null}forEachError(e){const t=Array.from(Xt(xo,this).keys());t.sort((e,t)=>e.localeCompare(t));for(let n=0;n<t.length;n++){const r=t[n];e(Xt(xo,this).get(r),n)}}_decodeParams(e,t){return Xt(ko,this).decode(e,t)}_encodeParams(e,t){return Xt(ko,this).encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if("string"===typeof e){const t=this.getError(e);ln(t,"unknown error","fragment",e),e=t}return ln(En(t,0,4)===e.selector,"data signature does not match error ".concat(e.name,"."),"data",t),this._decodeParams(e.inputs,En(t,4))}encodeErrorResult(e,t){if("string"===typeof e){const t=this.getError(e);ln(t,"unknown error","fragment",e),e=t}return wn([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if("string"===typeof e){const t=this.getFunction(e);ln(t,"unknown function","fragment",e),e=t}return ln(En(t,0,4)===e.selector,"data signature does not match function ".concat(e.name,"."),"data",t),this._decodeParams(e.inputs,En(t,4))}encodeFunctionData(e,t){if("string"===typeof e){const t=this.getFunction(e);ln(t,"unknown function","fragment",e),e=t}return wn([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if("string"===typeof e){const t=this.getFunction(e);ln(t,"unknown function","fragment",e),e=t}let n="invalid length for result data";const r=mn(t);if(r.length%32===0)try{return Xt(ko,this).decode(e.outputs,r)}catch(i){n="could not decode result data"}on(!1,n,"BAD_DATA",{value:bn(r),info:{method:e.name,signature:e.format()}})}makeError(e,t){const n=pn(e,"data"),r=Bs.getBuiltinCallException("call",t,n);if(r.message.startsWith("execution reverted (unknown custom error)")){const e=bn(n.slice(0,4)),t=this.getError(e);if(t)try{const e=Xt(ko,this).decode(t.inputs,n.slice(4));r.revert={name:t.name,signature:t.format(),args:e},r.reason=r.revert.signature,r.message="execution reverted: ".concat(r.reason)}catch(zR){r.message="execution reverted (coult not decode custom error)"}}const i=this.parseTransaction(t);return i&&(r.invocation={method:i.name,signature:i.signature,args:i.args}),r}encodeFunctionResult(e,t){if("string"===typeof e){const t=this.getFunction(e);ln(t,"unknown function","fragment",e),e=t}return bn(Xt(ko,this).encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if("string"===typeof e){const t=this.getEvent(e);ln(t,"unknown event","eventFragment",e),e=t}on(t.length<=e.inputs.length,"too many arguments for ".concat(e.format()),"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const n=[];e.anonymous||n.push(e.topicHash);const r=(e,t)=>"string"===e.type?Oi(t):"bytes"===e.type?Zr(bn(t)):("bool"===e.type&&"boolean"===typeof t?t=t?"0x01":"0x00":e.type.match(/^u?int/)?t=jn(t):e.type.match(/^bytes/)?t=function(e,t){return An(e,t,!1)}(t,32):"address"===e.type&&Xt(ko,this).encode(["address"],[t]),kn(bn(t),32));for(t.forEach((t,i)=>{const s=e.inputs[i];s.indexed?null==t?n.push(null):"array"===s.baseType||"tuple"===s.baseType?ln(!1,"filtering with tuples or arrays not supported","contract."+s.name,t):Array.isArray(t)?n.push(t.map(e=>r(s,e))):n.push(r(s,t)):ln(null==t,"cannot filter non-indexed parameters; must be null","contract."+s.name,t)});n.length&&null===n[n.length-1];)n.pop();return n}encodeEventLog(e,t){if("string"===typeof e){const t=this.getEvent(e);ln(t,"unknown event","eventFragment",e),e=t}const n=[],r=[],i=[];return e.anonymous||n.push(e.topicHash),ln(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((e,s)=>{const a=t[s];if(e.indexed)if("string"===e.type)n.push(Oi(a));else if("bytes"===e.type)n.push(Zr(a));else{if("tuple"===e.baseType||"array"===e.baseType)throw new Error("not implemented");n.push(Xt(ko,this).encode([e.type],[a]))}else r.push(e),i.push(a)}),{data:Xt(ko,this).encode(r,i),topics:n}}decodeEventLog(e,t,n){if("string"===typeof e){const t=this.getEvent(e);ln(t,"unknown event","eventFragment",e),e=t}if(null!=n&&!e.anonymous){const t=e.topicHash;ln(gn(n[0],32)&&n[0].toLowerCase()===t,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const r=[],i=[],s=[];e.inputs.forEach((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(r.push(Es.from({type:"bytes32",name:e.name})),s.push(!0)):(r.push(e),s.push(!1)):(i.push(e),s.push(!1))});const a=null!=n?Xt(ko,this).decode(r,wn(n)):null,o=Xt(ko,this).decode(i,t,!0),l=[],c=[];let u=0,h=0;return e.inputs.forEach((e,t)=>{let n=null;if(e.indexed)if(null==a)n=new vo(null);else if(s[t])n=new vo(a[h++]);else try{n=a[h++]}catch(r){n=r}else try{n=o[u++]}catch(r){n=r}l.push(n),c.push(e.name||null)}),Kn.fromItems(l,c)}parseTransaction(e){const t=pn(e.data,"tx.data"),n=Pn(null!=e.value?e.value:0,"tx.value"),r=this.getFunction(bn(t.slice(0,4)));if(!r)return null;const i=Xt(ko,this).decode(r.inputs,t.slice(4));return new go(r,r.selector,i,n)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new mo(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=bn(e),n=this.getError(En(t,0,4));if(!n)return null;const r=Xt(ko,this).decode(n.inputs,En(t,4));return new yo(n,n.selector,r)}static from(e){return e instanceof Co?e:"string"===typeof e?new Co(JSON.parse(e)):"function"===typeof e.formatJson?new Co(e.formatJson()):"function"===typeof e.format?new Co(e.format("json")):new Co(e)}}function To(e,t,n){if(gn(e)){const t=e.toLowerCase();for(const e of Xt(Ao,this).values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){const r=[];for(const[t,n]of Xt(Ao,this))t.split("(")[0]===e&&r.push(n);if(t){const e=t.length>0?t[t.length-1]:null;let n=t.length,i=!0;hi.isTyped(e)&&"overrides"===e.type&&(i=!1,n--);for(let t=r.length-1;t>=0;t--){const e=r[t].inputs.length;e===n||i&&e===n-1||r.splice(t,1)}for(let s=r.length-1;s>=0;s--){const e=r[s].inputs;for(let n=0;n<t.length;n++)if(hi.isTyped(t[n])){if(n>=e.length){if("overrides"===t[n].type)continue;r.splice(s,1);break}if(t[n].type!==e[n].baseType){r.splice(s,1);break}}}}if(1===r.length&&t&&t.length!==r[0].inputs.length){const e=t[t.length-1];(null==e||Array.isArray(e)||"object"!==typeof e)&&r.splice(0,1)}if(0===r.length)return null;if(r.length>1&&n){const t=r.map(e=>JSON.stringify(e.format())).join(", ");ln(!1,"ambiguous function description (i.e. matches ".concat(t,")"),"key",e)}return r[0]}const r=Xt(Ao,this).get(_s.from(e).format());return r||null}function No(e,t,n){if(gn(e)){const t=e.toLowerCase();for(const e of Xt(Eo,this).values())if(t===e.topicHash)return e;return null}if(-1===e.indexOf("(")){const r=[];for(const[t,n]of Xt(Eo,this))t.split("(")[0]===e&&r.push(n);if(t){for(let e=r.length-1;e>=0;e--)r[e].inputs.length<t.length&&r.splice(e,1);for(let e=r.length-1;e>=0;e--){const n=r[e].inputs;for(let i=0;i<t.length;i++)if(hi.isTyped(t[i])&&t[i].type!==n[i].baseType){r.splice(e,1);break}}}if(0===r.length)return null;if(r.length>1&&n){const t=r.map(e=>JSON.stringify(e.format())).join(", ");ln(!1,"ambiguous event description (i.e. matches ".concat(t,")"),"key",e)}return r[0]}const r=Xt(Eo,this).get(Ns.from(e).format());return r||null}const Io=BigInt(0);function Po(e){return null==e?null:e}function _o(e){return null==e?null:e.toString()}class Ro{constructor(e,t,n){c(this,"gasPrice",void 0),c(this,"maxFeePerGas",void 0),c(this,"maxPriorityFeePerGas",void 0),tn(this,{gasPrice:Po(e),maxFeePerGas:Po(t),maxPriorityFeePerGas:Po(n)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:_o(e),maxFeePerGas:_o(t),maxPriorityFeePerGas:_o(n)}}}function Do(e){const t={};e.to&&(t.to=e.to),e.from&&(t.from=e.from),e.data&&(t.data=bn(e.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const i of n)i in e&&null!=e[i]&&(t[i]=Pn(e[i],"request.".concat(i)));const r="type,nonce".split(/,/);for(const i of r)i in e&&null!=e[i]&&(t[i]=On(e[i],"request.".concat(i)));return e.accessList&&(t.accessList=da(e.accessList)),e.authorizationList&&(t.authorizationList=e.authorizationList.slice()),"blockTag"in e&&(t.blockTag=e.blockTag),"enableCcipRead"in e&&(t.enableCcipRead=!!e.enableCcipRead),"customData"in e&&(t.customData=e.customData),"blobVersionedHashes"in e&&e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.slice()),"kzg"in e&&(t.kzg=e.kzg),"blobs"in e&&e.blobs&&(t.blobs=e.blobs.map(e=>yn(e)?bn(e):Object.assign({},e))),t}var Oo=new WeakMap;class jo{constructor(e,t){c(this,"provider",void 0),c(this,"number",void 0),c(this,"hash",void 0),c(this,"timestamp",void 0),c(this,"parentHash",void 0),c(this,"parentBeaconBlockRoot",void 0),c(this,"nonce",void 0),c(this,"difficulty",void 0),c(this,"gasLimit",void 0),c(this,"gasUsed",void 0),c(this,"stateRoot",void 0),c(this,"receiptsRoot",void 0),c(this,"blobGasUsed",void 0),c(this,"excessBlobGas",void 0),c(this,"miner",void 0),c(this,"prevRandao",void 0),c(this,"extraData",void 0),c(this,"baseFeePerGas",void 0),Jt(this,Oo,void 0),Zt(Oo,this,e.transactions.map(e=>"string"!==typeof e?new Uo(e,t):e)),tn(this,{provider:t,hash:Po(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:Po(e.prevRandao),extraData:e.extraData,baseFeePerGas:Po(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return Xt(Oo,this).map(e=>"string"===typeof e?e:e.hash)}get prefetchedTransactions(){const e=Xt(Oo,this).slice();return 0===e.length?[]:(on("object"===typeof e[0],"transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:n,gasLimit:r,gasUsed:i,hash:s,miner:a,prevRandao:o,nonce:l,number:c,parentHash:u,parentBeaconBlockRoot:h,stateRoot:d,receiptsRoot:f,timestamp:p,transactions:m}=this;return{_type:"Block",baseFeePerGas:_o(e),difficulty:_o(t),extraData:n,gasLimit:_o(r),gasUsed:_o(i),blobGasUsed:_o(this.blobGasUsed),excessBlobGas:_o(this.excessBlobGas),hash:s,miner:a,prevRandao:o,nonce:l,number:c,parentHash:u,timestamp:p,parentBeaconBlockRoot:h,stateRoot:d,receiptsRoot:f,transactions:m}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return Xt(Oo,this).length}get date(){return null==this.timestamp?null:new Date(1e3*this.timestamp)}async getTransaction(e){let t;if("number"===typeof e)t=Xt(Oo,this)[e];else{const n=e.toLowerCase();for(const e of Xt(Oo,this)){if("string"===typeof e){if(e!==n)continue;t=e;break}if(e.hash===n){t=e;break}}}if(null==t)throw new Error("no such tx");return"string"===typeof t?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if("number"===typeof e)return t[e];e=e.toLowerCase();for(const n of t)if(n.hash===e)return n;ln(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return{orphan:"drop-block",hash:(e=this).hash,number:e.number};var e}}class Lo{constructor(e,t){c(this,"provider",void 0),c(this,"transactionHash",void 0),c(this,"blockHash",void 0),c(this,"blockNumber",void 0),c(this,"removed",void 0),c(this,"address",void 0),c(this,"data",void 0),c(this,"topics",void 0),c(this,"index",void 0),c(this,"transactionIndex",void 0),this.provider=t;const n=Object.freeze(e.topics.slice());tn(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:n,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:n,data:r,index:i,removed:s,topics:a,transactionHash:o,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:t,blockNumber:n,data:r,index:i,removed:s,topics:a,transactionHash:o,transactionIndex:l}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return on(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return on(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return on(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return{orphan:"drop-log",log:{transactionHash:(e=this).transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,address:e.address,data:e.data,topics:Object.freeze(e.topics.slice()),index:e.index}};var e}}var Mo=new WeakMap;class Fo{constructor(e,t){c(this,"provider",void 0),c(this,"to",void 0),c(this,"from",void 0),c(this,"contractAddress",void 0),c(this,"hash",void 0),c(this,"index",void 0),c(this,"blockHash",void 0),c(this,"blockNumber",void 0),c(this,"logsBloom",void 0),c(this,"gasUsed",void 0),c(this,"blobGasUsed",void 0),c(this,"cumulativeGasUsed",void 0),c(this,"gasPrice",void 0),c(this,"blobGasPrice",void 0),c(this,"type",void 0),c(this,"status",void 0),c(this,"root",void 0),Jt(this,Mo,void 0),Zt(Mo,this,Object.freeze(e.logs.map(e=>new Lo(e,t))));let n=Io;null!=e.effectiveGasPrice?n=e.effectiveGasPrice:null!=e.gasPrice&&(n=e.gasPrice),tn(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:n,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return Xt(Mo,this)}toJSON(){const{to:e,from:t,contractAddress:n,hash:r,index:i,blockHash:s,blockNumber:a,logsBloom:o,logs:l,status:c,root:u}=this;return{_type:"TransactionReceipt",blockHash:s,blockNumber:a,contractAddress:n,cumulativeGasUsed:_o(this.cumulativeGasUsed),from:t,gasPrice:_o(this.gasPrice),blobGasUsed:_o(this.blobGasUsed),blobGasPrice:_o(this.blobGasPrice),gasUsed:_o(this.gasUsed),hash:r,index:i,logs:l,logsBloom:o,root:u,status:c,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(null==e)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(null==e)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Vo(this)}reorderedEvent(e){return on(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),zo(this,e)}}var Bo=new WeakMap;class Uo{constructor(e,t){c(this,"provider",void 0),c(this,"blockNumber",void 0),c(this,"blockHash",void 0),c(this,"index",void 0),c(this,"hash",void 0),c(this,"type",void 0),c(this,"to",void 0),c(this,"from",void 0),c(this,"nonce",void 0),c(this,"gasLimit",void 0),c(this,"gasPrice",void 0),c(this,"maxPriorityFeePerGas",void 0),c(this,"maxFeePerGas",void 0),c(this,"maxFeePerBlobGas",void 0),c(this,"data",void 0),c(this,"value",void 0),c(this,"chainId",void 0),c(this,"signature",void 0),c(this,"accessList",void 0),c(this,"blobVersionedHashes",void 0),c(this,"authorizationList",void 0),Jt(this,Bo,void 0),this.provider=t,this.blockNumber=null!=e.blockNumber?e.blockNumber:null,this.blockHash=null!=e.blockHash?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=null!=e.maxPriorityFeePerGas?e.maxPriorityFeePerGas:null,this.maxFeePerGas=null!=e.maxFeePerGas?e.maxFeePerGas:null,this.maxFeePerBlobGas=null!=e.maxFeePerBlobGas?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=null!=e.accessList?e.accessList:null,this.blobVersionedHashes=null!=e.blobVersionedHashes?e.blobVersionedHashes:null,this.authorizationList=null!=e.authorizationList?e.authorizationList:null,Zt(Bo,this,-1)}toJSON(){const{blockNumber:e,blockHash:t,index:n,hash:r,type:i,to:s,from:a,nonce:o,data:l,signature:c,accessList:u,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:u,blockNumber:e,blockHash:t,blobVersionedHashes:h,chainId:_o(this.chainId),data:l,from:a,gasLimit:_o(this.gasLimit),gasPrice:_o(this.gasPrice),hash:r,maxFeePerGas:_o(this.maxFeePerGas),maxPriorityFeePerGas:_o(this.maxPriorityFeePerGas),maxFeePerBlobGas:_o(this.maxFeePerBlobGas),nonce:o,signature:c,to:s,index:n,type:i,value:_o(this.value)}}async getBlock(){let e=this.blockNumber;if(null==e){const t=await this.getTransaction();t&&(e=t.blockNumber)}if(null==e)return null;const t=this.provider.getBlock(e);if(null==t)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(null==this.blockNumber){const{tx:e,blockNumber:t}=await en({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return null==e||null==e.blockNumber?0:t-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const n=null==e?1:e,r=null==t?0:t;let i=Xt(Bo,this),s=-1,a=-1===i;const o=async()=>{if(a)return null;const{blockNumber:e,nonce:t}=await en({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(t<this.nonce)return void(i=e);if(a)return null;const r=await this.getTransaction();if(!r||null==r.blockNumber)for(-1===s&&(s=i-3,s<Xt(Bo,this)&&(s=Xt(Bo,this)));s<=e;){if(a)return null;const t=await this.provider.getBlock(s,!0);if(null==t)return;for(const e of t)if(e===this.hash)return;for(let r=0;r<t.length;r++){const s=await t.getTransaction(r);if(s.from===this.from&&s.nonce===this.nonce){if(a)return null;const t=await this.provider.getTransactionReceipt(s.hash);if(null==t)return;if(e-t.blockNumber+1<n)return;let r="replaced";s.data===this.data&&s.to===this.to&&s.value===this.value?r="repriced":"0x"===s.data&&s.from===s.to&&s.value===Io&&(r="cancelled"),on(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:"replaced"===r||"cancelled"===r,reason:r,replacement:s.replaceableTransaction(i),hash:s.hash,receipt:t})}}s++}},l=e=>{if(null==e||0!==e.status)return e;on(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:e.to,from:e.from,data:""},receipt:e})},c=await this.provider.getTransactionReceipt(this.hash);if(0===n)return l(c);if(c){if(1===n||await c.confirmations()>=n)return l(c)}else if(await o(),0===n)return null;const u=new Promise((e,t)=>{const s=[],c=()=>{s.forEach(e=>e())};if(s.push(()=>{a=!0}),r>0){const e=setTimeout(()=>{c(),t(an("wait for transaction timeout","TIMEOUT"))},r);s.push(()=>{clearTimeout(e)})}const u=async r=>{if(await r.confirmations()>=n){c();try{e(l(r))}catch(i){t(i)}}};if(s.push(()=>{this.provider.off(this.hash,u)}),this.provider.on(this.hash,u),i>=0){const e=async()=>{try{await o()}catch(n){if(rn(n,"TRANSACTION_REPLACED"))return c(),void t(n)}a||this.provider.once("block",e)};s.push(()=>{this.provider.off("block",e)}),this.provider.once("block",e)}});return await u}isMined(){return null!=this.blockHash}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}removedEvent(){return on(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Vo(this)}reorderedEvent(e){return on(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),on(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),zo(this,e)}replaceableTransaction(e){ln(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new Uo(this,this.provider);return Zt(Bo,t,e),t}}function zo(e,t){return{orphan:"reorder-transaction",tx:e,other:t}}function Vo(e){return{orphan:"drop-transaction",tx:e}}var Ho=new WeakMap;class Go{constructor(e,t,n){c(this,"filter",void 0),c(this,"emitter",void 0),Jt(this,Ho,void 0),Zt(Ho,this,t),tn(this,{emitter:e,filter:n})}async removeListener(){null!=Xt(Ho,this)&&await this.emitter.off(this.filter,Xt(Ho,this))}}class qo extends Lo{constructor(e,t,n){super(e,e.provider),c(this,"interface",void 0),c(this,"fragment",void 0),c(this,"args",void 0);tn(this,{args:t.decodeEventLog(n,e.data,e.topics),fragment:n,interface:t})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Wo extends Lo{constructor(e,t){super(e,e.provider),c(this,"error",void 0),tn(this,{error:t})}}var Qo=new WeakMap;class Ko extends Fo{constructor(e,t,n){super(n,t),Jt(this,Qo,void 0),Zt(Qo,this,e)}get logs(){return super.logs.map(e=>{const t=e.topics.length?Xt(Qo,this).getEvent(e.topics[0]):null;if(t)try{return new qo(e,Xt(Qo,this),t)}catch(n){return new Wo(e,n)}return e})}}var Jo=new WeakMap;class Yo extends Uo{constructor(e,t,n){super(n,t),Jt(this,Jo,void 0),Zt(Jo,this,e)}async wait(e,t){const n=await super.wait(e,t);return null==n?null:new Ko(Xt(Jo,this),this.provider,n)}}class Xo extends Go{constructor(e,t,n,r){super(e,t,n),c(this,"log",void 0),tn(this,{log:r})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Zo extends Xo{constructor(e,t,n,r,i){super(e,t,n,new qo(i,e.interface,r));tn(this,{args:e.interface.decodeEventLog(r,this.log.data,this.log.topics),fragment:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const $o=BigInt(0);function el(e){return e&&"function"===typeof e.call}function tl(e){return e&&"function"===typeof e.estimateGas}function nl(e){return e&&"function"===typeof e.resolveName}function rl(e){return e&&"function"===typeof e.sendTransaction}function il(e){if(null!=e){if(nl(e))return e;if(e.provider)return e.provider}}var sl=new WeakMap;class al{constructor(e,t,n){if(Jt(this,sl,void 0),c(this,"fragment",void 0),tn(this,{fragment:t}),t.inputs.length<n.length)throw new Error("too many arguments");const r=ol(e.runner,"resolveName"),i=nl(r)?r:null;Zt(sl,this,async function(){const r=await Promise.all(t.inputs.map((e,t)=>null==n[t]?null:e.walkAsync(n[t],(e,t)=>"address"===e?Array.isArray(t)?Promise.all(t.map(e=>Gs(e,i))):Gs(t,i):t)));return e.interface.encodeFilterTopics(t,r)}())}getTopicFilter(){return Xt(sl,this)}}function ol(e,t){return null==e?null:"function"===typeof e[t]?e:e.provider&&"function"===typeof e.provider[t]?e.provider:null}function ll(e){return null==e?null:e.provider||null}async function cl(e,t){const n=hi.dereference(e,"overrides");ln("object"===typeof n,"invalid overrides parameter","overrides",e);const r=Do(n);return ln(null==r.to||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),ln(null==r.data||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}function ul(e){const t=async function(t){const n=await cl(t,["data"]);n.to=await e.getAddress(),n.from&&(n.from=await Gs(n.from,il(e.runner)));const r=e.interface,i=Pn(n.value||$o,"overrides.value")===$o,s="0x"===(n.data||"0x");!r.fallback||r.fallback.payable||!r.receive||s||i||ln(!1,"cannot send data to receive or send value to non-payable fallback","overrides",t),ln(r.fallback||s,"cannot send data to receive-only contract","overrides.data",n.data);return ln(r.receive||r.fallback&&r.fallback.payable||i,"cannot send value to non-payable fallback","overrides.value",n.value),ln(r.fallback||s,"cannot send data to receive-only contract","overrides.data",n.data),n},n=async function(n){const r=e.runner;on(rl(r),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const i=await r.sendTransaction(await t(n)),s=ll(e.runner);return new Yo(e.interface,s,i)},r=async e=>await n(e);return tn(r,{_contract:e,estimateGas:async function(n){const r=ol(e.runner,"estimateGas");return on(tl(r),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await r.estimateGas(await t(n))},populateTransaction:t,send:n,staticCall:async function(n){const r=ol(e.runner,"call");on(el(r),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const i=await t(n);try{return await r.call(i)}catch(s){if(sn(s)&&s.data)throw e.interface.makeError(s.data,i);throw s}}}),r}function hl(e,t){const n=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const s=e.interface.getFunction(t,r);return on(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}}),s},r=async function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];const s=n(...r);let a={};if(s.inputs.length+1===r.length&&(a=await cl(r.pop()),a.from&&(a.from=await Gs(a.from,il(e.runner)))),s.inputs.length!==r.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const o=await async function(e,t,n){const r=ol(e,"resolveName"),i=nl(r)?r:null;return await Promise.all(t.map((e,t)=>e.walkAsync(n[t],(e,t)=>(t=hi.dereference(t,e),"address"===e?Gs(t,i):t))))}(e.runner,s.inputs,r);return Object.assign({},a,await en({to:e.getAddress(),data:e.interface.encodeFunctionData(s,o)}))},i=async function(){const e=await a(...arguments);return 1===e.length?e[0]:e},s=async function(){const t=e.runner;on(rl(t),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const n=await t.sendTransaction(await r(...arguments)),i=ll(e.runner);return new Yo(e.interface,i,n)},a=async function(){const t=ol(e.runner,"call");on(el(t),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const i=await r(...arguments);let s="0x";try{s=await t.call(i)}catch(o){if(sn(o)&&o.data)throw e.interface.makeError(o.data,i);throw o}const a=n(...arguments);return e.interface.decodeFunctionResult(a,s)},o=async function(){return n(...arguments).constant?await i(...arguments):await s(...arguments)};return tn(o,{name:e.interface.getFunctionName(t),_contract:e,_key:t,getFragment:n,estimateGas:async function(){const t=ol(e.runner,"estimateGas");return on(tl(t),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await t.estimateGas(await r(...arguments))},populateTransaction:r,send:s,staticCall:i,staticCallResult:a}),Object.defineProperty(o,"fragment",{configurable:!1,enumerable:!0,get:()=>{const n=e.interface.getFunction(t);return on(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),n}}),o}const dl=Symbol.for("_ethersInternal_contract"),fl=new WeakMap;function pl(e){return fl.get(e[dl])}async function ml(e,t){let n,r=null;if(Array.isArray(t)){const r=function(t){if(gn(t,32))return t;const n=e.interface.getEvent(t);return ln(n,"unknown fragment","name",t),n.topicHash};n=t.map(e=>null==e?null:Array.isArray(e)?e.map(r):r(e))}else"*"===t?n=[null]:"string"===typeof t?gn(t,32)?n=[t]:(r=e.interface.getEvent(t),ln(r,"unknown fragment","event",t),n=[r.topicHash]):(i=t)&&"object"===typeof i&&"getTopicFilter"in i&&"function"===typeof i.getTopicFilter&&i.fragment?n=await t.getTopicFilter():"fragment"in t?(r=t.fragment,n=[r.topicHash]):ln(!1,"unknown event name","event",t);var i;n=n.map(e=>{if(null==e)return null;if(Array.isArray(e)){const t=Array.from(new Set(e.map(e=>e.toLowerCase())).values());return 1===t.length?t[0]:(t.sort(),t)}return e.toLowerCase()});return{fragment:r,tag:n.map(e=>null==e?"null":Array.isArray(e)?e.join("|"):e).join("&"),topics:n}}async function gl(e,t){const{subs:n}=pl(e);return n.get((await ml(e,t)).tag)||null}async function yl(e,t,n){const r=ll(e.runner);on(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:i,tag:s,topics:a}=await ml(e,n),{addr:o,subs:l}=pl(e);let c=l.get(s);if(!c){const t={address:o||e,topics:a},u=t=>{let r=i;if(null==r)try{r=e.interface.getEvent(t.topics[0])}catch(s){}if(r){const s=r,a=i?e.interface.decodeEventLog(i,t.data,t.topics):[];bl(e,n,a,r=>new Zo(e,r,n,s,t))}else bl(e,n,[],r=>new Xo(e,r,n,t))};let h=[];c={tag:s,listeners:[],start:()=>{h.length||h.push(r.on(t,u))},stop:async()=>{if(0==h.length)return;let e=h;h=[],await Promise.all(e),r.off(t,u)}},l.set(s,c)}return c}let vl=Promise.resolve();async function bl(e,t,n,r){try{await vl}catch(s){}const i=async function(e,t,n,r){await vl;const i=await gl(e,t);if(!i)return!1;const a=i.listeners.length;return i.listeners=i.listeners.filter(t=>{let{listener:i,once:a}=t;const o=Array.from(n);r&&o.push(r(a?null:i));try{i.call(e,...o)}catch(s){}return!a}),0===i.listeners.length&&(i.stop(),pl(e).subs.delete(i.tag)),a>0}(e,t,n,r);return vl=i,await i}const wl=["then"];class xl{constructor(e,t,n,r){c(this,"target",void 0),c(this,"interface",void 0),c(this,"runner",void 0),c(this,"filters",void 0),c(this,dl,void 0),c(this,"fallback",void 0),ln("string"===typeof e||zs(e),"invalid value for Contract target","target",e),null==n&&(n=null);const i=Co.from(t);let s;tn(this,{target:e,runner:n,interface:i}),Object.defineProperty(this,dl,{value:{}});let a=null,o=null;if(r){const e=ll(n);o=new Yo(this.interface,e,r)}let l=new Map;if("string"===typeof e)if(gn(e))a=e,s=Promise.resolve(e);else{const t=ol(n,"resolveName");if(!nl(t))throw an("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});s=t.resolveName(e).then(t=>{if(null==t)throw an("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return pl(this).addr=t,t})}else s=e.getAddress().then(e=>{if(null==e)throw new Error("TODO");return pl(this).addr=e,e});var u,h;u=this,h={addrPromise:s,addr:a,deployTx:o,subs:l},fl.set(u[dl],h);const d=new Proxy({},{get:(e,t,n)=>{if("symbol"===typeof t||wl.indexOf(t)>=0)return Reflect.get(e,t,n);try{return this.getEvent(t)}catch(r){if(!rn(r,"INVALID_ARGUMENT")||"key"!==r.argument)throw r}},has:(e,t)=>wl.indexOf(t)>=0?Reflect.has(e,t):Reflect.has(e,t)||this.interface.hasEvent(String(t))});return tn(this,{filters:d}),tn(this,{fallback:i.receive||i.fallback?ul(this):null}),new Proxy(this,{get:(e,t,n)=>{if("symbol"===typeof t||t in e||wl.indexOf(t)>=0)return Reflect.get(e,t,n);try{return e.getFunction(t)}catch(r){if(!rn(r,"INVALID_ARGUMENT")||"key"!==r.argument)throw r}},has:(e,t)=>"symbol"===typeof t||t in e||wl.indexOf(t)>=0?Reflect.has(e,t):e.interface.hasFunction(t)})}connect(e){return new xl(this.target,this.interface,e)}attach(e){return new xl(e,this.interface,this.runner)}async getAddress(){return await pl(this).addrPromise}async getDeployedCode(){const e=ll(this.runner);on(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return"0x"===t?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(null!=await this.getDeployedCode())return this;const t=ll(this.runner);return on(null!=t,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((e,n)=>{const r=async()=>{try{if(null!=await this.getDeployedCode())return e(this);t.once("block",r)}catch(i){n(i)}};r()})}deploymentTransaction(){return pl(this).deployTx}getFunction(e){"string"!==typeof e&&(e=e.format());return hl(this,e)}getEvent(e){return"string"!==typeof e&&(e=e.format()),function(e,t){const n=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const s=e.interface.getEvent(t,r);return on(s,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}}),s},r=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return new al(e,n(...r),r)};return tn(r,{name:e.interface.getEventName(t),_contract:e,_key:t,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const n=e.interface.getEvent(t);return on(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),n}}),r}(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,n){null==t&&(t=0),null==n&&(n="latest");const{addr:r,addrPromise:i}=pl(this),s=r||await i,{fragment:a,topics:o}=await ml(this,e),l={address:s,topics:o,fromBlock:t,toBlock:n},c=ll(this.runner);return on(c,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await c.getLogs(l)).map(e=>{let t=a;if(null==t)try{t=this.interface.getEvent(e.topics[0])}catch(n){}if(t)try{return new qo(e,this.interface,t)}catch(n){return new Wo(e,n)}return new Lo(e,c)})}async on(e,t){const n=await yl(this,"on",e);return n.listeners.push({listener:t,once:!1}),n.start(),this}async once(e,t){const n=await yl(this,"once",e);return n.listeners.push({listener:t,once:!0}),n.start(),this}async emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return await bl(this,e,n,null)}async listenerCount(e){if(e){const t=await gl(this,e);return t?t.listeners.length:0}const{subs:t}=pl(this);let n=0;for(const{listeners:r}of t.values())n+=r.length;return n}async listeners(e){if(e){const t=await gl(this,e);return t?t.listeners.map(e=>{let{listener:t}=e;return t}):[]}const{subs:t}=pl(this);let n=[];for(const{listeners:r}of t.values())n=n.concat(r.map(e=>{let{listener:t}=e;return t}));return n}async off(e,t){const n=await gl(this,e);if(!n)return this;if(t){const e=n.listeners.map(e=>{let{listener:t}=e;return t}).indexOf(t);e>=0&&n.listeners.splice(e,1)}return null!=t&&0!==n.listeners.length||(n.stop(),pl(this).subs.delete(n.tag)),this}async removeAllListeners(e){if(e){const t=await gl(this,e);if(!t)return this;t.stop(),pl(this).subs.delete(t.tag)}else{const{subs:e}=pl(this);for(const{tag:t,stop:n}of e.values())n(),e.delete(t)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){return class extends xl{constructor(t){super(t,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}}}static from(e,t,n){null==n&&(n=null);return new this(e,t,n)}}class El extends(function(){return xl}()){}const Al=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]);function kl(e){return function(e){let t=0;return()=>e[t++]}(function(e){let t=0;function n(){return e[t++]<<8|e[t++]}let r=n(),i=1,s=[0,1];for(let w=1;w<r;w++)s.push(i+=n());let a=n(),o=t;t+=a;let l=0,c=0;function u(){return 0==l&&(c=c<<8|e[t++],l=8),c>>--l&1}const h=2**31,d=h>>>1,f=d>>1,p=h-1;let m=0;for(let w=0;w<31;w++)m=m<<1|u();let g=[],y=0,v=h;for(;;){let e=Math.floor(((m-y+1)*i-1)/v),t=0,n=r;for(;n-t>1;){let r=t+n>>>1;e<s[r]?n=r:t=r}if(0==t)break;g.push(t);let a=y+Math.floor(v*s[t]/i),o=y+Math.floor(v*s[t+1]/i)-1;for(;0==((a^o)&d);)m=m<<1&p|u(),a=a<<1&p,o=o<<1&p|1;for(;a&~o&f;)m=m&d|m<<1&p>>>1|u(),a=a<<1^d,o=(o^d)<<1|d|1;y=a,v=1+o-a}let b=r-4;return g.map(t=>{switch(t-b){case 3:return b+65792+(e[o++]<<16|e[o++]<<8|e[o++]);case 2:return b+256+(e[o++]<<8|e[o++]);case 1:return b+e[o++];default:return t-1}})}(function(e){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((e,n)=>t[e.charCodeAt(0)]=n);let n=e.length,r=new Uint8Array(6*n>>3);for(let i=0,s=0,a=0,o=0;i<n;i++)o=o<<6|t[e.charCodeAt(i)],a+=6,a>=8&&(r[s++]=o>>(a-=8));return r}(e)))}function Sl(e){return 1&e?~e>>1:e>>1}function Cl(e,t){let n=Array(e);for(let r=0,i=0;r<e;r++)n[r]=i+=Sl(t());return n}function Tl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[];for(;;){let r=e(),i=e();if(!i)break;t+=r;for(let e=0;e<i;e++)n.push(t+e);t+=i+1}return n}function Nl(e){return Pl(()=>{let t=Tl(e);if(t.length)return t})}function Il(e){let t=[];for(;;){let n=e();if(0==n)break;t.push(Rl(n,e))}for(;;){let n=e()-1;if(n<0)break;t.push(Dl(n,e))}return t.flat()}function Pl(e){let t=[];for(;;){let n=e(t.length);if(!n)break;t.push(n)}return t}function _l(e,t,n){let r=Array(e).fill().map(()=>[]);for(let i=0;i<t;i++)Cl(e,n).forEach((e,t)=>r[t].push(e));return r}function Rl(e,t){let n=1+t(),r=t(),i=Pl(t);return _l(i.length,1+e,t).flatMap((e,t)=>{let[s,...a]=e;return Array(i[t]).fill().map((e,t)=>{let i=t*r;return[s+t*n,a.map(e=>e+i)]})})}function Dl(e,t){return _l(1+t(),1+e,t).map(e=>[e[0],e.slice(1)])}function Ol(e){return"{".concat(function(e){return e.toString(16).toUpperCase().padStart(2,"0")}(e),"}")}function jl(e){let t=[];for(let n=0,r=e.length;n<r;){let r=e.codePointAt(n);n+=r<65536?1:2,t.push(r)}return t}function Ll(e){let t=e.length;if(t<4096)return String.fromCodePoint(...e);let n=[];for(let r=0;r<t;)n.push(String.fromCodePoint(...e.slice(r,r+=4096)));return n.join("")}function Ml(e,t){let n=e.length,r=n-t.length;for(let i=0;0==r&&i<n;i++)r=e[i]-t[i];return r}const Fl=44032,Bl=4352,Ul=4449,zl=4519,Vl=28,Hl=588;function Gl(e){return e>>24&255}function ql(e){return 16777215&e}let Wl,Ql,Kl,Jl;function Yl(e){return e>=Fl&&e<55204}function Xl(e,t){if(e>=Bl&&e<4371&&t>=Ul&&t<4470)return Fl+(e-Bl)*Hl+(t-Ul)*Vl;if(Yl(e)&&t>zl&&t<4547&&(e-Fl)%Vl==0)return e+(t-zl);{let n=Jl.get(e);return n&&(n=n.get(t),n)?n:-1}}function Zl(e){Wl||function(){let e=kl("AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g");Wl=new Map(Nl(e).flatMap((e,t)=>e.map(e=>[e,t+1<<24]))),Ql=new Set(Tl(e)),Kl=new Map,Jl=new Map;for(let[t,n]of Il(e)){if(!Ql.has(t)&&2==n.length){let[e,r]=n,i=Jl.get(e);i||(i=new Map,Jl.set(e,i)),i.set(r,t)}Kl.set(t,n.reverse())}}();let t=[],n=[],r=!1;function i(e){let n=Wl.get(e);n&&(r=!0,e|=n),t.push(e)}for(let s of e)for(;;){if(s<128)t.push(s);else if(Yl(s)){let e=s-Fl,t=e%Hl/Vl|0,n=e%Vl;i(Bl+(e/Hl|0)),i(Ul+t),n>0&&i(zl+n)}else{let e=Kl.get(s);e?n.push(...e):i(s)}if(!n.length)break;s=n.pop()}if(r&&t.length>1){let e=Gl(t[0]);for(let n=1;n<t.length;n++){let r=Gl(t[n]);if(0==r||e<=r){e=r;continue}let i=n-1;for(;;){let n=t[i+1];if(t[i+1]=t[i],t[i]=n,!i)break;if(e=Gl(t[--i]),e<=r)break}e=Gl(t[n])}}return t}function $l(e){return Zl(e).map(ql)}function ec(e){return function(e){let t=[],n=[],r=-1,i=0;for(let s of e){let e=Gl(s),a=ql(s);if(-1==r)0==e?r=a:t.push(a);else if(i>0&&i>=e)0==e?(t.push(r,...n),n.length=0,r=a):n.push(a),i=e;else{let s=Xl(r,a);s>=0?r=s:0==i&&0==e?(t.push(r),r=a):(n.push(a),i=e)}}return r>=0&&t.push(r,...n),t}(Zl(e))}const tc=".",nc=e=>Array.from(e);function rc(e,t){return e.P.has(t)||e.Q.has(t)}class ic extends Array{get is_emoji(){return!0}}let sc,ac,oc,lc,cc,uc,hc,dc,fc,pc,mc,gc;function yc(){if(sc)return;let e=kl("AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI");const t=()=>Tl(e),n=()=>new Set(t()),r=(e,t)=>t.forEach(t=>e.add(t));sc=new Map(Il(e)),ac=n(),oc=t(),lc=new Set(t().map(e=>oc[e])),oc=new Set(oc),cc=n(),uc=n();let i=Nl(e),s=e();const a=()=>{let e=new Set;return t().forEach(t=>r(e,i[t])),r(e,t()),e};hc=Pl(t=>{let n=Pl(e).map(e=>e+96);if(n.length){let r=t>=s;return n[0]-=32,n=Ll(n),r&&(n="Restricted[".concat(n,"]")),{N:n,P:a(),Q:a(),M:!e(),R:r}}}),dc=n(),fc=new Map;let o=t().concat(nc(dc)).sort((e,t)=>e-t);o.forEach((t,n)=>{let r=e(),i=o[n]=r?o[n-r]:{V:[],M:new Map};i.V.push(t),dc.has(t)||fc.set(t,i)});for(let{V:u,M:h}of new Set(fc.values())){let e=[];for(let n of u){let t=hc.filter(e=>rc(e,n)),i=e.find(e=>{let{G:n}=e;return t.some(e=>n.has(e))});i||(i={G:new Set,V:[]},e.push(i)),i.V.push(n),r(i.G,t)}let t=e.flatMap(e=>nc(e.G));for(let{G:n,V:r}of e){let e=new Set(t.filter(e=>!n.has(e)));for(let t of r)h.set(t,e)}}pc=new Set;let l=new Set;const c=e=>pc.has(e)?l.add(e):pc.add(e);for(let u of hc){for(let e of u.P)c(e);for(let e of u.Q)c(e)}for(let u of pc)fc.has(u)||l.has(u)||fc.set(u,1);r(pc,$l(pc)),mc=function(e){let t=[],n=Tl(e);return function e(n,r,i){let{S:s,B:a}=n;if(!(4&s&&i===r[r.length-1])){2&s&&(i=r[r.length-1]),1&s&&t.push(r);for(let t of a)for(let n of t.Q)e(t,[...r,n],i)}}(function t(r){return{S:e(),B:Pl(()=>{let r=Tl(e).map(e=>n[e]);if(r.length)return t(r)}),Q:r}}([]),[]),t}(e).map(e=>ic.from(e)).sort(Ml),gc=new Map;for(let u of mc){let e=[gc];for(let t of u){let n=e.map(e=>{let n=e.get(t);return n||(n=new Map,e.set(t,n)),n});65039===t?e.push(...n):e=n}for(let t of e)t.V=u}}function vc(e){return(xc(e)?"":"".concat(bc(wc([e]))," "))+Ol(e)}function bc(e){return'"'.concat(e,'"\u200e')}function wc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ol,r=[];var i;i=e[0],yc(),oc.has(i)&&r.push("\u25cc"),e.length>t&&(t>>=1,e=[...e.slice(0,t),8230,...e.slice(-t)]);let s=0,a=e.length;for(let o=0;o<a;o++){let t=e[o];xc(t)&&(r.push(Ll(e.slice(s,o))),r.push(n(t)),s=o+1)}return r.push(Ll(e.slice(s,a))),r.join("")}function xc(e){return yc(),cc.has(e)}function Ec(e,t,n){if(!e)return[];yc();let r=0;return e.split(tc).map(e=>{let i=jl(e),s={input:i,offset:r};r+=i.length+1;try{let e,r=s.tokens=Tc(i,t,n),a=r.length;if(!a)throw new Error("empty label");let o=s.output=r.flat();if(function(e){for(let t=e.lastIndexOf(95);t>0;)if(95!==e[--t])throw new Error("underscore allowed only at start")}(o),!(s.emoji=a>1||r[0].is_emoji)&&o.every(e=>e<128))!function(e){if(e.length>=4&&45==e[2]&&45==e[3])throw new Error('invalid label extension: "'.concat(Ll(e.slice(0,4)),'"'))}(o),e="ASCII";else{let t=r.flatMap(e=>e.is_emoji?[]:e);if(t.length){if(oc.has(o[0]))throw Cc("leading combining mark");for(let e=1;e<a;e++){let t=r[e];if(!t.is_emoji&&oc.has(t[0]))throw Cc('emoji + combining mark: "'.concat(Ll(r[e-1])," + ").concat(wc([t[0]]),'"'))}!function(e){let t=e[0],n=Al.get(t);if(n)throw Cc("leading ".concat(n));let r=e.length,i=-1;for(let s=1;s<r;s++){t=e[s];let r=Al.get(t);if(r){if(i==s)throw Cc("".concat(n," + ").concat(r));i=s+1,n=r}}if(i==r)throw Cc("trailing ".concat(n))}(o);let n=nc(new Set(t)),[i]=function(e){let t=hc;for(let n of e){let e=t.filter(e=>rc(e,n));if(!e.length)throw hc.some(e=>rc(e,n))?Sc(t[0],n):kc(n);if(t=e,1==e.length)break}return t}(n);!function(e,t){for(let n of t)if(!rc(e,n))throw Sc(e,n);if(e.M){let e=$l(t);for(let t=1,n=e.length;t<n;t++)if(lc.has(e[t])){let r=t+1;for(let i;r<n&&lc.has(i=e[r]);r++)for(let n=t;n<r;n++)if(e[n]==i)throw new Error("duplicate non-spacing marks: ".concat(vc(i)));if(r-t>4)throw new Error("excessive non-spacing marks: ".concat(bc(wc(e.slice(t-1,r)))," (").concat(r-t,"/").concat(4,")"));t=r}}}(i,t),function(e,t){let n,r=[];for(let i of t){let e=fc.get(i);if(1===e)return;if(e){let t=e.M.get(i);if(n=n?n.filter(e=>t.has(e)):nc(t),!n.length)return}else r.push(i)}if(n)for(let i of n)if(r.every(e=>rc(i,e)))throw new Error("whole-script confusable: ".concat(e.N,"/").concat(i.N))}(i,n),e=i.N}else e="Emoji"}s.type=e}catch(a){s.error=a}return s})}function Ac(e){return e.map(t=>{let{input:n,error:r,output:i}=t;if(r){let t=r.message;throw new Error(1==e.length?t:"Invalid label ".concat(bc(wc(n,63)),": ").concat(t))}return Ll(i)}).join(tc)}function kc(e){return new Error("disallowed character: ".concat(vc(e)))}function Sc(e,t){let n=vc(t),r=hc.find(e=>e.P.has(t));return r&&(n="".concat(r.N," ").concat(n)),new Error("illegal mixture: ".concat(e.N," + ").concat(n))}function Cc(e){return new Error("illegal placement: ".concat(e))}function Tc(e,t,n){let r=[],i=[];for(e=e.slice().reverse();e.length;){let s=Ic(e);if(s)i.length&&(r.push(t(i)),i=[]),r.push(n(s));else{let t=e.pop();if(pc.has(t))i.push(t);else{let e=sc.get(t);if(e)i.push(...e);else if(!ac.has(t))throw kc(t)}}}return i.length&&r.push(t(i)),r}function Nc(e){return e.filter(e=>65039!=e)}function Ic(e,t){let n,r=gc,i=e.length;for(;i&&(r=r.get(e[--i]),r);){let{V:s}=r;s&&(n=s,t&&t.push(...e.slice(i).reverse()),e.length=i)}return n}const Pc=new Uint8Array(32);function _c(e){return ln(0!==e.length,"invalid ENS name; empty component","comp",e),e}function Rc(e){const t=Pi(function(e){try{if(0===e.length)throw new Error("empty label");return function(e){return Ac(Ec(e,ec,Nc))}(e)}catch(t){ln(!1,"invalid ENS name (".concat(t.message,")"),"name",e)}}(e)),n=[];if(0===e.length)return n;let r=0;for(let i=0;i<t.length;i++){46===t[i]&&(n.push(_c(t.slice(r,i))),r=i+1)}return ln(r<t.length,"invalid ENS name; empty component","name",e),n.push(_c(t.slice(r))),n}function Dc(e){ln("string"===typeof e,"invalid ENS name; not a string","name",e),ln(e.length,"invalid ENS name (empty label)","name",e);let t=Pc;const n=Rc(e);for(;n.length;)t=Zr(wn([t,Zr(n.pop())]));return bn(t)}function Oc(e,t){const n=null!=t?t:63;return ln(n<=255,"DNS encoded label cannot exceed 255","length",n),bn(wn(Rc(e).map(t=>{ln(t.length<=n,"label ".concat(JSON.stringify(e)," exceeds ").concat(n," bytes"),"name",e);const r=new Uint8Array(t.length+1);return r.set(t,1),r[0]=r.length-1,r})))+"00"}Pc.fill(0);class jc extends Pr{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Tr(this.buffer)}update(e){pr(this);const{view:t,buffer:n,blockLen:r}=this,i=(e=Ir(e)).length;for(let s=0;s<i;){const a=Math.min(r-this.pos,i-s);if(a===r){const t=Tr(e);for(;r<=i-s;s+=r)this.process(t,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===r&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){pr(this),mr(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:i}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>r-s&&(this.process(n,0),s=0);for(let u=s;u<r;u++)t[u]=0;!function(e,t,n,r){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,n,r);const i=BigInt(32),s=BigInt(4294967295),a=Number(n>>i&s),o=Number(n&s),l=r?4:0,c=r?0:4;e.setUint32(t+l,a,r),e.setUint32(t+c,o,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);const a=Tr(e),o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=o/4,c=this.get();if(l>c.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<l;u++)a.setUint32(4*u,c[u],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:i,destroyed:s,pos:a}=this;return e.length=r,e.pos=a,e.finished=i,e.destroyed=s,r%t&&e.buffer.set(n),e}}const Lc=(e,t,n)=>e&t^~e&n,Mc=(e,t,n)=>e&t^e&n^t&n,Fc=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Bc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Uc=new Uint32Array(64);class zc extends jc{constructor(){super(64,32,8,!1),this.A=0|Bc[0],this.B=0|Bc[1],this.C=0|Bc[2],this.D=0|Bc[3],this.E=0|Bc[4],this.F=0|Bc[5],this.G=0|Bc[6],this.H=0|Bc[7]}get(){const{A:e,B:t,C:n,D:r,E:i,F:s,G:a,H:o}=this;return[e,t,n,r,i,s,a,o]}set(e,t,n,r,i,s,a,o){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|s,this.G=0|a,this.H=0|o}process(e,t){for(let u=0;u<16;u++,t+=4)Uc[u]=e.getUint32(t,!1);for(let u=16;u<64;u++){const e=Uc[u-15],t=Uc[u-2],n=Nr(e,7)^Nr(e,18)^e>>>3,r=Nr(t,17)^Nr(t,19)^t>>>10;Uc[u]=r+Uc[u-7]+n+Uc[u-16]|0}let{A:n,B:r,C:i,D:s,E:a,F:o,G:l,H:c}=this;for(let u=0;u<64;u++){const e=c+(Nr(a,6)^Nr(a,11)^Nr(a,25))+Lc(a,o,l)+Fc[u]+Uc[u]|0,t=(Nr(n,2)^Nr(n,13)^Nr(n,22))+Mc(n,r,i)|0;c=l,l=o,o=a,a=s+e|0,s=i,i=r,r=n,n=e+t|0}n=n+this.A|0,r=r+this.B|0,i=i+this.C|0,s=s+this.D|0,a=a+this.E|0,o=o+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(n,r,i,s,a,o,l,c)}roundClean(){Uc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Vc=_r(()=>new zc),[Hc,Gc]=(()=>kr.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))))(),qc=new Uint32Array(80),Wc=new Uint32Array(80);class Qc extends jc{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:i,Cl:s,Dh:a,Dl:o,Eh:l,El:c,Fh:u,Fl:h,Gh:d,Gl:f,Hh:p,Hl:m}=this;return[e,t,n,r,i,s,a,o,l,c,u,h,d,f,p,m]}set(e,t,n,r,i,s,a,o,l,c,u,h,d,f,p,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|s,this.Dh=0|a,this.Dl=0|o,this.Eh=0|l,this.El=0|c,this.Fh=0|u,this.Fl=0|h,this.Gh=0|d,this.Gl=0|f,this.Hh=0|p,this.Hl=0|m}process(e,t){for(let v=0;v<16;v++,t+=4)qc[v]=e.getUint32(t),Wc[v]=e.getUint32(t+=4);for(let v=16;v<80;v++){const e=0|qc[v-15],t=0|Wc[v-15],n=kr.rotrSH(e,t,1)^kr.rotrSH(e,t,8)^kr.shrSH(e,t,7),r=kr.rotrSL(e,t,1)^kr.rotrSL(e,t,8)^kr.shrSL(e,t,7),i=0|qc[v-2],s=0|Wc[v-2],a=kr.rotrSH(i,s,19)^kr.rotrBH(i,s,61)^kr.shrSH(i,s,6),o=kr.rotrSL(i,s,19)^kr.rotrBL(i,s,61)^kr.shrSL(i,s,6),l=kr.add4L(r,o,Wc[v-7],Wc[v-16]),c=kr.add4H(l,n,a,qc[v-7],qc[v-16]);qc[v]=0|c,Wc[v]=0|l}let{Ah:n,Al:r,Bh:i,Bl:s,Ch:a,Cl:o,Dh:l,Dl:c,Eh:u,El:h,Fh:d,Fl:f,Gh:p,Gl:m,Hh:g,Hl:y}=this;for(let v=0;v<80;v++){const e=kr.rotrSH(u,h,14)^kr.rotrSH(u,h,18)^kr.rotrBH(u,h,41),t=kr.rotrSL(u,h,14)^kr.rotrSL(u,h,18)^kr.rotrBL(u,h,41),b=u&d^~u&p,w=h&f^~h&m,x=kr.add5L(y,t,w,Gc[v],Wc[v]),E=kr.add5H(x,g,e,b,Hc[v],qc[v]),A=0|x,k=kr.rotrSH(n,r,28)^kr.rotrBH(n,r,34)^kr.rotrBH(n,r,39),S=kr.rotrSL(n,r,28)^kr.rotrBL(n,r,34)^kr.rotrBL(n,r,39),C=n&i^n&a^i&a,T=r&s^r&o^s&o;g=0|p,y=0|m,p=0|d,m=0|f,d=0|u,f=0|h,({h:u,l:h}=kr.add(0|l,0|c,0|E,0|A)),l=0|a,c=0|o,a=0|i,o=0|s,i=0|n,s=0|r;const N=kr.add3L(A,S,T);n=kr.add3H(N,E,k,C),r=0|N}({h:n,l:r}=kr.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l:s}=kr.add(0|this.Bh,0|this.Bl,0|i,0|s)),({h:a,l:o}=kr.add(0|this.Ch,0|this.Cl,0|a,0|o)),({h:l,l:c}=kr.add(0|this.Dh,0|this.Dl,0|l,0|c)),({h:u,l:h}=kr.add(0|this.Eh,0|this.El,0|u,0|h)),({h:d,l:f}=kr.add(0|this.Fh,0|this.Fl,0|d,0|f)),({h:p,l:m}=kr.add(0|this.Gh,0|this.Gl,0|p,0|m)),({h:g,l:y}=kr.add(0|this.Hh,0|this.Hl,0|g,0|y)),this.set(n,r,i,s,a,o,l,c,u,h,d,f,p,m,g,y)}roundClean(){qc.fill(0),Wc.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Kc=_r(()=>new Qc);const Jc=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof global)return global;throw new Error("unable to locate global object")}();Jc.crypto||Jc.msCrypto;function Yc(e){switch(e){case"sha256":return Vc.create();case"sha512":return Kc.create()}ln(!1,"invalid hashing algorithm name","algorithm",e)}const Xc=function(e){return Yc("sha256").update(e).digest()},Zc=function(e){return Yc("sha512").update(e).digest()};let $c=Xc,eu=Zc,tu=!1,nu=!1;function ru(e){const t=pn(e,"data");return bn($c(t))}function iu(e){const t=pn(e,"data");return bn(eu(t))}ru._=Xc,ru.lock=function(){tu=!0},ru.register=function(e){if(tu)throw new Error("sha256 is locked");$c=e},Object.freeze(ru),iu._=Zc,iu.lock=function(){nu=!0},iu.register=function(e){if(nu)throw new Error("sha512 is locked");eu=e},Object.freeze(ru);BigInt(0);const su=BigInt(1),au=BigInt(2),ou=e=>e instanceof Uint8Array,lu=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function cu(e){if(!ou(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=lu[e[n]];return t}function uu(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":"0x".concat(e))}function hu(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const t=2*r,i=e.slice(t,t+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");n[r]=s}return n}function du(e){return uu(cu(e))}function fu(e){if(!ou(e))throw new Error("Uint8Array expected");return uu(cu(Uint8Array.from(e).reverse()))}function pu(e,t){return hu(e.toString(16).padStart(2*t,"0"))}function mu(e,t){return pu(e,t).reverse()}function gu(e,t,n){let r;if("string"===typeof t)try{r=hu(t)}catch(zR){throw new Error("".concat(e,' must be valid hex string, got "').concat(t,'". Cause: ').concat(zR))}else{if(!ou(t))throw new Error("".concat(e," must be hex string or Uint8Array"));r=Uint8Array.from(t)}const i=r.length;if("number"===typeof n&&i!==n)throw new Error("".concat(e," expected ").concat(n," bytes, got ").concat(i));return r}function yu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=new Uint8Array(t.reduce((e,t)=>e+t.length,0));let i=0;return t.forEach(e=>{if(!ou(e))throw new Error("Uint8Array expected");r.set(e,i),i+=e.length}),r}const vu=e=>(au<<BigInt(e-1))-su,bu=e=>new Uint8Array(e),wu=e=>Uint8Array.from(e);function xu(e,t,n){if("number"!==typeof e||e<2)throw new Error("hashLen must be a number");if("number"!==typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!==typeof n)throw new Error("hmacFn must be a function");let r=bu(e),i=bu(e),s=0;const a=()=>{r.fill(1),i.fill(0),s=0},o=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return n(i,r,...t)},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bu();i=o(wu([0]),e),r=o(),0!==e.length&&(i=o(wu([1]),e),r=o())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=o();const t=r.slice();n.push(t),e+=r.length}return yu(...n)};return(e,t)=>{let n;for(a(),l(e);!(n=t(c()));)l();return a(),n}}const Eu={bigint:e=>"bigint"===typeof e,function:e=>"function"===typeof e,boolean:e=>"boolean"===typeof e,string:e=>"string"===typeof e,stringOrUint8Array:e=>"string"===typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"===typeof e&&Number.isSafeInteger(e.outputLen)};function Au(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=(t,n,r)=>{const i=Eu[n];if("function"!==typeof i)throw new Error('Invalid validator "'.concat(n,'", expected function'));const s=e[t];if((!r||void 0!==s)&&!i(s,e))throw new Error("Invalid param ".concat(String(t),"=").concat(s," (").concat(typeof s,"), expected ").concat(n))};for(const[i,s]of Object.entries(t))r(i,s,!1);for(const[i,s]of Object.entries(n))r(i,s,!0);return e}const ku=BigInt(0),Su=BigInt(1),Cu=BigInt(2),Tu=BigInt(3),Nu=BigInt(4),Iu=BigInt(5),Pu=BigInt(8);BigInt(9),BigInt(16);function _u(e,t){const n=e%t;return n>=ku?n:t+n}function Ru(e,t,n){if(n<=ku||t<ku)throw new Error("Expected power/modulo > 0");if(n===Su)return ku;let r=Su;for(;t>ku;)t&Su&&(r=r*e%n),e=e*e%n,t>>=Su;return r}function Du(e,t,n){let r=e;for(;t-- >ku;)r*=r,r%=n;return r}function Ou(e,t){if(e===ku||t<=ku)throw new Error("invert: expected positive integers, got n=".concat(e," mod=").concat(t));let n=_u(e,t),r=t,i=ku,s=Su,a=Su,o=ku;for(;n!==ku;){const e=r/n,t=r%n,l=i-a*e,c=s-o*e;r=n,n=t,i=a,s=o,a=l,o=c}if(r!==Su)throw new Error("invert: does not exist");return _u(i,t)}function ju(e){if(e%Nu===Tu){const t=(e+Su)/Nu;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%Pu===Iu){const t=(e-Iu)/Pu;return function(e,n){const r=e.mul(n,Cu),i=e.pow(r,t),s=e.mul(n,i),a=e.mul(e.mul(s,Cu),i),o=e.mul(s,e.sub(a,e.ONE));if(!e.eql(e.sqr(o),n))throw new Error("Cannot find square root");return o}}return function(e){const t=(e-Su)/Cu;let n,r,i;for(n=e-Su,r=0;n%Cu===ku;n/=Cu,r++);for(i=Cu;i<e&&Ru(i,t,e)!==e-Su;i++);if(1===r){const t=(e+Su)/Nu;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const s=(n+Su)/Cu;return function(e,a){if(e.pow(a,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let o=r,l=e.pow(e.mul(e.ONE,i),n),c=e.pow(a,s),u=e.pow(a,n);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<o&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const n=e.pow(l,Su<<BigInt(o-t-1));l=e.sqr(n),c=e.mul(c,n),u=e.mul(u,l),o=t}return c}}(e)}const Lu=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Mu(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function Fu(e){if("bigint"!==typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Bu(e){const t=Fu(e);return t+Math.ceil(t/2)}class Uu extends Pr{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,fr(e);const n=Ir(t);if(this.iHash=e.create(),"function"!==typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,i=new Uint8Array(r);i.set(n.length>r?e.create().update(n).digest():n);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=e.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),i.fill(0)}update(e){return pr(this),this.iHash.update(e),this}digestInto(e){pr(this),dr(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:i,blockLen:s,outputLen:a}=this;return e.finished=r,e.destroyed=i,e.blockLen=s,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const zu=(e,t,n)=>new Uu(e,t).update(n).digest();zu.create=(e,t)=>new Uu(e,t);const Vu=BigInt(0),Hu=BigInt(1);function Gu(e){return function(e){const t=Lu.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});Au(e,t)}(e.Fp),Au(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze(h(h(h({},Mu(e.n,e.nBitLength)),e),{p:e.Fp.ORDER}))}const{Ph:qu,aT:Wu}=r,Qu={Err:class extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},_parseInt(e){const{Err:t}=Qu;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(128&r[0])throw new t("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:qu(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=Qu,n="string"===typeof e?Wu(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||48!=n[0])throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:i,l:s}=Qu._parseInt(n.subarray(2)),{d:a,l:o}=Qu._parseInt(s);if(o.length)throw new t("Invalid signature: left bytes after parsing");return{r:i,s:a}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,n=e=>{const t=e.toString(16);return 1&t.length?"0".concat(t):t},r=t(n(e.s)),i=t(n(e.r)),s=r.length/2,a=i.length/2,o=n(s),l=n(a);return"30".concat(n(a+s+4),"02").concat(l).concat(i,"02").concat(o).concat(r)}},Ku=BigInt(0),Ju=BigInt(1),Yu=(BigInt(2),BigInt(3));BigInt(4);function Xu(e){const t=function(e){const t=Gu(e);Au(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:i}=t;if(n){if(!r.eql(i,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!==typeof n||"bigint"!==typeof n.beta||"function"!==typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze(h({},t))}(e),{Fp:n}=t,r=t.toBytes||((e,t,r)=>{const i=t.toAffine();return yu(Uint8Array.from([4]),n.toBytes(i.x),n.toBytes(i.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function s(e){const{a:r,b:i}=t,s=n.sqr(e),a=n.mul(s,e);return n.add(n.add(a,n.mul(e,r)),i)}if(!n.eql(n.sqr(t.Gy),s(t.Gx)))throw new Error("bad generator point: equation left != right");function a(e){return"bigint"===typeof e&&Ku<e&&e<t.n}function o(e){if(!a(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function l(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:i,n:s}=t;if(n&&"bigint"!==typeof e){if(e instanceof Uint8Array&&(e=cu(e)),"string"!==typeof e||!n.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*r,"0")}let a;try{a="bigint"===typeof e?e:du(gu("private key",e,r))}catch(l){throw new Error("private key must be ".concat(r," bytes, hex or bigint, not ").concat(typeof e))}return i&&(a=_u(a,s)),o(a),a}const c=new Map;function u(e){if(!(e instanceof d))throw new Error("ProjectivePoint expected")}class d{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required")}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof d)throw new Error("projective point not allowed");const i=e=>n.eql(e,n.ZERO);return i(t)&&i(r)?d.ZERO:new d(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map(e=>e.pz));return e.map((e,n)=>e.toAffine(t[n])).map(d.fromAffine)}static fromHex(e){const t=d.fromAffine(i(gu("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return d.BASE.multiply(l(e))}_setWindowSize(e){this._WINDOW_SIZE=e,c.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:r}=this.toAffine();if(!n.isValid(e)||!n.isValid(r))throw new Error("bad point: x or y not FE");const i=n.sqr(r),a=s(e);if(!n.eql(i,a))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){u(e);const{px:t,py:r,pz:i}=this,{px:s,py:a,pz:o}=e,l=n.eql(n.mul(t,o),n.mul(s,i)),c=n.eql(n.mul(r,o),n.mul(a,i));return l&&c}negate(){return new d(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,i=n.mul(r,Yu),{px:s,py:a,pz:o}=this;let l=n.ZERO,c=n.ZERO,u=n.ZERO,h=n.mul(s,s),f=n.mul(a,a),p=n.mul(o,o),m=n.mul(s,a);return m=n.add(m,m),u=n.mul(s,o),u=n.add(u,u),l=n.mul(e,u),c=n.mul(i,p),c=n.add(l,c),l=n.sub(f,c),c=n.add(f,c),c=n.mul(l,c),l=n.mul(m,l),u=n.mul(i,u),p=n.mul(e,p),m=n.sub(h,p),m=n.mul(e,m),m=n.add(m,u),u=n.add(h,h),h=n.add(u,h),h=n.add(h,p),h=n.mul(h,m),c=n.add(c,h),p=n.mul(a,o),p=n.add(p,p),h=n.mul(p,m),l=n.sub(l,h),u=n.mul(p,f),u=n.add(u,u),u=n.add(u,u),new d(l,c,u)}add(e){u(e);const{px:r,py:i,pz:s}=this,{px:a,py:o,pz:l}=e;let c=n.ZERO,h=n.ZERO,f=n.ZERO;const p=t.a,m=n.mul(t.b,Yu);let g=n.mul(r,a),y=n.mul(i,o),v=n.mul(s,l),b=n.add(r,i),w=n.add(a,o);b=n.mul(b,w),w=n.add(g,y),b=n.sub(b,w),w=n.add(r,s);let x=n.add(a,l);return w=n.mul(w,x),x=n.add(g,v),w=n.sub(w,x),x=n.add(i,s),c=n.add(o,l),x=n.mul(x,c),c=n.add(y,v),x=n.sub(x,c),f=n.mul(p,w),c=n.mul(m,v),f=n.add(c,f),c=n.sub(y,f),f=n.add(y,f),h=n.mul(c,f),y=n.add(g,g),y=n.add(y,g),v=n.mul(p,v),w=n.mul(m,w),y=n.add(y,v),v=n.sub(g,v),v=n.mul(p,v),w=n.add(w,v),g=n.mul(y,w),h=n.add(h,g),g=n.mul(x,w),c=n.mul(b,c),c=n.sub(c,g),g=n.mul(b,y),f=n.mul(x,f),f=n.add(f,g),new d(c,h,f)}subtract(e){return this.add(e.negate())}is0(){return this.equals(d.ZERO)}wNAF(e){return p.wNAFCached(this,c,e,e=>{const t=n.invertBatch(e.map(e=>e.pz));return e.map((e,n)=>e.toAffine(t[n])).map(d.fromAffine)})}multiplyUnsafe(e){const r=d.ZERO;if(e===Ku)return r;if(o(e),e===Ju)return this;const{endo:i}=t;if(!i)return p.unsafeLadder(this,e);let{k1neg:s,k1:a,k2neg:l,k2:c}=i.splitScalar(e),u=r,h=r,f=this;for(;a>Ku||c>Ku;)a&Ju&&(u=u.add(f)),c&Ju&&(h=h.add(f)),f=f.double(),a>>=Ju,c>>=Ju;return s&&(u=u.negate()),l&&(h=h.negate()),h=new d(n.mul(h.px,i.beta),h.py,h.pz),u.add(h)}multiply(e){o(e);let r,i,s=e;const{endo:a}=t;if(a){const{k1neg:e,k1:t,k2neg:o,k2:l}=a.splitScalar(s);let{p:c,f:u}=this.wNAF(t),{p:h,f:f}=this.wNAF(l);c=p.constTimeNegate(e,c),h=p.constTimeNegate(o,h),h=new d(n.mul(h.px,a.beta),h.py,h.pz),r=c.add(h),i=u.add(f)}else{const{p:e,f:t}=this.wNAF(s);r=e,i=t}return d.normalizeZ([r,i])[0]}multiplyAndAddUnsafe(e,t,n){const r=d.BASE,i=(e,t)=>t!==Ku&&t!==Ju&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),s=i(this,t).add(i(e,n));return s.is0()?void 0:s}toAffine(e){const{px:t,py:r,pz:i}=this,s=this.is0();null==e&&(e=s?n.ONE:n.inv(i));const a=n.mul(t,e),o=n.mul(r,e),l=n.mul(i,e);if(s)return{x:n.ZERO,y:n.ZERO};if(!n.eql(l,n.ONE))throw new Error("invZ was invalid");return{x:a,y:o}}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===Ju)return!0;if(n)return n(d,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===Ju?this:n?n(d,this):this.multiplyUnsafe(t.h)}toRawBytes(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.assertValidity(),r(d,this,e)}toHex(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return cu(this.toRawBytes(e))}}d.BASE=new d(t.Gx,t.Gy,n.ONE),d.ZERO=new d(n.ZERO,n.ONE,n.ZERO);const f=t.nBitLength,p=function(e,t){const n=(e,t)=>{const n=t.negate();return e?n:t},r=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let r=e.ZERO,i=t;for(;n>Vu;)n&Hu&&(r=r.add(i)),i=i.double(),n>>=Hu;return r},precomputeWindow(e,t){const{windows:n,windowSize:i}=r(t),s=[];let a=e,o=a;for(let r=0;r<n;r++){o=a,s.push(o);for(let e=1;e<i;e++)o=o.add(a),s.push(o);a=o.double()}return s},wNAF(t,i,s){const{windows:a,windowSize:o}=r(t);let l=e.ZERO,c=e.BASE;const u=BigInt(2**t-1),h=2**t,d=BigInt(t);for(let e=0;e<a;e++){const t=e*o;let r=Number(s&u);s>>=d,r>o&&(r-=h,s+=Hu);const a=t,f=t+Math.abs(r)-1,p=e%2!==0,m=r<0;0===r?c=c.add(n(p,i[a])):l=l.add(n(m,i[f]))}return{p:l,f:c}},wNAFCached(e,t,n,r){const i=e._WINDOW_SIZE||1;let s=t.get(e);return s||(s=this.precomputeWindow(e,i),1!==i&&t.set(e,r(s))),this.wNAF(i,s,n)}}}(d,t.endo?Math.ceil(f/2):f);return{CURVE:t,ProjectivePoint:d,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:a}}function Zu(e){const t=function(e){const t=Gu(e);return Au(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze(h({lowS:!0},t))}(e),{Fp:n,n:r}=t,i=n.BYTES+1,s=2*n.BYTES+1;function a(e){return _u(e,r)}function o(e){return Ou(e,r)}const{ProjectivePoint:l,normPrivateKeyToScalar:c,weierstrassEquation:u,isWithinCurveOrder:d}=Xu(h(h({},t),{},{toBytes(e,t,r){const i=t.toAffine(),s=n.toBytes(i.x),a=yu;return r?a(Uint8Array.from([t.hasEvenY()?2:3]),s):a(Uint8Array.from([4]),s,n.toBytes(i.y))},fromBytes(e){const t=e.length,r=e[0],a=e.subarray(1);if(t!==i||2!==r&&3!==r){if(t===s&&4===r){return{x:n.fromBytes(a.subarray(0,n.BYTES)),y:n.fromBytes(a.subarray(n.BYTES,2*n.BYTES))}}throw new Error("Point of length ".concat(t," was invalid. Expected ").concat(i," compressed bytes or ").concat(s," uncompressed bytes"))}{const e=du(a);if(!(Ku<(o=e)&&o<n.ORDER))throw new Error("Point is not on curve");const t=u(e);let i=n.sqrt(t);return 1===(1&r)!==((i&Ju)===Ju)&&(i=n.neg(i)),{x:e,y:i}}var o}})),f=e=>cu(pu(e,t.nByteLength));function p(e){return e>r>>Ju}const m=(e,t,n)=>du(e.slice(t,n));class g{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const n=t.nByteLength;return e=gu("compactSignature",e,2*n),new g(m(e,0,n),m(e,n,2*n))}static fromDER(e){const{r:t,s:n}=Qu.toSig(gu("DER",e));return new g(t,n)}assertValidity(){if(!d(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){const{r:r,s:i,recovery:s}=this,c=w(gu("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const u=2===s||3===s?r+t.n:r;if(u>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=0===(1&s)?"02":"03",d=l.fromHex(h+f(u)),p=o(u),m=a(-c*p),g=a(i*p),y=l.BASE.multiplyAndAddUnsafe(d,m,g);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return hu(this.toDERHex())}toDERHex(){return Qu.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hu(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const y={isValidPrivateKey(e){try{return c(e),!0}catch(t){return!1}},normPrivateKeyToScalar:c,randomPrivateKey:()=>{const e=Bu(t.n);return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=e.length,i=Fu(t),s=Bu(t);if(r<16||r<s||r>1024)throw new Error("expected ".concat(s,"-1024 bytes of input, got ").concat(r));const a=_u(n?du(e):fu(e),t-Su)+Su;return n?mu(a,i):pu(a,i)}(t.randomBytes(e),t.n)},precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}};function v(e){const t=e instanceof Uint8Array,n="string"===typeof e,r=(t||n)&&e.length;return t?r===i||r===s:n?r===2*i||r===2*s:e instanceof l}const b=t.bits2int||function(e){const n=du(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},w=t.bits2int_modN||function(e){return a(b(e))},x=vu(t.nBitLength);function E(e){if("bigint"!==typeof e)throw new Error("bigint expected");if(!(Ku<=e&&e<x))throw new Error("bigint expected < 2^".concat(t.nBitLength));return pu(e,t.nByteLength)}function A(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k;if(["recovered","canonical"].some(e=>e in i))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:u}=t;let{lowS:h,prehash:f,extraEntropy:m}=i;null==h&&(h=!0),e=gu("msgHash",e),f&&(e=gu("prehashed msgHash",s(e)));const y=w(e),v=c(r),x=[E(v),E(y)];if(null!=m){const e=!0===m?u(n.BYTES):m;x.push(gu("extraEntropy",e))}const A=yu(...x),S=y;return{seed:A,k2sig:function(e){const t=b(e);if(!d(t))return;const n=o(t),r=l.BASE.multiply(t).toAffine(),i=a(r.x);if(i===Ku)return;const s=a(n*a(S+i*v));if(s===Ku)return;let c=(r.x===i?0:2)|Number(r.y&Ju),u=s;return h&&p(s)&&(u=function(e){return p(e)?a(-e):e}(s),c^=1),new g(i,u,c)}}}const k={lowS:t.lowS,prehash:!1},S={lowS:t.lowS,prehash:!1};return l.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return l.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(v(e))throw new Error("first arg must be private key");if(!v(t))throw new Error("second arg must be public key");return l.fromHex(t).multiply(c(e)).toRawBytes(n)},sign:function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k;const{seed:i,k2sig:s}=A(e,n,r),a=t;return xu(a.hash.outputLen,a.nByteLength,a.hmac)(i,s)},verify:function(e,n,r){var i;let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:S;const c=e;if(n=gu("msgHash",n),r=gu("publicKey",r),"strict"in s)throw new Error("options.strict was renamed to lowS");const{lowS:u,prehash:h}=s;let d,f;try{if("string"===typeof c||c instanceof Uint8Array)try{d=g.fromDER(c)}catch(A){if(!(A instanceof Qu.Err))throw A;d=g.fromCompact(c)}else{if("object"!==typeof c||"bigint"!==typeof c.r||"bigint"!==typeof c.s)throw new Error("PARSE");{const{r:e,s:t}=c;d=new g(e,t)}}f=l.fromHex(r)}catch(k){if("PARSE"===k.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&d.hasHighS())return!1;h&&(n=t.hash(n));const{r:p,s:m}=d,y=w(n),v=o(m),b=a(y*v),x=a(p*v),E=null===(i=l.BASE.multiplyAndAddUnsafe(f,b,x))||void 0===i?void 0:i.toAffine();return!!E&&a(E.x)===p},ProjectivePoint:l,Signature:g,utils:y}}function $u(e){return{hash:e,hmac:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return zu(e,t,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=new Uint8Array(t.reduce((e,t)=>e+t.length,0));let i=0;return t.forEach(e=>{if(!Cr(e))throw new Error("Uint8Array expected");r.set(e,i),i+=e.length}),r}(...r))},randomBytes:Rr}}const eh=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),th=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),nh=BigInt(1),rh=BigInt(2),ih=(e,t)=>(e+t/rh)/t;function sh(e){const t=eh,n=BigInt(3),r=BigInt(6),i=BigInt(11),s=BigInt(22),a=BigInt(23),o=BigInt(44),l=BigInt(88),c=e*e*e%t,u=c*c*e%t,h=Du(u,n,t)*u%t,d=Du(h,n,t)*u%t,f=Du(d,rh,t)*c%t,p=Du(f,i,t)*f%t,m=Du(p,s,t)*p%t,g=Du(m,o,t)*m%t,y=Du(g,l,t)*g%t,v=Du(y,o,t)*m%t,b=Du(v,n,t)*u%t,w=Du(b,a,t)*p%t,x=Du(w,r,t)*c%t,E=Du(x,rh,t);if(!ah.eql(ah.sqr(E),e))throw new Error("Cannot find square root");return E}const ah=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e<=ku)throw new Error("Expected Field ORDER > 0, got ".concat(e));const{nBitLength:i,nByteLength:s}=Mu(e,t);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");const a=ju(e),o=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:vu(i),ZERO:ku,ONE:Su,create:t=>_u(t,e),isValid:t=>{if("bigint"!==typeof t)throw new Error("Invalid field element: expected bigint, got ".concat(typeof t));return ku<=t&&t<e},is0:e=>e===ku,isOdd:e=>(e&Su)===Su,neg:t=>_u(-t,e),eql:(e,t)=>e===t,sqr:t=>_u(t*t,e),add:(t,n)=>_u(t+n,e),sub:(t,n)=>_u(t-n,e),mul:(t,n)=>_u(t*n,e),pow:(e,t)=>function(e,t,n){if(n<ku)throw new Error("Expected power > 0");if(n===ku)return e.ONE;if(n===Su)return t;let r=e.ONE,i=t;for(;n>ku;)n&Su&&(r=e.mul(r,i)),i=e.sqr(i),n>>=Su;return r}(o,e,t),div:(t,n)=>_u(t*Ou(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Ou(t,e),sqrt:r.sqrt||(e=>a(o,e)),invertBatch:e=>function(e,t){const n=new Array(t.length),r=t.reduce((t,r,i)=>e.is0(r)?t:(n[i]=t,e.mul(t,r)),e.ONE),i=e.inv(r);return t.reduceRight((t,r,i)=>e.is0(r)?t:(n[i]=e.mul(t,n[i]),e.mul(t,r)),i),n}(o,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?mu(e,s):pu(e,s),fromBytes:e=>{if(e.length!==s)throw new Error("Fp.fromBytes: expected ".concat(s,", got ").concat(e.length));return n?fu(e):du(e)}});return Object.freeze(o)}(eh,void 0,void 0,{sqrt:sh}),oh=function(e,t){const n=t=>Zu(h(h({},e),$u(t)));return Object.freeze(h(h({},n(t)),{},{create:n}))}({a:BigInt(0),b:BigInt(7),Fp:ah,n:th,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=th,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-nh*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=n,a=BigInt("0x100000000000000000000000000000000"),o=ih(s*e,t),l=ih(-r*e,t);let c=_u(e-o*n-l*i,t),u=_u(-o*r-l*s,t);const h=c>a,d=u>a;if(h&&(c=t-c),d&&(u=t-u),c>a||u>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:c,k2neg:d,k2:u}}}},Vc);BigInt(0);oh.ProjectivePoint;var lh=new WeakMap;class ch{constructor(e){Jt(this,lh,void 0),ln(32===xn(e),"invalid private key","privateKey","[REDACTED]"),Zt(lh,this,bn(e))}get privateKey(){return Xt(lh,this)}get publicKey(){return ch.computePublicKey(Xt(lh,this))}get compressedPublicKey(){return ch.computePublicKey(Xt(lh,this),!0)}sign(e){ln(32===xn(e),"invalid digest length","digest",e);const t=oh.sign(mn(e),mn(Xt(lh,this)),{lowS:!0});return Ca.from({r:jn(t.r,32),s:jn(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=ch.computePublicKey(e);return bn(oh.getSharedSecret(mn(Xt(lh,this)),pn(t),!1))}static computePublicKey(e,t){let n=pn(e,"key");if(32===n.length){return bn(oh.getPublicKey(n,!!t))}if(64===n.length){const e=new Uint8Array(65);e[0]=4,e.set(n,1),n=e}return bn(oh.ProjectivePoint.fromHex(n).toRawBytes(t))}static recoverPublicKey(e,t){ln(32===xn(e),"invalid digest length","digest",e);const n=Ca.from(t);let r=oh.Signature.fromCompact(mn(wn([n.r,n.s])));r=r.addRecoveryBit(n.yParity);const i=r.recoverPublicKey(mn(e));return ln(null!=i,"invalid signature for digest","signature",t),"0x"+i.toHex(!1)}static addPoints(e,t,n){const r=oh.ProjectivePoint.fromHex(ch.computePublicKey(e).substring(2)),i=oh.ProjectivePoint.fromHex(ch.computePublicKey(t).substring(2));return"0x"+r.add(i).toHex(!!n)}}function uh(e){let t=e.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function hh(e,t,n){let r=0;for(let i=0;i<n;i++)r=256*r+e[t+i];return r}function dh(e,t,n,r){const i=[];for(;n<t+1+r;){const s=fh(e,n);i.push(s.result),on((n+=s.consumed)<=t+1+r,"child data too short","BUFFER_OVERRUN",{buffer:e,length:r,offset:t})}return{consumed:1+r,result:i}}function fh(e,t){on(0!==e.length,"data too short","BUFFER_OVERRUN",{buffer:e,length:0,offset:1});const n=t=>{on(t<=e.length,"data short segment too short","BUFFER_OVERRUN",{buffer:e,length:e.length,offset:t})};if(e[t]>=248){const r=e[t]-247;n(t+1+r);const i=hh(e,t+1,r);return n(t+1+r+i),dh(e,t,t+1+r,r+i)}if(e[t]>=192){const r=e[t]-192;return n(t+1+r),dh(e,t,t+1,r)}if(e[t]>=184){const r=e[t]-183;n(t+1+r);const i=hh(e,t+1,r);n(t+1+r+i);return{consumed:1+r+i,result:bn(e.slice(t+1+r,t+1+r+i))}}if(e[t]>=128){const r=e[t]-128;n(t+1+r);return{consumed:1+r,result:bn(e.slice(t+1,t+1+r))}}return{consumed:1,result:uh(e[t])}}function ph(e){const t=pn(e,"data"),n=fh(t,0);return ln(n.consumed===t.length,"unexpected junk after rlp payload","data",e),n.result}function mh(e){const t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function gh(e){if(Array.isArray(e)){let t=[];if(e.forEach(function(e){t=t.concat(gh(e))}),t.length<=55)return t.unshift(192+t.length),t;const n=mh(t.length);return n.unshift(247+n.length),n.concat(t)}const t=Array.prototype.slice.call(pn(e,"object"));if(1===t.length&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const n=mh(t.length);return n.unshift(183+n.length),n.concat(t)}const yh="0123456789abcdef";function vh(e){let t="0x";for(const n of gh(e))t+=yh[n>>4],t+=yh[15&n];return t}function bh(e,t){return function(e){let t;return t="string"===typeof e?ch.computePublicKey(e,!1):e.publicKey,si(Zr("0x"+t.substring(4)).substring(26))}(ch.recoverPublicKey(e,t))}const wh=BigInt(0),xh=BigInt(2),Eh=BigInt(27),Ah=BigInt(28),kh=BigInt(35),Sh=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Ch=131072;function Th(e,t){let n=e.toString(16);for(;n.length<2;)n="0"+n;return n+=ru(t).substring(4),"0x"+n}function Nh(e){return"0x"===e?null:si(e)}function Ih(e,t){try{return da(e)}catch(n){ln(!1,n.message,t,e)}}function Ph(e,t){try{if(!Array.isArray(e))throw new Error("authorizationList: invalid array");const t=[];for(let n=0;n<e.length;n++){const r=e[n];if(!Array.isArray(r))throw new Error("authorization[".concat(n,"]: invalid array"));if(6!==r.length)throw new Error("authorization[".concat(n,"]: wrong length"));if(!r[1])throw new Error("authorization[".concat(n,"]: null address"));t.push({address:Nh(r[1]),nonce:Rh(r[2],"nonce"),chainId:Rh(r[0],"chainId"),signature:Ca.from({yParity:_h(r[3],"yParity"),r:kn(r[4],32),s:kn(r[5],32)})})}return t}catch(n){ln(!1,n.message,t,e)}}function _h(e,t){return"0x"===e?0:On(e,t)}function Rh(e,t){if("0x"===e)return wh;const n=Pn(e,t);return ln(n<=Sh,"value exceeds uint size",t,n),n}function Dh(e,t){const n=Pn(e,"value"),r=Ln(n);return ln(r.length<=32,"value too large","tx.".concat(t),n),r}function Oh(e){return da(e).map(e=>[e.address,e.storageKeys])}function jh(e,t){ln(Array.isArray(e),"invalid ".concat(t),"value",e);for(let n=0;n<e.length;n++)ln(gn(e[n],32),"invalid ${ param } hash","value[".concat(n,"]"),e[n]);return e}function Lh(e,t){let n;try{if(n=_h(t[0],"yParity"),0!==n&&1!==n)throw new Error("bad yParity")}catch(a){ln(!1,"invalid yParity","yParity",t[0])}const r=kn(t[1],32),i=kn(t[2],32),s=Ca.from({r:r,s:i,yParity:n});e.signature=s}var Mh=new WeakMap,Fh=new WeakMap,Bh=new WeakMap,Uh=new WeakMap,zh=new WeakMap,Vh=new WeakMap,Hh=new WeakMap,Gh=new WeakMap,qh=new WeakMap,Wh=new WeakMap,Qh=new WeakMap,Kh=new WeakMap,Jh=new WeakMap,Yh=new WeakMap,Xh=new WeakMap,Zh=new WeakMap,$h=new WeakMap,ed=new WeakSet;class td{get type(){return Xt(Mh,this)}set type(e){switch(e){case null:Zt(Mh,this,null);break;case 0:case"legacy":Zt(Mh,this,0);break;case 1:case"berlin":case"eip-2930":Zt(Mh,this,1);break;case 2:case"london":case"eip-1559":Zt(Mh,this,2);break;case 3:case"cancun":case"eip-4844":Zt(Mh,this,3);break;case 4:case"pectra":case"eip-7702":Zt(Mh,this,4);break;default:ln(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=Xt(Fh,this);return null==e&&3===this.type?po:e}set to(e){Zt(Fh,this,null==e?null:si(e))}get nonce(){return Xt(Uh,this)}set nonce(e){Zt(Uh,this,On(e,"value"))}get gasLimit(){return Xt(zh,this)}set gasLimit(e){Zt(zh,this,Pn(e))}get gasPrice(){const e=Xt(Vh,this);return null!=e||0!==this.type&&1!==this.type?e:wh}set gasPrice(e){Zt(Vh,this,null==e?null:Pn(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=Xt(Hh,this);return null==e?2===this.type||3===this.type?wh:null:e}set maxPriorityFeePerGas(e){Zt(Hh,this,null==e?null:Pn(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=Xt(Gh,this);return null==e?2===this.type||3===this.type?wh:null:e}set maxFeePerGas(e){Zt(Gh,this,null==e?null:Pn(e,"maxFeePerGas"))}get data(){return Xt(Bh,this)}set data(e){Zt(Bh,this,bn(e))}get value(){return Xt(qh,this)}set value(e){Zt(qh,this,Pn(e,"value"))}get chainId(){return Xt(Wh,this)}set chainId(e){Zt(Wh,this,Pn(e))}get signature(){return Xt(Qh,this)||null}set signature(e){Zt(Qh,this,null==e?null:Ca.from(e))}get accessList(){const e=Xt(Kh,this)||null;return null==e?1===this.type||2===this.type||3===this.type?[]:null:e}set accessList(e){Zt(Kh,this,null==e?null:da(e))}get authorizationList(){const e=Xt($h,this)||null;return null==e&&4===this.type?[]:e}set authorizationList(e){Zt($h,this,null==e?null:e.map(e=>Ta(e)))}get maxFeePerBlobGas(){const e=Xt(Jh,this);return null==e&&3===this.type?wh:e}set maxFeePerBlobGas(e){Zt(Jh,this,null==e?null:Pn(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=Xt(Yh,this);return null==e&&3===this.type?[]:e}set blobVersionedHashes(e){if(null!=e){ln(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)ln(gn(e[t],32),"invalid blobVersionedHash","value[".concat(t,"]"),e[t])}Zt(Yh,this,e)}get blobs(){return null==Xt(Zh,this)?null:Xt(Zh,this).map(e=>Object.assign({},e))}set blobs(e){if(null==e)return void Zt(Zh,this,null);const t=[],n=[];for(let r=0;r<e.length;r++){const i=e[r];if(yn(i)){on(Xt(Xh,this),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let e=pn(i);if(ln(e.length<=Ch,"blob is too large","blobs[".concat(r,"]"),i),e.length!==Ch){const t=new Uint8Array(Ch);t.set(e),e=t}const s=Xt(Xh,this).blobToKzgCommitment(e),a=bn(Xt(Xh,this).computeBlobKzgProof(e,s));t.push({data:bn(e),commitment:bn(s),proof:a}),n.push(Th(1,s))}else{const e=bn(i.commitment);t.push({data:bn(i.data),commitment:e,proof:bn(i.proof)}),n.push(Th(1,e))}}Zt(Zh,this,t),Zt(Yh,this,n)}get kzg(){return Xt(Xh,this)}set kzg(e){Zt(Xh,this,null==e?null:function(e){return{blobToKzgCommitment:t=>{if("computeBlobProof"in e){if("blobToKzgCommitment"in e&&"function"===typeof e.blobToKzgCommitment)return pn(e.blobToKzgCommitment(bn(t)))}else if("blobToKzgCommitment"in e&&"function"===typeof e.blobToKzgCommitment)return pn(e.blobToKzgCommitment(t));if("blobToKZGCommitment"in e&&"function"===typeof e.blobToKZGCommitment)return pn(e.blobToKZGCommitment(bn(t)));ln(!1,"unsupported KZG library","kzg",e)},computeBlobKzgProof:(t,n)=>"computeBlobProof"in e&&"function"===typeof e.computeBlobProof?pn(e.computeBlobProof(bn(t),bn(n))):"computeBlobKzgProof"in e&&"function"===typeof e.computeBlobKzgProof?e.computeBlobKzgProof(t,n):"computeBlobKZGProof"in e&&"function"===typeof e.computeBlobKZGProof?pn(e.computeBlobKZGProof(bn(t),bn(n))):void ln(!1,"unsupported KZG library","kzg",e)}}(e))}constructor(){dn(this,ed),Jt(this,Mh,void 0),Jt(this,Fh,void 0),Jt(this,Bh,void 0),Jt(this,Uh,void 0),Jt(this,zh,void 0),Jt(this,Vh,void 0),Jt(this,Hh,void 0),Jt(this,Gh,void 0),Jt(this,qh,void 0),Jt(this,Wh,void 0),Jt(this,Qh,void 0),Jt(this,Kh,void 0),Jt(this,Jh,void 0),Jt(this,Yh,void 0),Jt(this,Xh,void 0),Jt(this,Zh,void 0),Jt(this,$h,void 0),Zt(Mh,this,null),Zt(Fh,this,null),Zt(Uh,this,0),Zt(zh,this,wh),Zt(Vh,this,null),Zt(Hh,this,null),Zt(Gh,this,null),Zt(Bh,this,"0x"),Zt(qh,this,wh),Zt(Wh,this,wh),Zt(Qh,this,null),Zt(Kh,this,null),Zt(Jh,this,null),Zt(Yh,this,null),Zt(Xh,this,null),Zt(Zh,this,null),Zt($h,this,null)}get hash(){return null==this.signature?null:Zr(Yt(ed,this,nd).call(this,!0,!1))}get unsignedHash(){return Zr(this.unsignedSerialized)}get from(){return null==this.signature?null:bh(this.unsignedHash,this.signature)}get fromPublicKey(){return null==this.signature?null:ch.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}get serialized(){return Yt(ed,this,nd).call(this,!0,!0)}get unsignedSerialized(){return Yt(ed,this,nd).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=null!=this.gasPrice,t=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,n=null!=this.accessList,r=null!=Xt(Jh,this)||Xt(Yh,this);null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&on(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),on(!t||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),on(0!==this.type||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const i=[];return null!=this.type?i.push(this.type):this.authorizationList&&this.authorizationList.length?i.push(4):t?i.push(2):e?(i.push(1),n||i.push(0)):n?(i.push(1),i.push(2)):(r&&this.to||(i.push(0),i.push(1),i.push(2)),i.push(3)),i.sort(),i}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}clone(){return td.from(this)}toJSON(){const e=e=>null==e?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(null==e)return new td;if("string"===typeof e){const t=pn(e);if(t[0]>=127)return td.from(function(e){const t=ph(e);ln(Array.isArray(t)&&(9===t.length||6===t.length),"invalid field count for legacy transaction","data",e);const n={type:0,nonce:_h(t[0],"nonce"),gasPrice:Rh(t[1],"gasPrice"),gasLimit:Rh(t[2],"gasLimit"),to:Nh(t[3]),value:Rh(t[4],"value"),data:bn(t[5]),chainId:wh};if(6===t.length)return n;const r=Rh(t[6],"v"),i=Rh(t[7],"r"),s=Rh(t[8],"s");if(i===wh&&s===wh)n.chainId=r;else{let e=(r-kh)/xh;e<wh&&(e=wh),n.chainId=e,ln(e!==wh||r===Eh||r===Ah,"non-canonical legacy v","v",t[6]),n.signature=Ca.from({r:kn(t[7],32),s:kn(t[8],32),v:r})}return n}(t));switch(t[0]){case 1:return td.from(function(e){const t=ph(pn(e).slice(1));ln(Array.isArray(t)&&(8===t.length||11===t.length),"invalid field count for transaction type: 1","data",bn(e));const n={type:1,chainId:Rh(t[0],"chainId"),nonce:_h(t[1],"nonce"),gasPrice:Rh(t[2],"gasPrice"),gasLimit:Rh(t[3],"gasLimit"),to:Nh(t[4]),value:Rh(t[5],"value"),data:bn(t[6]),accessList:Ih(t[7],"accessList")};return 8===t.length||Lh(n,t.slice(8)),n}(t));case 2:return td.from(function(e){const t=ph(pn(e).slice(1));ln(Array.isArray(t)&&(9===t.length||12===t.length),"invalid field count for transaction type: 2","data",bn(e));const n={type:2,chainId:Rh(t[0],"chainId"),nonce:_h(t[1],"nonce"),maxPriorityFeePerGas:Rh(t[2],"maxPriorityFeePerGas"),maxFeePerGas:Rh(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:Rh(t[4],"gasLimit"),to:Nh(t[5]),value:Rh(t[6],"value"),data:bn(t[7]),accessList:Ih(t[8],"accessList")};return 9===t.length||Lh(n,t.slice(9)),n}(t));case 3:return td.from(function(e){let t=ph(pn(e).slice(1)),n="3",r=null;if(4===t.length&&Array.isArray(t[0])){n="3 (network format)";const e=t[1],i=t[2],s=t[3];ln(Array.isArray(e),"invalid network format: blobs not an array","fields[1]",e),ln(Array.isArray(i),"invalid network format: commitments not an array","fields[2]",i),ln(Array.isArray(s),"invalid network format: proofs not an array","fields[3]",s),ln(e.length===i.length,"invalid network format: blobs/commitments length mismatch","fields",t),ln(e.length===s.length,"invalid network format: blobs/proofs length mismatch","fields",t),r=[];for(let n=0;n<t[1].length;n++)r.push({data:e[n],commitment:i[n],proof:s[n]});t=t[0]}ln(Array.isArray(t)&&(11===t.length||14===t.length),"invalid field count for transaction type: ".concat(n),"data",bn(e));const i={type:3,chainId:Rh(t[0],"chainId"),nonce:_h(t[1],"nonce"),maxPriorityFeePerGas:Rh(t[2],"maxPriorityFeePerGas"),maxFeePerGas:Rh(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:Rh(t[4],"gasLimit"),to:Nh(t[5]),value:Rh(t[6],"value"),data:bn(t[7]),accessList:Ih(t[8],"accessList"),maxFeePerBlobGas:Rh(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};r&&(i.blobs=r),ln(null!=i.to,"invalid address for transaction type: ".concat(n),"data",e),ln(Array.isArray(i.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",e);for(let s=0;s<i.blobVersionedHashes.length;s++)ln(gn(i.blobVersionedHashes[s],32),"invalid blobVersionedHash at index ".concat(s,": must be length 32"),"data",e);return 11===t.length||Lh(i,t.slice(11)),i}(t));case 4:return td.from(function(e){const t=ph(pn(e).slice(1));ln(Array.isArray(t)&&(10===t.length||13===t.length),"invalid field count for transaction type: 4","data",bn(e));const n={type:4,chainId:Rh(t[0],"chainId"),nonce:_h(t[1],"nonce"),maxPriorityFeePerGas:Rh(t[2],"maxPriorityFeePerGas"),maxFeePerGas:Rh(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:Rh(t[4],"gasLimit"),to:Nh(t[5]),value:Rh(t[6],"value"),data:bn(t[7]),accessList:Ih(t[8],"accessList"),authorizationList:Ph(t[9],"authorizationList")};return 10===t.length||Lh(n,t.slice(10)),n}(t))}on(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new td;return null!=e.type&&(t.type=e.type),null!=e.to&&(t.to=e.to),null!=e.nonce&&(t.nonce=e.nonce),null!=e.gasLimit&&(t.gasLimit=e.gasLimit),null!=e.gasPrice&&(t.gasPrice=e.gasPrice),null!=e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),null!=e.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null!=e.maxFeePerBlobGas&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),null!=e.data&&(t.data=e.data),null!=e.value&&(t.value=e.value),null!=e.chainId&&(t.chainId=e.chainId),null!=e.signature&&(t.signature=Ca.from(e.signature)),null!=e.accessList&&(t.accessList=e.accessList),null!=e.authorizationList&&(t.authorizationList=e.authorizationList),null!=e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes),null!=e.kzg&&(t.kzg=e.kzg),null!=e.blobs&&(t.blobs=e.blobs),null!=e.hash&&(ln(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),ln(t.hash===e.hash,"hash mismatch","tx",e)),null!=e.from&&(ln(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),ln(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}}function nd(e,t){on(!e||null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const n=e?this.signature:null;switch(this.inferType()){case 0:return function(e,t){const n=[Dh(e.nonce,"nonce"),Dh(e.gasPrice||0,"gasPrice"),Dh(e.gasLimit,"gasLimit"),e.to||"0x",Dh(e.value,"value"),e.data];let r=wh;if(e.chainId!=wh)r=Pn(e.chainId,"tx.chainId"),ln(!t||null==t.networkV||t.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",t);else if(e.signature){const t=e.signature.legacyChainId;null!=t&&(r=t)}if(!t)return r!==wh&&(n.push(Ln(r)),n.push("0x"),n.push("0x")),vh(n);let i=BigInt(27+t.yParity);return r!==wh?i=Ca.getChainIdV(r,t.v):BigInt(t.v)!==i&&ln(!1,"tx.chainId/sig.v mismatch","sig",t),n.push(Ln(i)),n.push(Ln(t.r)),n.push(Ln(t.s)),vh(n)}(this,n);case 1:return function(e,t){const n=[Dh(e.chainId,"chainId"),Dh(e.nonce,"nonce"),Dh(e.gasPrice||0,"gasPrice"),Dh(e.gasLimit,"gasLimit"),e.to||"0x",Dh(e.value,"value"),e.data,Oh(e.accessList||[])];return t&&(n.push(Dh(t.yParity,"recoveryParam")),n.push(Ln(t.r)),n.push(Ln(t.s))),wn(["0x01",vh(n)])}(this,n);case 2:return function(e,t){const n=[Dh(e.chainId,"chainId"),Dh(e.nonce,"nonce"),Dh(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Dh(e.maxFeePerGas||0,"maxFeePerGas"),Dh(e.gasLimit,"gasLimit"),e.to||"0x",Dh(e.value,"value"),e.data,Oh(e.accessList||[])];return t&&(n.push(Dh(t.yParity,"yParity")),n.push(Ln(t.r)),n.push(Ln(t.s))),wn(["0x02",vh(n)])}(this,n);case 3:return function(e,t,n){const r=[Dh(e.chainId,"chainId"),Dh(e.nonce,"nonce"),Dh(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Dh(e.maxFeePerGas||0,"maxFeePerGas"),Dh(e.gasLimit,"gasLimit"),e.to||po,Dh(e.value,"value"),e.data,Oh(e.accessList||[]),Dh(e.maxFeePerBlobGas||0,"maxFeePerBlobGas"),jh(e.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(r.push(Dh(t.yParity,"yParity")),r.push(Ln(t.r)),r.push(Ln(t.s)),n)?wn(["0x03",vh([r,n.map(e=>e.data),n.map(e=>e.commitment),n.map(e=>e.proof)])]):wn(["0x03",vh(r)])}(this,n,t?this.blobs:null);case 4:return function(e,t){const n=[Dh(e.chainId,"chainId"),Dh(e.nonce,"nonce"),Dh(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Dh(e.maxFeePerGas||0,"maxFeePerGas"),Dh(e.gasLimit,"gasLimit"),e.to||"0x",Dh(e.value,"value"),e.data,Oh(e.accessList||[]),(r=e.authorizationList||[],r.map(e=>[Dh(e.chainId,"chainId"),e.address,Dh(e.nonce,"nonce"),Dh(e.signature.yParity,"yParity"),Ln(e.signature.r),Ln(e.signature.s)]))];var r;return t&&(n.push(Dh(t.yParity,"yParity")),n.push(Ln(t.r)),n.push(Ln(t.s))),wn(["0x04",vh(n)])}(this,n)}on(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}const rd="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const id=BigInt(58);var sd;function ad(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):ln(!1,"unsupported IPFS format","link",e),"https://gateway.ipfs.io/ipfs/".concat(e)}class od{constructor(e){c(this,"name",void 0),tn(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const ld=new RegExp("^(ipfs)://(.*)$","i"),cd=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),ld,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var ud=new WeakMap,hd=new WeakMap,dd=new WeakSet;class fd{constructor(e,t,n){dn(this,dd),c(this,"provider",void 0),c(this,"address",void 0),c(this,"name",void 0),Jt(this,ud,void 0),Jt(this,hd,void 0),tn(this,{provider:e,address:t,name:n}),Zt(ud,this,null),Zt(hd,this,new El(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return null==Xt(ud,this)&&Zt(ud,this,(async()=>{try{return await Xt(hd,this).supportsInterface("0x9061b923")}catch(e){if(rn(e,"CALL_EXCEPTION"))return!1;throw Zt(ud,this,null),e}})()),await Xt(ud,this)}async getAddress(e){if(null==e&&(e=60),60===e)try{const e=await Yt(dd,this,pd).call(this,"addr(bytes32)");return null==e||e===po?null:e}catch(i){if(rn(i,"CALL_EXCEPTION"))return null;throw i}if(e>=0&&e<2147483648){let t=e+2147483648;const n=await Yt(dd,this,pd).call(this,"addr(bytes32,uint)",[t]);if(gn(n,20))return si(n)}let t=null;for(const s of this.provider.plugins)if(s instanceof od&&s.supportsCoinType(e)){t=s;break}if(null==t)return null;const n=await Yt(dd,this,pd).call(this,"addr(bytes32,uint)",[e]);if(null==n||"0x"===n)return null;const r=await t.decodeAddress(e,n);if(null!=r)return r;on(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:"getAddress(".concat(e,")"),info:{coinType:e,data:n}})}async getText(e){const t=await Yt(dd,this,pd).call(this,"text(bytes32,string)",[e]);return null==t||"0x"===t?null:t}async getContentHash(){const e=await Yt(dd,this,pd).call(this,"contenthash(bytes32)");if(null==e||"0x"===e)return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const e="e3010170"===t[1]?"ipfs":"ipns",n=parseInt(t[4],16);if(t[5].length===2*n)return"".concat(e,"://").concat(function(e){const t=pn(e);let n=Dn(t),r="";for(;n;)r=rd[Number(n%id)]+r,n/=id;for(let i=0;i<t.length&&!t[i];i++)r=rd[0]+r;return r}("0x"+t[2]))}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&64===n[1].length)return"bzz://".concat(n[1]);on(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(null==n)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<cd.length;r++){const i=n.match(cd[r]);if(null==i)continue;const s=i[1].toLowerCase();switch(s){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const t=ad(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:t}),{linkage:e,url:t}}case"erc721":case"erc1155":{const r="erc721"===s?"tokenURI(uint256)":"uri(uint256)";e.push({type:s,value:n});const a=await this.getAddress();if(null==a)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const o=(i[2]||"").split("/");if(2!==o.length)return e.push({type:"!".concat(s,"caip"),value:i[2]||""}),{url:null,linkage:e};const l=o[1],c=new El(o[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if("erc721"===s){const t=await c.ownerOf(l);if(a!==t)return e.push({type:"!owner",value:t}),{url:null,linkage:e};e.push({type:"owner",value:t})}else if("erc1155"===s){const t=await c.balanceOf(a,l);if(!t)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:t.toString()})}let u=await c[r](l);if(null==u||"0x"===u)return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:u}),"erc1155"===s&&(u=u.replace("{id}",jn(l,32).substring(2)),e.push({type:"metadata-url-expanded",value:u})),u.match(/^ipfs:/i)&&(u=ad(u)),e.push({type:"metadata-url",value:u});let h={};const d=await new ro(u).send();d.assertOk();try{h=d.bodyJson}catch(t){try{e.push({type:"!metadata",value:d.bodyText})}catch(t){const n=d.body;return n&&e.push({type:"!metadata",value:bn(n)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!h)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(h)});let f=h.image;if("string"!==typeof f)return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(f.match(/^(https:\/\/|data:)/i));else{if(null==f.match(ld))return e.push({type:"!imageUrl-ipfs",value:f}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:f}),f=ad(f)}return e.push({type:"url",value:f}),{linkage:e,url:f}}}}}catch(t){}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),n=t.getPlugin("org.ethers.plugins.network.Ens");return on(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),n.address}static async fromName(e,t){let n=t;for(;;){if(""===n||"."===n)return null;if("eth"!==t&&"eth"===n)return null;const r=await md.call(fd,e,n);if(null!=r){const i=new fd(e,r,t);return n===t||await i.supportsWildcard()?i:null}n=n.split(".").slice(1).join(".")}}}async function pd(e,t){t=(t||[]).slice();const n=Xt(hd,this).interface;t.unshift(Dc(this.name));let r=null;await this.supportsWildcard()&&(r=n.getFunction(e),on(r,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[Oc(this.name,255),n.encodeFunctionData(r,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const i=await Xt(hd,this)[e](...t);return r?n.decodeFunctionResult(r,i)[0]:i}catch(i){if(!rn(i,"CALL_EXCEPTION"))throw i}return null}async function md(e,t){const n=await sd.getEnsAddress(e);try{const r=new El(n,["function resolver(bytes32) view returns (address)"],e),i=await r.resolver(Dc(t),{enableCcipRead:!0});return i===po?null:i}catch(r){throw r}}sd=fd;const gd=BigInt(0);function yd(e,t){return function(n){return null==n?t:e(n)}}function vd(e,t){return n=>{if(t&&null==n)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(t=>e(t))}}function bd(e,t){return n=>{const r={};for(const s in e){let a=s;if(t&&s in t&&!(a in n))for(const e of t[s])if(e in n){a=e;break}try{const t=e[s](n[a]);void 0!==t&&(r[s]=t)}catch(i){const e=i instanceof Error?i.message:"not-an-error";on(!1,"invalid value for value.".concat(s," (").concat(e,")"),"BAD_DATA",{value:n})}}return r}}function wd(e){return ln(gn(e,!0),"invalid data","value",e),e}function xd(e){return ln(gn(e,32),"invalid hash","value",e),e}const Ed=bd({address:si,blockHash:xd,blockNumber:On,data:wd,index:On,removed:yd(function(e){switch(e){case!0:case"true":return!0;case!1:case"false":return!1}ln(!1,"invalid boolean; ".concat(JSON.stringify(e)),"value",e)},!1),topics:vd(xd),transactionHash:xd,transactionIndex:On},{index:["logIndex"]});const Ad=bd({hash:yd(xd),parentHash:xd,parentBeaconBlockRoot:yd(xd,null),number:On,timestamp:On,nonce:yd(wd),difficulty:Pn,gasLimit:Pn,gasUsed:Pn,stateRoot:yd(xd,null),receiptsRoot:yd(xd,null),blobGasUsed:yd(Pn,null),excessBlobGas:yd(Pn,null),miner:yd(si),prevRandao:yd(xd,null),extraData:wd,baseFeePerGas:yd(Pn)},{prevRandao:["mixHash"]});const kd=bd({transactionIndex:On,blockNumber:On,transactionHash:xd,address:si,topics:vd(xd),data:wd,index:On,blockHash:xd},{index:["logIndex"]});const Sd=bd({to:yd(si,null),from:yd(si,null),contractAddress:yd(si,null),index:On,root:yd(bn),gasUsed:Pn,blobGasUsed:yd(Pn,null),logsBloom:yd(wd),blockHash:xd,hash:xd,logs:vd(function(e){return kd(e)}),blockNumber:On,cumulativeGasUsed:Pn,effectiveGasPrice:yd(Pn),blobGasPrice:yd(Pn,null),status:yd(On),type:yd(On,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function Cd(e){e.to&&Pn(e.to)===gd&&(e.to="0x0000000000000000000000000000000000000000");const t=bd({hash:xd,index:yd(On,void 0),type:e=>"0x"===e||null==e?0:On(e),accessList:yd(da,null),blobVersionedHashes:yd(vd(xd,!0),null),authorizationList:yd(vd(e=>{let t;if(e.signature)t=e.signature;else{let n=e.yParity;"0x1b"===n?n=0:"0x1c"===n&&(n=1),t=Object.assign({},e,{yParity:n})}return{address:si(e.address),chainId:Pn(e.chainId),nonce:Pn(e.nonce),signature:Ca.from(t)}},!1),null),blockHash:yd(xd,null),blockNumber:yd(On,null),transactionIndex:yd(On,null),from:si,gasPrice:yd(Pn),maxPriorityFeePerGas:yd(Pn),maxFeePerGas:yd(Pn),maxFeePerBlobGas:yd(Pn,null),gasLimit:Pn,to:yd(si,null),value:Pn,nonce:On,data:wd,creates:yd(si,null),chainId:yd(Pn,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(e);if(null==t.to&&null==t.creates&&(t.creates=function(e){const t=si(e.from);let n=Pn(e.nonce,"tx.nonce").toString(16);return n="0"===n?"0x":n.length%2?"0x0"+n:"0x"+n,si(En(Zr(vh([t,n])),12))}(t)),1!==e.type&&2!==e.type||null!=e.accessList||(t.accessList=[]),e.signature?t.signature=Ca.from(e.signature):t.signature=Ca.from(e),null==t.chainId){const e=t.signature.legacyChainId;null!=e&&(t.chainId=e)}return t.blockHash&&Pn(t.blockHash)===gd&&(t.blockHash=null),t}class Td{constructor(e){c(this,"name",void 0),tn(this,{name:e})}clone(){return new Td(this.name)}}class Nd extends Td{constructor(e,t){null==e&&(e=0),super("org.ethers.network.plugins.GasCost#".concat(e||0)),c(this,"effectiveBlock",void 0),c(this,"txBase",void 0),c(this,"txCreate",void 0),c(this,"txDataZero",void 0),c(this,"txDataNonzero",void 0),c(this,"txAccessListStorageKey",void 0),c(this,"txAccessListAddress",void 0);const n={effectiveBlock:e};function r(e,r){let i=(t||{})[e];null==i&&(i=r),ln("number"===typeof i,"invalud value for ".concat(e),"costs",t),n[e]=i}r("txBase",21e3),r("txCreate",32e3),r("txDataZero",4),r("txDataNonzero",16),r("txAccessListStorageKey",1900),r("txAccessListAddress",2400),tn(this,n)}clone(){return new Nd(this.effectiveBlock,this)}}class Id extends Td{constructor(e,t){super("org.ethers.plugins.network.Ens"),c(this,"address",void 0),c(this,"targetNetwork",void 0),tn(this,{address:e||"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",targetNetwork:null==t?1:t})}clone(){return new Id(this.address,this.targetNetwork)}}var Pd=new WeakMap,_d=new WeakMap;class Rd extends Td{get url(){return Xt(Pd,this)}get processFunc(){return Xt(_d,this)}constructor(e,t){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),Jt(this,Pd,void 0),Jt(this,_d,void 0),Zt(Pd,this,e),Zt(_d,this,t)}clone(){return this}}const Dd=new Map;var Od=new WeakMap,jd=new WeakMap,Ld=new WeakMap;class Md{constructor(e,t){Jt(this,Od,void 0),Jt(this,jd,void 0),Jt(this,Ld,void 0),Zt(Od,this,e),Zt(jd,this,Pn(t)),Zt(Ld,this,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return Xt(Od,this)}set name(e){Zt(Od,this,e)}get chainId(){return Xt(jd,this)}set chainId(e){Zt(jd,this,Pn(e,"chainId"))}matches(e){if(null==e)return!1;if("string"===typeof e){try{return this.chainId===Pn(e)}catch(t){}return this.name===e}if("number"===typeof e||"bigint"===typeof e){try{return this.chainId===Pn(e)}catch(t){}return!1}if("object"===typeof e){if(null!=e.chainId){try{return this.chainId===Pn(e.chainId)}catch(t){}return!1}return null!=e.name&&this.name===e.name}return!1}get plugins(){return Array.from(Xt(Ld,this).values())}attachPlugin(e){if(Xt(Ld,this).get(e.name))throw new Error("cannot replace existing plugin: ".concat(e.name," "));return Xt(Ld,this).set(e.name,e.clone()),this}getPlugin(e){return Xt(Ld,this).get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){const e=new Md(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new Nd;let n=t.txBase;if(null==e.to&&(n+=t.txCreate),e.data)for(let r=2;r<e.data.length;r+=2)"00"===e.data.substring(r,r+2)?n+=t.txDataZero:n+=t.txDataNonzero;if(e.accessList){const r=da(e.accessList);for(const e in r)n+=t.txAccessListAddress+t.txAccessListStorageKey*r[e].storageKeys.length}return n}static from(e){if(function(){if(Ud)return;function e(e,t,n){const r=function(){const r=new Md(e,t);return null!=n.ensNetwork&&r.attachPlugin(new Id(null,n.ensNetwork)),r.attachPlugin(new Nd),(n.plugins||[]).forEach(e=>{r.attachPlugin(e)}),r};Md.register(e,r),Md.register(t,r),n.altNames&&n.altNames.forEach(e=>{Md.register(e,r)})}Ud=!0,e("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),e("ropsten",3,{ensNetwork:3}),e("rinkeby",4,{ensNetwork:4}),e("goerli",5,{ensNetwork:5}),e("kovan",42,{ensNetwork:42}),e("sepolia",11155111,{ensNetwork:11155111}),e("holesky",17e3,{ensNetwork:17e3}),e("classic",61,{}),e("classicKotti",6,{}),e("arbitrum",42161,{ensNetwork:1}),e("arbitrum-goerli",421613,{}),e("arbitrum-sepolia",421614,{}),e("base",8453,{ensNetwork:1}),e("base-goerli",84531,{}),e("base-sepolia",84532,{}),e("bnb",56,{ensNetwork:1}),e("bnbt",97,{}),e("linea",59144,{ensNetwork:1}),e("linea-goerli",59140,{}),e("linea-sepolia",59141,{}),e("matic",137,{ensNetwork:1,plugins:[Bd("https://gasstation.polygon.technology/v2")]}),e("matic-amoy",80002,{}),e("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[Bd("https://gasstation-testnet.polygon.technology/v2")]}),e("optimism",10,{ensNetwork:1,plugins:[]}),e("optimism-goerli",420,{}),e("optimism-sepolia",11155420,{}),e("xdai",100,{ensNetwork:1})}(),null==e)return Md.from("mainnet");if("number"===typeof e&&(e=BigInt(e)),"string"===typeof e||"bigint"===typeof e){const t=Dd.get(e);if(t)return t();if("bigint"===typeof e)return new Md("unknown",e);ln(!1,"unknown network","network",e)}if("function"===typeof e.clone){return e.clone()}if("object"===typeof e){ln("string"===typeof e.name&&"number"===typeof e.chainId,"invalid network object name or chainId","network",e);const t=new Md(e.name,e.chainId);return(e.ensAddress||null!=e.ensNetwork)&&t.attachPlugin(new Id(e.ensAddress,e.ensNetwork)),t}ln(!1,"invalid network","network",e)}static register(e,t){"number"===typeof e&&(e=BigInt(e));const n=Dd.get(e);n&&ln(!1,"conflicting network for ".concat(JSON.stringify(n.name)),"nameOrChainId",e),Dd.set(e,t)}}function Fd(e,t){const n=String(e);if(!n.match(/^[0-9.]+$/))throw new Error("invalid gwei value: ".concat(e));const r=n.split(".");if(1===r.length&&r.push(""),2!==r.length)throw new Error("invalid gwei value: ".concat(e));for(;r[1].length<t;)r[1]+="0";if(r[1].length>9){let e=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||e++,r[1]=e.toString()}return BigInt(r[0]+r[1])}function Bd(e){return new Rd(e,async(e,t,n)=>{let r;n.setHeader("User-Agent","ethers");try{const[t,i]=await Promise.all([n.send(),e()]);r=t;const s=r.bodyJson.standard;return{gasPrice:i.gasPrice,maxFeePerGas:Fd(s.maxFee,9),maxPriorityFeePerGas:Fd(s.maxPriorityFee,9)}}catch(i){on(!1,"error encountered with polygon gas station (".concat(JSON.stringify(n.url),")"),"SERVER_ERROR",{request:n,response:r,error:i})}})}let Ud=!1;function zd(e){return JSON.parse(JSON.stringify(e))}var Vd=new WeakMap,Hd=new WeakMap,Gd=new WeakMap,qd=new WeakMap,Wd=new WeakSet;class Qd{constructor(e){dn(this,Wd),Jt(this,Vd,void 0),Jt(this,Hd,void 0),Jt(this,Gd,void 0),Jt(this,qd,void 0),Zt(Vd,this,e),Zt(Hd,this,null),Zt(Gd,this,4e3),Zt(qd,this,-2)}get pollingInterval(){return Xt(Gd,this)}set pollingInterval(e){Zt(Gd,this,e)}start(){Xt(Hd,this)||(Zt(Hd,this,Xt(Vd,this)._setTimeout(Yt(Wd,this,Kd).bind(this),Xt(Gd,this))),Yt(Wd,this,Kd).call(this))}stop(){Xt(Hd,this)&&(Xt(Vd,this)._clearTimeout(Xt(Hd,this)),Zt(Hd,this,null))}pause(e){this.stop(),e&&Zt(qd,this,-2)}resume(){this.start()}}async function Kd(){try{const e=await Xt(Vd,this).getBlockNumber();if(-2===Xt(qd,this))return void Zt(qd,this,e);if(e!==Xt(qd,this)){for(let t=Xt(qd,this)+1;t<=e;t++){if(null==Xt(Hd,this))return;await Xt(Vd,this).emit("block",t)}Zt(qd,this,e)}}catch(e){}null!=Xt(Hd,this)&&Zt(Hd,this,Xt(Vd,this)._setTimeout(Yt(Wd,this,Kd).bind(this),Xt(Gd,this)))}var Jd=new WeakMap,Yd=new WeakMap,Xd=new WeakMap;class Zd{constructor(e){Jt(this,Jd,void 0),Jt(this,Yd,void 0),Jt(this,Xd,void 0),Zt(Jd,this,e),Zt(Xd,this,!1),Zt(Yd,this,e=>{this._poll(e,Xt(Jd,this))})}async _poll(e,t){throw new Error("sub-classes must override this")}start(){Xt(Xd,this)||(Zt(Xd,this,!0),Xt(Yd,this).call(this,-2),Xt(Jd,this).on("block",Xt(Yd,this)))}stop(){Xt(Xd,this)&&(Zt(Xd,this,!1),Xt(Jd,this).off("block",Xt(Yd,this)))}pause(e){this.stop()}resume(){this.start()}}var $d=new WeakMap,ef=new WeakMap;class tf extends Zd{constructor(e,t){super(e),Jt(this,$d,void 0),Jt(this,ef,void 0),Zt($d,this,t),Zt(ef,this,-2)}pause(e){e&&Zt(ef,this,-2),super.pause(e)}async _poll(e,t){const n=await t.getBlock(Xt($d,this));null!=n&&(-2===Xt(ef,this)?Zt(ef,this,n.number):n.number>Xt(ef,this)&&(t.emit(Xt($d,this),n.number),Zt(ef,this,n.number)))}}var nf=new WeakMap;class rf extends Zd{constructor(e,t){super(e),Jt(this,nf,void 0),Zt(nf,this,zd(t))}async _poll(e,t){throw new Error("@TODO")}}var sf=new WeakMap;class af extends Zd{constructor(e,t){super(e),Jt(this,sf,void 0),Zt(sf,this,t)}async _poll(e,t){const n=await t.getTransactionReceipt(Xt(sf,this));n&&t.emit(Xt(sf,this),n)}}var of=new WeakMap,lf=new WeakMap,cf=new WeakMap,uf=new WeakMap,hf=new WeakMap,df=new WeakSet;class ff{constructor(e,t){dn(this,df),Jt(this,of,void 0),Jt(this,lf,void 0),Jt(this,cf,void 0),Jt(this,uf,void 0),Jt(this,hf,void 0),Zt(of,this,e),Zt(lf,this,zd(t)),Zt(cf,this,Yt(df,this,pf).bind(this)),Zt(uf,this,!1),Zt(hf,this,-2)}start(){Xt(uf,this)||(Zt(uf,this,!0),-2===Xt(hf,this)&&Xt(of,this).getBlockNumber().then(e=>{Zt(hf,this,e)}),Xt(of,this).on("block",Xt(cf,this)))}stop(){Xt(uf,this)&&(Zt(uf,this,!1),Xt(of,this).off("block",Xt(cf,this)))}pause(e){this.stop(),e&&Zt(hf,this,-2)}resume(){this.start()}}async function pf(e){if(-2===Xt(hf,this))return;const t=zd(Xt(lf,this));t.fromBlock=Xt(hf,this)+1,t.toBlock=e;const n=await Xt(of,this).getLogs(t);if(0!==n.length)for(const r of n)Xt(of,this).emit(Xt(lf,this),r),Zt(hf,this,r.blockNumber);else Xt(hf,this)<e-60&&Zt(hf,this,e-60)}const mf=BigInt(2);function gf(e){return e&&"function"===typeof e.then}function yf(e,t){return e+":"+JSON.stringify(t,(e,t)=>{if(null==t)return"null";if("bigint"===typeof t)return"bigint:".concat(t.toString());if("string"===typeof t)return t.toLowerCase();if("object"===typeof t&&!Array.isArray(t)){const e=Object.keys(t);return e.sort(),e.reduce((e,n)=>(e[n]=t[n],e),{})}return t})}class vf{constructor(e){c(this,"name",void 0),tn(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function bf(e){return(e=Array.from(new Set(e).values())).sort(),e}async function wf(e,t){if(null==e)throw new Error("invalid event");if(Array.isArray(e)&&(e={topics:e}),"string"===typeof e)switch(e){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:e,tag:e}}if(gn(e,32)){const t=e.toLowerCase();return{type:"transaction",tag:yf("tx",{hash:t}),hash:t}}if(e.orphan){const t=e;return{type:"orphan",tag:yf("orphan",t),filter:(n=t,JSON.parse(JSON.stringify(n)))}}var n;if(e.address||e.topics){const n=e,r={topics:(n.topics||[]).map(e=>null==e?null:Array.isArray(e)?bf(e.map(e=>e.toLowerCase())):e.toLowerCase())};if(n.address){const e=[],i=[],s=n=>{gn(n)?e.push(n):i.push((async()=>{e.push(await Gs(n,t))})())};Array.isArray(n.address)?n.address.forEach(s):s(n.address),i.length&&await Promise.all(i),r.address=bf(e.map(e=>e.toLowerCase()))}return{filter:r,tag:yf("event",r),type:"event"}}ln(!1,"unknown ProviderEvent","event",e)}function xf(){return(new Date).getTime()}const Ef={cacheTimeout:250,pollingInterval:4e3};var Af=new WeakMap,kf=new WeakMap,Sf=new WeakMap,Cf=new WeakMap,Tf=new WeakMap,Nf=new WeakMap,If=new WeakMap,Pf=new WeakMap,_f=new WeakMap,Rf=new WeakMap,Df=new WeakMap,Of=new WeakMap,jf=new WeakSet;class Lf{constructor(e,t){if(dn(this,jf),Jt(this,Af,void 0),Jt(this,kf,void 0),Jt(this,Sf,void 0),Jt(this,Cf,void 0),Jt(this,Tf,void 0),Jt(this,Nf,void 0),Jt(this,If,void 0),Jt(this,Pf,void 0),Jt(this,_f,void 0),Jt(this,Rf,void 0),Jt(this,Df,void 0),Jt(this,Of,void 0),Zt(Of,this,Object.assign({},Ef,t||{})),"any"===e)Zt(Nf,this,!0),Zt(Tf,this,null);else if(e){const t=Md.from(e);Zt(Nf,this,!1),Zt(Tf,this,Promise.resolve(t)),setTimeout(()=>{this.emit("network",t,null)},0)}else Zt(Nf,this,!1),Zt(Tf,this,null);Zt(Pf,this,-1),Zt(If,this,new Map),Zt(Af,this,new Map),Zt(kf,this,new Map),Zt(Sf,this,null),Zt(Cf,this,!1),Zt(_f,this,1),Zt(Rf,this,new Map),Zt(Df,this,!1)}get pollingInterval(){return Xt(Of,this).pollingInterval}get provider(){return this}get plugins(){return Array.from(Xt(kf,this).values())}attachPlugin(e){if(Xt(kf,this).get(e.name))throw new Error("cannot replace existing plugin: ".concat(e.name," "));return Xt(kf,this).set(e.name,e.connect(this)),this}getPlugin(e){return Xt(kf,this).get(e)||null}get disableCcipRead(){return Xt(Df,this)}set disableCcipRead(e){Zt(Df,this,!!e)}async ccipReadFetch(e,t,n){if(this.disableCcipRead||0===n.length||null==e.to)return null;const r=e.to.toLowerCase(),i=t.toLowerCase(),s=[];for(let o=0;o<n.length;o++){const t=n[o],l=t.replace("{sender}",r).replace("{data}",i),c=new ro(l);-1===t.indexOf("{data}")&&(c.body={data:i,sender:r}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:c,index:o,urls:n});let u,h="unknown error";try{u=await c.send()}catch(a){s.push(a.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:c,result:{error:a}});continue}try{const e=u.bodyJson;if(e.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:c,result:e}),e.data;e.message&&(h=e.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:c,result:e})}catch(a){}on(u.statusCode<400||u.statusCode>=500,"response not found during CCIP fetch: ".concat(h),"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:t,errorMessage:h}}),s.push(h)}on(!1,"error encountered during CCIP fetch: ".concat(s.map(e=>JSON.stringify(e)).join(", ")),"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:n,errorMessages:s}})}_wrapBlock(e,t){return new jo(function(e){const t=Ad(e);return t.transactions=e.transactions.map(e=>"string"===typeof e?e:Cd(e)),t}(e),this)}_wrapLog(e,t){return new Lo(function(e){return Ed(e)}(e),this)}_wrapTransactionReceipt(e,t){return new Fo(function(e){return Sd(e)}(e),this)}_wrapTransactionResponse(e,t){return new Uo(Cd(e),this)}_detectNetwork(){on(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){on(!1,"unsupported method: ".concat(e.method),"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=On(await Yt(jf,this,Mf).call(this,{method:"getBlockNumber"}),"%response");return Xt(Pf,this)>=0&&Zt(Pf,this,e),e}_getAddress(e){return Gs(e,this)}_getBlockTag(e){if(null==e)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}return gn(e)?gn(e,32)?e:Mn(e):("bigint"===typeof e&&(e=On(e,"blockTag")),"number"===typeof e?e>=0?Mn(e):Xt(Pf,this)>=0?Mn(Xt(Pf,this)+e):this.getBlockNumber().then(t=>Mn(t+e)):void ln(!1,"invalid blockTag","blockTag",e))}_getFilter(e){const t=(e.topics||[]).map(e=>null==e?null:Array.isArray(e)?bf(e.map(e=>e.toLowerCase())):e.toLowerCase()),n="blockHash"in e?e.blockHash:void 0,r=(e,r,i)=>{let s;switch(e.length){case 0:break;case 1:s=e[0];break;default:e.sort(),s=e}if(n&&(null!=r||null!=i))throw new Error("invalid filter");const a={};return s&&(a.address=s),t.length&&(a.topics=t),r&&(a.fromBlock=r),i&&(a.toBlock=i),n&&(a.blockHash=n),a};let i,s,a=[];if(e.address)if(Array.isArray(e.address))for(const o of e.address)a.push(this._getAddress(o));else a.push(this._getAddress(e.address));return"fromBlock"in e&&(i=this._getBlockTag(e.fromBlock)),"toBlock"in e&&(s=this._getBlockTag(e.toBlock)),a.filter(e=>"string"!==typeof e).length||null!=i&&"string"!==typeof i||null!=s&&"string"!==typeof s?Promise.all([Promise.all(a),i,s]).then(e=>r(e[0],e[1],e[2])):r(a,i,s)}_getTransactionRequest(e){const t=Do(e),n=[];if(["to","from"].forEach(e=>{if(null==t[e])return;const r=Gs(t[e],this);gf(r)?n.push(async function(){t[e]=await r}()):t[e]=r}),null!=t.blockTag){const e=this._getBlockTag(t.blockTag);gf(e)?n.push(async function(){t.blockTag=await e}()):t.blockTag=e}return n.length?async function(){return await Promise.all(n),t}():t}async getNetwork(){if(null==Xt(Tf,this)){const e=(async()=>{try{const e=await this._detectNetwork();return this.emit("network",e,null),e}catch(t){throw Xt(Tf,this)===e&&Zt(Tf,this,null),t}})();return Zt(Tf,this,e),(await e).clone()}const e=Xt(Tf,this),[t,n]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==n.chainId&&(Xt(Nf,this)?(this.emit("network",n,t),Xt(Tf,this)===e&&Zt(Tf,this,Promise.resolve(n))):on(!1,"network changed: ".concat(t.chainId," => ").concat(n.chainId," "),"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:t,gasPrice:n,priorityFee:r}=await en({_block:Yt(jf,this,zf).call(this,"latest",!1),gasPrice:(async()=>{try{return Pn(await Yt(jf,this,Mf).call(this,{method:"getGasPrice"}),"%response")}catch(e){}return null})(),priorityFee:(async()=>{try{return Pn(await Yt(jf,this,Mf).call(this,{method:"getPriorityFee"}),"%response")}catch(e){}return null})()});let i=null,s=null;const a=this._wrapBlock(t,e);return a&&a.baseFeePerGas&&(s=null!=r?r:BigInt("1000000000"),i=a.baseFeePerGas*mf+s),new Ro(n,i,s)},n=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const e=new ro(n.url),r=await n.processFunc(t,this,e);return new Ro(r.gasPrice,r.maxFeePerGas,r.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return gf(t)&&(t=await t),Pn(await Yt(jf,this,Mf).call(this,{method:"estimateGas",transaction:t}),"%response")}async call(e){const{tx:t,blockTag:n}=await en({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await Yt(jf,this,Bf).call(this,Yt(jf,this,Ff).call(this,t,n,e.enableCcipRead?0:-1))}async getBalance(e,t){return Pn(await Yt(jf,this,Uf).call(this,{method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return On(await Yt(jf,this,Uf).call(this,{method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return bn(await Yt(jf,this,Uf).call(this,{method:"getCode"},e,t))}async getStorage(e,t,n){const r=Pn(t,"position");return bn(await Yt(jf,this,Uf).call(this,{method:"getStorage",position:r},e,n))}async broadcastTransaction(e){const{blockNumber:t,hash:n,network:r}=await en({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),i=td.from(e);if(i.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(i,r).replaceableTransaction(t)}async getBlock(e,t){const{network:n,params:r}=await en({network:this.getNetwork(),params:Yt(jf,this,zf).call(this,e,!!t)});return null==r?null:this._wrapBlock(r,n)}async getTransaction(e){const{network:t,params:n}=await en({network:this.getNetwork(),params:Yt(jf,this,Mf).call(this,{method:"getTransaction",hash:e})});return null==n?null:this._wrapTransactionResponse(n,t)}async getTransactionReceipt(e){const{network:t,params:n}=await en({network:this.getNetwork(),params:Yt(jf,this,Mf).call(this,{method:"getTransactionReceipt",hash:e})});if(null==n)return null;if(null==n.gasPrice&&null==n.effectiveGasPrice){const t=await Yt(jf,this,Mf).call(this,{method:"getTransaction",hash:e});if(null==t)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=t.gasPrice}return this._wrapTransactionReceipt(n,t)}async getTransactionResult(e){const{result:t}=await en({network:this.getNetwork(),result:Yt(jf,this,Mf).call(this,{method:"getTransactionResult",hash:e})});return null==t?null:bn(t)}async getLogs(e){let t=this._getFilter(e);gf(t)&&(t=await t);const{network:n,params:r}=await en({network:this.getNetwork(),params:Yt(jf,this,Mf).call(this,{method:"getLogs",filter:t})});return r.map(e=>this._wrapLog(e,n))}_getProvider(e){on(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await fd.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){const t=Dc((e=si(e)).substring(2).toLowerCase()+".addr.reverse");try{const n=await fd.getEnsAddress(this),r=new El(n,["function resolver(bytes32) view returns (address)"],this),i=await r.resolver(t);if(null==i||i===po)return null;const s=new El(i,["function name(bytes32) view returns (string)"],this),a=await s.name(t);return await this.resolveName(a)!==e?null:a}catch(n){if(rn(n,"BAD_DATA")&&"0x"===n.value)return null;if(rn(n,"CALL_EXCEPTION"))return null;throw n}}async waitForTransaction(e,t,n){const r=null!=t?t:1;return 0===r?this.getTransactionReceipt(e):new Promise(async(t,i)=>{let s=null;const a=async n=>{try{const i=await this.getTransactionReceipt(e);if(null!=i&&n-i.blockNumber+1>=r)return t(i),void(s&&(clearTimeout(s),s=null))}catch(i){console.log("EEE",i)}this.once("block",a)};null!=n&&(s=setTimeout(()=>{null!=s&&(s=null,this.off("block",a),i(an("timeout","TIMEOUT",{reason:"timeout"})))},n)),a(await this.getBlockNumber())})}async waitForBlock(e){on(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=Xt(Rf,this).get(e);t&&(t.timer&&clearTimeout(t.timer),Xt(Rf,this).delete(e))}_setTimeout(e,t){var n,r;null==t&&(t=0);const i=(Zt(_f,this,(n=Xt(_f,this),r=n++,n)),r),s=()=>{Xt(Rf,this).delete(i),e()};if(this.paused)Xt(Rf,this).set(i,{timer:null,func:s,time:t});else{const e=setTimeout(s,t);Xt(Rf,this).set(i,{timer:e,func:s,time:xf()})}return i}_forEachSubscriber(e){for(const t of Xt(Af,this).values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new vf(e.type);case"block":{const e=new Qd(this);return e.pollingInterval=this.pollingInterval,e}case"safe":case"finalized":return new tf(this,e.type);case"event":return new ff(this,e.filter);case"transaction":return new af(this,e.hash);case"orphan":return new rf(this,e.filter)}throw new Error("unsupported event: ".concat(e.type))}_recoverSubscriber(e,t){for(const n of Xt(Af,this).values())if(n.subscriber===e){n.started&&n.subscriber.stop(),n.subscriber=t,n.started&&t.start(),null!=Xt(Sf,this)&&t.pause(Xt(Sf,this));break}}async on(e,t){const n=await Yt(jf,this,Hf).call(this,e);return n.listeners.push({listener:t,once:!1}),n.started||(n.subscriber.start(),n.started=!0,null!=Xt(Sf,this)&&n.subscriber.pause(Xt(Sf,this))),this}async once(e,t){const n=await Yt(jf,this,Hf).call(this,e);return n.listeners.push({listener:t,once:!0}),n.started||(n.subscriber.start(),n.started=!0,null!=Xt(Sf,this)&&n.subscriber.pause(Xt(Sf,this))),this}async emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=await Yt(jf,this,Vf).call(this,e,n);if(!i||0===i.listeners.length)return!1;const s=i.listeners.length;return i.listeners=i.listeners.filter(t=>{let{listener:r,once:i}=t;const s=new Go(this,i?null:r,e);try{r.call(this,...n,s)}catch(a){}return!i}),0===i.listeners.length&&(i.started&&i.subscriber.stop(),Xt(Af,this).delete(i.tag)),s>0}async listenerCount(e){if(e){const t=await Yt(jf,this,Vf).call(this,e);return t?t.listeners.length:0}let t=0;for(const{listeners:n}of Xt(Af,this).values())t+=n.length;return t}async listeners(e){if(e){const t=await Yt(jf,this,Vf).call(this,e);return t?t.listeners.map(e=>{let{listener:t}=e;return t}):[]}let t=[];for(const{listeners:n}of Xt(Af,this).values())t=t.concat(n.map(e=>{let{listener:t}=e;return t}));return t}async off(e,t){const n=await Yt(jf,this,Vf).call(this,e);if(!n)return this;if(t){const e=n.listeners.map(e=>{let{listener:t}=e;return t}).indexOf(t);e>=0&&n.listeners.splice(e,1)}return t&&0!==n.listeners.length||(n.started&&n.subscriber.stop(),Xt(Af,this).delete(n.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:n,subscriber:r}=await Yt(jf,this,Hf).call(this,e);n&&r.stop(),Xt(Af,this).delete(t)}else for(const[t,{started:n,subscriber:r}]of Xt(Af,this))n&&r.stop(),Xt(Af,this).delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return Xt(Cf,this)}destroy(){this.removeAllListeners();for(const e of Xt(Rf,this).keys())this._clearTimeout(e);Zt(Cf,this,!0)}get paused(){return null!=Xt(Sf,this)}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(Zt(Pf,this,-1),null!=Xt(Sf,this)){if(Xt(Sf,this)==!!e)return;on(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(t=>t.pause(e)),Zt(Sf,this,!!e);for(const t of Xt(Rf,this).values())t.timer&&clearTimeout(t.timer),t.time=xf()-t.time}resume(){if(null!=Xt(Sf,this)){this._forEachSubscriber(e=>e.resume()),Zt(Sf,this,null);for(const e of Xt(Rf,this).values()){let t=e.time;t<0&&(t=0),e.time=xf(),setTimeout(e.func,t)}}}}async function Mf(e){const t=Xt(Of,this).cacheTimeout;if(t<0)return await this._perform(e);const n=yf(e.method,e);let r=Xt(If,this).get(n);return r||(r=this._perform(e),Xt(If,this).set(n,r),setTimeout(()=>{Xt(If,this).get(n)===r&&Xt(If,this).delete(n)},t)),await r}async function Ff(e,t,n){on(n<10,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const r=Do(e);try{return bn(await this._perform({method:"call",transaction:r,blockTag:t}))}catch(i){if(!this.disableCcipRead&&sn(i)&&i.data&&n>=0&&"latest"===t&&null!=r.to&&"0x556f1830"===En(i.data,0,4)){const e=i.data,s=await Gs(r.to,this);let a;try{a=function(e){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};on(xn(e)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=En(e,0,32);on(En(n,0,12)===En(Yf,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=En(n,12);try{const n=[],r=On(En(e,32,64)),i=On(En(e,r,r+32)),s=En(e,r+32);for(let e=0;e<i;e++){const t=Gf(s,32*e);if(null==t)throw new Error("abort");n.push(t)}t.urls=n}catch(i){on(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=qf(e,64);if(null==n)throw new Error("abort");t.calldata=n}catch(i){on(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}on(En(e,100,128)===En(Yf,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=En(e,96,100);try{const n=qf(e,128);if(null==n)throw new Error("abort");t.extraData=n}catch(i){on(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(e=>t[e]),t}(En(i.data,4))}catch(i){on(!1,i.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:r,info:{data:e}})}on(a.sender.toLowerCase()===s.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:e,reason:"OffchainLookup",transaction:r,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:a.errorArgs}});const o=await this.ccipReadFetch(r,a.calldata,a.urls);on(null!=o,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:r,info:{data:i.data,errorArgs:a.errorArgs}});const l={to:s,data:wn([a.selector,Jf([o,a.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:l});try{const e=await Yt(jf,this,Ff).call(this,l,t,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},l),result:e}),e}catch(i){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},l),error:i}),i}}throw i}}async function Bf(e){const{value:t}=await en({network:this.getNetwork(),value:e});return t}async function Uf(e,t,n){let r=this._getAddress(t),i=this._getBlockTag(n);return"string"===typeof r&&"string"===typeof i||([r,i]=await Promise.all([r,i])),await Yt(jf,this,Bf).call(this,Yt(jf,this,Mf).call(this,Object.assign(e,{address:r,blockTag:i})))}async function zf(e,t){if(gn(e,32))return await Yt(jf,this,Mf).call(this,{method:"getBlock",blockHash:e,includeTransactions:t});let n=this._getBlockTag(e);return"string"!==typeof n&&(n=await n),await Yt(jf,this,Mf).call(this,{method:"getBlock",blockTag:n,includeTransactions:t})}async function Vf(e,t){let n=await wf(e,this);return"event"===n.type&&t&&t.length>0&&!0===t[0].removed&&(n=await wf({orphan:"drop-log",log:t[0]},this)),Xt(Af,this).get(n.tag)||null}async function Hf(e){const t=await wf(e,this),n=t.tag;let r=Xt(Af,this).get(n);if(!r){r={subscriber:this._getSubscriber(t),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},Xt(Af,this).set(n,r)}return r}function Gf(e,t){try{const n=qf(e,t);if(n)return _i(n)}catch(n){}return null}function qf(e,t){if("0x"===e)return null;try{const n=On(En(e,t,t+32)),r=On(En(e,n,n+32));return En(e,n+32,n+32+r)}catch(n){}return null}function Wf(e){const t=Ln(e);if(t.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(t,32-t.length),n}function Qf(e){if(e.length%32===0)return e;const t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}const Kf=new Uint8Array([]);function Jf(e){const t=[];let n=0;for(let r=0;r<e.length;r++)t.push(Kf),n+=32;for(let r=0;r<e.length;r++){const i=pn(e[r]);t[r]=Wf(n),t.push(Wf(i.length)),t.push(Qf(i)),n+=32+32*Math.ceil(i.length/32)}return wn(t)}const Yf="0x0000000000000000000000000000000000000000000000000000000000000000";function Xf(e,t){if(e.provider)return e.provider;on(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function Zf(e,t){let n=Do(t);if(null!=n.to&&(n.to=Gs(n.to,e)),null!=n.from){const t=n.from;n.from=Promise.all([e.getAddress(),Gs(t,e)]).then(e=>{let[t,n]=e;return ln(t.toLowerCase()===n.toLowerCase(),"transaction from mismatch","tx.from",n),t})}else n.from=e.getAddress();return await en(n)}class $f{constructor(e){c(this,"provider",void 0),tn(this,{provider:e||null})}async getNonce(e){return Xf(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await Zf(this,e)}async populateTransaction(e){const t=Xf(this,"populateTransaction"),n=await Zf(this,e);null==n.nonce&&(n.nonce=await this.getNonce("pending")),null==n.gasLimit&&(n.gasLimit=await this.estimateGas(n));const r=await this.provider.getNetwork();if(null!=n.chainId){ln(Pn(n.chainId)===r.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else n.chainId=r.chainId;const i=null!=n.maxFeePerGas||null!=n.maxPriorityFeePerGas;if(null==n.gasPrice||2!==n.type&&!i?0!==n.type&&1!==n.type||!i||ln(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e):ln(!1,"eip-1559 transaction do not support gasPrice","tx",e),2!==n.type&&null!=n.type||null==n.maxFeePerGas||null==n.maxPriorityFeePerGas)if(0===n.type||1===n.type){const e=await t.getFeeData();on(null!=e.gasPrice,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),null==n.gasPrice&&(n.gasPrice=e.gasPrice)}else{const e=await t.getFeeData();if(null==n.type)if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas)if(n.authorizationList&&n.authorizationList.length?n.type=4:n.type=2,null!=n.gasPrice){const e=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=e,n.maxPriorityFeePerGas=e}else null==n.maxFeePerGas&&(n.maxFeePerGas=e.maxFeePerGas),null==n.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas);else null!=e.gasPrice?(on(!i,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),null==n.gasPrice&&(n.gasPrice=e.gasPrice),n.type=0):on(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else 2!==n.type&&3!==n.type&&4!==n.type||(null==n.maxFeePerGas&&(n.maxFeePerGas=e.maxFeePerGas),null==n.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}else n.type=2;return await en(n)}async populateAuthorization(e){const t=Object.assign({},e);return null==t.chainId&&(t.chainId=(await Xf(this,"getNetwork").getNetwork()).chainId),null==t.nonce&&(t.nonce=await this.getNonce()),t}async estimateGas(e){return Xf(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Xf(this,"call").call(await this.populateCall(e))}async resolveName(e){const t=Xf(this,"resolveName");return await t.resolveName(e)}async sendTransaction(e){const t=Xf(this,"sendTransaction"),n=await this.populateTransaction(e);delete n.from;const r=td.from(n);return await t.broadcastTransaction(await this.signTransaction(r))}authorize(e){on(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}var ep=new WeakMap,tp=new WeakMap,np=new WeakMap,rp=new WeakMap,ip=new WeakMap,sp=new WeakMap,ap=new WeakSet;class op{constructor(e){dn(this,ap),Jt(this,ep,void 0),Jt(this,tp,void 0),Jt(this,np,void 0),Jt(this,rp,void 0),Jt(this,ip,void 0),Jt(this,sp,void 0),Zt(ep,this,e),Zt(tp,this,null),Zt(np,this,Yt(ap,this,lp).bind(this)),Zt(rp,this,!1),Zt(ip,this,null),Zt(sp,this,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){Xt(rp,this)||(Zt(rp,this,!0),Yt(ap,this,lp).call(this,-2))}stop(){Xt(rp,this)&&(Zt(rp,this,!1),Zt(sp,this,!0),Yt(ap,this,cp).call(this),Xt(ep,this).off("block",Xt(np,this)))}pause(e){e&&Yt(ap,this,cp).call(this),Xt(ep,this).off("block",Xt(np,this))}resume(){this.start()}}async function lp(e){try{null==Xt(tp,this)&&Zt(tp,this,this._subscribe(Xt(ep,this)));let e=null;try{e=await Xt(tp,this)}catch(t){if(!rn(t,"UNSUPPORTED_OPERATION")||"eth_newFilter"!==t.operation)throw t}if(null==e)return Zt(tp,this,null),void Xt(ep,this)._recoverSubscriber(this,this._recover(Xt(ep,this)));const n=await Xt(ep,this).getNetwork();if(Xt(ip,this)||Zt(ip,this,n),Xt(ip,this).chainId!==n.chainId)throw new Error("chaid changed");if(Xt(sp,this))return;const r=await Xt(ep,this).send("eth_getFilterChanges",[e]);await this._emitResults(Xt(ep,this),r)}catch(t){console.log("@TODO",t)}Xt(ep,this).once("block",Xt(np,this))}function cp(){const e=Xt(tp,this);e&&(Zt(tp,this,null),e.then(e=>{Xt(ep,this).destroyed||Xt(ep,this).send("eth_uninstallFilter",[e])}))}var up=new WeakMap;class hp extends op{constructor(e,t){var n;super(e),Jt(this,up,void 0),Zt(up,this,(n=t,JSON.parse(JSON.stringify(n))))}_recover(e){return new ff(e,Xt(up,this))}async _subscribe(e){return await e.send("eth_newFilter",[Xt(up,this)])}async _emitResults(e,t){for(const n of t)e.emit(Xt(up,this),e._wrapLog(n,e._network))}}class dp extends op{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const n of t)e.emit("pending",n)}}const fp="bigint,boolean,function,number,string,symbol".split(/,/g);function pp(e){if(null==e||fp.indexOf(typeof e)>=0)return e;if("function"===typeof e.getAddress)return e;if(Array.isArray(e))return e.map(pp);if("object"===typeof e)return Object.keys(e).reduce((t,n)=>(t[n]=e[n],t),{});throw new Error("should not happen: ".concat(e," (").concat(typeof e,")"))}function mp(e){return new Promise(t=>{setTimeout(t,e)})}function gp(e){return e?e.toLowerCase():e}function yp(e){return e&&"number"===typeof e.pollingInterval}const vp={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class bp extends $f{constructor(e,t){super(e),c(this,"address",void 0),tn(this,{address:t=si(t)})}connect(e){on(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const t=pp(e),n=[];if(t.from){const r=t.from;n.push((async()=>{const n=await Gs(r,this.provider);ln(null!=n&&n.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=n})())}else t.from=this.address;if(null==t.gasLimit&&n.push((async()=>{t.gasLimit=await this.provider.estimateGas(h(h({},t),{},{from:this.address}))})()),null!=t.to){const e=t.to;n.push((async()=>{t.to=await Gs(e,this.provider)})())}n.length&&await Promise.all(n);const r=this.provider.getRpcTransaction(t);return this.provider.send("eth_sendTransaction",[r])}async sendTransaction(e){const t=await this.provider.getBlockNumber(),n=await this.sendUncheckedTransaction(e);return await new Promise((e,r)=>{const i=[1e3,100];let s=0;const a=async()=>{try{const r=await this.provider.getTransaction(n);if(null!=r)return void e(r.replaceableTransaction(t))}catch(o){if(rn(o,"CANCELLED")||rn(o,"BAD_DATA")||rn(o,"NETWORK_ERROR")||rn(o,"UNSUPPORTED_OPERATION"))return null==o.info&&(o.info={}),o.info.sendTransactionHash=n,void r(o);if(rn(o,"INVALID_ARGUMENT")&&(s++,null==o.info&&(o.info={}),o.info.sendTransactionHash=n,s>10))return void r(o);this.provider.emit("error",an("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:o}))}this.provider._setTimeout(()=>{a()},i.pop()||4e3)};a()})}async signTransaction(e){const t=pp(e);if(t.from){const n=await Gs(t.from,this.provider);ln(null!=n&&n.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=n}else t.from=this.address;const n=this.provider.getRpcTransaction(t);return await this.provider.send("eth_signTransaction",[n])}async signMessage(e){const t="string"===typeof e?Pi(e):e;return await this.provider.send("personal_sign",[bn(t),this.address.toLowerCase()])}async signTypedData(e,t,n){const r=pp(n),i=await ca.resolveNames(e,t,r,async e=>{const t=await Gs(e);return ln(null!=t,"TypedData does not support null address","value",e),t});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(ca.getPayload(i.domain,t,i.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const t="string"===typeof e?Pi(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),bn(t)])}}var wp=new WeakMap,xp=new WeakMap,Ep=new WeakMap,Ap=new WeakMap,kp=new WeakMap,Sp=new WeakMap,Cp=new WeakMap,Tp=new WeakSet;class Np extends Lf{constructor(e,t){super(e,t),dn(this,Tp),Jt(this,wp,void 0),Jt(this,xp,void 0),Jt(this,Ep,void 0),Jt(this,Ap,void 0),Jt(this,kp,void 0),Jt(this,Sp,void 0),Jt(this,Cp,void 0),Zt(xp,this,1),Zt(wp,this,Object.assign({},vp,t||{})),Zt(Ep,this,[]),Zt(Ap,this,null),Zt(Sp,this,null),Zt(Cp,this,null);{let e=null;const t=new Promise(t=>{e=t});Zt(kp,this,{promise:t,resolve:e})}const n=this._getOption("staticNetwork");"boolean"===typeof n?(ln(!n||"any"!==e,"staticNetwork cannot be used on special network 'any'","options",t),n&&null!=e&&Zt(Sp,this,Md.from(e))):n&&(ln(null==e||n.matches(e),"staticNetwork MUST match network object","options",t),Zt(Sp,this,n))}_getOption(e){return Xt(wp,this)[e]}get _network(){return on(Xt(Sp,this),"network is not available yet","NETWORK_ERROR"),Xt(Sp,this)}async _perform(e){if("call"===e.method||"estimateGas"===e.method){let t=e.transaction;if(t&&null!=t.type&&Pn(t.type)&&null==t.maxFeePerGas&&null==t.maxPriorityFeePerGas){const n=await this.getFeeData();null==n.maxFeePerGas&&null==n.maxPriorityFeePerGas&&(e=Object.assign({},e,{transaction:Object.assign({},t,{type:void 0})}))}}const t=this.getRpcRequest(e);return null!=t?await this.send(t.method,t.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e){if(!0!==e)return e;if(Xt(Sp,this))return Xt(Sp,this)}return Xt(Cp,this)?await Xt(Cp,this):this.ready?(Zt(Cp,this,(async()=>{try{const e=Md.from(Pn(await this.send("eth_chainId",[])));return Zt(Cp,this,null),e}catch(e){throw Zt(Cp,this,null),e}})()),await Xt(Cp,this)):(Zt(Cp,this,(async(e,t)=>{const n={id:(Zt(xp,this,(e=Xt(xp,this),t=e++,e)),t),method:"eth_chainId",params:[],jsonrpc:"2.0"};let r;this.emit("debug",{action:"sendRpcPayload",payload:n});try{r=(await this._send(n))[0],Zt(Cp,this,null)}catch(i){throw Zt(Cp,this,null),this.emit("debug",{action:"receiveRpcError",error:i}),i}if(this.emit("debug",{action:"receiveRpcResult",result:r}),"result"in r)return Md.from(Pn(r.result));throw this.getRpcError(n,r)})()),await Xt(Cp,this))}_start(){null!=Xt(kp,this)&&null!=Xt(kp,this).resolve&&(Xt(kp,this).resolve(),Zt(kp,this,null),(async()=>{for(;null==Xt(Sp,this)&&!this.destroyed;)try{Zt(Sp,this,await this._detectNetwork())}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",an("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await mp(1e3)}Yt(Tp,this,Ip).call(this)})())}async _waitUntilReady(){if(null!=Xt(kp,this))return await Xt(kp,this).promise}_getSubscriber(e){return"pending"===e.type?new dp(this):"event"===e.type?this._getOption("polling")?new ff(this,e.filter):new hp(this,e.filter):"orphan"===e.type&&"drop-log"===e.filter.orphan?new vf("orphan"):super._getSubscriber(e)}get ready(){return null==Xt(kp,this)}getRpcTransaction(e){const t={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(n=>{if(null==e[n])return;let r=n;"gasLimit"===n&&(r="gas"),t[r]=Mn(Pn(e[n],"tx.".concat(n)))}),["from","to","data"].forEach(n=>{null!=e[n]&&(t[n]=bn(e[n]))}),e.accessList&&(t.accessList=da(e.accessList)),e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.map(e=>e.toLowerCase())),e.authorizationList&&(t.authorizationList=e.authorizationList.map(e=>{const t=Ta(e);return{address:t.address,nonce:Mn(t.nonce),chainId:Mn(t.chainId),yParity:Mn(t.signature.yParity),r:Mn(t.signature.r),s:Mn(t.signature.s)}})),t}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[gp(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[gp(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[gp(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[gp(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&null!=e.filter.address&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(gp):e.filter.address=gp(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,t){const{method:n}=e,{error:r}=t;if("eth_estimateGas"===n&&r.message){const t=r.message;if(!t.match(/revert/i)&&t.match(/insufficient funds/i))return an("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:r}});if(t.match(/nonce/i)&&t.match(/too low/i))return an("nonce has already been used","NONCE_EXPIRED",{transaction:e.params[0],info:{payload:e,error:r}})}if("eth_call"===n||"eth_estimateGas"===n){const t=Rp(r),i=Bs.getBuiltinCallException("eth_call"===n?"call":"estimateGas",e.params[0],t?t.data:null);return i.info={error:r,payload:e},i}const i=JSON.stringify(function(e){const t=[];return Dp(e,t),t}(r));if("string"===typeof r.message&&r.message.match(/user denied|ethers-user-denied/i)){return an("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[n]||"unknown",reason:"rejected",info:{payload:e,error:r}})}if("eth_sendRawTransaction"===n||"eth_sendTransaction"===n){const t=e.params[0];if(i.match(/insufficient funds|base fee exceeds gas limit/i))return an("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:t,info:{error:r}});if(i.match(/nonce/i)&&i.match(/too low/i))return an("nonce has already been used","NONCE_EXPIRED",{transaction:t,info:{error:r}});if(i.match(/replacement transaction/i)&&i.match(/underpriced/i))return an("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:t,info:{error:r}});if(i.match(/only replay-protected/i))return an("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:n,info:{transaction:t,info:{error:r}}})}let s=!!i.match(/the method .* does not exist/i);return s||r&&r.details&&r.details.startsWith("Unauthorized method:")&&(s=!0),s?an("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:r,payload:e}}):an("could not coalesce error","UNKNOWN_ERROR",{error:r,payload:e})}send(e,t){var n,r;if(this.destroyed)return Promise.reject(an("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const i=(Zt(xp,this,(n=Xt(xp,this),r=n++,n)),r),s=new Promise((n,r)=>{Xt(Ep,this).push({resolve:n,reject:r,payload:{method:e,params:t,id:i,jsonrpc:"2.0"}})});return Yt(Tp,this,Ip).call(this),s}async getSigner(e){null==e&&(e=0);const t=this.send("eth_accounts",[]);if("number"===typeof e){const n=await t;if(e>=n.length)throw new Error("no such account");return new bp(this,n[e])}const{accounts:n}=await en({network:this.getNetwork(),accounts:t});e=si(e);for(const r of n)if(si(r)===e)return new bp(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(e=>new bp(this,e))}destroy(){Xt(Ap,this)&&(clearTimeout(Xt(Ap,this)),Zt(Ap,this,null));for(const{payload:e,reject:t}of Xt(Ep,this))t(an("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));Zt(Ep,this,[]),super.destroy()}}function Ip(){if(Xt(Ap,this))return;const e=1===this._getOption("batchMaxCount")?0:this._getOption("batchStallTime");Zt(Ap,this,setTimeout(()=>{Zt(Ap,this,null);const e=Xt(Ep,this);for(Zt(Ep,this,[]);e.length;){const t=[e.shift()];for(;e.length&&t.length!==Xt(wp,this).batchMaxCount;){t.push(e.shift());if(JSON.stringify(t.map(e=>e.payload)).length>Xt(wp,this).batchMaxSize){e.unshift(t.pop());break}}(async()=>{const e=1===t.length?t[0].payload:t.map(e=>e.payload);this.emit("debug",{action:"sendRpcPayload",payload:e});try{const n=await this._send(e);this.emit("debug",{action:"receiveRpcResult",result:n});for(const{resolve:e,reject:r,payload:i}of t){if(this.destroyed){r(an("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:i.method}));continue}const t=n.filter(e=>e.id===i.id)[0];if(null==t){const e=an("missing response for request","BAD_DATA",{value:n,info:{payload:i}});this.emit("error",e),r(e);continue}"error"in t?r(this.getRpcError(i,t)):e(t.result)}}catch(n){this.emit("debug",{action:"receiveRpcError",error:n});for(const{reject:e}of t)e(n)}})()}},e))}var Pp=new WeakMap;class _p extends Np{constructor(e,t){super(e,t),Jt(this,Pp,void 0);let n=this._getOption("pollingInterval");null==n&&(n=vp.pollingInterval),Zt(Pp,this,n)}_getSubscriber(e){const t=super._getSubscriber(e);return yp(t)&&(t.pollingInterval=Xt(Pp,this)),t}get pollingInterval(){return Xt(Pp,this)}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");Zt(Pp,this,e),this._forEachSubscriber(e=>{yp(e)&&(e.pollingInterval=Xt(Pp,this))})}}function Rp(e){if(null==e)return null;if("string"===typeof e.message&&e.message.match(/revert/i)&&gn(e.data))return{message:e.message,data:e.data};if("object"===typeof e){for(const t in e){const n=Rp(e[t]);if(n)return n}return null}if("string"===typeof e)try{return Rp(JSON.parse(e))}catch(t){}return null}function Dp(e,t){if(null!=e){if("string"===typeof e.message&&t.push(e.message),"object"===typeof e)for(const n in e)Dp(e[n],t);if("string"===typeof e)try{return Dp(JSON.parse(e),t)}catch(n){}}}var Op=new WeakMap,jp=new WeakMap;class Lp extends _p{constructor(e,t,n){const r=Object.assign({},null!=n?n:{},{batchMaxCount:1});ln(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(t,r),Jt(this,Op,void 0),Jt(this,jp,void 0),Zt(jp,this,null),n&&n.providerInfo&&Zt(jp,this,n.providerInfo),Zt(Op,this,async(t,n)=>{const r={method:t,params:n};this.emit("debug",{action:"sendEip1193Request",payload:r});try{const t=await e.request(r);return this.emit("debug",{action:"receiveEip1193Result",result:t}),t}catch(zR){const t=new Error(zR.message);throw t.code=zR.code,t.data=zR.data,t.payload=r,this.emit("debug",{action:"receiveEip1193Error",error:t}),t}})}get providerInfo(){return Xt(jp,this)}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){ln(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const t=await Xt(Op,this).call(this,e.method,e.params||[]);return[{id:e.id,result:t}]}catch(zR){return[{id:e.id,error:{code:zR.code,data:zR.data,message:zR.message}}]}}getRpcError(e,t){switch((t=JSON.parse(JSON.stringify(t))).error.code||-1){case 4001:t.error.message="ethers-user-denied: ".concat(t.error.message);break;case 4200:t.error.message="ethers-unsupported: ".concat(t.error.message)}return super.getRpcError(e,t)}async hasSigner(e){null==e&&(e=0);const t=await this.send("eth_accounts",[]);return"number"===typeof e?t.length>e:(e=e.toLowerCase(),0!==t.filter(t=>t.toLowerCase()===e).length)}async getSigner(e){if(null==e&&(e=0),!await this.hasSigner(e))try{await Xt(Op,this).call(this,"eth_requestAccounts",[])}catch(t){const e=t.payload;throw this.getRpcError(e,{id:e.id,error:t})}return await super.getSigner(e)}static async discover(e){if(null==e&&(e={}),e.provider)return new Lp(e.provider);const t=e.window?e.window:"undefined"!==typeof window?window:null;if(null==t)return null;const n=e.anyProvider;if(n&&t.ethereum)return new Lp(t.ethereum);if(!("addEventListener"in t&&"dispatchEvent"in t&&"removeEventListener"in t))return null;const r=e.timeout?e.timeout:300;return 0===r?null:await new Promise((i,s)=>{let a=[];const o=e=>{a.push(e.detail),n&&l()},l=()=>{if(clearTimeout(c),a.length)if(e&&e.filter){const t=e.filter(a.map(e=>Object.assign({},e.info)));if(null==t)i(null);else if(t instanceof Lp)i(t);else{let e=null;if(t.uuid){e=a.filter(e=>t.uuid===e.info.uuid)[0]}if(e){const{provider:t,info:n}=e;i(new Lp(t,void 0,{providerInfo:n}))}else s(an("filter returned unknown info","UNSUPPORTED_OPERATION",{value:t}))}}else{const{provider:e,info:t}=a[0];i(new Lp(e,void 0,{providerInfo:t}))}else i(null);t.removeEventListener("eip6963:announceProvider",o)},c=setTimeout(()=>{l()},r);t.addEventListener("eip6963:announceProvider",o),t.dispatchEvent(new Event("eip6963:requestProvider"))})}}const Mp=JSON.parse('{"HV":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"enum AccessControl.Role","name":"role","type":"uint8"},{"indexed":false,"internalType":"string","name":"accessId","type":"string"},{"indexed":false,"internalType":"bytes32","name":"tempPassHash","type":"bytes32"}],"name":"UserAdded","type":"event"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"users","outputs":[{"internalType":"enum AccessControl.Role","name":"role","type":"uint8"},{"internalType":"string","name":"accessId","type":"string"},{"internalType":"bytes32","name":"tempPassHash","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"},{"internalType":"enum AccessControl.Role","name":"_role","type":"uint8"},{"internalType":"string","name":"_accessId","type":"string"},{"internalType":"string","name":"_tempPassword","type":"string"}],"name":"addUser","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"}],"name":"getUser","outputs":[{"internalType":"enum AccessControl.Role","name":"","type":"uint8"},{"internalType":"string","name":"","type":"string"},{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"}]}');var Fp=n(579);const Bp=["variant","size","className","children"],Up=["className","children"];function zp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}function Vp(e){let{className:t,children:n}=e;return(0,Fp.jsx)("div",{className:zp("rounded-2xl border border-zinc-200 bg-white shadow-sm dark:border-zinc-800 dark:bg-zinc-900",t),children:n})}function Hp(e){let{className:t,children:n}=e;return(0,Fp.jsx)("div",{className:zp("p-5",t),children:n})}function Gp(e){let{className:t,children:n}=e;return(0,Fp.jsx)("h3",{className:zp("text-base font-semibold text-[#4A2C59]",t),children:n})}function qp(e){let{className:t,children:n}=e;return(0,Fp.jsx)("p",{className:zp("mt-1 text-sm text-zinc-500 dark:text-zinc-400",t),children:n})}function Wp(e){let{className:t,children:n}=e;return(0,Fp.jsx)("div",{className:zp("p-5 pt-0",t),children:n})}function Qp(e){let{variant:t="default",className:n,children:r}=e;return(0,Fp.jsx)("span",{className:zp("inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium",{default:"bg-[#B08CC1] text-white",secondary:"bg-[#52B9C4] text-white",outline:"border border-zinc-300 text-zinc-700 dark:border-zinc-700 dark:text-zinc-200",success:"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-300",destructive:"bg-rose-100 text-rose-700 dark:bg-rose-900/40 dark:text-rose-300",warning:"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-300",info:"bg-[#52B9C4] text-white"}[t],n),children:r})}function Kp(e){let{variant:t="default",size:n="md",className:r,children:i}=e,s=a(e,Bp);return(0,Fp.jsx)("button",h(h({className:zp("inline-flex items-center justify-center rounded-xl font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none dark:focus:ring-zinc-700",{sm:"h-9 px-3 text-sm",md:"h-10 px-4 text-sm",lg:"h-11 px-5 text-base"}[n],{default:"bg-[#4A2C59] text-white hover:bg-[#3A2247] focus:ring-[#B08CC1]",primary:"bg-[#B08CC1] text-white hover:bg-[#9b6dad] focus:ring-[#B08CC1]/40",secondary:"bg-[#52B9C4] text-white hover:bg-[#46a5af] focus:ring-[#52B9C4]/40",outline:"border border-zinc-300 hover:bg-zinc-50 text-[#4A2C59] dark:border-zinc-700 dark:text-zinc-100 dark:hover:bg-zinc-800",ghost:"text-[#4A2C59] hover:bg-zinc-100 dark:text-zinc-200 dark:hover:bg-zinc-800"}[t],r)},s),{},{children:i}))}function Jp(e){let{className:t,children:n}=e;return(0,Fp.jsx)("div",{className:zp("overflow-x-auto",t),children:(0,Fp.jsx)("table",{className:"min-w-full border-separate border-spacing-y-2",children:n})})}function Yp(e){let{children:t}=e;return(0,Fp.jsx)("thead",{children:t})}function Xp(e){let{children:t}=e;return(0,Fp.jsx)("tbody",{children:t})}function Zp(e){let{className:t,children:n}=e,r=a(e,Up);return(0,Fp.jsx)("tr",h(h({className:zp("bg-white dark:bg-zinc-900",t)},r),{},{children:n}))}function $p(e){let{children:t}=e;return(0,Fp.jsx)("th",{className:"px-4 py-2 text-left text-xs font-semibold text-zinc-500",children:t})}function em(e){let{className:t,children:n}=e;return(0,Fp.jsx)("td",{className:zp("px-4 py-3 align-middle text-sm text-zinc-700 dark:text-zinc-200",t),children:n})}function tm(e){let{open:t,onClose:n,children:r}=e;return t?(0,Fp.jsx)("div",{className:"absolute right-0 top-full z-50 mt-2 w-56 rounded-xl border border-zinc-200 bg-white p-1 shadow-lg dark:border-zinc-800 dark:bg-zinc-900",onClick:n,children:r}):null}function nm(e){let{open:t,onClose:n,children:r,title:i}=e;return t?(0,Fp.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,Fp.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:n}),(0,Fp.jsx)("div",{className:"absolute inset-0 grid place-items-center p-4",children:(0,Fp.jsxs)("div",{className:"w-full max-w-2xl rounded-2xl border border-zinc-200 bg-white p-5 shadow-xl dark:border-zinc-800 dark:bg-zinc-900",children:[(0,Fp.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,Fp.jsx)("h3",{className:"text-lg font-semibold text-[#4A2C59] dark:text-zinc-50",children:i}),(0,Fp.jsx)("button",{onClick:n,className:"rounded-lg px-2 py-1 text-sm text-zinc-500 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800",children:"\u2715"})]}),r]})})]}):null}function rm(e){let{onOpenAdd:t}=e;const[n,r]=(0,i.useState)(!1);return(0,Fp.jsx)("div",{className:"sticky top-0 z-40 mb-6 border-b border-zinc-200 bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/60 dark:border-zinc-800 dark:bg-zinc-950/80",children:(0,Fp.jsxs)("div",{className:"mx-auto flex max-w-7xl items-center gap-3 p-4",children:[(0,Fp.jsx)("div",{className:"flex items-center gap-2 text-[#4A2C59] dark:text-zinc-50",children:(0,Fp.jsx)("a",{href:"/",className:"flex items-center gap-2 text-[#4A2C59] dark:text-zinc-50",children:(0,Fp.jsx)("img",{src:"/Images/TrustDose_logo.png",alt:"TrustDose",className:"h-24 w-auto object-contain",style:{maxHeight:"80px"}})})}),(0,Fp.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,Fp.jsxs)("div",{className:"hidden items-center gap-2 rounded-xl border border-zinc-200 bg-white px-3 py-2 text-sm text-zinc-600 md:flex dark:border-zinc-800 dark:bg-zinc-900 dark:text-zinc-300",children:[(0,Fp.jsx)(jt,{className:"h-4 w-4"}),(0,Fp.jsx)("input",{className:"w-56 bg-transparent outline-none placeholder:text-zinc-400",placeholder:"Search\u2026"})]}),(0,Fp.jsxs)("div",{className:"relative",children:[(0,Fp.jsxs)(Kp,{variant:"primary",size:"sm",onClick:()=>r(!n),children:[(0,Fp.jsx)(Lt,{className:"mr-2 h-4 w-4"})," Add"]}),(0,Fp.jsxs)(tm,{open:n,onClose:()=>r(!1),children:[(0,Fp.jsxs)("button",{className:"flex w-full items-center gap-2 rounded-lg px-3 py-2 text-left text-sm hover:bg-zinc-100 dark:hover:bg-zinc-800",onClick:()=>t("Pharmacy"),children:[(0,Fp.jsx)(Mt,{className:"h-4 w-4 text-[#52B9C4]"})," Pharmacy"]}),(0,Fp.jsxs)("button",{className:"flex w-full items-center gap-2 rounded-lg px-3 py-2 text-left text-sm hover:bg-zinc-100 dark:hover:bg-zinc-800",onClick:()=>t("Doctor"),children:[(0,Fp.jsx)(Ft,{className:"h-4 w-4 text-[#52B9C4]"})," Doctor"]}),(0,Fp.jsxs)("button",{className:"flex w-full items-center gap-2 rounded-lg px-3 py-2 text-left text-sm hover:bg-zinc-100 dark:hover:bg-zinc-800",onClick:()=>t("Logistics"),children:[(0,Fp.jsx)(Bt,{className:"h-4 w-4 text-[#52B9C4]"})," Logistics"]})]})]}),(0,Fp.jsx)(Kp,{variant:"ghost",size:"sm","aria-label":"Notifications",children:(0,Fp.jsx)(Ut,{className:"h-5 w-5"})}),(0,Fp.jsxs)(Kp,{variant:"outline",size:"sm",className:"gap-2",children:[(0,Fp.jsx)("div",{className:"grid h-6 w-6 place-items-center rounded-full bg-zinc-200 text-zinc-700 dark:bg-zinc-700 dark:text-zinc-100",children:"FT"}),(0,Fp.jsx)("span",{className:"hidden sm:inline",children:"Account"}),(0,Fp.jsx)(zt,{className:"h-4 w-4"})]})]})]})})}function im(){const e="ABCDEFGHJKLMNPQRSTUVWXYZ",t=e[Math.floor(24*Math.random())],n=e[Math.floor(24*Math.random())],r=Math.floor(1e3+9e3*Math.random());return"".concat(t).concat(n,"-").concat(r)}function sm(){var e,t;const[n,r]=(0,i.useState)("overview"),s=(0,i.useMemo)(()=>[{title:"Total Users",value:"1,284",change:"+12.5%",icon:Vt,trend:"up"},{title:"Active Sessions",value:"342",change:"+5.2%",icon:Ht,trend:"up"},{title:"System Health",value:"98.5%",change:"+0.3%",icon:Gt,trend:"up"}],[]),[a]=(0,i.useState)([{id:1,name:"Sarah Johnson",email:"sarah.j@example.com",role:"Admin",status:"Active",joined:"2024-03-15"},{id:2,name:"Mike Chen",email:"mike.c@example.com",role:"User",status:"Active",joined:"2024-03-14"},{id:3,name:"Emma Wilson",email:"emma.w@example.com",role:"Moderator",status:"Active",joined:"2024-03-13"}]),[o,l]=(0,i.useState)([{id:101,name:"Riyadh Central Pharmacy",license:"PH-0192",city:"Riyadh",status:"Active"},{id:102,name:"North Gate Pharmacy",license:"PH-0220",city:"Jeddah",status:"Pending"}]),[c,u]=(0,i.useState)([{id:201,name:"Dr. Aisha Al-Qahtani",specialty:"Cardiology",regId:"MOH-8812",status:"Active"},{id:202,name:"Dr. Omar Al-Harbi",specialty:"Endocrinology",regId:"MOH-7721",status:"Suspended"}]),[d,f]=(0,i.useState)([{id:301,company:"MedExpress",contact:"ops@medexpress.com",sla:"2h @ 2\u20138\xb0C",active:!0},{id:302,company:"HealthGo",contact:"fleet@healthgo.com",sla:"3h @ 2\u20138\xb0C",active:!0}]),[p]=(0,i.useState)([{id:"SHP-88412",rxId:"RX-983112",drug:"Insulin Glargine",from:"Riyadh Central Pharmacy",to:"Patient #10212",carrier:"MedExpress",tempMin:2,tempMax:8,lastTemp:5.2,status:"In Transit",progress:62,updated:"2m ago"},{id:"SHP-88433",rxId:"RX-983224",drug:"Vacc. MMR",from:"North Gate Pharmacy",to:"Patient #10388",carrier:"HealthGo",tempMin:2,tempMax:8,lastTemp:12.9,status:"Breach",progress:41,updated:"8m ago"},{id:"SHP-88457",rxId:"RX-983311",drug:"Erythropoietin",from:"Riyadh Central Pharmacy",to:"Patient #10401",carrier:"MedExpress",tempMin:2,tempMax:8,lastTemp:4.1,status:"Delivered",progress:100,updated:"10m ago"}]),m={"SHP-88412":[{time:"2025-09-30 14:10",location:"Warehouse Riyadh",temp:5,status:"Packed"},{time:"2025-09-30 15:40",location:"Truck #22",temp:6.1,status:"Departed"},{time:"2025-09-30 18:15",location:"Checkpoint North",temp:6.8,status:"In Transit"},{time:"2025-09-30 20:10",location:"Ring Road Exit",temp:5.9,status:"In Transit"}],"SHP-88433":[{time:"2025-09-30 14:20",location:"Warehouse Jeddah",temp:7.5,status:"Packed"},{time:"2025-09-30 16:00",location:"Truck #5",temp:9.2,status:"Departed"},{time:"2025-09-30 18:30",location:"Highway Checkpoint",temp:12.9,status:"Breach detected"}],"SHP-88457":[{time:"2025-09-30 09:10",location:"Warehouse Riyadh",temp:4.8,status:"Packed"},{time:"2025-09-30 10:30",location:"Truck #19",temp:5.2,status:"Departed"},{time:"2025-09-30 12:10",location:"City Center",temp:4.9,status:"Delivered"}]},[g,y]=(0,i.useState)(null),[v,b]=(0,i.useState)(!1);function w(){return"AC-"+Math.random().toString(36).slice(2,8).toUpperCase()}const[x,E]=(0,i.useState)("Doctor"),[A,k]=(0,i.useState)({name:"",email:"",role:"User",status:"Active",license:"",city:"",specialty:"",regId:"",company:"",contact:"",sla:"2h @ 2\u20138\xb0C",accessId:w(),walletAddress:"",tempPassword:im(),contractAddress:""});return(0,Fp.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,Fp.jsx)(rm,{onOpenAdd:e=>{E(e),b(!0)}}),(0,Fp.jsxs)("div",{className:"mx-auto max-w-7xl space-y-6 p-4 md:p-6",children:[(0,Fp.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("h1",{className:"text-2xl font-bold tracking-tight text-[#4A2C59] md:text-3xl",children:"Admin Console"}),(0,Fp.jsx)("p",{className:"mt-1 text-sm text-zinc-500 md:text-base",children:"Manage identities & compliance, and monitor medicine transfers"})]}),(0,Fp.jsx)("div",{className:"flex gap-2",children:(0,Fp.jsxs)(Kp,{variant:"primary",size:"sm",children:[(0,Fp.jsx)(qt,{className:"mr-2 h-4 w-4"}),"Settings"]})})]}),(0,Fp.jsx)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 md:gap-6 lg:grid-cols-4",children:s.map((e,t)=>(0,Fp.jsxs)(Vp,{className:"border",children:[(0,Fp.jsxs)(Hp,{className:"flex flex-row items-center justify-between pb-2",children:[(0,Fp.jsx)(Gp,{className:"text-sm",children:e.title}),(0,Fp.jsx)(e.icon,{className:"h-4 w-4 text-[#52B9C4]"})]}),(0,Fp.jsxs)(Wp,{children:[(0,Fp.jsx)("div",{className:"text-2xl font-bold text-[#4A2C59]",children:e.value}),(0,Fp.jsxs)("div",{className:"mt-1 flex items-center gap-2",children:[(0,Fp.jsx)(Qp,{variant:"up"===e.trend?"success":"warning",children:e.change}),(0,Fp.jsx)("p",{className:"text-xs text-zinc-500",children:"from last month"})]})]})]},t))}),(0,Fp.jsx)("div",{className:"flex flex-wrap gap-2 border-b border-zinc-200",children:[["overview","Overview"],["users","Users"],["pharmacies","Pharmacies"],["doctors","Doctors"],["logistics","Logistics"],["shipments","Shipments"],["alerts","Alerts"]].map(e=>{let[t,i]=e;return(0,Fp.jsx)(Kp,{variant:n===t?"primary":"ghost",onClick:()=>r(t),className:"rounded-b-none",children:i},t)})}),"users"===n&&(0,Fp.jsxs)(Vp,{children:[(0,Fp.jsxs)(Hp,{children:[(0,Fp.jsx)(Gp,{children:"Users"}),(0,Fp.jsx)(qp,{children:"Accounts & roles"})]}),(0,Fp.jsxs)(Wp,{children:[(0,Fp.jsxs)("div",{className:"mb-4 flex items-center justify-between gap-2",children:[(0,Fp.jsxs)("div",{className:"flex items-center gap-2 rounded-xl border border-zinc-200 bg-white px-3 py-2 text-sm text-zinc-600",children:[(0,Fp.jsx)(jt,{className:"h-4 w-4"}),(0,Fp.jsx)("input",{className:"w-56 bg-transparent outline-none placeholder:text-zinc-400",placeholder:"Search users\u2026"})]}),(0,Fp.jsxs)("div",{className:"flex gap-2",children:[(0,Fp.jsxs)(Kp,{size:"sm",variant:"primary",onClick:()=>{E("Doctor"),b(!0)},children:[(0,Fp.jsx)(Lt,{className:"mr-2 h-4 w-4"}),"Add Doctor"]}),(0,Fp.jsxs)(Kp,{size:"sm",variant:"outline",onClick:()=>{E("Pharmacy"),b(!0)},children:[(0,Fp.jsx)(Lt,{className:"mr-2 h-4 w-4"}),"Add Pharmacy"]}),(0,Fp.jsxs)(Kp,{size:"sm",variant:"outline",onClick:()=>{E("Logistics"),b(!0)},children:[(0,Fp.jsx)(Lt,{className:"mr-2 h-4 w-4"}),"Add Logistics"]})]})]}),(0,Fp.jsxs)(Jp,{children:[(0,Fp.jsx)(Yp,{children:(0,Fp.jsxs)(Zp,{children:[(0,Fp.jsx)($p,{children:"Name"}),(0,Fp.jsx)($p,{children:"Email"}),(0,Fp.jsx)($p,{children:"Role"}),(0,Fp.jsx)($p,{children:"Status"}),(0,Fp.jsx)($p,{children:"Joined"}),(0,Fp.jsx)($p,{children:"Actions"})]})}),(0,Fp.jsx)(Xp,{children:a.map(e=>(0,Fp.jsxs)(Zp,{children:[(0,Fp.jsx)(em,{className:"font-medium",children:e.name}),(0,Fp.jsx)(em,{children:e.email}),(0,Fp.jsx)(em,{children:(0,Fp.jsx)(Qp,{variant:"secondary",children:e.role})}),(0,Fp.jsx)(em,{children:(0,Fp.jsx)(Qp,{variant:"Active"===e.status?"success":"outline",children:e.status})}),(0,Fp.jsx)(em,{className:"text-zinc-500",children:e.joined}),(0,Fp.jsx)(em,{children:(0,Fp.jsxs)("div",{className:"flex gap-2",children:[(0,Fp.jsx)(Kp,{size:"sm",variant:"ghost",children:"Edit"}),(0,Fp.jsx)(Kp,{size:"sm",variant:"ghost",children:"Delete"})]})})]},e.id))})]})]})]}),"pharmacies"===n&&(0,Fp.jsxs)(Vp,{children:[(0,Fp.jsxs)(Hp,{children:[(0,Fp.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Fp.jsx)(Mt,{className:"h-5 w-5 text-[#52B9C4]"}),(0,Fp.jsx)(Gp,{children:"Pharmacies"})]}),(0,Fp.jsx)(qp,{children:"Licensing & status"})]}),(0,Fp.jsxs)(Wp,{children:[(0,Fp.jsx)("div",{className:"mb-4 flex justify-end",children:(0,Fp.jsxs)(Kp,{size:"sm",variant:"primary",onClick:()=>{E("Pharmacy"),b(!0)},children:[(0,Fp.jsx)(Lt,{className:"mr-2 h-4 w-4"}),"Add Pharmacy"]})}),(0,Fp.jsxs)(Jp,{children:[(0,Fp.jsx)(Yp,{children:(0,Fp.jsxs)(Zp,{children:[(0,Fp.jsx)($p,{children:"Name"}),(0,Fp.jsx)($p,{children:"License"}),(0,Fp.jsx)($p,{children:"City"}),(0,Fp.jsx)($p,{children:"Access ID"}),(0,Fp.jsx)($p,{children:"Status"}),(0,Fp.jsx)($p,{children:"Actions"})]})}),(0,Fp.jsx)(Xp,{children:o.map(e=>(0,Fp.jsxs)(Zp,{children:[(0,Fp.jsx)(em,{className:"font-medium",children:e.name}),(0,Fp.jsx)(em,{children:e.license}),(0,Fp.jsx)(em,{children:e.city}),(0,Fp.jsx)(em,{className:"font-mono text-xs",children:e.accessId}),(0,Fp.jsx)(em,{children:(0,Fp.jsx)(Qp,{variant:"Active"===e.status?"success":"Pending"===e.status?"warning":"outline",children:e.status})}),(0,Fp.jsx)(em,{children:(0,Fp.jsxs)("div",{className:"flex gap-2",children:[(0,Fp.jsx)(Kp,{size:"sm",variant:"ghost",children:"View"}),(0,Fp.jsx)(Kp,{size:"sm",variant:"ghost",children:"Suspend"})]})})]},e.id))})]})]})]}),"doctors"===n&&(0,Fp.jsxs)(Vp,{children:[(0,Fp.jsxs)(Hp,{children:[(0,Fp.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Fp.jsx)(Ft,{className:"h-5 w-5 text-[#52B9C4]"}),(0,Fp.jsx)(Gp,{children:"Doctors"})]}),(0,Fp.jsx)(qp,{children:"Registration & practice"})]}),(0,Fp.jsxs)(Wp,{children:[(0,Fp.jsx)("div",{className:"mb-4 flex justify-end",children:(0,Fp.jsxs)(Kp,{size:"sm",variant:"primary",onClick:()=>{E("Doctor"),b(!0)},children:[(0,Fp.jsx)(Lt,{className:"mr-2 h-4 w-4"}),"Add Doctor"]})}),(0,Fp.jsxs)(Jp,{children:[(0,Fp.jsx)(Yp,{children:(0,Fp.jsxs)(Zp,{children:[(0,Fp.jsx)($p,{children:"Name"}),(0,Fp.jsx)($p,{children:"Specialty"}),(0,Fp.jsx)($p,{children:"MOH Reg"}),(0,Fp.jsx)($p,{children:"Access ID"}),(0,Fp.jsx)($p,{children:"Status"}),(0,Fp.jsx)($p,{children:"Actions"})]})}),(0,Fp.jsx)(Xp,{children:c.map(e=>(0,Fp.jsxs)(Zp,{children:[(0,Fp.jsx)(em,{className:"font-medium",children:e.name}),(0,Fp.jsx)(em,{children:e.specialty}),(0,Fp.jsx)(em,{children:e.regId}),(0,Fp.jsx)(em,{className:"font-mono text-xs",children:e.accessId}),(0,Fp.jsx)(em,{children:(0,Fp.jsx)(Qp,{variant:"Active"===e.status?"success":"Suspended"===e.status?"destructive":"outline",children:e.status})}),(0,Fp.jsx)(em,{children:(0,Fp.jsxs)("div",{className:"flex gap-2",children:[(0,Fp.jsx)(Kp,{size:"sm",variant:"ghost",children:"View"}),(0,Fp.jsx)(Kp,{size:"sm",variant:"ghost",children:"Suspend"})]})})]},e.id))})]})]})]}),"logistics"===n&&(0,Fp.jsxs)(Vp,{children:[(0,Fp.jsxs)(Hp,{children:[(0,Fp.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Fp.jsx)(Bt,{className:"h-5 w-5 text-[#52B9C4]"}),(0,Fp.jsx)(Gp,{children:"Logistics Partners"})]}),(0,Fp.jsx)(qp,{children:"Fleet & SLA"})]}),(0,Fp.jsxs)(Wp,{children:[(0,Fp.jsx)("div",{className:"mb-4 flex justify-end",children:(0,Fp.jsxs)(Kp,{size:"sm",variant:"primary",onClick:()=>{E("Logistics"),b(!0)},children:[(0,Fp.jsx)(Lt,{className:"mr-2 h-4 w-4"}),"Add Partner"]})}),(0,Fp.jsxs)(Jp,{children:[(0,Fp.jsx)(Yp,{children:(0,Fp.jsxs)(Zp,{children:[(0,Fp.jsx)($p,{children:"Company"}),(0,Fp.jsx)($p,{children:"Contact"}),(0,Fp.jsx)($p,{children:"SLA"}),(0,Fp.jsx)($p,{children:"Access ID"}),(0,Fp.jsx)($p,{children:"Status"})]})}),(0,Fp.jsx)(Xp,{children:d.map(e=>(0,Fp.jsxs)(Zp,{children:[(0,Fp.jsx)(em,{className:"font-medium",children:e.company}),(0,Fp.jsx)(em,{children:e.contact}),(0,Fp.jsx)(em,{children:e.sla}),(0,Fp.jsx)(em,{className:"font-mono text-xs",children:e.accessId}),(0,Fp.jsx)(em,{children:(0,Fp.jsx)(Qp,{variant:e.active?"success":"outline",children:e.active?"Active":"Inactive"})})]},e.id))})]})]})]}),"shipments"===n&&(0,Fp.jsxs)(Vp,{children:[(0,Fp.jsxs)(Hp,{children:[(0,Fp.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Fp.jsx)(Wt,{className:"h-5 w-5 text-[#52B9C4]"}),(0,Fp.jsx)(Gp,{children:"Medicine Shipments"})]}),(0,Fp.jsx)(qp,{children:"Track per-prescription transfers and temperature"})]}),(0,Fp.jsx)(Wp,{children:(0,Fp.jsxs)(Jp,{children:[(0,Fp.jsx)(Yp,{children:(0,Fp.jsxs)(Zp,{children:[(0,Fp.jsx)($p,{children:"Shipment"}),(0,Fp.jsx)($p,{children:"RX / Drug"}),(0,Fp.jsx)($p,{children:"Route"}),(0,Fp.jsx)($p,{children:"Carrier"}),(0,Fp.jsx)($p,{children:"Temp (\xb0C)"}),(0,Fp.jsx)($p,{children:"Status"}),(0,Fp.jsx)($p,{children:"Progress"})]})}),(0,Fp.jsx)(Xp,{children:p.map(e=>(0,Fp.jsxs)(Zp,{onClick:()=>y(e),className:"cursor-pointer hover:bg-zinc-50",children:[(0,Fp.jsx)(em,{className:"font-medium",children:e.id}),(0,Fp.jsxs)(em,{children:[(0,Fp.jsx)("span",{className:"font-medium",children:e.rxId})," \u2014 ",e.drug]}),(0,Fp.jsxs)(em,{children:[e.from," ",(0,Fp.jsx)(Qt,{className:"mx-1 inline h-4 w-4 align-middle text-[#52B9C4]"})," ",e.to]}),(0,Fp.jsx)(em,{children:e.carrier}),(0,Fp.jsx)(em,{children:(0,Fp.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Fp.jsxs)(Qp,{variant:e.lastTemp>e.tempMax||e.lastTemp<e.tempMin?"destructive":"success",children:[e.lastTemp.toFixed(1),"\xb0"]}),(0,Fp.jsxs)("span",{className:"text-xs text-zinc-500",children:["range ",e.tempMin,"\u2013",e.tempMax,"\xb0"]})]})}),(0,Fp.jsxs)(em,{children:[(0,Fp.jsx)(Qp,{variant:"Breach"===e.status?"destructive":"Delivered"===e.status?"success":"In Transit"===e.status?"info":"outline",children:e.status}),(0,Fp.jsx)("div",{className:"text-xs text-zinc-500",children:e.updated})]}),(0,Fp.jsx)(em,{children:(0,Fp.jsx)("div",{className:"h-2 w-40 overflow-hidden rounded-full bg-zinc-200",children:(0,Fp.jsx)("div",{className:zp("h-full","Breach"===e.status?"bg-rose-500":"Delivered"===e.status?"bg-emerald-500":"bg-[#B08CC1]"),style:{width:"".concat(e.progress,"%")}})})})]},e.id))})]})})]}),"alerts"===n&&(0,Fp.jsxs)(Vp,{children:[(0,Fp.jsxs)(Hp,{children:[(0,Fp.jsx)("div",{className:"flex items-center gap-2",children:(0,Fp.jsx)(Gp,{children:"Alerts"})}),(0,Fp.jsx)(qp,{children:"Security & cold-chain alerts"})]}),(0,Fp.jsx)(Wp,{children:(0,Fp.jsx)("div",{className:"space-y-3",children:[{id:1,level:"High",type:"Temperature",msg:"Cold-chain breach on RX-983224"},{id:2,level:"Medium",type:"Auth",msg:"5 failed login attempts (pharmacy-ops)"}].map(e=>(0,Fp.jsxs)("div",{className:"flex items-center justify-between rounded-xl border border-zinc-200 p-4",children:[(0,Fp.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Fp.jsx)(Qp,{variant:"High"===e.level?"destructive":"warning",children:e.level}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("p",{className:"font-medium text-[#4A2C59]",children:e.type}),(0,Fp.jsx)("p",{className:"text-sm text-zinc-500",children:e.msg})]})]}),(0,Fp.jsx)(Kp,{size:"sm",variant:"ghost",children:"Acknowledge"})]},e.id))})})]})]}),(0,Fp.jsx)(nm,{open:v,onClose:()=>b(!1),title:"Add ".concat(x),children:(0,Fp.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),"Pharmacy"===x){const e=o.length?Math.max(...o.map(e=>e.id))+1:100;l([{id:e,name:A.name,license:A.license,city:A.city,status:"Pending",accessId:A.accessId},...o]),r("pharmacies")}else if("Doctor"===x){if(!A.contractAddress)return void alert("\u0623\u062f\u062e\u0644\u064a Contract Address");if(!Vs(A.walletAddress))return void alert("Wallet Address \u063a\u064a\u0631 \u0635\u0627\u0644\u062d");if(!A.tempPassword)return void alert("Temp Password \u0645\u0637\u0644\u0648\u0628");try{const e=await(async(e,t,n)=>{if(!window.ethereum)throw new Error("MetaMask not found");if(!Vs(t))throw new Error("Invalid wallet address");const r=new Lp(window.ethereum),i=await r.getSigner(),s=new El(e,Mp.HV,i),a=await s.addUser(t,2,n),o=await a.wait();return{txHash:a.hash,block:o.blockNumber}})(A.contractAddress,A.walletAddress,A.accessId);console.log("On-chain OK:",e.txHash)}catch(t){return void alert("\u0641\u0634\u0644 \u0627\u0644\u062d\u0641\u0638 \u0639\u0644\u0649 \u0627\u0644\u0633\u0644\u0633\u0644\u0629: "+((null===t||void 0===t?void 0:t.shortMessage)||(null===t||void 0===t?void 0:t.message)))}const e=c.length?Math.max(...c.map(e=>e.id))+1:200;u([{id:e,name:A.name,specialty:A.specialty,regId:A.regId,status:"Active",accessId:A.accessId,walletAddress:A.walletAddress},...c]),r("doctors")}else if("Logistics"===x){const e=d.length?Math.max(...d.map(e=>e.id))+1:300;f([{id:e,company:A.company,contact:A.contact,sla:A.sla,active:!0,accessId:A.accessId},...d]),r("logistics")}k({name:"",email:"",role:"User",status:"Active",license:"",city:"",specialty:"",regId:"",company:"",contact:"",sla:"2h @ 2\u20138\xb0C",accessId:w(),walletAddress:"",tempPassword:im(),contractAddress:""}),b(!1)},className:"space-y-4",children:[(0,Fp.jsxs)("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("label",{className:"mb-1 block text-sm font-medium text-[#4A2C59]",children:"Entity type"}),(0,Fp.jsxs)("select",{value:x,onChange:e=>E(e.target.value),className:"w-full rounded-xl border border-zinc-300 bg-white px-3 py-2 text-[#4A2C59] outline-none focus:ring-2 focus:ring-[#B08CC1]/40",children:[(0,Fp.jsx)("option",{children:"Doctor"}),(0,Fp.jsx)("option",{children:"Pharmacy"}),(0,Fp.jsx)("option",{children:"Logistics"})]})]}),(0,Fp.jsx)("div",{})]}),"Pharmacy"===x&&(0,Fp.jsxs)("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("label",{className:"mb-1 block text-sm font-medium text-[#4A2C59]",children:"Name"}),(0,Fp.jsx)("input",{required:!0,value:A.name,onChange:e=>k(h(h({},A),{},{name:e.target.value})),className:"w-full rounded-xl border border-zinc-300 bg-white px-3 py-2 text-[#4A2C59] outline-none focus:ring-2 focus:ring-[#B08CC1]/40"})]}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("label",{className:"mb-1 block text-sm font-medium text-[#4A2C59]",children:"License"}),(0,Fp.jsx)("input",{required:!0,value:A.license,onChange:e=>k(h(h({},A),{},{license:e.target.value})),className:"w-full rounded-xl border border-zinc-300 bg-white px-3 py-2 text-[#4A2C59] outline-none focus:ring-2 focus:ring-[#B08CC1]/40"})]}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("label",{className:"mb-1 block text-sm font-medium text-[#4A2C59]",children:"City"}),(0,Fp.jsx)("input",{required:!0,value:A.city,onChange:e=>k(h(h({},A),{},{city:e.target.value})),className:"w-full rounded-xl border border-zinc-300 bg-white px-3 py-2 text-[#4A2C59] outline-none focus:ring-2 focus:ring-[#B08CC1]/40"})]}),(0,Fp.jsxs)("div",{className:"md:col-span-2",children:[(0,Fp.jsx)("label",{className:"mb-1 block text-sm font-medium text-[#4A2C59]",children:"Access ID"}),(0,Fp.jsxs)("div",{className:"flex gap-2",children:[(0,Fp.jsx)("input",{readOnly:!0,value:A.accessId,className:"w-full rounded-xl border border-zinc-300 bg-zinc-100 px-3 py-2 text-[#4A2C59]"}),(0,Fp.jsx)(Kp,{type:"button",variant:"outline",onClick:()=>k(e=>h(h({},e),{},{accessId:w()})),children:"Regenerate"})]})]})]}),"Doctor"===x&&(0,Fp.jsxs)("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[(0,Fp.jsxs)("div",{className:"md:col-span-2",children:[(0,Fp.jsx)("label",{className:"mb-1 block text-sm font-medium text-[#4A2C59]",children:"AccessControl Contract Address"}),(0,Fp.jsx)("input",{required:!0,placeholder:"0x... (Ganache)",value:A.contractAddress,onChange:e=>k(h(h({},A),{},{contractAddress:e.target.value})),className:"w-full rounded-xl border border-zinc-300 bg-white px-3 py-2 text-[#4A2C59] outline-none focus:ring-2 focus:ring-[#B08CC1]/40"})]}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("label",{className:"mb-1 block text-sm font-medium text-[#4A2C59]",children:"Name"}),(0,Fp.jsx)("input",{required:!0,value:A.name,onChange:e=>k(h(h({},A),{},{name:e.target.value})),className:"w-full rounded-xl border border-zinc-300 bg-white px-3 py-2 text-[#4A2C59] outline-none focus:ring-2 focus:ring-[#B08CC1]/40"})]}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("label",{className:"mb-1 block text-sm font-medium text-[#4A2C59]",children:"Specialty"}),(0,Fp.jsx)("input",{required:!0,value:A.specialty,onChange:e=>k(h(h({},A),{},{specialty:e.target.value})),className:"w-full rounded-xl border border-zinc-300 bg-white px-3 py-2 text-[#4A2C59] outline-none focus:ring-2 focus:ring-[#B08CC1]/40"})]}),(0,Fp.jsxs)("div",{className:"md:col-span-2",children:[(0,Fp.jsx)("label",{className:"mb-1 block text-sm font-medium text-[#4A2C59]",children:"MOH Reg"}),(0,Fp.jsx)("input",{required:!0,value:A.regId,onChange:e=>k(h(h({},A),{},{regId:e.target.value})),className:"w-full rounded-xl border border-zinc-300 bg-white px-3 py-2 text-[#4A2C59] outline-none focus:ring-2 focus:ring-[#B08CC1]/40"})]}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("label",{className:"mb-1 block text-sm font-medium text-[#4A2C59]",children:"Wallet Address"}),(0,Fp.jsxs)("div",{className:"flex gap-2",children:[(0,Fp.jsx)("input",{required:!0,placeholder:"0x... (MetaMask)",value:A.walletAddress,onChange:e=>k(h(h({},A),{},{walletAddress:e.target.value})),className:"w-full rounded-xl border border-zinc-300 bg-white px-3 py-2 text-[#4A2C59] outline-none focus:ring-2 focus:ring-[#B08CC1]/40"}),(0,Fp.jsx)(Kp,{type:"button",variant:"outline",onClick:()=>(async e=>{if(!window.ethereum)return void alert("Install MetaMask");const t=new Lp(window.ethereum);await t.send("eth_requestAccounts",[]);const n=await t.getSigner(),r=await n.getAddress();e(e=>h(h({},e),{},{walletAddress:r}))})(k),children:"Use MetaMask"})]})]}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("label",{className:"mb-1 block text-sm font-medium text-[#4A2C59]",children:"Temp Password"}),(0,Fp.jsxs)("div",{className:"flex gap-2",children:[(0,Fp.jsx)("input",{required:!0,placeholder:"e.g. PX-4821",value:A.tempPassword,onChange:e=>k(h(h({},A),{},{tempPassword:e.target.value})),className:"w-full rounded-xl border border-zinc-300 bg-white px-3 py-2 text-[#4A2C59] outline-none focus:ring-2 focus:ring-[#B08CC1]/40"}),(0,Fp.jsx)(Kp,{type:"button",variant:"outline",onClick:()=>k(e=>h(h({},e),{},{tempPassword:im()})),children:"Regenerate"})]})]}),(0,Fp.jsxs)("div",{className:"md:col-span-2",children:[(0,Fp.jsx)("label",{className:"mb-1 block text-sm font-medium text-[#4A2C59]",children:"Access ID"}),(0,Fp.jsxs)("div",{className:"flex gap-2",children:[(0,Fp.jsx)("input",{readOnly:!0,value:A.accessId,className:"w-full rounded-xl border border-zinc-300 bg-zinc-100 px-3 py-2 text-[#4A2C59]"}),(0,Fp.jsx)(Kp,{type:"button",variant:"outline",onClick:()=>k(e=>h(h({},e),{},{accessId:w()})),children:"Regenerate"})]})]})]}),"Logistics"===x&&(0,Fp.jsxs)("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:[(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("label",{className:"mb-1 block text-sm font-medium text-[#4A2C59]",children:"Company"}),(0,Fp.jsx)("input",{required:!0,value:A.company,onChange:e=>k(h(h({},A),{},{company:e.target.value})),className:"w-full rounded-xl border border-zinc-300 bg-white px-3 py-2 text-[#4A2C59] outline-none focus:ring-2 focus:ring-[#B08CC1]/40"})]}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("label",{className:"mb-1 block text-sm font-medium text-[#4A2C59]",children:"Contact"}),(0,Fp.jsx)("input",{required:!0,value:A.contact,onChange:e=>k(h(h({},A),{},{contact:e.target.value})),className:"w-full rounded-xl border border-zinc-300 bg-white px-3 py-2 text-[#4A2C59] outline-none focus:ring-2 focus:ring-[#B08CC1]/40"})]}),(0,Fp.jsxs)("div",{className:"md:col-span-2",children:[(0,Fp.jsx)("label",{className:"mb-1 block text-sm font-medium text-[#4A2C59]",children:"SLA"}),(0,Fp.jsx)("input",{required:!0,value:A.sla,onChange:e=>k(h(h({},A),{},{sla:e.target.value})),className:"w-full rounded-xl border border-zinc-300 bg-white px-3 py-2 text-[#4A2C59] outline-none focus:ring-2 focus:ring-[#B08CC1]/40"})]}),(0,Fp.jsxs)("div",{className:"md:col-span-2",children:[(0,Fp.jsx)("label",{className:"mb-1 block text-sm font-medium text-[#4A2C59]",children:"Access ID"}),(0,Fp.jsxs)("div",{className:"flex gap-2",children:[(0,Fp.jsx)("input",{readOnly:!0,value:A.accessId,className:"w-full rounded-xl border border-zinc-300 bg-zinc-100 px-3 py-2 text-[#4A2C59]"}),(0,Fp.jsx)(Kp,{type:"button",variant:"outline",onClick:()=>k(e=>h(h({},e),{},{accessId:w()})),children:"Regenerate"})]})]})]}),(0,Fp.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[(0,Fp.jsx)(Kp,{type:"button",variant:"outline",onClick:()=>b(!1),children:"Cancel"}),(0,Fp.jsx)(Kp,{type:"submit",variant:"primary",children:"Save"})]})]})}),(0,Fp.jsx)(nm,{open:!!g,onClose:()=>y(null),title:"Shipment ".concat(null!==(e=null===g||void 0===g?void 0:g.id)&&void 0!==e?e:""," \u2014 ").concat(null!==(t=null===g||void 0===g?void 0:g.rxId)&&void 0!==t?t:""),children:g&&(0,Fp.jsxs)("div",{className:"space-y-5",children:[(0,Fp.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,Fp.jsxs)("div",{className:"text-sm text-zinc-600",children:[(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("span",{className:"font-medium text-[#4A2C59]",children:"Drug:"})," ",g.drug]}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("span",{className:"font-medium text-[#4A2C59]",children:"Carrier:"})," ",g.carrier]}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("span",{className:"font-medium text-[#4A2C59]",children:"Route:"})," ",g.from," \u2192 ",g.to]})]}),(0,Fp.jsxs)("div",{className:"text-sm text-zinc-600",children:[(0,Fp.jsx)("div",{className:"mb-1",children:"Temperature"}),(0,Fp.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Fp.jsxs)(Qp,{variant:g.lastTemp>g.tempMax||g.lastTemp<g.tempMin?"destructive":"success",children:[g.lastTemp.toFixed(1),"\xb0C"]}),(0,Fp.jsxs)("span",{className:"text-xs text-zinc-500",children:["Range ",g.tempMin,"\u2013",g.tempMax,"\xb0C"]})]}),(0,Fp.jsx)("div",{className:"mt-2 h-2 w-full overflow-hidden rounded-full bg-zinc-200",children:(0,Fp.jsx)("div",{className:zp("h-full","Breach"===g.status?"bg-rose-500":"Delivered"===g.status?"bg-emerald-500":"bg-[#B08CC1]"),style:{width:"".concat(g.progress,"%")}})}),(0,Fp.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:["Status: ",g.status," \u2022 ",g.updated]})]})]}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("div",{className:"mb-2 text-sm font-medium text-[#4A2C59]",children:"Timeline"}),(0,Fp.jsxs)("div",{className:"border-l-2 border-[#B08CC1] pl-4",children:[(m[g.id]||[]).map((e,t)=>{const n=e.temp>g.tempMax||e.temp<g.tempMin;return(0,Fp.jsxs)("div",{className:"mb-4",children:[(0,Fp.jsxs)("p",{className:"text-xs text-zinc-500",children:[e.time," \u2014 ",e.location]}),(0,Fp.jsxs)("p",{className:"text-sm font-medium text-[#4A2C59]",children:[e.status,(0,Fp.jsxs)("span",{className:zp("ml-2",n?"text-rose-600":"text-[#B08CC1]"),children:[e.temp.toFixed(1),"\xb0C"]})]})]},t)}),(!m[g.id]||0===m[g.id].length)&&(0,Fp.jsx)("p",{className:"text-sm text-zinc-500",children:"No events yet."})]})]})]})})]})}const am=["None","Admin","Doctor","Pharmacy","Logistics","Patient"];function om(){const[e,t]=(0,i.useState)("0xbac0f8437B6aD3564015e6e20CD67cFA3dbCEBf5"),[n,r]=(0,i.useState)("-"),[s,a]=(0,i.useState)("-"),[o,l]=(0,i.useState)("");return(0,Fp.jsxs)("div",{style:{padding:20,maxWidth:520,fontFamily:"system-ui"},children:[(0,Fp.jsx)("h2",{children:"Doctor Home"}),(0,Fp.jsx)("label",{children:"Contract Address"}),(0,Fp.jsx)("input",{value:e,onChange:e=>t(e.target.value),placeholder:"0x...",style:{display:"block",width:"100%",margin:"6px 0 14px",padding:8}}),(0,Fp.jsx)("button",{onClick:async()=>{try{if(!window.ethereum)return alert("Install MetaMask first.");const t=new Lp(window.ethereum),n=await t.getSigner(),i=await n.getAddress(),s=new El(e,Mp.HV,t),[o,c]=await s.getUser(i);r(am[Number(o)]||"".concat(o)),a(c||"-"),l("\u2705 Loaded.")}catch(t){console.error(t),l("\u274c ".concat((null===t||void 0===t?void 0:t.shortMessage)||(null===t||void 0===t?void 0:t.message)))}},children:"Load My Role & AccessID"}),(0,Fp.jsxs)("div",{style:{marginTop:16},children:[(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("b",{children:"Role:"})," ",n]}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("b",{children:"Access ID:"})," ",s]})]}),(0,Fp.jsx)("div",{style:{marginTop:12},children:o})]})}const lm=Ot("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),cm=Ot("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),um=Ot("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),hm=Ot("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),dm=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},fm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let h=(15&a)<<2|l>>6,d=63&l;o||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(dm(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new pm;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class pm extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mm=function(e){return function(e){const t=dm(e);return fm.encodeByteArray(t,!0)}(e).replace(/\./g,"")},gm=function(e){try{return fm.decodeString(e,!0)}catch(zR){console.error("base64Decode failed: ",zR)}return null};function ym(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const vm=()=>{try{return ym().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FB_API_KEY:"AIzaSyD2m8eKUYpYCS17AoipbsbrQrZkK1mwtNM",REACT_APP_FB_APP_ID:"1:985521835267:web:221137ec5d8ff78348ed36",REACT_APP_FB_AUTH_DOMAIN:"trustdose-96656.firebaseapp.com",REACT_APP_FB_MEASUREMENT_ID:"G-K0EWZKBDT2",REACT_APP_FB_PROJECT_ID:"trustdose-96656",REACT_APP_FB_SENDER:"985521835267",REACT_APP_FB_SENDER_ID:"985521835267",REACT_APP_FB_STORAGE_BUCKET:"trustdose-96656.firebasestorage.app"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(zR){return}const t=e&&gm(e[1]);return t&&JSON.parse(t)})()}catch(zR){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(zR))}},bm=e=>{var t;return null===(t=vm())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},wm=()=>{var e;return null===(e=vm())||void 0===e?void 0:e.config},xm=e=>{var t;return null===(t=vm())||void 0===t?void 0:t["_".concat(e)]};class Em{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Am(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function km(e){return(await fetch(e,{credentials:"include"})).ok}const Sm={};let Cm=!1;function Tm(e,t){if("undefined"===typeof window||"undefined"===typeof document||!Am(window.location.host)||Sm[e]===t||Sm[e]||Cm)return;function n(e){return"__firebase__banner__".concat(e)}Sm[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Sm))Sm[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{Cm=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function Nm(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Im(){var e;const t=null===(e=vm())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(zR){return!1}}function Pm(){return!Im()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _m(){try{return"object"===typeof indexedDB}catch(zR){return!1}}class Rm extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Rm.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Dm.prototype.create)}}class Dm{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Om,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Rm(n,s,t)}}const Om=/\{\$([^}]+)}/g;function jm(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Lm(n)&&Lm(s)){if(!jm(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Lm(e){return null!==e&&"object"===typeof e}function Mm(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Fm(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function Bm(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Um{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=zm),void 0===r.error&&(r.error=zm),void 0===r.complete&&(r.complete=zm);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(zR){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(zR){"undefined"!==typeof console&&console.error&&console.error(zR)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zm(){}function Vm(e){return e&&e._delegate?e._delegate:e}class Hm{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Gm="[DEFAULT]";class qm{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Em;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(zR){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(zR){if(r)return null;throw zR}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Gm})}catch(zR){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(zR){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gm;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gm;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gm;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Gm?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gm;return this.component?this.component.multipleInstances?e:Gm:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Wm{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new qm(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Qm=[];var Km;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Km||(Km={}));const Jm={debug:Km.DEBUG,verbose:Km.VERBOSE,info:Km.INFO,warn:Km.WARN,error:Km.ERROR,silent:Km.SILENT},Ym=Km.INFO,Xm={[Km.DEBUG]:"log",[Km.VERBOSE]:"log",[Km.INFO]:"info",[Km.WARN]:"warn",[Km.ERROR]:"error"},Zm=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Xm[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class $m{constructor(e){this.name=e,this._logLevel=Ym,this._logHandler=Zm,this._userLogHandler=null,Qm.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Km))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Jm[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Km.DEBUG,...t),this._logHandler(this,Km.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Km.VERBOSE,...t),this._logHandler(this,Km.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Km.INFO,...t),this._logHandler(this,Km.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Km.WARN,...t),this._logHandler(this,Km.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Km.ERROR,...t),this._logHandler(this,Km.ERROR,...t)}}let eg,tg;const ng=new WeakMap,rg=new WeakMap,ig=new WeakMap,sg=new WeakMap,ag=new WeakMap;let og={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return rg.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ig.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ug(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function lg(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(tg||(tg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(hg(this),n),ug(ng.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ug(e.apply(hg(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(hg(this),t,...r);return ig.set(s,t.sort?t.sort():[t]),ug(s)}}function cg(e){return"function"===typeof e?lg(e):(e instanceof IDBTransaction&&function(e){if(rg.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});rg.set(e,t)}(e),((e,t)=>t.some(t=>e instanceof t))(e,eg||(eg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,og):e)}function ug(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(ug(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&ng.set(t,e)}).catch(()=>{}),ag.set(t,e),t}(e);if(sg.has(e))return sg.get(e);const t=cg(e);return t!==e&&(sg.set(e,t),ag.set(t,e)),t}const hg=e=>ag.get(e);const dg=["get","getKey","getAll","getAllKeys","count"],fg=["put","add","delete","clear"],pg=new Map;function mg(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(pg.get(t))return pg.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=fg.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!dg.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return pg.set(t,s),s}og=(e=>h(h({},e),{},{get:(t,n,r)=>mg(t,n)||e.get(t,n,r),has:(t,n)=>!!mg(t,n)||e.has(t,n)}))(og);class gg{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const yg="@firebase/app",vg="0.14.3",bg=new $m("@firebase/app"),wg="@firebase/app-compat",xg="@firebase/analytics-compat",Eg="@firebase/analytics",Ag="@firebase/app-check-compat",kg="@firebase/app-check",Sg="@firebase/auth",Cg="@firebase/auth-compat",Tg="@firebase/database",Ng="@firebase/data-connect",Ig="@firebase/database-compat",Pg="@firebase/functions",_g="@firebase/functions-compat",Rg="@firebase/installations",Dg="@firebase/installations-compat",Og="@firebase/messaging",jg="@firebase/messaging-compat",Lg="@firebase/performance",Mg="@firebase/performance-compat",Fg="@firebase/remote-config",Bg="@firebase/remote-config-compat",Ug="@firebase/storage",zg="@firebase/storage-compat",Vg="@firebase/firestore",Hg="@firebase/ai",Gg="@firebase/firestore-compat",qg="firebase",Wg="[DEFAULT]",Qg={[yg]:"fire-core",[wg]:"fire-core-compat",[Eg]:"fire-analytics",[xg]:"fire-analytics-compat",[kg]:"fire-app-check",[Ag]:"fire-app-check-compat",[Sg]:"fire-auth",[Cg]:"fire-auth-compat",[Tg]:"fire-rtdb",[Ng]:"fire-data-connect",[Ig]:"fire-rtdb-compat",[Pg]:"fire-fn",[_g]:"fire-fn-compat",[Rg]:"fire-iid",[Dg]:"fire-iid-compat",[Og]:"fire-fcm",[jg]:"fire-fcm-compat",[Lg]:"fire-perf",[Mg]:"fire-perf-compat",[Fg]:"fire-rc",[Bg]:"fire-rc-compat",[Ug]:"fire-gcs",[zg]:"fire-gcs-compat",[Vg]:"fire-fst",[Gg]:"fire-fst-compat",[Hg]:"fire-vertex","fire-js":"fire-js",[qg]:"fire-js-all"},Kg=new Map,Jg=new Map,Yg=new Map;function Xg(e,t){try{e.container.addComponent(t)}catch(zR){bg.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),zR)}}function Zg(e){const t=e.name;if(Yg.has(t))return bg.debug("There were multiple attempts to register component ".concat(t,".")),!1;Yg.set(t,e);for(const n of Kg.values())Xg(n,e);for(const n of Jg.values())Xg(n,e);return!0}function $g(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function ey(e){return null!==e&&void 0!==e&&void 0!==e.settings}const ty=new Dm("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class ny{constructor(e,t,n){this._isDeleted=!1,this._options=h({},e),this._config=h({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Hm("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ty.create("app-deleted",{appName:this._name})}}const ry="12.3.0";function iy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=h({name:Wg,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw ty.create("bad-app-name",{appName:String(i)});if(n||(n=wm()),!n)throw ty.create("no-options");const s=Kg.get(i);if(s){if(jm(n,s.options)&&jm(r,s.config))return s;throw ty.create("duplicate-app",{appName:i})}const a=new Wm(i);for(const l of Yg.values())a.addComponent(l);const o=new ny(n,r,a);return Kg.set(i,o),o}function sy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wg;const t=Kg.get(e);if(!t&&e===Wg&&wm())return iy();if(!t)throw ty.create("no-app",{appName:e});return t}function ay(e,t,n){var r;let i=null!==(r=Qg[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void bg.warn(e.join(" "))}Zg(new Hm("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const oy="firebase-heartbeat-store";let ly=null;function cy(){return ly||(ly=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=ug(a);return r&&a.addEventListener("upgradeneeded",e=>{r(ug(a.result),e.oldVersion,e.newVersion,ug(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(oy)}catch(zR){console.warn(zR)}}}).catch(e=>{throw ty.create("idb-open",{originalErrorMessage:e.message})})),ly}async function uy(e,t){try{const n=(await cy()).transaction(oy,"readwrite"),r=n.objectStore(oy);await r.put(t,hy(e)),await n.done}catch(zR){if(zR instanceof Rm)bg.warn(zR.message);else{const t=ty.create("idb-set",{originalErrorMessage:null===zR||void 0===zR?void 0:zR.message});bg.warn(t.message)}}}function hy(e){return"".concat(e.name,"!").concat(e.options.appId)}class dy{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new py(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=fy();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(zR){bg.warn(zR)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=fy(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),my(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),my(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=mm(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(zR){return bg.warn(zR),""}}}function fy(){return(new Date).toISOString().substring(0,10)}class py{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!_m()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await cy()).transaction(oy),n=await t.objectStore(oy).get(hy(e));return await t.done,n}catch(zR){if(zR instanceof Rm)bg.warn(zR.message);else{const t=ty.create("idb-get",{originalErrorMessage:null===zR||void 0===zR?void 0:zR.message});bg.warn(t.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return uy(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return uy(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function my(e){return mm(JSON.stringify({version:2,heartbeats:e})).length}var gy;gy="",Zg(new Hm("platform-logger",e=>new gg(e),"PRIVATE")),Zg(new Hm("heartbeat",e=>new dy(e),"PRIVATE")),ay(yg,vg,gy),ay(yg,vg,"esm2020"),ay("fire-js","");ay("firebase","12.3.0","app");var yy,vy,by="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},wy={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let s,a=e.g[3];s=t+(a^n&(i^a))+r[0]+3614090360&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[1]+3905402710&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[2]+606105819&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[3]+3250441966&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[4]+4118548399&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[5]+1200080426&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[6]+2821735955&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[7]+4249261313&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[8]+1770035416&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[9]+2336552879&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[10]+4294925233&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[11]+2304563134&4294967295,s=t+(a^(n=i+(s<<22&4294967295|s>>>10))&(i^a))+r[12]+1804603682&4294967295,s=a+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[13]+4254626195&4294967295,a=t+(s<<12&4294967295|s>>>20),s=i+(n^a&(t^n))+r[14]+2792965006&4294967295,s=n+(t^(i=a+(s<<17&4294967295|s>>>15))&(a^t))+r[15]+1236535329&4294967295,s=t+(i^a&((n=i+(s<<22&4294967295|s>>>10))^i))+r[1]+4129170786&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[6]+3225465664&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[11]+643717713&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[0]+3921069994&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[5]+3593408605&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[10]+38016083&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[15]+3634488961&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[4]+3889429448&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[9]+568446438&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[14]+3275163606&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[3]+4107603335&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[8]+1163531501&4294967295,s=t+(i^a&((n=i+(s<<20&4294967295|s>>>12))^i))+r[13]+2850285829&4294967295,s=a+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[2]+4243563512&4294967295,a=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(a^t))+r[7]+1735328473&4294967295,s=n+(a^t&((i=a+(s<<14&4294967295|s>>>18))^a))+r[12]+2368359562&4294967295,s=t+((n=i+(s<<20&4294967295|s>>>12))^i^a)+r[5]+4294588738&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[8]+2272392833&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[11]+1839030562&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[14]+4259657740&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[1]+2763975236&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[4]+1272893353&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[7]+4139469664&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[10]+3200236656&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[13]+681279174&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[0]+3936430074&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[3]+3572445317&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[6]+76029189&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^a)+r[9]+3654602809&4294967295,s=a+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[12]+3873151461&4294967295,a=t+(s<<11&4294967295|s>>>21),s=i+(a^t^n)+r[15]+530742520&4294967295,s=n+((i=a+(s<<16&4294967295|s>>>16))^a^t)+r[2]+3299628645&4294967295,s=t+(i^((n=i+(s<<23&4294967295|s>>>9))|~a))+r[0]+4096336452&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[7]+1126891415&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[14]+2878612391&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[5]+4237533241&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[12]+1700485571&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[3]+2399980690&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[10]+4293915773&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[1]+2240044497&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[8]+1873313359&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[15]+4264355552&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[6]+2734768916&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[13]+1309151649&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~a))+r[4]+4149444226&4294967295,s=a+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[11]+3174756917&4294967295,a=t+(s<<10&4294967295|s>>>22),s=i+(t^(a|~n))+r[2]+718787259&4294967295,s=n+(a^((i=a+(s<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let s=this.h,a=0;for(;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var i={};function s(e){return-128<=e&&e<128?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(e<0)return d(a(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var o=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(e.g.length>30){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);c.l(e)<=0&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=o;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),c=(s=a(n)).j(t);h(c)||c.l(e)>0;)c=(s=a(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function y(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function v(e,t){const n=t>>5;t%=32;const i=e.g.length-n,s=[];for(let r=0;r<i;r++)s[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);const t=a(Math.pow(e,6));var n=this;let r="";for(;;){const i=g(n,t).g;let s=(((n=f(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;s.length<6;)s="0"+s;r=s+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let i=0;for(let r=0;r<=t;r++){let t=i+(65535&this.i(r))+(65535&e.i(r)),s=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);i=s>>>16,t&=65535,s&=65535,n[r]=s<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(this.l(c)<0&&e.l(c)<0)return a(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(let t=0;t<e.g.length;t++){const r=this.i(i)>>>16,s=65535&this.i(i),a=e.i(t)>>>16,o=65535&e.i(t);n[2*i+2*t]+=s*o,p(n,2*i+2*t),n[2*i+2*t+1]+=r*o,p(n,2*i+2*t+1),n[2*i+2*t+1]+=s*a,p(n,2*i+2*t+1),n[2*i+2*t+2]+=r*a,p(n,2*i+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,vy=wy.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=a(Math.pow(n,8));let i=o;for(let o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o);const e=parseInt(t.substring(o,o+s),n);s<8?(s=a(Math.pow(n,s)),i=i.j(s).add(a(e))):(i=i.j(r),i=i.add(a(e)))}return i},yy=wy.Integer=r}).apply("undefined"!==typeof by?by:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var xy,Ey,Ay,ky,Sy,Cy,Ty,Ny,Iy="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Py={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Iy&&Iy];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},s=this||self;function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=o).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}var h="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function d(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){s.setTimeout(()=>{throw e},0)}function m(){var e=w;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y,e=>e.reset());class y{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let v,b=!1,w=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},x=()=>{const e=Promise.resolve(void 0);v=()=>{e.then(E)}};function E(){for(var e;e=m();){try{e.h.call(e.g)}catch(n){p(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}b=!1}function A(){this.u=this.u,this.C=this.C}function k(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}A.prototype.u=!1,A.prototype.dispose=function(){this.u||(this.u=!0,this.N())},A.prototype[Symbol.dispose]=function(){this.dispose()},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},k.prototype.h=function(){this.defaultPrevented=!0};var S=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function C(e){return/^[\s\xa0]*$/.test(e)}function T(e,t){k.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(T,k),T.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&T.Z.h.call(this)},T.prototype.h=function(){T.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var N="closure_listenable_"+(1e6*Math.random()|0),I=0;function P(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++I,this.da=this.fa=!1}function _(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function R(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function D(e){const t={};for(const n in e)t[n]=e[n];return t}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<O.length;t++)n=O[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function L(e){this.src=e,this.g={},this.h=0}function M(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=s>=0)&&Array.prototype.splice.call(i,s,1),r&&(_(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function F(e,t,n,r){for(let i=0;i<e.length;++i){const s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}L.prototype.add=function(e,t,n,r,i){const s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);const a=F(e,t,r,i);return a>-1?(t=e[a],n||(t.fa=!1)):((t=new P(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var B="closure_lm_"+(1e6*Math.random()|0),U={};function z(e,t,n,r,i){if(r&&r.once)return H(e,t,n,r,i);if(Array.isArray(t)){for(let s=0;s<t.length;s++)z(e,t[s],n,r,i);return null}return n=Y(n),e&&e[N]?e.J(t,n,a(r)?!!r.capture:!!r,i):V(e,t,n,!1,r,i)}function V(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");const o=a(i)?!!i.capture:!!i;let l=K(e);if(l||(e[B]=l=new L(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Q;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)S||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(W(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function H(e,t,n,r,i){if(Array.isArray(t)){for(let s=0;s<t.length;s++)H(e,t[s],n,r,i);return null}return n=Y(n),e&&e[N]?e.K(t,n,a(r)?!!r.capture:!!r,i):V(e,t,n,!0,r,i)}function G(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)G(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=Y(n),e&&e[N]?(e=e.i,(s=String(t).toString())in e.g&&((n=F(t=e.g[s],n,r,i))>-1&&(_(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[s],e.h--)))):e&&(e=K(e))&&(t=e.g[t.toString()],e=-1,t&&(e=F(t,n,r,i)),(n=e>-1?t[e]:null)&&q(n))}function q(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[N])M(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(W(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=K(t))?(M(n,e),0==n.h&&(n.src=null,t[B]=null)):_(e)}}}function W(e){return e in U?U[e]:U[e]="on"+e}function Q(e,t){if(e.da)e=!0;else{t=new T(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&q(e),e=n.call(r,t)}return e}function K(e){return(e=e[B])instanceof L?e:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function Y(e){return"function"===typeof e?e:(e[J]||(e[J]=function(t){return e.handleEvent(t)}),e[J])}function X(){A.call(this),this.i=new L(this),this.M=this,this.G=null}function Z(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new k(t,e);else if(t instanceof k)t.target=t.target||e;else{var i=t;j(t=new k(r,e),i)}let s,a;if(i=!0,n)for(a=n.length-1;a>=0;a--)s=t.g=n[a],i=$(s,r,!0,t)&&i;if(s=t.g=e,i=$(s,r,!0,t)&&i,i=$(s,r,!1,t)&&i,n)for(a=0;a<n.length;a++)s=t.g=n[a],i=$(s,r,!1,t)&&i}function $(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let s=0;s<t.length;++s){const a=t[s];if(a&&!a.da&&a.capture==n){const t=a.listener,n=a.ha||a.src;a.fa&&M(e.i,a),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:s.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(X,A),X.prototype[N]=!0,X.prototype.removeEventListener=function(e,t,n,r){G(this,e,t,n,r)},X.prototype.N=function(){if(X.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)_(n[e]);delete e.g[t],e.h--}}this.G=null},X.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},X.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends A{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){A.call(this),this.h=e,this.g={}}u(ne,A);var re=[];function ie(e){R(e.g,function(e,t){this.g.hasOwnProperty(t)&&q(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ie(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var se=s.JSON.stringify,ae=s.JSON.parse,oe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function le(){}function ce(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function he(){k.call(this,"d")}function de(){k.call(this,"c")}u(he,k),u(de,k);var fe={},pe=null;function me(){return pe=pe||new X}function ge(e){k.call(this,fe.Ia,e)}function ye(e){const t=me();Z(t,new ge(t))}function ve(e,t){k.call(this,fe.STAT_EVENT,e),this.stat=t}function be(e){const t=me();Z(t,new ve(t,e))}function we(e,t){k.call(this,fe.Ja,e),this.size=t}function xe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Ee(){this.g=!0}function Ae(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const s=JSON.parse(t);if(s)for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var n=s[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return se(s)}catch(s){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",u(ge,k),fe.STAT_EVENT="statevent",u(ve,k),fe.Ja="timingevent",u(we,k),Ee.prototype.ua=function(){this.g=!1},Ee.prototype.info=function(){};var ke,Se={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ce={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Te(){}function Ne(e){return encodeURIComponent(String(e))}function Ie(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Pe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new _e}function _e(){this.i=null,this.g="",this.h=!1}u(Te,le),Te.prototype.g=function(){return new XMLHttpRequest},ke=new Te;var Re={},De={};function Oe(e,t,n){e.M=1,e.A=st(et(t)),e.u=n,e.R=!0,je(e,null)}function je(e,t){e.F=Date.now(),Fe(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),bt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new _e,e.g=an(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(re[0]=i.toString()),i=re);for(let s=0;s<i.length;s++){const e=z(n,i[s],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?D(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ye(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s){var a="",o=s.split("&");for(let e=0;e<o.length;e++){var l=o[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");a=t.length>=2&&"type"==t[1]?a+(e+"=")+l+"&":a+(e+"=redacted&")}}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Le(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Me(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?De:(n=Number(t.substring(n,r)),isNaN(n)?Re:(r+=1)+n>t.length?De:(t=t.slice(r,r+n),e.C=r+n,t))}function Fe(e){e.T=Date.now()+e.H,Be(e,e.H)}function Be(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=xe(l(e.aa,e),t)}function Ue(e){e.D&&(s.clearTimeout(e.D),e.D=null)}function ze(e){0==e.j.I||e.K||en(e.j,e)}function Ve(e){Ue(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function He(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Ke(n.h,e)))if(!e.L&&Ke(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;$t(n),Ht(n)}Yt(n),be(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=xe(l(n.Va,n),6e3));Qe(n.h)<=1&&n.ta&&(n.ta=void 0)}else nn(n,11)}else if((e.L||n.g==e)&&$t(n),!C(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Je(s,s.h),s.h=null))}if(r.G){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,it(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var a=e;if((r=n).na=sn(r,r.L?r.ba:null,r.W),a.L){Ye(r.h,a);var o=a,c=r.O;c&&(o.H=c),o.D&&(Ue(o),Fe(o)),r.g=a}else Jt(r);n.i.length>0&&qt(n)}else"stop"!=l[0]&&"close"!=l[0]||nn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?nn(n,7):Vt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ye()}catch(u){}}Pe.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Ft(e)?t.j():this.Y(e)},Pe.prototype.Y=function(e){try{if(e==this.g)e:{const l=Ft(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Bt(this.g)))){this.K||4!=l||7==c||ye(),Ue(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Le(e))return e.g.la();const t=Bt(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Ft(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return Ve(e),ze(e),"";e.h.i=new s.TextDecoder}for(let s=0;s<r;s++)e.h.h=!0,n+=e.h.i.decode(t[s],{stream:!(i&&s==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(r)){var a=r;break t}}a=null}if(!(e=a)){this.o=!1,this.m=3,be(12),Ve(this),ze(this);break e}Ae(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,He(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Me(this,n),t==De){4==l&&(this.m=4,be(14),e=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(t==Re){this.m=4,be(15),Ae(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Ae(this.i,this.l,t,null),He(this,t)}if(Le(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,be(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xt(o),o.P=!0,be(11))}}else Ae(this.i,this.l,n,"[Invalid Chunked Response]"),Ve(this),ze(this)}else Ae(this.i,this.l,n,null),He(this,n);4==l&&Ve(this),this.o&&!this.K&&(4==l?en(this.j,this):(this.o=!1,Fe(this)))}else(function(e){const t={};e=(e.g&&Ft(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(C(e[r]))continue;var n=Ie(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,be(12)):(this.m=0,be(13)),Ve(this),ze(this)}}}catch(uv){}},Pe.prototype.cancel=function(){this.K=!0,Ve(this)},Pe.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ye(),be(17)),Ve(this),this.m=2,ze(this)):Be(this,this.T-e)};var Ge=class{constructor(e,t){this.g=e,this.map=t}};function qe(e){this.l=e||10,s.PerformanceNavigationTiming?e=(e=s.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function We(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Qe(e){return e.h?1:e.g?e.g.size:0}function Ke(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Je(e,t){e.g?e.g.add(t):e.h=t}function Ye(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Xe(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return d(e.i)}qe.prototype.cancel=function(){if(this.i=Xe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Ze=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $e(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof $e?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,wt(e.i)),this.m=e.m):e&&(t=String(e).match(Ze))?(this.l=!1,tt(this,t[1]||"",!0),this.o=at(t[2]||""),this.g=at(t[3]||"",!0),nt(this,t[4]),this.h=at(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=at(t[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}function et(e){return new $e(e)}function tt(e,t,n){e.j=n?at(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof pt?(e.i=t,function(e,t){t&&!e.j&&(mt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),bt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=ot(t,dt)),e.i=new pt(t,e.l))}function it(e,t,n){e.i.set(t,n)}function st(e){return it(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function at(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ot(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}$e.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(ot(t,ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ot(t,ct,!0),"@"),e.push(Ne(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ot(n,"/"==n.charAt(0)?ht:ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ot(n,ft)),e.join("")},$e.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,wt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ct=/[#\/\?@]/g,ut=/[#\?:]/g,ht=/[#\?]/g,dt=/[#\?@]/g,ft=/#/g;function pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,s=null;r>=0?(i=e[n].substring(0,r),s=e[n].substring(r+1)):i=e[n],t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){mt(e),t=xt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function yt(e,t){return mt(e),t=xt(e,t),e.g.has(t)}function vt(e,t){mt(e);let n=[];if("string"===typeof t)yt(e,t)&&(n=n.concat(e.g.get(xt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function bt(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(xt(e,t),d(n)),e.h+=n.length)}function wt(e){const t=new pt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function xt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Et(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function At(){this.g=new oe}function kt(e){this.i=e.Sb||null,this.h=e.ab||!1}function St(e,t){X.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Ct(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Tt(e){e.readyState=4,e.l=null,e.j=null,e.B=null,Nt(e)}function Nt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function It(e){let t="";return R(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Pt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=It(n),"string"===typeof e?null!=n&&Ne(n):it(e,t,n))}function _t(e){X.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=pt.prototype).add=function(e,t){mt(this),this.i=null,e=xt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){mt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return mt(this),this.i=null,yt(this,e=xt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=vt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=Ne(n);n=vt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+Ne(n[t])),e.push(r)}}return this.i=e.join("&")},u(kt,le),kt.prototype.g=function(){return new St(this.i,this.h)},u(St,X),(e=St.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,Nt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||s).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Tt(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Nt(this)),this.g&&(this.readyState=3,Nt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ct(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Tt(this):Nt(this),3==this.readyState&&Ct(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Tt(this))},e.Na=function(e){this.g&&(this.response=e,Tt(this))},e.ga=function(){this.g&&Tt(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(St.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(_t,X);var Rt=/^https?$/i,Dt=["POST","PUT"];function Ot(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,jt(e),Mt(e)}function jt(e){e.A||(e.A=!0,Z(e,"complete"),Z(e,"error"))}function Lt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Ft(e))setTimeout(e.Ca.bind(e),0);else if(Z(e,"readystatechange"),4==Ft(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match(Ze)[1]||null;!t&&s.self&&s.self.location&&(t=s.self.location.protocol.slice(0,-1)),r=!Rt.test(t?t.toLowerCase():"")}n=r}if(n)Z(e,"complete"),Z(e,"success");else{e.o=6;try{var a=Ft(e)>2?e.g.statusText:""}catch(o){a=""}e.l=a+" ["+e.ca()+"]",jt(e)}}finally{Mt(e)}}}function Mt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||Z(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Ft(e){return e.g?e.g.readyState:0}function Bt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(li){return null}}function Ut(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function zt(e){this.za=0,this.i=[],this.j=new Ee,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ut("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ut("baseRetryDelayMs",5e3,e),this.Za=Ut("retryDelaySeedMs",1e4,e),this.Ta=Ut("forwardChannelMaxRetries",2,e),this.va=Ut("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new qe(e&&e.concurrentRequestLimit),this.Ba=new At,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function Vt(e){if(Gt(e),3==e.I){var t=e.V++,n=et(e.J);if(it(n,"SID",e.M),it(n,"RID",t),it(n,"TYPE","terminate"),Qt(e,n),(t=new Pe(e,e.j,t)).M=2,t.A=st(et(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.A,n=!0),n||(t.g=an(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Fe(t)}rn(e)}function Ht(e){e.g&&(Xt(e),e.g.cancel(),e.g=null)}function Gt(e){Ht(e),e.v&&(s.clearTimeout(e.v),e.v=null),$t(e),e.h.cancel(),e.m&&("number"===typeof e.m&&s.clearTimeout(e.m),e.m=null)}function qt(e){if(!We(e.h)&&!e.m){e.m=!0;var t=e.Ea;v||x(),b||(v(),b=!0),w.add(t,e),e.D=0}}function Wt(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);it(r,"SID",e.M),it(r,"RID",n),it(r,"AID",e.K),Qt(e,r),e.u&&e.o&&Pt(r,e.u,e.o),n=new Pe(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Kt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Je(e.h,n),Oe(n,r,t)}function Qt(e,t){e.H&&R(e.H,function(e,n){it(t,n,e)}),e.l&&R({},function(e,n){it(t,n,e)})}function Kt(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var s=i[c].g;const n=i[c].map;if((s-=t)<0)t=Math.max(0,i[c].g-100),l=!1;else try{s="req"+s+"_"||0;try{var o=n instanceof Map?n:Object.entries(n);for(const[t,n]of o){let r=n;a(n)&&(r=se(n)),e.push(s+t+"="+encodeURIComponent(r))}}catch(Ry){throw e.push(s+"type="+encodeURIComponent("_badmap")),Ry}}catch(Ry){r&&r(n)}}if(l){o=e.join("&");break e}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function Jt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;v||x(),b||(v(),b=!0),w.add(t,e),e.A=0}}function Yt(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=xe(l(e.Da,e),tn(e,e.A)),e.A++,!0)}function Xt(e){null!=e.B&&(s.clearTimeout(e.B),e.B=null)}function Zt(e){e.g=new Pe(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);it(t,"RID","rpc"),it(t,"SID",e.M),it(t,"AID",e.K),it(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&it(t,"TO",e.ia),it(t,"TYPE","xmlhttp"),Qt(e,t),e.u&&e.o&&Pt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=st(et(t)),n.u=null,n.R=!0,je(n,e)}function $t(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function en(e,t){var n=null;if(e.g==t){$t(e),Xt(e),e.g=null;var r=2}else{if(!Ke(e.h,t))return;n=t.G,Ye(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;Z(r=me(),new we(r,n)),qt(e)}else Jt(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(Qe(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=xe(l(e.Ea,e,t),tn(e,e.D)),e.D++,!0))}(e,t)||2==r&&Yt(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:nn(e,5);break;case 4:nn(e,10);break;case 3:nn(e,6);break;default:nn(e,2)}}function tn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function nn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new $e(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||tt(r,"https"),st(r),t?function(e,t){const n=new Ee;if(s.Image){const r=new Image;r.onload=c(Et,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(Et,n,"TestLoadImage: error",!1,t,r),r.onabort=c(Et,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(Et,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ee;const n=new AbortController,r=setTimeout(()=>{n.abort(),Et(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Et(0,0,!0,t):Et(0,0,!1,t)}).catch(()=>{clearTimeout(r),Et(0,0,!1,t)})}(r.toString(),n)}else be(2);e.I=0,e.l&&e.l.pa(t),rn(e),Gt(e)}function rn(e){if(e.I=0,e.ja=[],e.l){const t=Xe(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.oa()}}function sn(e,t,n){var r=n instanceof $e?et(n):new $e(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new $e(null);r&&tt(e,r),t&&(e.g=t),i&&nt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&it(r,n,t),it(r,"VER",e.ka),Qt(e,r),r}function an(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new _t(new kt({ab:n})):new _t(e.ma)).Fa(e.L),t}function on(){}function ln(){}function cn(e,t){X.call(this),this.g=new zt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!C(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!C(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new dn(this)}function un(e){he.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function hn(){de.call(this),this.status=1}function dn(e){this.g=e}(e=_t.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ke.g(),this.g.onreadystatechange=h(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Ot(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(Array.prototype.indexOf.call(Dt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(a){Ot(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,Z(this,"complete"),Z(this,"abort"),Mt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mt(this,!0)),_t.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Lt(this):this.Xa())},e.Xa=function(){Lt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Ft(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ae(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=zt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){be(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=sn(this,null,this.W),qt(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Pe(this,this.j,e);let s=this.o;if(this.U&&(s?(s=D(s),j(s,this.U)):s=this.U),null!==this.u||this.R||(i.J=s,s=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Kt(this,i,t),it(n=et(this.J),"RID",e),it(n,"CVER",22),this.G&&it(n,"X-HTTP-Session-Id",this.G),Qt(this,n),s&&(this.R?t="headers="+Ne(It(s))+"&"+t:this.u&&Pt(n,this.u,s)),Je(this.h,i),this.Ra&&it(n,"TYPE","init"),this.S?(it(n,"$req",t),it(n,"SID","null"),i.U=!0,Oe(i,n,null)):Oe(i,n,t),this.I=2}}else 3==this.I&&(e?Wt(this,e):0==this.i.length||We(this.h)||Wt(this))},e.Da=function(){if(this.v=null,Zt(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=xe(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,be(10),Ht(this),Zt(this))},e.Va=function(){null!=this.C&&(this.C=null,Ht(this),Yt(this),be(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=on.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},ln.prototype.g=function(e,t){return new cn(e,t)},u(cn,X),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Vt(this.g)},cn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=se(e),e=n);t.i.push(new Ge(t.Ya++,e)),3==t.I&&qt(t)},cn.prototype.N=function(){this.g.l=null,delete this.j,Vt(this.g),delete this.g,cn.Z.N.call(this)},u(un,he),u(hn,de),u(dn,on),dn.prototype.ra=function(){Z(this.g,"a")},dn.prototype.qa=function(e){Z(this.g,new un(e))},dn.prototype.pa=function(e){Z(this.g,new hn)},dn.prototype.oa=function(){Z(this.g,"b")},ln.prototype.createWebChannel=ln.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,Ny=Py.createWebChannelTransport=function(){return new ln},Ty=Py.getStatEventTarget=function(){return me()},Cy=Py.Event=fe,Sy=Py.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Se.NO_ERROR=0,Se.TIMEOUT=8,Se.HTTP_ERROR=6,ky=Py.ErrorCode=Se,Ce.COMPLETE="complete",Ay=Py.EventType=Ce,ce.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",X.prototype.listen=X.prototype.J,Ey=Py.WebChannel=ce,Py.FetchXmlHttpFactory=kt,_t.prototype.listenOnce=_t.prototype.K,_t.prototype.getLastError=_t.prototype.Ha,_t.prototype.getLastErrorCode=_t.prototype.ya,_t.prototype.getStatus=_t.prototype.ca,_t.prototype.getResponseJson=_t.prototype.La,_t.prototype.getResponseText=_t.prototype.la,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Fa,xy=Py.XhrIo=_t}).apply("undefined"!==typeof Iy?Iy:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const _y="@firebase/firestore",Ry="4.9.2";class Dy{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Dy.UNAUTHENTICATED=new Dy(null),Dy.GOOGLE_CREDENTIALS=new Dy("google-credentials-uid"),Dy.FIRST_PARTY=new Dy("first-party-uid"),Dy.MOCK_USER=new Dy("mock-user");let Oy="12.3.0";const jy=new $m("@firebase/firestore");function Ly(){return jy.logLevel}function My(e){if(jy.logLevel<=Km.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Uy);jy.debug("Firestore (".concat(Oy,"): ").concat(e),...i)}}function Fy(e){if(jy.logLevel<=Km.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Uy);jy.error("Firestore (".concat(Oy,"): ").concat(e),...i)}}function By(e){if(jy.logLevel<=Km.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Uy);jy.warn("Firestore (".concat(Oy,"): ").concat(e),...i)}}function Uy(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function zy(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Vy(e,r,n)}function Vy(e,t,n){let r="FIRESTORE (".concat(Oy,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Fy(r),new Error(r)}function Hy(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||Vy(t,i,r)}function Gy(e,t){return e}const qy={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wy extends Rm{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Qy{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ky{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Jy{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Dy.UNAUTHENTICATED))}shutdown(){}}class Yy{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Xy{constructor(e){this.t=e,this.currentUser=Dy.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Hy(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Qy;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Qy,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{My("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(My("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Qy)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(My("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Hy("string"==typeof t.accessToken,31837,{l:t}),new Ky(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Hy(null===e||"string"==typeof e,2055,{h:e}),new Dy(e)}}class Zy{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Dy.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $y{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Zy(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Dy.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ev{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tv{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ey(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Hy(void 0===this.o,3512);const n=e=>{null!=e.error&&My("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,My("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{My("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):My("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ev(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Hy("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new ev(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function nv(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class rv{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=nv(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function iv(e,t){return e<t?-1:e>t?1:0}function sv(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return lv(n)===lv(i)?iv(n,i):lv(n)?1:-1}return iv(e.length,t.length)}const av=55296,ov=57343;function lv(e){const t=e.charCodeAt(0);return t>=av&&t<=ov}function cv(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const uv="__name__";class hv{constructor(e,t,n){void 0===t?t=0:t>e.length&&zy(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&zy(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===hv.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hv?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=hv.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return iv(e.length,t.length)}static compareSegments(e,t){const n=hv.isNumericId(e),r=hv.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?hv.extractNumericId(e).compare(hv.extractNumericId(t)):sv(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yy.fromString(e.substring(4,e.length-2))}}class dv extends hv{construct(e,t,n){return new dv(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Wy(qy.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new dv(e)}static emptyPath(){return new dv([])}}const fv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pv extends hv{construct(e,t,n){return new pv(e,t,n)}static isValidIdentifier(e){return fv.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pv.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===uv}static keyField(){return new pv([uv])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Wy(qy.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Wy(qy.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Wy(qy.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Wy(qy.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pv(t)}static emptyPath(){return new pv([])}}class mv{constructor(e){this.path=e}static fromPath(e){return new mv(dv.fromString(e))}static fromName(e){return new mv(dv.fromString(e).popFirst(5))}static empty(){return new mv(dv.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===dv.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return dv.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new mv(new dv(e.slice()))}}function gv(e,t,n){if(!n)throw new Wy(qy.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function yv(e){if(!mv.isDocumentKey(e))throw new Wy(qy.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function vv(e){if(mv.isDocumentKey(e))throw new Wy(qy.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function bv(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function wv(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":zy(12329,{type:typeof e})}function xv(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Wy(qy.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=wv(e);throw new Wy(qy.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Ev(e,t){if(t<=0)throw new Wy(qy.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}function Av(e,t){const n={typeString:e};return t&&(n.value=t),n}function kv(e,t){if(!bv(e))throw new Wy(qy.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(i&&typeof a!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==s&&a!==s.value){n="Expected '".concat(r,"' field to equal '").concat(s.value,"'");break}}if(n)throw new Wy(qy.INVALID_ARGUMENT,n);return!0}const Sv=-62135596800,Cv=1e6;class Tv{static now(){return Tv.fromMillis(Date.now())}static fromDate(e){return Tv.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Cv);return new Tv(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Wy(qy.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Wy(qy.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Sv)throw new Wy(qy.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Wy(qy.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Cv}_compareTo(e){return this.seconds===e.seconds?iv(this.nanoseconds,e.nanoseconds):iv(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Tv._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(kv(e,Tv._jsonSchema))return new Tv(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Sv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Tv._jsonSchemaVersion="firestore/timestamp/1.0",Tv._jsonSchema={type:Av("string",Tv._jsonSchemaVersion),seconds:Av("number"),nanoseconds:Av("number")};class Nv{static fromTimestamp(e){return new Nv(e)}static min(){return new Nv(new Tv(0,0))}static max(){return new Nv(new Tv(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Iv=-1;class Pv{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Pv.UNKNOWN_ID=-1;function _v(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Nv.fromTimestamp(1e9===r?new Tv(n+1,0):new Tv(n,r));return new Dv(i,mv.empty(),t)}function Rv(e){return new Dv(e.readTime,e.key,Iv)}class Dv{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Dv(Nv.min(),mv.empty(),Iv)}static max(){return new Dv(Nv.max(),mv.empty(),Iv)}}function Ov(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=mv.comparator(e.documentKey,t.documentKey),0!==n?n:iv(e.largestBatchId,t.largestBatchId))}const jv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Lv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Mv(e){if(e.code!==qy.FAILED_PRECONDITION||e.message!==jv)throw e;My("LocalStore","Unexpectedly lost primary lease")}class Fv{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&zy(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Fv((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Fv?t:Fv.resolve(t)}catch(e){return Fv.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Fv.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Fv.reject(t)}static resolve(e){return new Fv((t,n)=>{t(e)})}static reject(e){return new Fv((t,n)=>{n(e)})}static waitFor(e){return new Fv((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Fv.resolve(!1);for(const n of e)t=t.next(e=>e?Fv.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Fv((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{s[l]=e,++a,a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Fv((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Bv(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Uv(e){return"IndexedDbTransactionError"===e.name}class zv{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}zv.ce=-1;const Vv=-1;function Hv(e){return null==e}function Gv(e){return 0===e&&1/e==-1/0}function qv(e){return"number"==typeof e&&Number.isInteger(e)&&!Gv(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Wv="\x01";function Qv(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Jv(t)),t=Kv(e.get(n),t);return Jv(t)}function Kv(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Wv:n+="\x01\x11";break;default:n+=t}}return n}function Jv(e){return e+Wv+"\x01"}const Yv="remoteDocuments",Xv="owner",Zv="mutationQueues",$v="mutations";const eb="documentMutations",tb="remoteDocumentsV14",nb="remoteDocumentGlobal",rb="targets",ib="targetDocuments",sb="targetGlobal",ab="collectionParents",ob="clientMetadata",lb="bundles",cb="namedQueries",ub="indexConfiguration",hb="indexState",db="indexEntries",fb="documentOverlays",pb="globals",mb=[Zv,$v,eb,Yv,rb,Xv,sb,ib,ob,nb,ab,lb,cb],gb=[Zv,$v,eb,tb,rb,Xv,sb,ib,ob,nb,ab,lb,cb,fb],yb=gb,vb=[...yb,ub,hb,db];function bb(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function wb(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function xb(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Eb{constructor(e,t){this.comparator=e,this.root=t||kb.EMPTY}insert(e,t){return new Eb(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,kb.BLACK,null,null))}remove(e){return new Eb(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kb.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ab(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ab(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ab(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ab(this.root,e,this.comparator,!0)}}class Ab{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kb{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:kb.RED,this.left=null!=r?r:kb.EMPTY,this.right=null!=i?i:kb.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new kb(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return kb.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return kb.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kb.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kb.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw zy(43730,{key:this.key,value:this.value});if(this.right.isRed())throw zy(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw zy(27949);return e+(this.isRed()?0:1)}}kb.EMPTY=null,kb.RED=!0,kb.BLACK=!1,kb.EMPTY=new class{constructor(){this.size=0}get key(){throw zy(57766)}get value(){throw zy(16141)}get color(){throw zy(16727)}get left(){throw zy(29726)}get right(){throw zy(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new kb(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Sb{constructor(e){this.comparator=e,this.data=new Eb(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Cb(this.data.getIterator())}getIteratorFrom(e){return new Cb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Sb))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Sb(this.comparator);return t.data=e,t}}class Cb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Tb{constructor(e){this.fields=e,e.sort(pv.comparator)}static empty(){return new Tb([])}unionWith(e){let t=new Sb(pv.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Tb(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return cv(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Nb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ib{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Nb("Invalid base64 string: "+e):e}}(e);return new Ib(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Ib(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return iv(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ib.EMPTY_BYTE_STRING=new Ib("");const Pb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _b(e){if(Hy(!!e,39018),"string"==typeof e){let t=0;const n=Pb.exec(e);if(Hy(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Rb(e.seconds),nanos:Rb(e.nanos)}}function Rb(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Db(e){return"string"==typeof e?Ib.fromBase64String(e):Ib.fromUint8Array(e)}const Ob="server_timestamp",jb="__type__",Lb="__previous_value__",Mb="__local_write_time__";function Fb(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[jb])||void 0===t?void 0:t.stringValue)===Ob}function Bb(e){const t=e.mapValue.fields[Lb];return Fb(t)?Bb(t):t}function Ub(e){const t=_b(e.mapValue.fields[Mb].timestampValue);return new Tv(t.seconds,t.nanos)}class zb{constructor(e,t,n,r,i,s,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const Vb="(default)";class Hb{constructor(e,t){this.projectId=e,this.database=t||Vb}static empty(){return new Hb("","")}get isDefaultDatabase(){return this.database===Vb}isEqual(e){return e instanceof Hb&&e.projectId===this.projectId&&e.database===this.database}}const Gb="__type__",qb="__max__",Wb={mapValue:{fields:{__type__:{stringValue:qb}}}},Qb="__vector__",Kb="value";function Jb(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Fb(e)?4:dw(e)?9007199254740991:uw(e)?10:11:zy(28295,{value:e})}function Yb(e,t){if(e===t)return!0;const n=Jb(e);if(n!==Jb(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ub(e).isEqual(Ub(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=_b(e.timestampValue),r=_b(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Db(e.bytesValue).isEqual(Db(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Rb(e.geoPointValue.latitude)===Rb(t.geoPointValue.latitude)&&Rb(e.geoPointValue.longitude)===Rb(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Rb(e.integerValue)===Rb(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Rb(e.doubleValue),r=Rb(t.doubleValue);return n===r?Gv(n)===Gv(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return cv(e.arrayValue.values||[],t.arrayValue.values||[],Yb);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(bb(n)!==bb(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Yb(n[i],r[i])))return!1;return!0}(e,t);default:return zy(52216,{left:e})}}function Xb(e,t){return void 0!==(e.values||[]).find(e=>Yb(e,t))}function Zb(e,t){if(e===t)return 0;const n=Jb(e),r=Jb(t);if(n!==r)return iv(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return iv(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Rb(e.integerValue||e.doubleValue),r=Rb(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return $b(e.timestampValue,t.timestampValue);case 4:return $b(Ub(e),Ub(t));case 5:return sv(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Db(e),r=Db(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=iv(n[i],r[i]);if(0!==e)return e}return iv(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=iv(Rb(e.latitude),Rb(t.latitude));return 0!==n?n:iv(Rb(e.longitude),Rb(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return ew(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,i,s){const a=e.fields||{},o=t.fields||{},l=null===(n=a[Kb])||void 0===n?void 0:n.arrayValue,c=null===(r=o[Kb])||void 0===r?void 0:r.arrayValue,u=iv((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(s=c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:ew(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Wb.mapValue&&t===Wb.mapValue)return 0;if(e===Wb.mapValue)return 1;if(t===Wb.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=sv(r[a],s[a]);if(0!==e)return e;const t=Zb(n[r[a]],i[s[a]]);if(0!==t)return t}return iv(r.length,s.length)}(e.mapValue,t.mapValue);default:throw zy(23264,{he:n})}}function $b(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return iv(e,t);const n=_b(e),r=_b(t),i=iv(n.seconds,r.seconds);return 0!==i?i:iv(n.nanos,r.nanos)}function ew(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Zb(n[i],r[i]);if(e)return e}return iv(n.length,r.length)}function tw(e){return nw(e)}function nw(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=_b(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Db(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return mv.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=nw(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(nw(e.fields[i]));return n+"}"}(e.mapValue):zy(61005,{value:e})}function rw(e){switch(Jb(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Bb(e);return t?16+rw(t):16;case 5:return 2*e.stringValue.length;case 6:return Db(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+rw(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return wb(e.fields,(e,n)=>{t+=e.length+rw(n)}),t}(e.mapValue);default:throw zy(13486,{value:e})}}function iw(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function sw(e){return!!e&&"integerValue"in e}function aw(e){return!!e&&"arrayValue"in e}function ow(e){return!!e&&"nullValue"in e}function lw(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function cw(e){return!!e&&"mapValue"in e}function uw(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Gb])||void 0===t?void 0:t.stringValue)===Qb}function hw(e){if(e.geoPointValue)return{geoPointValue:h({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:h({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return wb(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=hw(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=hw(e.arrayValue.values[n]);return t}return h({},e)}function dw(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===qb}class fw{constructor(e){this.value=e}static empty(){return new fw({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!cw(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hw(t)}setAll(e){let t=pv.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=hw(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());cw(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yb(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];cw(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){wb(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new fw(hw(this.value))}}function pw(e){const t=[];return wb(e.fields,(e,n)=>{const r=new pv([e]);if(cw(n)){const e=pw(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Tb(t)}class mw{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new mw(e,0,Nv.min(),Nv.min(),Nv.min(),fw.empty(),0)}static newFoundDocument(e,t,n,r){return new mw(e,1,t,Nv.min(),n,r,0)}static newNoDocument(e,t){return new mw(e,2,t,Nv.min(),Nv.min(),fw.empty(),0)}static newUnknownDocument(e,t){return new mw(e,3,t,Nv.min(),Nv.min(),fw.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Nv.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fw.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fw.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nv.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof mw&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mw(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class gw{constructor(e,t){this.position=e,this.inclusive=t}}function yw(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?mv.comparator(mv.fromName(a.referenceValue),n.key):Zb(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function vw(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Yb(e.position[n],t.position[n]))return!1;return!0}class bw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function ww(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class xw{}class Ew extends xw{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Pw(e,t,n):"array-contains"===t?new Ow(e,n):"in"===t?new jw(e,n):"not-in"===t?new Lw(e,n):"array-contains-any"===t?new Mw(e,n):new Ew(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new _w(e,n):new Rw(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Zb(t,this.value)):null!==t&&Jb(this.value)===Jb(t)&&this.matchesComparison(Zb(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return zy(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Aw extends xw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Aw(e,t)}matches(e){return kw(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function kw(e){return"and"===e.op}function Sw(e){return Cw(e)&&kw(e)}function Cw(e){for(const t of e.filters)if(t instanceof Aw)return!1;return!0}function Tw(e){if(e instanceof Ew)return e.field.canonicalString()+e.op.toString()+tw(e.value);if(Sw(e))return e.filters.map(e=>Tw(e)).join(",");{const t=e.filters.map(e=>Tw(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Nw(e,t){return e instanceof Ew?function(e,t){return t instanceof Ew&&e.op===t.op&&e.field.isEqual(t.field)&&Yb(e.value,t.value)}(e,t):e instanceof Aw?function(e,t){return t instanceof Aw&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Nw(n,t.filters[r]),!0)}(e,t):void zy(19439)}function Iw(e){return e instanceof Ew?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(tw(e.value))}(e):e instanceof Aw?function(e){return e.op.toString()+" {"+e.getFilters().map(Iw).join(" ,")+"}"}(e):"Filter"}class Pw extends Ew{constructor(e,t,n){super(e,t,n),this.key=mv.fromName(n.referenceValue)}matches(e){const t=mv.comparator(e.key,this.key);return this.matchesComparison(t)}}class _w extends Ew{constructor(e,t){super(e,"in",t),this.keys=Dw("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Rw extends Ew{constructor(e,t){super(e,"not-in",t),this.keys=Dw("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Dw(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>mv.fromName(e.referenceValue))}class Ow extends Ew{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return aw(t)&&Xb(t.arrayValue,this.value)}}class jw extends Ew{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Xb(this.value.arrayValue,t)}}class Lw extends Ew{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Xb(this.value.arrayValue,t)}}class Mw extends Ew{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!aw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Xb(this.value.arrayValue,e))}}class Fw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.Te=null}}function Bw(e){return new Fw(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Uw(e){const t=Gy(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Tw(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Hv(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>tw(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>tw(e)).join(",")),t.Te=e}return t.Te}function zw(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ww(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Nw(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!vw(e.startAt,t.startAt)&&vw(e.endAt,t.endAt)}function Vw(e){return mv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Hw{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Gw(e,t,n,r,i,s,a,o){return new Hw(e,t,n,r,i,s,a,o)}function qw(e){return new Hw(e)}function Ww(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Qw(e){return null!==e.collectionGroup}function Kw(e){const t=Gy(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Sb(pv.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new bw(r,n))}),e.has(pv.keyField().canonicalString())||t.Ie.push(new bw(pv.keyField(),n))}return t.Ie}function Jw(e){const t=Gy(e);return t.Ee||(t.Ee=Yw(t,Kw(e))),t.Ee}function Yw(e,t){if("F"===e.limitType)return Bw(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new bw(e.field,t)});const n=e.endAt?new gw(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new gw(e.startAt.position,e.startAt.inclusive):null;return Bw(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Xw(e,t){const n=e.filters.concat([t]);return new Hw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Zw(e,t,n){return new Hw(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function $w(e,t){return zw(Jw(e),Jw(t))&&e.limitType===t.limitType}function ex(e){return"".concat(Uw(Jw(e)),"|lt:").concat(e.limitType)}function tx(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Iw(e)).join(", "),"]")),Hv(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>tw(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>tw(e)).join(",")),"Target(".concat(t,")")}(Jw(e)),"; limitType=").concat(e.limitType,")")}function nx(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):mv.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Kw(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=yw(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Kw(e),t))&&!(e.endAt&&!function(e,t,n){const r=yw(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Kw(e),t))}(e,t)}function rx(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ix(e){return(t,n)=>{let r=!1;for(const i of Kw(e)){const e=sx(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function sx(e,t,n){const r=e.field.isKeyField()?mv.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Zb(r,i):zy(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return zy(19790,{direction:e.dir})}}class ax{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){wb(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return xb(this.inner)}size(){return this.innerSize}}const ox=new Eb(mv.comparator);function lx(){return ox}const cx=new Eb(mv.comparator);function ux(){let e=cx;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function hx(e){let t=cx;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function dx(){return px()}function fx(){return px()}function px(){return new ax(e=>e.toString(),(e,t)=>e.isEqual(t))}const mx=new Eb(mv.comparator),gx=new Sb(mv.comparator);function yx(){let e=gx;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const vx=new Sb(iv);function bx(){return vx}function wx(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gv(t)?"-0":t}}function xx(e){return{integerValue:""+e}}function Ex(e,t){return qv(t)?xx(t):wx(e,t)}class Ax{constructor(){this._=void 0}}function kx(e,t,n){return e instanceof Tx?function(e,t){const n={fields:{[jb]:{stringValue:Ob},[Mb]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Fb(t)&&(t=Bb(t)),t&&(n.fields[Lb]=t),{mapValue:n}}(n,t):e instanceof Nx?Ix(e,t):e instanceof Px?_x(e,t):function(e,t){const n=Cx(e,t),r=Dx(n)+Dx(e.Ae);return sw(n)&&sw(e.Ae)?xx(r):wx(e.serializer,r)}(e,t)}function Sx(e,t,n){return e instanceof Nx?Ix(e,t):e instanceof Px?_x(e,t):n}function Cx(e,t){return e instanceof Rx?function(e){return sw(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Tx extends Ax{}class Nx extends Ax{constructor(e){super(),this.elements=e}}function Ix(e,t){const n=Ox(t);for(const r of e.elements)n.some(e=>Yb(e,r))||n.push(r);return{arrayValue:{values:n}}}class Px extends Ax{constructor(e){super(),this.elements=e}}function _x(e,t){let n=Ox(t);for(const r of e.elements)n=n.filter(e=>!Yb(e,r));return{arrayValue:{values:n}}}class Rx extends Ax{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Dx(e){return Rb(e.integerValue||e.doubleValue)}function Ox(e){return aw(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class jx{constructor(e,t){this.field=e,this.transform=t}}class Lx{constructor(e,t){this.version=e,this.transformResults=t}}class Mx{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mx}static exists(e){return new Mx(void 0,e)}static updateTime(e){return new Mx(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fx(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Bx{}function Ux(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Yx(e.key,Mx.none()):new qx(e.key,e.data,Mx.none());{const n=e.data,r=fw.empty();let i=new Sb(pv.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Wx(e.key,r,new Tb(i.toArray()),Mx.none())}}function zx(e,t,n){e instanceof qx?function(e,t,n){const r=e.value.clone(),i=Kx(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Wx?function(e,t,n){if(!Fx(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Kx(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Qx(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Vx(e,t,n,r){return e instanceof qx?function(e,t,n,r){if(!Fx(e.precondition,t))return n;const i=e.value.clone(),s=Jx(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Wx?function(e,t,n,r){if(!Fx(e.precondition,t))return n;const i=Jx(e.fieldTransforms,r,t),s=t.data;return s.setAll(Qx(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Fx(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Hx(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Cx(r.transform,e||null);null!=i&&(null===n&&(n=fw.empty()),n.set(r.field,i))}return n||null}function Gx(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&cv(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Nx&&t instanceof Nx||e instanceof Px&&t instanceof Px?cv(e.elements,t.elements,Yb):e instanceof Rx&&t instanceof Rx?Yb(e.Ae,t.Ae):e instanceof Tx&&t instanceof Tx}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class qx extends Bx{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Wx extends Bx{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Qx(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Kx(e,t,n){const r=new Map;Hy(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,Sx(a,o,n[i]))}return r}function Jx(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,kx(e,s,t))}return r}class Yx extends Bx{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xx extends Bx{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Zx{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&zx(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Vx(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Vx(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=fx();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=Ux(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(Nv.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),yx())}isEqual(e){return this.batchId===e.batchId&&cv(this.mutations,e.mutations,(e,t)=>Gx(e,t))&&cv(this.baseMutations,e.baseMutations,(e,t)=>Gx(e,t))}}class $x{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Hy(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=mx;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new $x(e,t,n,r)}}class eE{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class tE{constructor(e,t){this.count=e,this.unchangedNames=t}}var nE,rE;function iE(e){switch(e){case qy.OK:return zy(64938);case qy.CANCELLED:case qy.UNKNOWN:case qy.DEADLINE_EXCEEDED:case qy.RESOURCE_EXHAUSTED:case qy.INTERNAL:case qy.UNAVAILABLE:case qy.UNAUTHENTICATED:return!1;case qy.INVALID_ARGUMENT:case qy.NOT_FOUND:case qy.ALREADY_EXISTS:case qy.PERMISSION_DENIED:case qy.FAILED_PRECONDITION:case qy.ABORTED:case qy.OUT_OF_RANGE:case qy.UNIMPLEMENTED:case qy.DATA_LOSS:return!0;default:return zy(15467,{code:e})}}function sE(e){if(void 0===e)return Fy("GRPC error has no .code"),qy.UNKNOWN;switch(e){case nE.OK:return qy.OK;case nE.CANCELLED:return qy.CANCELLED;case nE.UNKNOWN:return qy.UNKNOWN;case nE.DEADLINE_EXCEEDED:return qy.DEADLINE_EXCEEDED;case nE.RESOURCE_EXHAUSTED:return qy.RESOURCE_EXHAUSTED;case nE.INTERNAL:return qy.INTERNAL;case nE.UNAVAILABLE:return qy.UNAVAILABLE;case nE.UNAUTHENTICATED:return qy.UNAUTHENTICATED;case nE.INVALID_ARGUMENT:return qy.INVALID_ARGUMENT;case nE.NOT_FOUND:return qy.NOT_FOUND;case nE.ALREADY_EXISTS:return qy.ALREADY_EXISTS;case nE.PERMISSION_DENIED:return qy.PERMISSION_DENIED;case nE.FAILED_PRECONDITION:return qy.FAILED_PRECONDITION;case nE.ABORTED:return qy.ABORTED;case nE.OUT_OF_RANGE:return qy.OUT_OF_RANGE;case nE.UNIMPLEMENTED:return qy.UNIMPLEMENTED;case nE.DATA_LOSS:return qy.DATA_LOSS;default:return zy(39323,{code:e})}}(rE=nE||(nE={}))[rE.OK=0]="OK",rE[rE.CANCELLED=1]="CANCELLED",rE[rE.UNKNOWN=2]="UNKNOWN",rE[rE.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rE[rE.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rE[rE.NOT_FOUND=5]="NOT_FOUND",rE[rE.ALREADY_EXISTS=6]="ALREADY_EXISTS",rE[rE.PERMISSION_DENIED=7]="PERMISSION_DENIED",rE[rE.UNAUTHENTICATED=16]="UNAUTHENTICATED",rE[rE.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rE[rE.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rE[rE.ABORTED=10]="ABORTED",rE[rE.OUT_OF_RANGE=11]="OUT_OF_RANGE",rE[rE.UNIMPLEMENTED=12]="UNIMPLEMENTED",rE[rE.INTERNAL=13]="INTERNAL",rE[rE.UNAVAILABLE=14]="UNAVAILABLE",rE[rE.DATA_LOSS=15]="DATA_LOSS";let aE=null;function oE(){return new TextEncoder}const lE=new yy([4294967295,4294967295],0);function cE(e){const t=oE().encode(e),n=new vy;return n.update(t),new Uint8Array(n.digest())}function uE(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new yy([n,r],0),new yy([i,s],0)]}class hE{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new dE("Invalid padding: ".concat(t));if(n<0)throw new dE("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new dE("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new dE("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=yy.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(yy.fromNumber(n)));return 1===r.compare(lE)&&(r=new yy([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=cE(e),[n,r]=uE(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new hE(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=cE(e),[n,r]=uE(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class dE extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class fE{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,pE.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new fE(Nv.min(),r,new Eb(iv),lx(),yx())}}class pE{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new pE(n,t,yx(),yx(),yx())}}class mE{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class gE{constructor(e,t){this.targetId=e,this.Ce=t}}class yE{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ib.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class vE{constructor(){this.ve=0,this.Fe=xE(),this.Me=Ib.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=yx(),t=yx(),n=yx();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:zy(38017,{changeType:i})}}),new pE(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=xE()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Hy(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class bE{constructor(e){this.Ge=e,this.ze=new Map,this.je=lx(),this.Je=wE(),this.He=wE(),this.Ye=new Eb(iv)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:zy(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if(Vw(s))if(0===n){const e=new mv(s.path);this.et(t,e,mw.newNoDocument(e,Nv.min()))}else Hy(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),s=n?this.ct(n,e,r):1;if(0!==s){this.it(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=aE)||void 0===i||i.lt(function(e,t,n,r,i,s,a,o,l,c){const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(u.bloomFilter={applied:0===i,hashCount:null!==(s=null===h||void 0===h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(a=null===h||void 0===h||null===(o=h.bits)||void 0===o||null===(o=o.bitmap)||void 0===o?void 0:o.length)&&void 0!==a?a:0,padding:null!==(l=null===h||void 0===h||null===(c=h.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,s))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=Db(n).toUint8Array()}catch(e){if(e instanceof Nb)return By("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new hE(s,r,i)}catch(e){return By(e instanceof dE?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&Vw(i.target)){const t=new mv(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,mw.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=yx();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new fE(e,t,this.Ye,this.je,n);return this.je=lx(),this.Je=wE(),this.He=wE(),this.Ye=new Eb(iv),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new vE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Sb(iv),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Sb(iv),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||My("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new vE),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function wE(){return new Eb(mv.comparator)}function xE(){return new Eb(mv.comparator)}const EE={asc:"ASCENDING",desc:"DESCENDING"},AE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kE={and:"AND",or:"OR"};class SE{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function CE(e,t){return e.useProto3Json||Hv(t)?t:{value:t}}function TE(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function NE(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function IE(e,t){return TE(e,t.toTimestamp())}function PE(e){return Hy(!!e,49232),Nv.fromTimestamp(function(e){const t=_b(e);return new Tv(t.seconds,t.nanos)}(e))}function _E(e,t){return RE(e,t).canonicalString()}function RE(e,t){const n=function(e){return new dv(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function DE(e){const t=dv.fromString(e);return Hy($E(t),10190,{key:t.toString()}),t}function OE(e,t){return _E(e.databaseId,t.path)}function jE(e,t){const n=DE(t);if(n.get(1)!==e.databaseId.projectId)throw new Wy(qy.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Wy(qy.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new mv(BE(n))}function LE(e,t){return _E(e.databaseId,t)}function ME(e){const t=DE(e);return 4===t.length?dv.emptyPath():BE(t)}function FE(e){return new dv(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function BE(e){return Hy(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function UE(e,t,n){return{name:OE(e,t),fields:n.value.mapValue.fields}}function zE(e,t){let n;if(t instanceof qx)n={update:UE(e,t.key,t.value)};else if(t instanceof Yx)n={delete:OE(e,t.key)};else if(t instanceof Wx)n={update:UE(e,t.key,t.data),updateMask:ZE(t.fieldMask)};else{if(!(t instanceof Xx))return zy(16599,{Vt:t.type});n={verify:OE(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Tx)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Nx)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Px)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Rx)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw zy(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:IE(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:zy(27497)}(e,t.precondition)),n}function VE(e,t){return{documents:[LE(e,t.path)]}}function HE(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=LE(e,i);const s=function(e){if(0!==e.length)return XE(Aw.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:JE(e.field),direction:WE(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=CE(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function GE(e){let t=ME(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Hy(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=qE(e);return t instanceof Aw&&Sw(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new bw(YE(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Hv(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new gw(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new gw(n,t)}(n.endAt)),Gw(t,i,a,s,o,"F",l,c)}function qE(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=YE(e.unaryFilter.field);return Ew.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=YE(e.unaryFilter.field);return Ew.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=YE(e.unaryFilter.field);return Ew.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=YE(e.unaryFilter.field);return Ew.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return zy(61313);default:return zy(60726)}}(e):void 0!==e.fieldFilter?function(e){return Ew.create(YE(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return zy(58110);default:return zy(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Aw.create(e.compositeFilter.filters.map(e=>qE(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return zy(1026)}}(e.compositeFilter.op))}(e):zy(30097,{filter:e})}function WE(e){return EE[e]}function QE(e){return AE[e]}function KE(e){return kE[e]}function JE(e){return{fieldPath:e.canonicalString()}}function YE(e){return pv.fromServerFormat(e.fieldPath)}function XE(e){return e instanceof Ew?function(e){if("=="===e.op){if(lw(e.value))return{unaryFilter:{field:JE(e.field),op:"IS_NAN"}};if(ow(e.value))return{unaryFilter:{field:JE(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(lw(e.value))return{unaryFilter:{field:JE(e.field),op:"IS_NOT_NAN"}};if(ow(e.value))return{unaryFilter:{field:JE(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:JE(e.field),op:QE(e.op),value:e.value}}}(e):e instanceof Aw?function(e){const t=e.getFilters().map(e=>XE(e));return 1===t.length?t[0]:{compositeFilter:{op:KE(e.op),filters:t}}}(e):zy(54877,{filter:e})}function ZE(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function $E(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class eA{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Nv.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Nv.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ib.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new eA(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new eA(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new eA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new eA(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class tA{constructor(e){this.yt=e}}function nA(e){const t=GE({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Zw(t,t.limit,"L"):t}class rA{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Rb(e.integerValue));else if("doubleValue"in e){const n=Rb(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Gv(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=_b(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Db(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?dw(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):uw(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):zy(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=Kb,s=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(Rb(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),mv.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}rA.Kt=new rA;class iA{constructor(){this.Cn=new sA}addToCollectionParentIndex(e,t){return this.Cn.add(t),Fv.resolve()}getCollectionParents(e,t){return Fv.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Fv.resolve()}deleteFieldIndex(e,t){return Fv.resolve()}deleteAllFieldIndexes(e){return Fv.resolve()}createTargetIndexes(e,t){return Fv.resolve()}getDocumentsMatchingTarget(e,t){return Fv.resolve(null)}getIndexType(e,t){return Fv.resolve(0)}getFieldIndexes(e,t){return Fv.resolve([])}getNextCollectionGroupToUpdate(e){return Fv.resolve(null)}getMinOffset(e,t){return Fv.resolve(Dv.min())}getMinOffsetFromCollectionGroup(e,t){return Fv.resolve(Dv.min())}updateCollectionGroup(e,t,n){return Fv.resolve()}updateIndexEntries(e,t){return Fv.resolve()}}class sA{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Sb(dv.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Sb(dv.comparator)).toArray()}}new Uint8Array(0);const aA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oA=41943040;class lA{static withCacheSize(e){return new lA(e,lA.DEFAULT_COLLECTION_PERCENTILE,lA.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}lA.DEFAULT_COLLECTION_PERCENTILE=10,lA.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lA.DEFAULT=new lA(oA,lA.DEFAULT_COLLECTION_PERCENTILE,lA.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lA.DISABLED=new lA(-1,0,0);class cA{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new cA(0)}static cr(){return new cA(-1)}}const uA="LruGarbageCollector",hA=1048576;function dA(e,t){let[n,r]=e,[i,s]=t;const a=iv(n,i);return 0===a?iv(r,s):a}class fA{constructor(e){this.Ir=e,this.buffer=new Sb(dA),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();dA(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class pA{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){My(uA,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Uv(e)?My(uA,"Ignoring IndexedDB error during garbage collection: ",e):await Mv(e)}await this.Vr(3e5)})}}class mA{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Fv.resolve(zv.ce);const n=new fA(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(My("LruGarbageCollector","Garbage collection skipped; disabled"),Fv.resolve(aA)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(My("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),aA):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(My("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Ly()<=Km.DEBUG&&My("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Fv.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function gA(e,t){return new mA(e,t)}class yA{constructor(){this.changes=new ax(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mw.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Fv.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class vA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class bA{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Vx(n.mutation,e,Tb.empty(),Tv.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,yx()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yx();const r=dx();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=ux();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=dx();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,yx()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=lx();const s=px(),a=px();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Wx)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Vx(a.mutation,t,a.mutation.getFieldMask(),Tv.now())):s.set(t.key,Tb.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new vA(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=px();let r=new Eb((e,t)=>e-t),i=yx();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||Tb.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||yx()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=fx();l.forEach(e=>{if(!i.has(e)){const r=Ux(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Fv.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return mv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Qw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Fv.resolve(dx());let a=Iv,o=i;return s.next(t=>Fv.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Fv.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,yx())).next(e=>({batchId:a,changes:hx(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new mv(t)).next(e=>{let t=ux();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=ux();return this.indexManager.getCollectionParents(e,i).next(a=>Fv.forEach(a,a=>{const o=function(e,t){return new Hw(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,mw.newInvalidDocument(r)))});let n=ux();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Vx(s.mutation,r,Tb.empty(),Tv.now()),nx(t,r)&&(n=n.insert(e,r))}),n})}}class wA{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Fv.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:PE(e.createTime)}}(t)),Fv.resolve()}getNamedQuery(e,t){return Fv.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:nA(e.bundledQuery),readTime:PE(e.readTime)}}(t)),Fv.resolve()}}class xA{constructor(){this.overlays=new Eb(mv.comparator),this.qr=new Map}getOverlay(e,t){return Fv.resolve(this.overlays.get(t))}getOverlays(e,t){const n=dx();return Fv.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Fv.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Fv.resolve()}getOverlaysForCollection(e,t,n){const r=dx(),i=t.length+1,s=new mv(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Fv.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Eb((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=dx(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=dx(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Fv.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new eE(t,n));let i=this.qr.get(t);void 0===i&&(i=yx(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class EA{constructor(){this.sessionToken=Ib.EMPTY_BYTE_STRING}getSessionToken(e){return Fv.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Fv.resolve()}}class AA{constructor(){this.Qr=new Sb(kA.$r),this.Ur=new Sb(kA.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new kA(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new kA(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new mv(new dv([])),n=new kA(t,e),r=new kA(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new mv(new dv([])),n=new kA(t,e),r=new kA(t,e+1);let i=yx();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new kA(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class kA{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return mv.comparator(e.key,t.key)||iv(e.Yr,t.Yr)}static Kr(e,t){return iv(e.Yr,t.Yr)||mv.comparator(e.key,t.key)}}class SA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Sb(kA.$r)}checkEmpty(e){return Fv.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Zx(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.Zr=this.Zr.add(new kA(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Fv.resolve(s)}lookupMutationBatch(e,t){return Fv.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return Fv.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Fv.resolve(0===this.mutationQueue.length?Vv:this.tr-1)}getAllMutationBatches(e){return Fv.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new kA(t,0),r=new kA(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),Fv.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Sb(iv);return t.forEach(e=>{const t=new kA(e,0),r=new kA(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Fv.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;mv.isDocumentKey(i)||(i=i.child(""));const s=new kA(new mv(i),0);let a=new Sb(iv);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},s),Fv.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Hy(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Fv.forEach(t.mutations,r=>{const i=new kA(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new kA(t,0),r=this.Zr.firstAfterOrEqual(n);return Fv.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Fv.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class CA{constructor(e){this.ri=e,this.docs=new Eb(mv.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Fv.resolve(n?n.document.mutableCopy():mw.newInvalidDocument(t))}getEntries(e,t){let n=lx();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():mw.newInvalidDocument(e))}),Fv.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=lx();const s=t.path,a=new mv(s.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Ov(Rv(a),n)<=0||(r.has(a.key)||nx(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Fv.resolve(i)}getAllFromCollectionGroup(e,t,n,r){zy(9500)}ii(e,t){return Fv.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new TA(this)}getSize(e){return Fv.resolve(this.size)}}class TA extends yA{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Fv.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class NA{constructor(e){this.persistence=e,this.si=new ax(e=>Uw(e),zw),this.lastRemoteSnapshotVersion=Nv.min(),this.highestTargetId=0,this.oi=0,this._i=new AA,this.targetCount=0,this.ai=cA.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Fv.resolve()}getLastRemoteSnapshotVersion(e){return Fv.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Fv.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Fv.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Fv.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new cA(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Fv.resolve()}updateTargetData(e,t){return this.Pr(t),Fv.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Fv.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Fv.waitFor(i).next(()=>r)}getTargetCount(e){return Fv.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Fv.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Fv.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Fv.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Fv.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Fv.resolve(n)}containsKey(e,t){return Fv.resolve(this._i.containsKey(t))}}class IA{constructor(e,t){this.ui={},this.overlays={},this.ci=new zv(0),this.li=!1,this.li=!0,this.hi=new EA,this.referenceDelegate=e(this),this.Pi=new NA(this),this.indexManager=new iA,this.remoteDocumentCache=function(e){return new CA(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new tA(t),this.Ii=new wA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new SA(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){My("MemoryPersistence","Starting transaction:",e);const r=new PA(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Fv.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class PA extends Lv{constructor(e){super(),this.currentSequenceNumber=e}}class _A{constructor(e){this.persistence=e,this.Ri=new AA,this.Vi=null}static mi(e){return new _A(e)}get fi(){if(this.Vi)return this.Vi;throw zy(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Fv.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Fv.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Fv.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Fv.forEach(this.fi,n=>{const r=mv.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,Nv.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Fv.or([()=>Fv.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class RA{constructor(e,t){this.persistence=e,this.pi=new ax(e=>Qv(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=gA(this,t)}static mi(e,t){return new RA(e,t)}Ei(){}di(e){return Fv.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Fv.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Fv.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,Nv.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Fv.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Fv.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Fv.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Fv.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=rw(e.data.value)),t}br(e,t,n){return Fv.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Fv.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class DA{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=yx(),r=yx();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new DA(e,t.fromCache,n,r)}}class OA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class jA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=Pm()?8:Bv(Nm())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new OA;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(Ly()<=Km.DEBUG&&My("QueryEngine","SDK will not create cache indexes for query:",tx(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Fv.resolve()):(Ly()<=Km.DEBUG&&My("QueryEngine","Query:",tx(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(Ly()<=Km.DEBUG&&My("QueryEngine","The SDK decides to create cache indexes for query:",tx(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jw(t))):Fv.resolve())}ys(e,t){if(Ww(t))return Fv.resolve(null);let n=Jw(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Zw(t,null,"F"),n=Jw(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=yx(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,Zw(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return Ww(t)||r.isEqual(Nv.min())?Fv.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?Fv.resolve(null):(Ly()<=Km.DEBUG&&My("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),tx(t)),this.vs(e,s,t,_v(r,Iv)).next(e=>e))})}Ds(e,t){let n=new Sb(ix(e));return t.forEach((t,r)=>{nx(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return Ly()<=Km.DEBUG&&My("QueryEngine","Using full collection scan to execute query:",tx(t)),this.ps.getDocumentsMatchingQuery(e,t,Dv.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const LA="LocalStore";class MA{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Eb(iv),this.xs=new ax(e=>Uw(e),zw),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function FA(e,t,n,r){return new MA(e,t,n,r)}async function BA(e,t){const n=Gy(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let a=yx();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function UA(e){const t=Gy(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function zA(e,t,n){let r=yx(),i=yx();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=lx();return n.forEach((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Nv.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):My(LA,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),{ks:r,qs:i}})}function VA(e,t){const n=Gy(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Vv),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function HA(e,t){const n=Gy(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,Fv.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new eA(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function GA(e,t,n){const r=Gy(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Uv(e))throw e;My(LA,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function qA(e,t,n){const r=Gy(e);let i=Nv.min(),s=yx();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Gy(e),i=r.xs.get(n);return void 0!==i?Fv.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,Jw(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:Nv.min(),n?s:yx())).next(e=>(WA(r,rx(t),e),{documents:e,Qs:s})))}function WA(e,t,n){let r=e.Os.get(t)||Nv.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class QA{constructor(){this.activeTargetIds=bx()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KA{constructor(){this.Mo=new QA,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new QA,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class JA{Oo(e){}shutdown(){}}const YA="ConnectivityMonitor";class XA{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){My(YA,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){My(YA,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ZA=null;function $A(){return null===ZA?ZA=268435456+Math.round(2147483648*Math.random()):ZA++,"0x"+ZA.toString(16)}const ek="RestConnection",tk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nk{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===Vb?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const s=$A(),a=this.zo(e,t.toUriEncodedString());My(ek,"Sending RPC '".concat(e,"' ").concat(s,":"),a,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,r,i);const{host:l}=new URL(a),c=Am(l);return this.Jo(e,a,o,n,c).then(t=>(My(ek,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw By(ek,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Oy,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=tk[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class rk{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const ik="WebChannelConnection";class sk extends nk{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=$A();return new Promise((i,a)=>{const o=new xy;o.setWithCredentials(!0),o.listenOnce(Ay.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case ky.NO_ERROR:const n=o.getResponseJson();My(ik,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(n)),i(n);break;case ky.TIMEOUT:My(ik,"RPC '".concat(e,"' ").concat(s," timed out")),a(new Wy(qy.DEADLINE_EXCEEDED,"Request time out"));break;case ky.HTTP_ERROR:const r=o.getStatus();if(My(ik,"RPC '".concat(e,"' ").concat(s," failed with status:"),r,"response text:",o.getResponseText()),r>0){var t;let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(qy).indexOf(t)>=0?t:qy.UNKNOWN}(n.status);a(new Wy(e,n.message))}else a(new Wy(qy.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Wy(qy.UNAVAILABLE,"Connection failed."));break;default:zy(9055,{l_:e,streamId:s,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{My(ik,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);My(ik,"RPC '".concat(e,"' ").concat(s," sending request:"),r),o.send(t,"POST",l,n,15)})}T_(e,t,n){const r=$A(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Ny(),a=Ty(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");My(ik,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=s.createWebChannel(c,o);this.I_(u);let h=!1,d=!1;const f=new rk({Yo:t=>{d?My(ik,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(My(ik,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),My(ik,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Ey.EventType.OPEN,()=>{d||(My(ik,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),p(u,Ey.EventType.CLOSE,()=>{d||(d=!0,My(ik,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),p(u,Ey.EventType.ERROR,t=>{d||(d=!0,By(ik,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new Wy(qy.UNAVAILABLE,"The operation could not be completed")))}),p(u,Ey.EventType.MESSAGE,t=>{if(!d){var n;const i=t.data[0];Hy(!!i,16349);const s=i,a=(null===s||void 0===s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){My(ik,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=nE[e];if(void 0!==t)return sE(t)}(t),i=a.message;void 0===n&&(n=qy.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),d=!0,f.a_(new Wy(n,i)),u.close()}else My(ik,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.u_(i)}}),p(a,Cy.STAT_EVENT,t=>{t.stat===Sy.PROXY?My(ik,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Sy.NOPROXY&&My(ik,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function ak(){return"undefined"!=typeof document?document:null}function ok(e){return new SE(e,!0)}class lk{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&My("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ck="PersistentStream";class uk{constructor(e,t,n,r,i,s,a,o){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new lk(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===qy.RESOURCE_EXHAUSTED?(Fy(t.toString()),Fy("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===qy.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new Wy(qy.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return My(ck,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(My(ck,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hk extends uk{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:zy(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Hy(void 0===t||"string"==typeof t,58123),Ib.fromBase64String(t||"")):(Hy(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Ib.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?qy.UNKNOWN:sE(e.code);return new Wy(t,e.message||"")}(a);n=new yE(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=jE(e,r.document.name),s=PE(r.document.updateTime),a=r.document.createTime?PE(r.document.createTime):Nv.min(),o=new fw({mapValue:{fields:r.document.fields}}),l=mw.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new mE(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=jE(e,r.document),s=r.readTime?PE(r.readTime):Nv.min(),a=mw.newNoDocument(i,s),o=r.removedTargetIds||[];n=new mE([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=jE(e,r.document),s=r.removedTargetIds||[];n=new mE([],s,i,null)}else{if(!("filter"in t))return zy(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new tE(r,i),a=e.targetId;n=new gE(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Nv.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Nv.min():t.readTime?PE(t.readTime):Nv.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=FE(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Vw(r)?{documents:VE(e,r)}:{query:HE(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=NE(e,t.resumeToken);const r=CE(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Nv.min())>0){n.readTime=TE(e,t.snapshotVersion.toTimestamp());const r=CE(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return zy(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=FE(this.serializer),t.removeTarget=e,this.q_(t)}}class dk extends uk{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Hy(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Hy(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){Hy(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(Hy(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?PE(e.updateTime):PE(t);return n.isEqual(Nv.min())&&(n=PE(t)),new Lx(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=PE(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=FE(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>zE(this.serializer,e))};this.q_(t)}}class fk{}class pk extends fk{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Wy(qy.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,a]=i;return this.connection.Go(e,RE(t,n),r,s,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===qy.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Wy(qy.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[a,o]=s;return this.connection.Ho(e,RE(t,n),r,a,o,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===qy.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Wy(qy.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class mk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(Fy(t),this.aa=!1):My("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const gk="RemoteStore";class yk{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{Ck(this)&&(My(gk,"Restarting streams for network reachability change."),await async function(e){const t=Gy(e);t.Ea.add(4),await bk(t),t.Ra.set("Unknown"),t.Ea.delete(4),await vk(t)}(this))})}),this.Ra=new mk(n,r)}}async function vk(e){if(Ck(e))for(const t of e.da)await t(!0)}async function bk(e){for(const t of e.da)await t(!1)}function wk(e,t){const n=Gy(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Sk(n)?kk(n):qk(n).O_()&&Ek(n,t))}function xk(e,t){const n=Gy(e),r=qk(n);n.Ia.delete(t),r.O_()&&Ak(n,t),0===n.Ia.size&&(r.O_()?r.L_():Ck(n)&&n.Ra.set("Unknown"))}function Ek(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Nv.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}qk(e).Y_(t)}function Ak(e,t){e.Va.Ue(t),qk(e).Z_(t)}function kk(e){e.Va=new bE({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),qk(e).start(),e.Ra.ua()}function Sk(e){return Ck(e)&&!qk(e).x_()&&e.Ia.size>0}function Ck(e){return 0===Gy(e).Ea.size}function Tk(e){e.Va=void 0}async function Nk(e){e.Ra.set("Online")}async function Ik(e){e.Ia.forEach((t,n)=>{Ek(e,t)})}async function Pk(e,t){Tk(e),Sk(e)?(e.Ra.ha(t),kk(e)):e.Ra.set("Unknown")}async function _k(e,t,n){if(e.Ra.set("Online"),t instanceof yE&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){My(gk,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Rk(e,n)}else if(t instanceof mE?e.Va.Ze(t):t instanceof gE?e.Va.st(t):e.Va.tt(t),!n.isEqual(Nv.min()))try{const t=await UA(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(Ib.EMPTY_BYTE_STRING,r.snapshotVersion)),Ak(e,t);const i=new eA(r.target,t,n,r.sequenceNumber);Ek(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){My(gk,"Failed to raise snapshot:",t),await Rk(e,t)}}async function Rk(e,t,n){if(!Uv(t))throw t;e.Ea.add(1),await bk(e),e.Ra.set("Offline"),n||(n=()=>UA(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{My(gk,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await vk(e)})}function Dk(e,t){return t().catch(n=>Rk(e,n,t))}async function Ok(e){const t=Gy(e),n=Wk(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Vv;for(;jk(t);)try{const e=await VA(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Lk(t,e)}catch(e){await Rk(t,e)}Mk(t)&&Fk(t)}function jk(e){return Ck(e)&&e.Ta.length<10}function Lk(e,t){e.Ta.push(t);const n=Wk(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Mk(e){return Ck(e)&&!Wk(e).x_()&&e.Ta.length>0}function Fk(e){Wk(e).start()}async function Bk(e){Wk(e).ra()}async function Uk(e){const t=Wk(e);for(const n of e.Ta)t.ea(n.mutations)}async function zk(e,t,n){const r=e.Ta.shift(),i=$x.from(r,t,n);await Dk(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Ok(e)}async function Vk(e,t){t&&Wk(e).X_&&await async function(e,t){if(function(e){return iE(e)&&e!==qy.ABORTED}(t.code)){const n=e.Ta.shift();Wk(e).B_(),await Dk(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Ok(e)}}(e,t),Mk(e)&&Fk(e)}async function Hk(e,t){const n=Gy(e);n.asyncQueue.verifyOperationInProgress(),My(gk,"RemoteStore received new credentials");const r=Ck(n);n.Ea.add(3),await bk(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await vk(n)}async function Gk(e,t){const n=Gy(e);t?(n.Ea.delete(2),await vk(n)):t||(n.Ea.add(2),await bk(n),n.Ra.set("Unknown"))}function qk(e){return e.ma||(e.ma=function(e,t,n){const r=Gy(e);return r.sa(),new hk(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Nk.bind(null,e),t_:Ik.bind(null,e),r_:Pk.bind(null,e),H_:_k.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Sk(e)?kk(e):e.Ra.set("Unknown")):(await e.ma.stop(),Tk(e))})),e.ma}function Wk(e){return e.fa||(e.fa=function(e,t,n){const r=Gy(e);return r.sa(),new dk(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Bk.bind(null,e),r_:Vk.bind(null,e),ta:Uk.bind(null,e),na:zk.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Ok(e)):(await e.fa.stop(),e.Ta.length>0&&(My(gk,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Qk{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Qy,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new Qk(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Wy(qy.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kk(e,t){if(Fy("AsyncQueue","".concat(t,": ").concat(e)),Uv(e))return new Wy(qy.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Jk{static emptySet(e){return new Jk(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||mv.comparator(t.key,n.key):(e,t)=>mv.comparator(e.key,t.key),this.keyedMap=ux(),this.sortedSet=new Eb(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jk))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Jk;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Yk{constructor(){this.ga=new Eb(mv.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):zy(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Xk{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Xk(e,t,Jk.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$w(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Zk{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class $k{constructor(){this.queries=eS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=Gy(e),r=n.queries;n.queries=eS(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new Wy(qy.ABORTED,"Firestore shutting down"))}}function eS(){return new ax(e=>ex(e),$w)}async function tS(e,t){const n=Gy(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new Zk,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Kk(e,"Initialization of query '".concat(tx(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&sS(n)}async function nS(e,t){const n=Gy(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function rS(e,t){const n=Gy(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&sS(n)}function iS(e,t,n){const r=Gy(e),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(t)}function sS(e){e.Ca.forEach(e=>{e.next()})}var aS,oS;(oS=aS||(aS={})).Ma="default",oS.Cache="cache";class lS{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Xk(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Xk.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==aS.Cache}}class cS{constructor(e){this.key=e}}class uS{constructor(e){this.key=e}}class hS{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=yx(),this.mutatedKeys=yx(),this.eu=ix(e),this.tu=new Jk(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Yk,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=nx(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.eu(u,o)>0||l&&this.eu(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Cs:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zy(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const a=t&&!r?this._u():[],o=0===this.Xa.size&&this.current&&!r?1:0,l=o!==this.Za;return this.Za=o,0!==s.length||l?{snapshot:new Xk(this.query,e.tu,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Yk,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=yx(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new uS(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new cS(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=yx();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Xk.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const dS="SyncEngine";class fS{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class pS{constructor(e){this.key=e,this.hu=!1}}class mS{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new ax(e=>ex(e),$w),this.Iu=new Map,this.Eu=new Set,this.du=new Eb(mv.comparator),this.Au=new Map,this.Ru=new AA,this.Vu={},this.mu=new Map,this.fu=cA.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function gS(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=MS(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await vS(r,t,n,!0),i}async function yS(e,t){const n=MS(e);await vS(n,t,!0,!1)}async function vS(e,t,n,r){const i=await HA(e.localStore,Jw(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await bS(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&wk(e.remoteStore,i),o}async function bS(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await qA(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return _S(e,t.targetId,o.au),o.snapshot}(e,t,n,r);const s=await qA(e.localStore,t,!0),a=new hS(t,s.Qs),o=a.ru(s.documents),l=pE.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);_S(e,n,c.au);const u=new fS(t,n,a);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function wS(e,t,n){const r=Gy(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!$w(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await GA(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&xk(r.remoteStore,i.targetId),IS(r,i.targetId)}).catch(Mv)):(IS(r,i.targetId),await GA(r.localStore,i.targetId,!0))}async function xS(e,t){const n=Gy(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),xk(n.remoteStore,r.targetId))}async function ES(e,t){const n=Gy(e);try{const e=await function(e,t){const n=Gy(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];t.targetChanges.forEach((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Pi.removeMatchingKeys(e,s.removedDocuments,o).next(()=>n.Pi.addMatchingKeys(e,s.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Ib.EMPTY_BYTE_STRING,Nv.min()).withLastLimboFreeSnapshotVersion(Nv.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&a.push(n.Pi.updateTargetData(e,c))});let o=lx(),l=yx();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(zA(e,s,t.documentUpdates).next(e=>{o=e.ks,l=e.qs})),!r.isEqual(Nv.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Fv.waitFor(a).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(Hy(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?Hy(r.hu,14607):e.removedDocuments.size>0&&(Hy(r.hu,42227),r.hu=!1))}),await OS(n,e,t)}catch(e){await Mv(e)}}function AS(e,t,n){const r=Gy(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Gy(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&sS(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function kS(e,t,n){const r=Gy(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new Eb(mv.comparator);e=e.insert(s,mw.newNoDocument(s,Nv.min()));const n=yx().add(s),i=new fE(Nv.min(),new Map,new Eb(iv),e,n);await ES(r,i),r.du=r.du.remove(s),r.Au.delete(t),DS(r)}else await GA(r.localStore,t,!1).then(()=>IS(r,t,n)).catch(Mv)}async function SS(e,t){const n=Gy(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Gy(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=Fv.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);Hy(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=yx();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);NS(n,r,null),TS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await OS(n,e)}catch(e){await Mv(e)}}async function CS(e,t,n){const r=Gy(e);try{const e=await function(e,t){const n=Gy(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Hy(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);NS(r,t,n),TS(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await OS(r,e)}catch(n){await Mv(n)}}function TS(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function NS(e,t,n){const r=Gy(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function IS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||PS(e,t)})}function PS(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(xk(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),DS(e))}function _S(e,t,n){for(const r of n)r instanceof cS?(e.Ru.addReference(r.key,t),RS(e,r)):r instanceof uS?(My(dS,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||PS(e,r.key)):zy(19791,{wu:r})}function RS(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(My(dS,"New document in limbo: "+n),e.Eu.add(r),DS(e))}function DS(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new mv(dv.fromString(t)),r=e.fu.next();e.Au.set(r,new pS(n)),e.du=e.du.insert(n,r),wk(e.remoteStore,new eA(Jw(qw(n.path)),r,"TargetPurposeLimboResolution",zv.ce))}}async function OS(e,t,n){const r=Gy(e),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{a.push(r.pu(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=DA.As(o.targetId,e);s.push(t)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(e,t){const n=Gy(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Fv.forEach(t,t=>Fv.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Fv.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Uv(e))throw e;My(LA,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function jS(e,t){const n=Gy(e);if(!n.currentUser.isEqual(t)){My(dS,"User change. New user:",t.toKey());const e=await BA(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new Wy(qy.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await OS(n,e.Ls)}}function LS(e,t){const n=Gy(e),r=n.Au.get(t);if(r&&r.hu)return yx().add(r.key);{let e=yx();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function MS(e){const t=Gy(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ES.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=LS.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=kS.bind(null,t),t.Pu.H_=rS.bind(null,t.eventManager),t.Pu.yu=iS.bind(null,t.eventManager),t}function FS(e){const t=Gy(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=SS.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=CS.bind(null,t),t}class BS{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ok(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return FA(this.persistence,new jA,e.initialUser,this.serializer)}Cu(e){return new IA(_A.mi,this.serializer)}Du(e){return new KA}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}BS.provider={build:()=>new BS};class US extends BS{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Hy(this.persistence.referenceDelegate instanceof RA,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new pA(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?lA.withCacheSize(this.cacheSizeBytes):lA.DEFAULT;return new IA(e=>RA.mi(e,t),this.serializer)}}class zS{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>AS(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=jS.bind(null,this.syncEngine),await Gk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new $k}createDatastore(e){const t=ok(e.databaseInfo.databaseId),n=function(e){return new sk(e)}(e.databaseInfo);return function(e,t,n,r){return new pk(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new yk(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>AS(this.syncEngine,e,0),XA.v()?new XA:new JA)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new mS(e,t,n,r,i,s);return a&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Gy(e);My(gk,"RemoteStore shutting down."),t.Ea.add(5),await bk(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}zS.provider={build:()=>new zS};class VS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Fy("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const HS="FirestoreClient";class GS{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Dy.UNAUTHENTICATED,this.clientId=rv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{My(HS,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(My(HS,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qy;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Kk(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function qS(e,t){e.asyncQueue.verifyOperationInProgress(),My(HS,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await BA(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function WS(e,t){e.asyncQueue.verifyOperationInProgress();const n=await QS(e);My(HS,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Hk(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Hk(t.remoteStore,n)),e._onlineComponents=t}async function QS(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){My(HS,"Using user provided OfflineComponentProvider");try{await qS(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===qy.FAILED_PRECONDITION||e.code===qy.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;By("Error using user provided cache. Falling back to memory cache: "+n),await qS(e,new BS)}}else My(HS,"Using default OfflineComponentProvider"),await qS(e,new US(void 0));return e._offlineComponents}async function KS(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(My(HS,"Using user provided OnlineComponentProvider"),await WS(e,e._uninitializedComponentsProvider._online)):(My(HS,"Using default OnlineComponentProvider"),await WS(e,new zS))),e._onlineComponents}function JS(e){return KS(e).then(e=>e.syncEngine)}async function YS(e){const t=await KS(e),n=t.eventManager;return n.onListen=gS.bind(null,t.syncEngine),n.onUnlisten=wS.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=yS.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=xS.bind(null,t.syncEngine),n}function XS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Qy;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new VS({next:o=>{s.Nu(),t.enqueueAndForget(()=>nS(e,a));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new Wy(qy.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new Wy(qy.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new lS(qw(n.path),s,{includeMetadataChanges:!0,qa:!0});return tS(e,a)}(await YS(e),e.asyncQueue,t,n,r)),r.promise}function ZS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Qy;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new VS({next:n=>{s.Nu(),t.enqueueAndForget(()=>nS(e,a)),n.fromCache&&"server"===r.source?i.reject(new Wy(qy.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new lS(n,s,{includeMetadataChanges:!0,qa:!0});return tS(e,a)}(await YS(e),e.asyncQueue,t,n,r)),r.promise}function $S(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const eC=new Map,tC="firestore.googleapis.com",nC=!0;class rC{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Wy(qy.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tC,this.ssl=nC}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:nC;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=oA;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<hA)throw new Wy(qy.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Wy(qy.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$S(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Wy(qy.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Wy(qy.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Wy(qy.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class iC{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rC({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Wy(qy.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Wy(qy.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rC(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Jy;switch(e.type){case"firstParty":return new $y(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Wy(qy.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=eC.get(e);t&&(My("ComponentProvider","Removing Datastore"),eC.delete(e),t.terminate())}(this),Promise.resolve()}}function sC(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=xv(e,iC);const i=Am(t),s=e._getSettings(),a=h(h({},s),{},{emulatorOptions:e._getEmulatorOptions()}),o="".concat(t,":").concat(n);i&&(km("https://".concat(o)),Tm("Firestore",!0)),s.host!==tC&&s.host!==o&&By("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=h(h({},s),{},{host:o,ssl:i,emulatorOptions:r});if(!jm(l,a)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Dy.MOCK_USER;else{var c;t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=h({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[mm(JSON.stringify({alg:"none",type:"JWT"})),mm(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(c=e._app)||void 0===c?void 0:c.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Wy(qy.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Dy(i)}e._authCredentials=new Yy(new Ky(t,n))}}class aC{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new aC(this.firestore,e,this._query)}}class oC{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lC(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new oC(this.firestore,e,this._key)}toJSON(){return{type:oC._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(kv(t,oC._jsonSchema))return new oC(e,n||null,new mv(dv.fromString(t.referencePath)))}}oC._jsonSchemaVersion="firestore/documentReference/1.0",oC._jsonSchema={type:Av("string",oC._jsonSchemaVersion),referencePath:Av("string")};class lC extends aC{constructor(e,t,n){super(e,t,qw(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new oC(this.firestore,null,new mv(e))}withConverter(e){return new lC(this.firestore,e,this._path)}}function cC(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Vm(e),gv("collection","path",t),e instanceof iC){const n=dv.fromString(t,...r);return vv(n),new lC(e,null,n)}{if(!(e instanceof oC||e instanceof lC))throw new Wy(qy.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(dv.fromString(t,...r));return vv(n),new lC(e.firestore,null,n)}}function uC(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Vm(e),1===arguments.length&&(t=rv.newId()),gv("doc","path",t),e instanceof iC){const n=dv.fromString(t,...r);return yv(n),new oC(e,null,new mv(n))}{if(!(e instanceof oC||e instanceof lC))throw new Wy(qy.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(dv.fromString(t,...r));return yv(n),new oC(e.firestore,e instanceof lC?e.converter:null,new mv(n))}}const hC="AsyncQueue";class dC{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new lk(this,"async_queue_retry"),this._c=()=>{const e=ak();e&&My(hC,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=ak();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ak();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Qy;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(zR){if(!Uv(zR))throw zR;My(hC,"Operation failed with retryable error: "+zR)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,Fy("INTERNAL UNHANDLED ERROR: ",fC(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Qk.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&zy(47125,{Pc:fC(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function fC(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class pC extends iC{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new dC,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dC(e),this._firestoreClient=void 0,await e}}}function mC(e){if(e._terminated)throw new Wy(qy.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||gC(e),e._firestoreClient}function gC(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new zb(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,$S(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new GS(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class yC{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yC(Ib.fromBase64String(e))}catch(e){throw new Wy(qy.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new yC(Ib.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:yC._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(kv(e,yC._jsonSchema))return yC.fromBase64String(e.bytes)}}yC._jsonSchemaVersion="firestore/bytes/1.0",yC._jsonSchema={type:Av("string",yC._jsonSchemaVersion),bytes:Av("string")};class vC{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Wy(qy.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pv(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class bC{constructor(e){this._methodName=e}}class wC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Wy(qy.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Wy(qy.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return iv(this._lat,e._lat)||iv(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:wC._jsonSchemaVersion}}static fromJSON(e){if(kv(e,wC._jsonSchema))return new wC(e.latitude,e.longitude)}}wC._jsonSchemaVersion="firestore/geoPoint/1.0",wC._jsonSchema={type:Av("string",wC._jsonSchemaVersion),latitude:Av("number"),longitude:Av("number")};class xC{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:xC._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(kv(e,xC._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new xC(e.vectorValues);throw new Wy(qy.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}xC._jsonSchemaVersion="firestore/vectorValue/1.0",xC._jsonSchema={type:Av("string",xC._jsonSchemaVersion),vectorValues:Av("object")};const EC=/^__.*__$/;class AC{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Wx(e,this.data,this.fieldMask,t,this.fieldTransforms):new qx(e,this.data,t,this.fieldTransforms)}}class kC{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Wx(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function SC(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zy(40011,{Ac:e})}}class CC{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new CC(h(h({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return VC(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(SC(this.Ac)&&EC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class TC{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||ok(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new CC({Ac:e,methodName:t,Dc:n,path:pv.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function NC(e){const t=e._freezeSettings(),n=ok(e._databaseId);return new TC(e._databaseId,!!t.ignoreUndefinedProperties,n)}function IC(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);FC("Data must be an object, but it was:",a,r);const o=LC(r,a);let l,c;if(s.merge)l=new Tb(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=BC(t,r,n);if(!a.contains(i))throw new Wy(qy.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));HC(e,i)||e.push(i)}l=new Tb(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new AC(new fw(o),l,c)}class PC extends bC{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof PC}}class _C extends bC{_toFieldTransform(e){return new jx(e.path,new Tx)}isEqual(e){return e instanceof _C}}function RC(e,t,n,r){const i=e.Cc(1,t,n);FC("Data must be an object, but it was:",i,r);const s=[],a=fw.empty();wb(r,(e,r)=>{const o=zC(t,e,n);r=Vm(r);const l=i.yc(o);if(r instanceof PC)s.push(o);else{const e=jC(r,l);null!=e&&(s.push(o),a.set(o,e))}});const o=new Tb(s);return new kC(a,o,i.fieldTransforms)}function DC(e,t,n,r,i,s){const a=e.Cc(1,t,n),o=[BC(t,r,n)],l=[i];if(s.length%2!=0)throw new Wy(qy.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)o.push(BC(t,s[d])),l.push(s[d+1]);const c=[],u=fw.empty();for(let d=o.length-1;d>=0;--d)if(!HC(c,o[d])){const e=o[d];let t=l[d];t=Vm(t);const n=a.yc(e);if(t instanceof PC)c.push(e);else{const r=jC(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new Tb(c);return new kC(u,h,a.fieldTransforms)}function OC(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return jC(n,e.Cc(r?4:3,t))}function jC(e,t){if(MC(e=Vm(e)))return FC("Unsupported field value:",t,e),LC(e,t);if(e instanceof bC)return function(e,t){if(!SC(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=jC(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Vm(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ex(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Tv.fromDate(e);return{timestampValue:TE(t.serializer,n)}}if(e instanceof Tv){const n=new Tv(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:TE(t.serializer,n)}}if(e instanceof wC)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof yC)return{bytesValue:NE(t.serializer,e._byteString)};if(e instanceof oC){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:_E(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof xC)return function(e,t){return{mapValue:{fields:{[Gb]:{stringValue:Qb},[Kb]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return wx(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(wv(e)))}(e,t)}function LC(e,t){const n={};return xb(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):wb(e,(e,r)=>{const i=jC(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function MC(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Tv||e instanceof wC||e instanceof yC||e instanceof oC||e instanceof bC||e instanceof xC)}function FC(e,t,n){if(!MC(n)||!bv(n)){const r=wv(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function BC(e,t,n){if((t=Vm(t))instanceof vC)return t._internalPath;if("string"==typeof t)return zC(e,t);throw VC("Field path arguments must be of type string or ",e,!1,void 0,n)}const UC=new RegExp("[~\\*/\\[\\]]");function zC(e,t,n){if(t.search(UC)>=0)throw VC("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new vC(...t.split("."))._internalPath}catch(r){throw VC("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function VC(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new Wy(qy.INVALID_ARGUMENT,o+e+l)}function HC(e,t){return e.some(e=>e.isEqual(t))}class GC{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new oC(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new qC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(WC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class qC extends GC{data(){return super.data()}}function WC(e,t){return"string"==typeof t?zC(e,t):t instanceof vC?t._internalPath:t._delegate._internalPath}function QC(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Wy(qy.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class KC{}class JC extends KC{}function YC(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof KC&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof $C).length,n=e.filter(e=>e instanceof XC).length;if(t>1||t>0&&n>0)throw new Wy(qy.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class XC extends JC{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new XC(e,t,n)}_apply(e){const t=this._parse(e);return iT(e._query,t),new aC(e.firestore,e.converter,Xw(e._query,t))}_parse(e){const t=NC(e.firestore),n=function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Wy(qy.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){rT(a,s);const t=[];for(const n of a)t.push(nT(r,e,n));o={arrayValue:{values:t}}}else o=nT(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||rT(a,s),o=OC(n,t,a,"in"===s||"not-in"===s);return Ew.create(i,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function ZC(e,t,n){const r=t,i=WC("where",e);return XC._create(i,r,n)}class $C extends KC{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new $C(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Aw.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)iT(n,i),n=Xw(n,i)}(e._query,t),new aC(e.firestore,e.converter,Xw(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class eT extends JC{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new eT(e,t,n)}_apply(e){return new aC(e.firestore,e.converter,Zw(e._query,this._limit,this._limitType))}}function tT(e){return Ev("limit",e),eT._create("limit",e,"F")}function nT(e,t,n){if("string"==typeof(n=Vm(n))){if(""===n)throw new Wy(qy.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qw(t)&&-1!==n.indexOf("/"))throw new Wy(qy.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(dv.fromString(n));if(!mv.isDocumentKey(r))throw new Wy(qy.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return iw(e,new mv(r))}if(n instanceof oC)return iw(e,n._key);throw new Wy(qy.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(wv(n),"."))}function rT(e,t){if(!Array.isArray(e)||0===e.length)throw new Wy(qy.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function iT(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Wy(qy.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Wy(qy.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class sT{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Jb(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rb(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Db(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw zy(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return wb(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Kb].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>Rb(e.doubleValue));return new xC(n)}convertGeoPoint(e){return new wC(Rb(e.latitude),Rb(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Bb(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ub(e));default:return null}}convertTimestamp(e){const t=_b(e);return new Tv(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=dv.fromString(e);Hy($E(n),9688,{name:e});const r=new Hb(n.get(1),n.get(3)),i=new mv(n.popFirst(5));return r.isEqual(t)||Fy("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function aT(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class oT{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lT extends GC{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new cT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(WC("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Wy(qy.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=lT._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}lT._jsonSchemaVersion="firestore/documentSnapshot/1.0",lT._jsonSchema={type:Av("string",lT._jsonSchemaVersion),bundleSource:Av("string","DocumentSnapshot"),bundleName:Av("string"),bundle:Av("string")};class cT extends lT{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class uT{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new oT(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new cT(this._firestore,this._userDataWriter,n.key,n,new oT(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Wy(qy.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new cT(e._firestore,e._userDataWriter,n.doc.key,n.doc,new oT(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new cT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new oT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:hT(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Wy(qy.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=uT._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=rv.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function hT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zy(61501,{type:e})}}function dT(e){e=xv(e,oC);const t=xv(e.firestore,pC);return XS(mC(t),e._key).then(n=>yT(t,e,n))}uT._jsonSchemaVersion="firestore/querySnapshot/1.0",uT._jsonSchema={type:Av("string",uT._jsonSchemaVersion),bundleSource:Av("string","QuerySnapshot"),bundleName:Av("string"),bundle:Av("string")};class fT extends sT{constructor(e){super(),this.firestore=e}convertBytes(e){return new yC(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new oC(this.firestore,null,t)}}function pT(e){e=xv(e,aC);const t=xv(e.firestore,pC),n=mC(t),r=new fT(t);return QC(e._query),ZS(n,e._query).then(n=>new uT(t,r,e,n))}function mT(e,t,n){e=xv(e,oC);const r=xv(e.firestore,pC),i=NC(r);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return s="string"==typeof(t=Vm(t))||t instanceof vC?DC(i,"updateDoc",e._key,t,n,o):RC(i,"updateDoc",e._key,t),gT(r,[s.toMutation(e._key,Mx.exists(!0))])}function gT(e,t){return function(e,t){const n=new Qy;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=FS(e);try{const e=await function(e,t){const n=Gy(e),r=Tv.now(),i=t.reduce((e,t)=>e.add(t.key),yx());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=lx(),l=yx();return n.Ns.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{s=i;const a=[];for(const e of t){const t=Hx(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new Wx(e.key,t,pw(t.value.mapValue),Mx.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:hx(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new Eb(iv)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await OS(r,e.changes),await Ok(r.remoteStore)}catch(e){const t=Kk(e,"Failed to persist write");n.reject(t)}}(await JS(e),t,n)),n.promise}(mC(e),t)}function yT(e,t,n){const r=n.docs.get(t._key),i=new fT(e);return new lT(e,i,t._key,r,new oT(n.hasPendingWrites,n.fromCache),t.converter)}function vT(){return new PC("deleteField")}function bT(){return new _C("serverTimestamp")}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Oy=e}(ry),Zg(new Hm("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),a=new pC(new Xy(e.getProvider("auth-internal")),new tv(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Wy(qy.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hb(e.options.projectId,t)}(s,r),s);return i=h({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),ay(_y,Ry,e),ay(_y,Ry,"esm2020")}();const wT=iy({apiKey:"AIzaSyD2m8eKUYpYCS17AoipbsbrQrZkK1mwtNM",authDomain:"trustdose-96656.firebaseapp.com",projectId:"trustdose-96656",storageBucket:"trustdose-96656.firebasestorage.app",messagingSenderId:"985521835267",appId:"1:985521835267:web:221137ec5d8ff78348ed36"}),xT=function(e,t){const n="object"==typeof e?e:sy(),r="string"==typeof e?e:t||Vb,i=$g(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(e=>{const t=bm(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&sC(i,...e)}return i}(wT),ET="#B08CC1",AT="#52B9C4",kT="#4A2C59",ST="#666",CT="#10b981",TT="#DC2626";async function NT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e5;const r=new TextEncoder,i=await crypto.subtle.importKey("raw",r.encode(e),{name:"PBKDF2"},!1,["deriveBits"]),s=Uint8Array.from(atob(t),e=>e.charCodeAt(0)),a=await crypto.subtle.deriveBits({name:"PBKDF2",hash:"SHA-256",salt:s,iterations:n},i,256),o=new Uint8Array(a);return btoa(String.fromCharCode(...o))}const IT=["Riyadh"],PT={Riyadh:["Al Olaya","Al Malaz","Al Nakheel","Al Yasmin","Al Rawdah","Al Qirawan","Other\u2026"]};function _T(e){if(!e)return"";let t="";for(const n of String(e)){const e=n.charCodeAt(0);t+=e>=1632&&e<=1641?String(e-1632):e>=1776&&e<=1785?String(e-1776):n}return t}function RT(e){const t=String(e||"");if(/\s/.test(t))return{ok:!1,reason:"Phone number must not contain spaces."};const n=_T(t).trim();if(!/^\+?\d+$/.test(n||""))return{ok:!1,reason:"Phone should contain digits only (and optional leading +)."};if(/^05\d{8}$/.test(n)){const e=n.slice(2);return{ok:!0,normalized:"+9665".concat(e)}}return/^\+9665\d{8}$/.test(n)?{ok:!0,normalized:n}:{ok:!1,reason:"Phone must start with 05 or +9665 followed by 8 digits (e.g., 05xxxxxxxx or +9665xxxxxxxx)."}}function DT(e){const t=String(e||"");let n=0;const r=/[a-z]/.test(t),i=/[A-Z]/.test(t),s=/\d/.test(t),a=/[^A-Za-z0-9]/.test(t),o=t.length>=8;o&&n++,r&&n++,i&&n++,s&&n++,a&&n++,t.length>=12&&n++;let l="Weak",c="#ef4444";n>=4&&(l="Medium",c="#f59e0b"),n>=5&&(l="Strong",c="#10b981");return{score:n,label:l,color:c,width:Math.min(100,Math.round(n/6*100)),hasLower:r,hasUpper:i,hasDigit:s,hasSymbol:a,len8:o}}const OT={width:"100%",padding:"12px 14px",borderRadius:12,border:"1px solid #DFE3E8",margin:"6px 0 12px",outline:"none",background:"#fff",boxShadow:"0 3px 14px rgba(0,0,0,.04)",fontSize:14},jT=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{borderColor:e?TT:ET,boxShadow:e?"0 0 0 4px rgba(220,38,38,.08)":"0 0 0 4px rgba(176,140,193,.12)"}},LT={width:"100%",padding:12,borderRadius:12,border:"none",cursor:"pointer",background:"linear-gradient(135deg, ".concat(ET,", ").concat(AT,")"),color:"#fff",fontWeight:700,fontSize:15,letterSpacing:".2px",boxShadow:"0 8px 20px rgba(82,185,196,.25)",transition:"transform .08s ease, filter .08s ease"},MT={color:AT,fontWeight:600,textDecoration:"none"};function FT(e){let{children:t}=e;return(0,Fp.jsx)("label",{style:{fontSize:13,color:kT,fontWeight:600},children:t})}function BT(e){let{name:t,value:n,onChange:r,disabled:i,required:s,placeholder:a,children:o}=e;return(0,Fp.jsxs)("div",{style:{position:"relative"},children:[(0,Fp.jsxs)("select",{name:t,value:n,onChange:r,disabled:i,required:s,style:h(h({},OT),{},{paddingRight:36,appearance:"none"}),onFocus:e=>Object.assign(e.currentTarget.style,jT(!1)),onBlur:e=>Object.assign(e.currentTarget.style,{borderColor:"#DFE3E8",boxShadow:"0 3px 14px rgba(0,0,0,.04)"}),children:[(0,Fp.jsx)("option",{value:"",disabled:!0,hidden:!0,children:a||"Select\u2026"}),o]}),(0,Fp.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#7a7a7a",strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{position:"absolute",right:12,top:"50%",transform:"translateY(-50%)"},children:(0,Fp.jsx)("polyline",{points:"6 9 12 15 18 9"})})]})}function UT(){const e=ge(),[t,n]=(0,i.useState)("signin"),[r,s]=(0,i.useState)(""),[a,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)(!0),[u,d]=(0,i.useState)(""),[f,p]=(0,i.useState)(""),[m,g]=(0,i.useState)(!1),[y,v]=(0,i.useState)(!1),[b,w]=(0,i.useState)(""),[x,E]=(0,i.useState)(""),[A,k]=(0,i.useState)(""),[S,C]=(0,i.useState)(""),[T,N]=(0,i.useState)(""),[I,P]=(0,i.useState)(""),[_,R]=(0,i.useState)(""),[D,O]=(0,i.useState)(""),[j,L]=(0,i.useState)(""),[M,F]=(0,i.useState)(""),[B,U]=(0,i.useState)(""),[z,V]=(0,i.useState)(DT("")),[H,G]=(0,i.useState)({ok:!1,reason:"",normalized:""}),[q,W]=(0,i.useState)(!1),[Q,K]=(0,i.useState)(!1),J="signup"===t?{padding:"10px 12px",borderRadius:10,fontSize:13.5}:{};(0,i.useEffect)(()=>{const e=localStorage.getItem("td_auth_id");e&&d(e)},[]),(0,i.useEffect)(()=>{l&&u&&localStorage.setItem("td_auth_id",u),l||localStorage.removeItem("td_auth_id")},[l,u]),(0,i.useEffect)(()=>{V(DT(f))},[f]),(0,i.useEffect)(()=>{let e=!1;const t=RT(A);G(t),K(!1);const n=setTimeout(async function(){if(t.ok&&t.normalized){W(!0);try{const n=YC(cC(xT,"patients"),ZC("contact","==",t.normalized)),r=await pT(n);e||K(!r.empty)}catch(zR){e||console.warn("Phone uniqueness check error:",zR)}finally{e||W(!1)}}},400);return()=>{e=!0,clearTimeout(n)}},[A]),(0,i.useEffect)(()=>{F(""),U("")},[j]);const Y=(0,i.useMemo)(()=>"signup"===t?"Patient sign-up":"Welcome to TrustDose",[t]);(0,i.useMemo)(()=>j?PT[j]||["Other\u2026"]:[],[j]);return(0,Fp.jsx)("div",{style:{minHeight:"100vh",display:"grid",placeItems:"center",background:"\n          linear-gradient(0deg, rgba(255,255,255,.42), rgba(255,255,255,.42)),\n          linear-gradient(135deg, ".concat(ET," 0%, ").concat(AT," 100%)\n        "),backgroundAttachment:"fixed"},children:(0,Fp.jsxs)("div",{style:{width:"min(92vw, 460px)",background:"#fff",padding:24,borderRadius:18,boxShadow:"0 18px 42px rgba(0,0,0,0.12)",border:"1px solid rgba(0,0,0,.04)",maxHeight:"90vh",overflowY:"auto",WebkitOverflowScrolling:"touch",scrollbarWidth:"thin"},children:[(0,Fp.jsx)("div",{style:{display:"grid",placeItems:"center",marginBottom:16},children:(0,Fp.jsx)("div",{style:{width:220,height:100,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Fp.jsx)("img",{src:"/Images/TrustDose_logo.png",alt:"TrustDose logo",style:{width:"100%",height:"auto",objectFit:"contain",transform:"scale(1.3)",filter:"drop-shadow(0 2px 6px rgba(0,0,0,.12))"},draggable:"false"})})}),(0,Fp.jsx)("h2",{style:{margin:0,color:kT,fontSize:22,fontWeight:800},children:Y}),(0,Fp.jsx)("p",{style:{marginTop:10,color:ST,fontSize:13.5},children:"signup"===t?"Patient sign-up only (others use Sign in)":"Sign in with your ID & password."}),"signin"===t?(0,Fp.jsxs)("form",{onSubmit:async function(t){t.preventDefault(),s(""),o(!0);try{const t=u.trim(),a=f.trim();if(!t)throw new Error("Please enter your ID");const{coll:o,idFields:l,role:c}=function(e){const t=String(e||"").trim();return/^B-\d+$/i.test(t)?{coll:"pharmacies",idFields:["BranchID"],role:"pharmacy"}:/^dr[-_]?\w+/i.test(t)?{coll:"doctors",idFields:["DoctorID"],role:"doctor"}:/^(ph|phar|pharmacy)[-_]?\w+/i.test(t)?{coll:"pharmacies",idFields:["BranchID","PharmacyID"],role:"pharmacy"}:/^\d{10,12}$/.test(t)?{coll:"patients",idFields:["nationalID","nationalId"],role:"patient"}:{coll:"logistics",idFields:["companyName"],role:"logistics"}}(t);let h=null,d=null;if("patient"===c)try{const e=await dT(uC(xT,"patients","Ph_".concat(t)));e.exists()&&(h=e.data(),d=e.id)}catch(n){}if(!h&&/^B-\d+$/i.test(t))try{let e=await pT(YC(cC(xT,"Phar_Nahdi"),ZC("BranchID","==",t)));e.empty||(h=e.docs[0].data(),d=e.docs[0].id),h||(e=await pT(YC(cC(xT,"pharmacies"),ZC("BranchID","==",t))),e.empty||(h=e.docs[0].data(),d=e.docs[0].id))}catch(r){}if(!h)for(const e of l)try{const n=YC(cC(xT,o),ZC(e,"==",t)),r=await pT(n);if(!r.empty){h=r.docs[0].data(),d=r.docs[0].id;break}}catch(i){}if(!h)return void s("\u274c No account found with this ID.");if("passwordHash"in h&&"passwordSalt"in h){if(!a)return void s("Please enter your password.");if(await NT(a,h.passwordSalt,1e5)!==h.passwordHash)return void s("\u274c ID or password incorrect.")}else if("password"in h){if(!a||String(h.password)!==a)return void s("\u274c ID or password incorrect.")}else console.warn("[Auth] user has no password fields (allowed in dev).");const p=h.name||h.companyName||t;"pharmacy"===c?(localStorage.setItem("userRole","pharmacy"),localStorage.setItem("userId",d||t),h.BranchID&&localStorage.setItem("pharmacyBranchId",h.BranchID)):(localStorage.setItem("userId",t),localStorage.setItem("userRole",c)),s("\u2705 Logged in as ".concat(c,". Welcome ").concat(p,"!")),e("doctor"===c?"/doctor":"pharmacy"===c?"/pharmacy":"patient"===c?"/patient":"/",{replace:!0})}catch(a){console.error(a),s("\u26a0\ufe0f Error: ".concat((null===a||void 0===a?void 0:a.message)||a))}finally{o(!1)}},children:[(0,Fp.jsx)(FT,{children:"ID"}),(0,Fp.jsx)("input",{value:u,onChange:e=>d(e.target.value),placeholder:"DoctorID / PharmacyID / NationalID",style:OT,onFocus:e=>Object.assign(e.currentTarget.style,jT(!1)),onBlur:e=>Object.assign(e.currentTarget.style,{borderColor:"#DFE3E8",boxShadow:"0 3px 14px rgba(0,0,0,.04)"}),required:!0}),(0,Fp.jsx)(FT,{children:"Password"}),(0,Fp.jsxs)("div",{style:{position:"relative"},children:[(0,Fp.jsx)("input",{type:m?"text":"password",value:f,onChange:e=>p(e.target.value),placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",style:h(h({},OT),{},{paddingRight:44}),onFocus:e=>Object.assign(e.currentTarget.style,jT(!1)),onBlur:e=>Object.assign(e.currentTarget.style,{borderColor:"#DFE3E8",boxShadow:"0 3px 14px rgba(0,0,0,.04)"})}),(0,Fp.jsx)("button",{type:"button",onClick:()=>g(e=>!e),"aria-label":m?"Hide password":"Show password",title:m?"Hide password":"Show password",style:{position:"absolute",right:10,top:"50%",transform:"translateY(-50%)",cursor:"pointer",border:"none",background:"transparent",padding:0,display:"inline-flex",alignItems:"center",justifyContent:"center",color:ST},children:m?(0,Fp.jsx)(lm,{size:20}):(0,Fp.jsx)(cm,{size:20})})]}),(0,Fp.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,margin:"8px 0 16px"},children:[(0,Fp.jsx)("input",{id:"remember",type:"checkbox",checked:l,onChange:e=>c(e.target.checked)}),(0,Fp.jsx)("label",{htmlFor:"remember",style:{fontSize:13.5,color:"#333"},children:"Remember me"})]}),(0,Fp.jsx)("button",{type:"submit",disabled:a,style:h(h({},LT),{},{filter:a?"grayscale(30%) brightness(.9)":void 0}),onMouseDown:e=>e.currentTarget.style.transform="scale(.99)",onMouseUp:e=>e.currentTarget.style.transform="scale(1)",children:a?"Signing in...":"Sign in"}),(0,Fp.jsxs)("div",{style:{marginTop:12,fontSize:14,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Fp.jsxs)("span",{children:["First time patient?"," ",(0,Fp.jsx)("a",{href:"#signup",onClick:()=>n("signup"),style:MT,children:"Create account"})]}),(0,Fp.jsx)("a",{href:"#forgot",onClick:e=>{e.preventDefault(),alert("Password reset coming soon \ud83d\udd12")},style:MT,children:"Forgot password?"})]})]}):(0,Fp.jsxs)("form",{onSubmit:async function(e){e.preventDefault(),s(""),o(!0);try{const e=_T(String(null!==b&&void 0!==b?b:"")).trim();if(!function(e){const t=String(e||"");return!/\s/.test(t)&&/^[12][0-9]{9}$/.test(t)}(e))throw new Error("National ID must be 10 digits starting with 1 or 2 (ASCII digits only, no spaces).");const t=String(null!==A&&void 0!==A?A:""),r=RT(t),i=String(null!==f&&void 0!==f?f:"").trim(),a=String(null!==S&&void 0!==S?S:"").trim(),o=String(null!==T&&void 0!==T?T:"").trim(),l=String(null!==I&&void 0!==I?I:"").trim(),c=String(null!==j&&void 0!==j?j:"").trim(),u=String("__OTHER__"===M?null!==B&&void 0!==B?B:"":null!==M&&void 0!==M?M:"").trim(),h=String(null!==_&&void 0!==_?_:"").trim();let m;{const e=/^(\d{4})-(\d{2})-(\d{2})$/.exec(h);if(!e)throw new Error("Invalid birth date.");const t=Number(e[1]),n=Number(e[2]),r=Number(e[3]);m=new Date(Date.UTC(t,n-1,r,0,0,0))}if(Number.isNaN(m.getTime()))throw new Error("Invalid birth date.");if(m>new Date(Date.UTC(2007,11,31,23,59,59)))throw new Error("Birth date must be 2007 or earlier.");if(!r.ok)throw new Error(r.reason||"Invalid phone.");const g=r.normalized;if(!e||!t||!i||!a||!o||!l||!h||!c||!u)throw new Error("Please fill all fields.");if(!["Male","Female"].includes(l))throw new Error("Gender must be Male or Female.");const y=DT(i);if(!(y.len8&&y.hasLower&&y.hasUpper&&y.hasDigit))throw new Error("Password must be at least 8 chars and include lowercase, uppercase, and a digit.");if(i!==a)throw new Error("Passwords do not match.");const v="Ph_".concat(e);if((await dT(uC(xT,"patients",v))).exists())throw new Error("An account with this National ID already exists.");const w=YC(cC(xT,"patients"),ZC("contact","==",g));if(!(await pT(w)).empty)throw new Error("This phone number is already registered.");const x=function(){const e=new Uint8Array(arguments.length>0&&void 0!==arguments[0]?arguments[0]:16);return crypto.getRandomValues(e),btoa(String.fromCharCode(...e))}(16),D=await NT(i,x,1e5);console.log("[signup] hashLen:",D.length,"saltLen:",x.length);const z={locationCity:c,locationDistrict:u,locationLabel:"".concat(c,", ").concat(u),birthDate:Tv.fromDate(m),contact:g,gender:l,name:o,nationalID:e,nationalId:e,passwordHash:D,passwordSalt:x,passwordAlgo:"PBKDF2-SHA256-100k",createdAt:bT()};await function(e,t,n){e=xv(e,oC);const r=xv(e.firestore,pC),i=aT(e.converter,t,n);return gT(r,[IC(NC(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Mx.none())])}(uC(xT,"patients",v),z),s("\ud83c\udf89 Patient account created successfully. You can sign in now."),n("signin"),d(e),p(""),C(""),N(""),P(""),R(""),k(""),L(""),F(""),U(""),G({ok:!1,reason:"",normalized:""}),K(!1),E(""),O("")}catch(t){console.error("signup error:",null===t||void 0===t?void 0:t.code,null===t||void 0===t?void 0:t.message,t),s("\u274c ".concat((null===t||void 0===t?void 0:t.code)||""," ").concat((null===t||void 0===t?void 0:t.message)||t))}finally{o(!1)}},children:[(0,Fp.jsx)(FT,{children:"National ID"}),(0,Fp.jsx)("input",{value:b,onChange:e=>{const t=e.target.value,n=function(e){const t=String(e||"");return""===t?{ok:!0,reason:""}:/\s/.test(t)?{ok:!1,reason:"No spaces allowed."}:/^[0-9]*$/.test(t)?t.length>=1&&!/^[12]/.test(t)?{ok:!1,reason:"Must start with 1 or 2."}:t.length>10?{ok:!1,reason:"Exactly 10 digits."}:{ok:!0,reason:""}:{ok:!1,reason:"Digits 0-9 only (ASCII)."}}(t);w(t),E(n.ok?"":n.reason)},placeholder:"1xxxxxxxxx or 2xxxxxxxxx",style:h(h(h({},OT),J),x?{borderColor:TT,boxShadow:"0 0 0 4px rgba(220,38,38,.08)"}:{}),onFocus:e=>Object.assign(e.currentTarget.style,jT(!!x)),onBlur:e=>Object.assign(e.currentTarget.style,{borderColor:"#DFE3E8",boxShadow:"0 3px 14px rgba(0,0,0,.04)"}),required:!0,maxLength:11,inputMode:"numeric",pattern:"[12][0-9]{9}",title:"10 ASCII digits starting with 1 or 2",onKeyDown:e=>{" "!==e.key&&(/^[0-9]$/.test(e.key)||["Backspace","Delete","ArrowLeft","ArrowRight","Tab","Home","End"].includes(e.key))||e.preventDefault()}}),x&&(0,Fp.jsx)("div",{style:{marginTop:-6,marginBottom:8,fontSize:12,color:"#b91c1c"},children:x}),(0,Fp.jsx)(FT,{children:"Phone"}),(0,Fp.jsx)("input",{value:A,onChange:e=>k(e.target.value),placeholder:"05xxxxxxxx or +9665xxxxxxxx (no spaces)",style:h(h({},OT),J),onFocus:e=>Object.assign(e.currentTarget.style,jT(!(""===A||H.ok&&!Q)&&!!A)),onBlur:e=>Object.assign(e.currentTarget.style,{borderColor:"#DFE3E8",boxShadow:"0 3px 14px rgba(0,0,0,.04)"}),required:!0,onKeyDown:e=>{" "===e.key&&e.preventDefault()}}),(0,Fp.jsxs)("div",{style:{marginTop:-6,marginBottom:8,fontSize:12},children:[!A&&(0,Fp.jsx)("span",{style:{color:"#888"},children:"Enter phone starting with 05 or +9665"}),A&&!H.ok&&(0,Fp.jsx)("span",{style:{color:"#b91c1c"},children:H.reason}),A&&H.ok&&(0,Fp.jsxs)("span",{style:{color:"#065f46"},children:["Normalized: ",H.normalized," ",q?" \u2022 checking...":"",Q?" \u2022 already registered":""]})]}),(0,Fp.jsx)(FT,{children:"Full name"}),(0,Fp.jsx)("input",{value:T,onChange:e=>N(e.target.value),placeholder:"Full name",style:h(h({},OT),J),onFocus:e=>Object.assign(e.currentTarget.style,jT(!1)),onBlur:e=>Object.assign(e.currentTarget.style,{borderColor:"#DFE3E8",boxShadow:"0 3px 14px rgba(0,0,0,.04)"}),required:!0}),(0,Fp.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)(FT,{children:"Gender"}),(0,Fp.jsxs)(BT,{name:"gender",value:I,onChange:e=>P(e.target.value),required:!0,placeholder:"Select gender\u2026",children:[(0,Fp.jsx)("option",{value:"Male",children:"Male"}),(0,Fp.jsx)("option",{value:"Female",children:"Female"})]})]}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)(FT,{children:"Birth date"}),(0,Fp.jsx)("input",{type:"date",value:_,onChange:e=>{const t=e.target.value;if(R(t),t){const e=new Date(t),n=new Date("2007-12-31T23:59:59");O(e>n?"Birth date must be 2007 or earlier.":"")}else O("")},style:h(h(h({},OT),J),D?{borderColor:TT,boxShadow:"0 0 0 4px rgba(220,38,38,.08)"}:{}),onFocus:e=>Object.assign(e.currentTarget.style,jT(!!D)),onBlur:e=>Object.assign(e.currentTarget.style,{borderColor:"#DFE3E8",boxShadow:"0 3px 14px rgba(0,0,0,.04)"}),required:!0}),D&&(0,Fp.jsx)("div",{style:{marginTop:-6,marginBottom:8,fontSize:12,color:"#b91c1c"},children:D})]})]}),(0,Fp.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)(FT,{children:"City"}),(0,Fp.jsx)(BT,{name:"city",value:j,onChange:e=>L(e.target.value),required:!0,placeholder:"Select a city\u2026",children:IT.map(e=>(0,Fp.jsx)("option",{value:e,children:e},e))})]}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)(FT,{children:"District"}),(0,Fp.jsx)(BT,{name:"district",value:M,onChange:e=>F(e.target.value),required:!0,disabled:!j,placeholder:j?"Select a district\u2026":"Choose city first",children:(j&&PT[j]||[]).map(e=>(0,Fp.jsx)("option",{value:"Other\u2026"===e?"__OTHER__":e,children:e},e))})]})]}),"__OTHER__"===M&&(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)(FT,{children:"District (Other)"}),(0,Fp.jsx)("input",{value:B,onChange:e=>U(e.target.value),placeholder:"Type district name",style:h(h({},OT),J),onFocus:e=>Object.assign(e.currentTarget.style,jT(!1)),onBlur:e=>Object.assign(e.currentTarget.style,{borderColor:"#DFE3E8",boxShadow:"0 3px 14px rgba(0,0,0,.04)"}),required:!0})]}),(0,Fp.jsx)(FT,{children:"Password"}),(0,Fp.jsxs)("div",{style:{position:"relative"},children:[(0,Fp.jsx)("input",{type:m?"text":"password",value:f,onChange:e=>p(e.target.value),placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",style:h(h(h({},OT),J),{},{paddingRight:44}),onFocus:e=>Object.assign(e.currentTarget.style,jT(!1)),onBlur:e=>Object.assign(e.currentTarget.style,{borderColor:"#DFE3E8",boxShadow:"0 3px 14px rgba(0,0,0,.04)"}),required:!0}),(0,Fp.jsx)("button",{type:"button",onClick:()=>g(e=>!e),"aria-label":m?"Hide password":"Show password",title:m?"Hide password":"Show password",style:{position:"absolute",right:10,top:"50%",transform:"translateY(-50%)",cursor:"pointer",border:"none",background:"transparent",padding:0,display:"inline-flex",alignItems:"center",justifyContent:"center",color:ST},children:m?(0,Fp.jsx)(lm,{size:20}):(0,Fp.jsx)(cm,{size:20})})]}),f.length>0&&(0,Fp.jsx)("div",{style:{marginTop:8,marginBottom:8},children:(0,Fp.jsxs)("ul",{style:{listStyle:"none",padding:0,margin:0,display:"grid",gap:6},children:[(0,Fp.jsx)(zT,{ok:/[A-Z]/.test(f),label:"Uppercase (A\u2013Z)"}),(0,Fp.jsx)(zT,{ok:/[a-z]/.test(f),label:"Lowercase (a\u2013z)"}),(0,Fp.jsx)(zT,{ok:/\d/.test(f),label:"Digit (0\u20139)"}),(0,Fp.jsx)(zT,{ok:/[^A-Za-z0-9]/.test(f),label:"Symbol (!@#$\u2026)"}),(0,Fp.jsx)(zT,{ok:f.length>=8,label:"Length \u2265 8"})]})}),f.length>0&&(0,Fp.jsxs)("div",{style:{marginTop:-6,marginBottom:8},children:[(0,Fp.jsx)("div",{style:{height:6,background:"#eee",borderRadius:6,overflow:"hidden"},children:(0,Fp.jsx)("div",{style:{height:"100%",width:"".concat(z.width,"%"),background:z.color,transition:"width .2s ease"}})}),(0,Fp.jsxs)("div",{style:{display:"flex",gap:10,alignItems:"center",marginTop:6},children:[(0,Fp.jsxs)("span",{style:{fontSize:12,color:"#555"},children:["Strength: ",(0,Fp.jsx)("strong",{style:{color:z.color},children:z.label})]}),(0,Fp.jsx)("span",{style:{fontSize:12,color:"#666"},children:"(min 8 chars, include a\u2013z, A\u2013Z, 0\u20139)"})]})]}),(0,Fp.jsx)(FT,{children:"Confirm Password"}),(0,Fp.jsxs)("div",{style:{position:"relative"},children:[(0,Fp.jsx)("input",{type:y?"text":"password",value:S,onChange:e=>C(e.target.value),placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",style:h(h(h({},OT),J),{},{paddingRight:44}),onFocus:e=>Object.assign(e.currentTarget.style,jT(!1)),onBlur:e=>Object.assign(e.currentTarget.style,{borderColor:"#DFE3E8",boxShadow:"0 3px 14px rgba(0,0,0,.04)"}),required:!0}),(0,Fp.jsx)("button",{type:"button",onClick:()=>v(e=>!e),"aria-label":y?"Hide password":"Show password",title:y?"Hide password":"Show password",style:{position:"absolute",right:10,top:"50%",transform:"translateY(-50%)",cursor:"pointer",border:"none",background:"transparent",padding:0,display:"inline-flex",alignItems:"center",justifyContent:"center",color:ST},children:y?(0,Fp.jsx)(lm,{size:20}):(0,Fp.jsx)(cm,{size:20})})]}),(0,Fp.jsx)("button",{type:"submit",disabled:a,style:h(h({},LT),{},{marginTop:4,filter:a?"grayscale(30%) brightness(.9)":void 0}),onMouseDown:e=>e.currentTarget.style.transform="scale(.99)",onMouseUp:e=>e.currentTarget.style.transform="scale(1)",children:a?"Creating...":"Create account"}),(0,Fp.jsxs)("div",{style:{marginTop:12,fontSize:14},children:["Already have an account?"," ",(0,Fp.jsx)("a",{href:"#signin",onClick:()=>n("signin"),style:MT,children:"Sign in"})]})]}),r&&(0,Fp.jsx)("div",{style:{marginTop:12,padding:"10px 12px",borderRadius:12,background:r.startsWith("\ud83c\udf89")||r.startsWith("\u2705")?"rgba(16,185,129,.08)":"rgba(239,68,68,.08)",color:r.startsWith("\ud83c\udf89")||r.startsWith("\u2705")?"#065f46":"#7f1d1d",border:"1px solid ".concat(r.startsWith("\ud83c\udf89")||r.startsWith("\u2705")?"rgba(16,185,129,.25)":"rgba(239,68,68,.25)"),fontSize:13.5},children:r})]})})}function zT(e){let{ok:t,label:n}=e;return(0,Fp.jsxs)("li",{style:{display:"flex",alignItems:"center",gap:8,fontSize:12.5,color:t?CT:ST},children:[t?(0,Fp.jsx)(um,{size:16}):(0,Fp.jsx)(hm,{size:16}),(0,Fp.jsx)("span",{children:n})]})}const VT=Ot("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),HT=Ot("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),GT=Ot("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),qT=Ot("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),WT=JSON.parse('{"HV":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":true,"internalType":"address","name":"doctor","type":"address"},{"indexed":false,"internalType":"uint256","name":"newExpiresAt","type":"uint256"}],"name":"ExtensionApproved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":true,"internalType":"address","name":"by","type":"address"}],"name":"ExtensionRejected","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":true,"internalType":"address","name":"pharmacist","type":"address"},{"indexed":false,"internalType":"uint256","name":"extraSeconds","type":"uint256"}],"name":"ExtensionRequested","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":true,"internalType":"address","name":"doctor","type":"address"},{"indexed":true,"internalType":"bytes32","name":"patientHash","type":"bytes32"},{"indexed":false,"internalType":"string","name":"medicine","type":"string"},{"indexed":false,"internalType":"string","name":"dose","type":"string"},{"indexed":false,"internalType":"string","name":"frequency","type":"string"},{"indexed":false,"internalType":"string","name":"durationText","type":"string"},{"indexed":false,"internalType":"uint256","name":"createdAt","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"expiresAt","type":"uint256"}],"name":"PrescriptionCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"id","type":"uint256"},{"indexed":true,"internalType":"address","name":"by","type":"address"}],"name":"PrescriptionDeactivated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"string","name":"role","type":"string"},{"indexed":false,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"bool","name":"enabled","type":"bool"}],"name":"RoleUpdated","type":"event"},{"inputs":[],"name":"DEFAULT_VALIDITY","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_EXTENSION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"admin","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"extensionRequests","outputs":[{"internalType":"uint256","name":"extraSeconds","type":"uint256"},{"internalType":"address","name":"pharmacist","type":"address"},{"internalType":"bool","name":"exists","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"isDoctor","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"isPharmacist","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"prescriptions","outputs":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"bytes32","name":"patientHash","type":"bytes32"},{"internalType":"string","name":"medicine","type":"string"},{"internalType":"string","name":"dose","type":"string"},{"internalType":"string","name":"frequency","type":"string"},{"internalType":"string","name":"durationText","type":"string"},{"internalType":"address","name":"doctor","type":"address"},{"internalType":"uint256","name":"createdAt","type":"uint256"},{"internalType":"uint256","name":"expiresAt","type":"uint256"},{"internalType":"bool","name":"isActive","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"bool","name":"enabled","type":"bool"}],"name":"setDoctor","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"bool","name":"enabled","type":"bool"}],"name":"setPharmacist","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes32","name":"patientHash","type":"bytes32"},{"internalType":"string","name":"medicine","type":"string"},{"internalType":"string","name":"dose","type":"string"},{"internalType":"string","name":"frequency","type":"string"},{"internalType":"string","name":"durationText","type":"string"}],"name":"createPrescription","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"},{"internalType":"uint256","name":"extraSeconds","type":"uint256"}],"name":"requestExtension","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"approveExtension","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"rejectExtension","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"deactivate","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"isValid","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"id","type":"uint256"}],"name":"remainingSeconds","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]}'),QT="#B08CC1",KT="#4A2C59",JT=Object.freeze({medicalCondition:{min:3,max:120},notes:{min:0,max:300}}),YT={tablet:["1 tablet","2 tablets","\xbd tablet","\xbc tablet"],capsule:["1 capsule","2 capsules"],inhaler:["1 puff","2 puffs"],suspension:["2.5 mL","5 mL","10 mL","15 mL"],drops:["1 drop","2 drops","3 drops"],injection:["0.3 mL","0.5 mL","1 vial","2 vials"],cream:["Apply thin layer"],ointment:["Apply thin layer"]},XT="__OTHER__";function ZT(e){return e&&YT[e]||[]}const $T=Object.freeze({createdAt:"createdAt",doctorId:"doctorId",doctorName:"doctorName",doctorPhone:"doctorPhone",doctorFacility:"doctorFacility",dosage:"dosage",durationDays:"durationDays",frequency:"frequency",medicineName:"medicineName",medicineLabel:"medicineLabel",dosageForm:"dosageForm",sensitivity:"sensitivity",notes:"notes",onchainTx:"onchainTx",patientDisplayId:"patientDisplayId",patientNationalIdHash:"patientNationalIdHash",medicalCondition:"medicalCondition"});function eN(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"RX-";for(let r=0;r<e;r++)n+=t.charAt(Math.floor(36*Math.random()));return n}function tN(){const e=ge(),[t,n]=(0,i.useState)(null),[r,s]=(0,i.useState)(""),[a,o]=(0,i.useState)(""),[l,c]=(0,i.useState)(""),[u,d]=(0,i.useState)(!1),[f,p]=(0,i.useState)(null),[m,g]=(0,i.useState)([]),[y,v]=(0,i.useState)(!1),[b,w]=(0,i.useState)(null),[x,E]=(0,i.useState)(""),[A,k]=(0,i.useState)(""),[S,C]=(0,i.useState)(""),[T,N]=(0,i.useState)(""),[I,P]=(0,i.useState)(""),[_,R]=(0,i.useState)(""),D=(0,i.useRef)(null),[O,j]=(0,i.useState)(!1);async function L(){const e=a.trim();if(!/^[12]\d{9}$/.test(e))return c("National ID must be 10 digits and start with 1 or 2."),p(null),void d(!1);v(!0),c("");try{const t=await async function(e){const t=uC(xT,"patients","Ph_".concat(e)),n=await dT(t);if(n.exists())return h({docId:n.id},n.data());const r=cC(xT,"patients"),i=YC(r,ZC("nationalId","==",e)),s=YC(r,ZC("nationalID","==",e)),[a,o]=await Promise.all([pT(i),pT(s)]),l=a.empty?o.empty?null:o.docs[0]:a.docs[0];return l?h({docId:l.id},l.data()):null}(e);if(t){const n=function(e,t){var n;if(!e)return null;const r=e.nationalId||e.nationalID||t,i=null!==(n=e.birthDate)&&void 0!==n?n:e.birthdate;return{docId:e.docId,id:(null===r||void 0===r?void 0:r.toString())||t,name:e.name||"\u2014",age:aN(i),heightCm:e.heightCm||"",weightKg:e.weightKg||"",bloodType:e.bloodType||"",allergies:Array.isArray(e.allergies)?e.allergies:[]}}(t,e);p(n),d(!0),sessionStorage.setItem("td_patient",JSON.stringify(n))}else p(null),d(!0),c("The national ID you entered isn\u2019t registered in our system."),sessionStorage.removeItem("td_patient")}catch(zR){console.error(zR),p(null),d(!1),c("Error fetching from database. Please try again."),sessionStorage.removeItem("td_patient")}finally{v(!1)}}return(0,i.useEffect)(()=>{(async()=>{try{var e,t;let i=null;try{const e=sessionStorage.getItem("td_doctor");e&&(i=JSON.parse(e))}catch(r){}const a=(null===(e=i)||void 0===e?void 0:e.DoctorID)||(null===(t=i)||void 0===t?void 0:t.doctorId);if(!a)return void s("No DoctorID in session.");const o=YC(cC(xT,"doctors"),ZC("DoctorID","==",a)),l=await pT(o);if(!l.empty)return void n(h({id:l.docs[0].id},l.docs[0].data()));const c=await dT(uC(xT,"doctors",a));if(c.exists())return void n(h({id:c.id},c.data()));s("Doctor record not found.")}catch(zR){console.error("Load doctor failed:",zR),s("Failed to load doctor.")}})()},[]),(0,i.useEffect)(()=>{const e=sessionStorage.getItem("td_patient");if(e){const t=JSON.parse(e);p(t),d(!0),o(t.id||"")}},[]),(0,i.useEffect)(()=>{(async()=>{const e=await pT(cC(xT,"medicines"));g(e.docs.map(e=>h({id:e.id},e.data())))})()},[]),(0,Fp.jsxs)("main",{className:"flex-1 mx-auto w-full max-w-6xl px-4 md:px-6 py-6 md:py-8",children:[(0,Fp.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,Fp.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Fp.jsx)("img",{src:"/Images/TrustDose-pill.png",alt:"TrustDose Capsule",style:{width:56,height:"auto"}}),(0,Fp.jsx)("div",{children:(0,Fp.jsx)("div",{className:"font-extrabold text-lg",style:{color:"#334155"},children:null!==t&&void 0!==t&&t.name?"Welcome, Dr. ".concat(t.name):"Welcome, Doctor"})})]}),r&&(0,Fp.jsx)("div",{className:"text-sm text-rose-700",children:r})]}),(0,Fp.jsxs)("section",{className:"space-y-6",children:[(0,Fp.jsxs)("section",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[(0,Fp.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[(0,Fp.jsx)(jt,{size:20,style:{color:QT}}),(0,Fp.jsx)("span",{style:{color:KT},children:"Search Patients"})]}),(0,Fp.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,Fp.jsxs)("div",{className:"flex-1 relative",children:[(0,Fp.jsx)("input",{className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:border-transparent transition-all",style:{outlineColor:QT},placeholder:"Enter 10-digit National ID",value:a,inputMode:"numeric",pattern:"[0-9]*",maxLength:10,onChange:e=>{let t=e.target.value.replace(/[^0-9]/g,"");t.length>0&&!/^[12]/.test(t)&&(t=""),t=t.slice(0,10),o(t)},onKeyDown:e=>"Enter"===e.key&&L()}),a&&(0,Fp.jsx)("button",{onClick:()=>{o(""),d(!1),p(null)},className:"absolute right-3 top-1/2 -translate-y-1/2 hover:opacity-80",style:{color:KT},children:"\u2715"})]}),(0,Fp.jsx)("button",{onClick:L,disabled:y,className:"px-6 py-3 text-white rounded-xl disabled:opacity-50 transition-colors flex items-center gap-2 font-medium",style:{backgroundColor:QT},children:y?(0,Fp.jsxs)(Fp.Fragment,{children:[(0,Fp.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Searching..."]}):(0,Fp.jsxs)(Fp.Fragment,{children:[(0,Fp.jsx)(jt,{size:18})," Search"]})})]}),(a||f)&&(0,Fp.jsx)("div",{className:"flex justify-end mt-2",children:(0,Fp.jsx)("button",{onClick:function(){o(""),p(null),d(!1),c(""),sessionStorage.removeItem("td_patient")},className:"px-6 py-3 rounded-xl font-medium",style:{background:"#F3F4F6",color:"#374151"},children:"Clear Search"})}),!!l&&(0,Fp.jsxs)("div",{className:"mt-3 text-sm flex items-center gap-2 text-rose-700",children:[(0,Fp.jsx)(VT,{size:16})," ",l]})]}),u&&f&&(0,Fp.jsxs)(Fp.Fragment,{children:[(0,Fp.jsxs)("section",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 relative",children:[(0,Fp.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",style:{color:KT},children:[(0,Fp.jsx)(HT,{size:20,style:{color:QT}}),"Patient Information"]}),(0,Fp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:[(0,Fp.jsx)(nN,{label:"Name",value:f.name,highlight:!0}),(0,Fp.jsx)(nN,{label:"National ID",value:f.id,bold:!0}),(0,Fp.jsx)(nN,{label:"Age",value:"".concat(f.age||"\u2014"," years")})]}),(0,Fp.jsx)("div",{className:"flex justify-end",children:(0,Fp.jsxs)("button",{onClick:()=>e("/prescriptions",{state:{patientId:f.id,patientName:f.name}}),className:"px-6 py-3 text-white rounded-xl transition-colors flex items-center gap-2 font-medium shadow-sm",style:{backgroundColor:QT},children:[(0,Fp.jsx)(GT,{size:18}),"View Past Prescriptions"]})})]}),(0,Fp.jsxs)("section",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[(0,Fp.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",style:{color:KT},children:[(0,Fp.jsx)(GT,{size:20,style:{color:QT}}),"Create New Prescription"]}),!!_&&(0,Fp.jsxs)("div",{className:"p-3 rounded-lg mb-4 flex items-center gap-2 border",style:_.includes("\u2713")?{background:"#EFFAF1",color:"#166534",borderColor:"#BBE5C8"}:{background:"#FEF2F2",color:"#991B1B",borderColor:"#FECACA"},children:[_.includes("\u2713")?(0,Fp.jsx)(qT,{size:18}):(0,Fp.jsx)(VT,{size:18}),_]}),(0,Fp.jsxs)("div",{className:"mb-4",children:[(0,Fp.jsx)(sN,{value:(null===b||void 0===b?void 0:b.label)||"",data:m,placeholder:"Type medicine name",onSelect:e=>{w(e);const t=ZT(e.dosageForm);E(e=>t.includes(e)?e:""),k(""),C("")}}),(null===b||void 0===b?void 0:b.sensitivity)&&(0,Fp.jsx)("div",{className:"mt-2",children:(0,Fp.jsxs)("span",{className:"inline-flex items-center rounded-lg px-3 py-1 text-sm font-medium border",style:{background:"Sensitive"===b.sensitivity?"#FEF2F2":"#F1F8F5",color:"Sensitive"===b.sensitivity?"#991B1B":"#166534",borderColor:"Sensitive"===b.sensitivity?"#FECACA":"#BBE5C8"},children:["Sensitivity: ",b.sensitivity]})})]}),b?(0,Fp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Fp.jsx)(iN,{value:x,onChange:E,options:ZT(null===b||void 0===b?void 0:b.dosageForm),placeholder:"Select dosage",allowOther:!0}),(0,Fp.jsx)(rN,{label:"Frequency",value:A,onChange:k,placeholder:"Select frequency",options:["Once daily (OD)","Every 6 hours","Every 8 hours","Every 12 hours"],required:!0,allowOther:!0}),(0,Fp.jsx)(rN,{label:"Duration",value:S,onChange:C,placeholder:"Select duration",options:["3 days","5 days","7 days","10 days","14 days","21 days","30 days","1 month","2 months","3 months"],required:!0,allowOther:!0})]}):(0,Fp.jsx)("div",{className:"mt-2 text-sm text-gray-500",children:"Select a medicine first to show fields."}),(0,Fp.jsxs)("div",{className:"mt-4",children:[(0,Fp.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Medical Condition ",(0,Fp.jsx)("span",{className:"text-rose-500",children:"*"})]}),(0,Fp.jsx)("input",{ref:D,className:"w-full px-4 py-3 border rounded-xl focus:ring-2 transition-all ".concat(O&&T.trim().length<JT.medicalCondition.min?"border-rose-400 focus:ring-rose-200":"border-gray-300"),style:{outlineColor:O&&T.trim().length<JT.medicalCondition.min?"#f87171":QT},placeholder:"e.g., Hypertension",value:T,onChange:e=>N(e.target.value.slice(0,JT.medicalCondition.max)),onBlur:()=>j(!0)}),(0,Fp.jsxs)("div",{className:"mt-1 flex items-center justify-between text-xs",children:[(0,Fp.jsx)("span",{className:"text-gray-500",children:"".concat(T.length,"/").concat(JT.medicalCondition.max)}),O&&T.trim().length<JT.medicalCondition.min&&(0,Fp.jsxs)("span",{className:"text-rose-600",children:["Please enter at least ",JT.medicalCondition.min," characters."]})]})]}),(0,Fp.jsxs)("div",{className:"mt-4",children:[(0,Fp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes (optional)"}),(0,Fp.jsx)("textarea",{className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 transition-all h-28 resize-none",style:{outlineColor:QT},placeholder:"Special instructions",value:I,onChange:e=>e.target.value.length<=JT.notes.max&&P(e.target.value)}),(0,Fp.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:[I.length,"/",JT.notes.max]})]}),(0,Fp.jsxs)("div",{className:"flex items-center justify-between pt-4",children:[(0,Fp.jsxs)("button",{onClick:async function(){if(!f)return R("Please search for a patient first.");if(!b)return R("Please choose a medicine from the list.");const n=x===XT?"":x,r=A===XT?"":A,i=S===XT?"":S;if(!n)return R("Please enter/select a dosage.");if(!r)return R("Please enter/select a frequency.");if(!i)return R("Please enter/select a duration.");const s=T.trim();var a,o;if(s.length<JT.medicalCondition.min)return j(!0),R("Medical Condition must be at least ".concat(JT.medicalCondition.min," characters.")),void(null===(a=D.current)||void 0===a||a.focus());if(s.length>JT.medicalCondition.max)return j(!0),R("Medical Condition must be at most ".concat(JT.medicalCondition.max," characters.")),void(null===(o=D.current)||void 0===o||o.focus());if(I.length>JT.notes.max)R("Notes must be at most ".concat(JT.notes.max," characters."));else try{var l,c;v(!0),R("");const a=(null===(l=f.id)||void 0===l?void 0:l.toString())||"",o=a?await async function(e){const t=new TextEncoder,n=await crypto.subtle.digest("SHA-256",t.encode(e));return[...new Uint8Array(n)].map(e=>e.toString(16).padStart(2,"0")).join("")}(a):"",p=o?"0x"+o:"0x"+"0".repeat(64),m=await async function(){if(!window.ethereum)throw new Error("MetaMask not detected. Please install/enable it.");return await window.ethereum.request({method:"eth_requestAccounts"}),new Lp(window.ethereum).getSigner()}(),x=await m.getAddress(),A=new El("0x30cb3cDcf8dF0b552E2e258FbbbCFbAe107b110d",WT.HV,m),S=(b.label||"").trim(),T=await A.createPrescription(p,S,n,r,i),_=await T.wait();if(1!==(null===_||void 0===_?void 0:_.status))throw new Error("Transaction reverted or failed.");const D=(null===_||void 0===_?void 0:_.hash)||(null===_||void 0===_?void 0:_.transactionHash)||T.hash;let O=null;try{const e=new Co(WT.HV);for(const t of _.logs||[])try{const n=e.parseLog(t);if("PrescriptionCreated"===(null===n||void 0===n?void 0:n.name)){var u,h,d;O=Number(null!==(u=null===(h=n.args)||void 0===h?void 0:h.id)&&void 0!==u?u:null===(d=n.args)||void 0===d?void 0:d[0]);break}}catch(g){}}catch(y){}const j={[$T.createdAt]:bT(),[$T.doctorId]:x,[$T.doctorName]:(null===t||void 0===t?void 0:t.name)||"",[$T.doctorPhone]:(null===t||void 0===t?void 0:t.phone)||"",[$T.doctorFacility]:(null===t||void 0===t?void 0:t.healthFacility)||"",[$T.medicineLabel]:b.label,[$T.medicineName]:b.name,[$T.dosageForm]:b.dosageForm||"",[$T.dosage]:n,[$T.frequency]:r,[$T.durationDays]:i,[$T.medicalCondition]:s,[$T.notes]:I||"",[$T.onchainTx]:D,[$T.patientDisplayId]:a?a.slice(-4):"",[$T.patientNationalIdHash]:"0x"+o,nationalID:a,patientName:f.name,onchainId:null!==(c=O)&&void 0!==c?c:null,reason:s,prescriptionID:eN(),dispensed:!1};null!==b&&void 0!==b&&b.sensitivity&&(j[$T.sensitivity]=b.sensitivity),await function(e,t){const n=xv(e.firestore,pC),r=uC(e),i=aT(e.converter,t);return gT(n,[IC(NC(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Mx.exists(!1))]).then(()=>r)}(cC(xT,"prescriptions"),j),w(null),E(""),k(""),C(""),N(""),P(""),R("Prescription created & confirmed on-chain \u2713"),setTimeout(()=>R(""),3e3),e("/prescriptions",{state:{patientId:f.id,patientName:f.name}})}catch(zR){var p,m;console.error("createPrescription failed:",zR),R((null===zR||void 0===zR||null===(p=zR.info)||void 0===p||null===(m=p.error)||void 0===m?void 0:m.message)||(null===zR||void 0===zR?void 0:zR.shortMessage)||(null===zR||void 0===zR?void 0:zR.message)||"Blockchain confirmation failed."),setTimeout(()=>R(""),6e3)}finally{v(!1)}},disabled:y||!b||!x||!A||!S,className:"px-6 py-3 text-white rounded-xl disabled:opacity-50 transition-colors flex items-center gap-2 font-medium shadow-sm",style:{backgroundColor:QT},children:[(0,Fp.jsx)(GT,{size:18}),"Confirm & Create"]}),(0,Fp.jsx)("button",{onClick:()=>{w(null),E(""),k(""),C(""),N(""),P(""),R(""),j(!1)},className:"px-6 py-3 rounded-xl font-medium",style:{background:"#F3F4F6",color:"#374151"},children:"Clear Form"})]})]})]})]})]})}function nN(e){let{label:t,value:n,bold:r=!1,highlight:i=!1}=e;return(0,Fp.jsxs)("div",{className:"p-4 border rounded-xl",style:{background:i?"#F6F1FA":"#F9FAFB",borderColor:i?"#E9DFF1":"#E5E7EB"},children:[(0,Fp.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:t}),(0,Fp.jsx)("div",{className:"text-gray-800 ".concat(r?"font-semibold":""),style:i?{color:"#4A2C59",fontWeight:600}:void 0,children:null!==n&&void 0!==n?n:"\u2014"})]})}function rN(e){let{label:t,value:n,onChange:r,placeholder:i,options:s,required:a=!1,allowOther:o=!1}=e;const l=o&&!!n&&!s.includes(n)&&n!==XT,c=l?XT:n||"",u=o&&(l||c===XT),h=a&&((u?!l:""===c)||l&&!n);return(0,Fp.jsxs)("div",{children:[(0,Fp.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[t," ",a&&(0,Fp.jsx)("span",{className:"text-rose-500",children:"*"})]}),(0,Fp.jsxs)("div",{className:"relative",children:[(0,Fp.jsxs)("select",{className:"w-full pl-4 pr-10 py-3 border rounded-xl focus:ring-2 focus:border-transparent transition-all appearance-none bg-white ".concat(h?"border-rose-400 focus:ring-rose-200":"border-gray-300"),style:{outlineColor:h?"#f87171":QT},value:c,onChange:e=>{const t=e.target.value;r(o&&t===XT?XT:t)},children:[(0,Fp.jsx)("option",{value:"",disabled:!0,hidden:!0,children:i}),s.map(e=>(0,Fp.jsx)("option",{value:e,children:e},e)),o&&(0,Fp.jsx)("option",{value:XT,children:"Other\u2026"})]}),(0,Fp.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none select-none leading-none text-gray-500 text-base",children:"\u25be"})]}),u&&(0,Fp.jsxs)("div",{className:"mt-2",children:[(0,Fp.jsx)("input",{className:"w-full px-4 py-3 border rounded-xl focus:ring-2 transition-all ".concat(h?"border-rose-400 focus:ring-rose-200":"border-gray-300"),style:{outlineColor:h?"#f87171":QT},placeholder:"Enter custom ".concat(t.toLowerCase()),value:l?n:"",onChange:e=>r(e.target.value)}),h&&(0,Fp.jsx)("div",{className:"mt-1 text-xs text-rose-600",children:"This field is required."})]})]})}function iN(e){let{value:t,onChange:n,options:r=[],required:i=!0,placeholder:s="Select dosage",allowOther:a=!0}=e;const o=a&&!!t&&!r.includes(t)&&t!==XT,l=o?XT:t||"",c=a&&(o||l===XT),u=i&&((c?!o:""===l)||o&&!t);return(0,Fp.jsxs)("div",{children:[(0,Fp.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Dosage ",i&&(0,Fp.jsx)("span",{className:"text-rose-500",children:"*"})]}),(0,Fp.jsxs)("div",{className:"relative",children:[(0,Fp.jsxs)("select",{className:"w-full pl-4 pr-10 py-3 border rounded-xl focus:ring-2 focus:border-transparent transition-all appearance-none bg-white ".concat(u?"border-rose-400 focus:ring-rose-200":"border-gray-300"),style:{outlineColor:u?"#f87171":QT},value:l,onChange:e=>{const t=e.target.value;n(a&&t===XT?XT:t)},children:[(0,Fp.jsx)("option",{value:"",disabled:!0,hidden:!0,children:s}),r.map(e=>(0,Fp.jsx)("option",{value:e,children:e},e)),a&&(0,Fp.jsx)("option",{value:XT,children:"Other\u2026"})]}),(0,Fp.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none select-none leading-none text-gray-500 text-base",children:"\u25be"})]}),c&&(0,Fp.jsxs)("div",{className:"mt-2",children:[(0,Fp.jsx)("input",{className:"w-full px-4 py-3 border rounded-xl focus:ring-2 transition-all ".concat(u?"border-rose-400 focus:ring-rose-200":"border-gray-300"),style:{outlineColor:u?"#f87171":QT},placeholder:"Enter custom dosage",value:o?t:"",onChange:e=>n(e.target.value)}),u&&(0,Fp.jsx)("div",{className:"mt-1 text-xs text-rose-600",children:"Please enter dosage."})]})]})}function sN(e){let{value:t,onSelect:n,data:r,placeholder:s="Type medicine name"}=e;const[a,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)(t||""),[u,h]=(0,i.useState)(-1),[d,f]=(0,i.useState)(!1);(0,i.useEffect)(()=>c(t||""),[t]);const p=Array.isArray(r)?r:[],m=function(){return String(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase().replace(/\s+/g," ").trim()},g=(0,i.useMemo)(()=>{const e=m(l);if(!e)return p.slice(0,12);const t=t=>{const n=m(t.label),r=m(t.name||"");let i=0;return(n.startsWith(e)||r.startsWith(e))&&(i+=4),(n.includes(e)||r.includes(e))&&(i+=1),i};return p.map(e=>({m:e,s:t(e)})).filter(e=>e.s>0).sort((e,t)=>t.s-e.s||String(e.m.label).localeCompare(String(t.m.label))).map(e=>e.m).slice(0,15)},[l,r]);function y(e){null===n||void 0===n||n(e),c(e.label),o(!1),h(-1),f(!1)}return(0,Fp.jsxs)("div",{className:"relative",children:[(0,Fp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Medicine"}),(0,Fp.jsx)("input",{className:"w-full px-4 py-3 border rounded-xl focus:ring-2 transition-all ".concat(d?"border-rose-400 focus:ring-rose-200":"border-gray-300 focus:border-transparent"),style:{outlineColor:d?"#f87171":QT},placeholder:s,value:l,onChange:e=>{c(e.target.value),o(!0),f(!1)},onFocus:()=>o(!0),onBlur:function(){p.find(e=>e.label===l)||(c(t||""),f(!!l)),setTimeout(()=>o(!1),120)},onKeyDown:function(e){a||"ArrowDown"!==e.key&&"ArrowUp"!==e.key?a&&("ArrowDown"===e.key?(e.preventDefault(),h(e=>Math.min(e+1,g.length-1))):"ArrowUp"===e.key?(e.preventDefault(),h(e=>Math.max(e-1,0))):"Enter"===e.key?(e.preventDefault(),u>=0&&g[u]&&y(g[u])):"Escape"===e.key&&o(!1)):o(!0)},"aria-autocomplete":"list",role:"combobox"}),d&&(0,Fp.jsx)("div",{className:"mt-1 text-xs text-rose-600",children:"Please choose a medicine from the list."}),a&&(0,Fp.jsx)("ul",{className:"absolute z-20 mt-1 w-full bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden max-h-80 overflow-y-auto",role:"listbox",children:0===g.length?(0,Fp.jsx)("li",{className:"px-4 py-3 text-sm text-gray-500",children:"No matches found"}):g.map((e,t)=>(0,Fp.jsxs)("li",{role:"option","aria-selected":t===u,onMouseDown:t=>{t.preventDefault(),y(e)},onMouseEnter:()=>h(t),className:"px-4 py-2 text-sm cursor-pointer ".concat(t===u?"bg-gray-100":"hover:bg-gray-50"),children:[(0,Fp.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fp.jsx)("div",{className:"font-medium",children:e.label}),(0,Fp.jsxs)("div",{className:"ml-3 flex items-center gap-2",children:[(0,Fp.jsx)("span",{className:"text-[11px] uppercase text-gray-500",children:e.dosageForm}),e.sensitivity&&(0,Fp.jsx)("span",{className:"text-[11px] px-2 py-0.5 rounded-full border",style:{background:"Sensitive"===e.sensitivity?"#FEF2F2":"#F1F8F5",color:"Sensitive"===e.sensitivity?"#991B1B":"#166534",borderColor:"Sensitive"===e.sensitivity?"#FECACA":"#BBE5C8"},children:e.sensitivity})]})]}),e.name&&(0,Fp.jsx)("div",{className:"text-xs text-gray-500",children:e.name})]},e.id||e.label))})]})}function aN(e){try{if(!e)return"\u2014";let t;if(null!==e&&void 0!==e&&e.toDate)t=e.toDate();else if(null!==e&&void 0!==e&&e.seconds)t=new Date(1e3*e.seconds);else if("string"===typeof e){const n=Date.parse(e.replace(" at "," "));t=isNaN(n)?new Date(e):new Date(n)}else t=new Date(e);if(isNaN(t.getTime()))return"\u2014";const n=Date.now()-t.getTime(),r=Math.floor(n/315576e5);return r>=0?r:"\u2014"}catch(t){return"\u2014"}}function oN(e){let{onMenuClick:t,logoSrc:n="/Images/TrustDose_logo.png",hideMenu:r=!1,logoHeight:i=32,iconWidth:s=20,barThickness:a=2.5,barGap:o=4.5,color:l="var(--td-primary-ink, #7b5297)"}=e;return(0,Fp.jsx)("header",{className:"sticky top-0 z-30 bg-white/90 backdrop-blur border-b",children:(0,Fp.jsxs)("div",{className:"h-16 w-full px-4 flex items-center gap-3",children:[!r&&(0,Fp.jsx)("button",{type:"button","aria-label":"Open menu",onClick:t,className:"\r inline-flex h-10 w-10 items-center justify-center\r rounded-lg select-none transition\r hover:bg-black/[0.03] focus:outline-none focus:ring-2\r ",style:{color:l,"--tw-ring-color":"rgba(159,118,180,.35)"},children:(0,Fp.jsxs)("span",{"aria-hidden":"true",className:"flex flex-col items-center justify-center",style:{rowGap:o},children:[(0,Fp.jsx)("span",{className:"block rounded-full",style:{width:s,height:a,background:"currentColor"}}),(0,Fp.jsx)("span",{className:"block rounded-full",style:{width:s,height:a,background:"currentColor"}}),(0,Fp.jsx)("span",{className:"block rounded-full",style:{width:s,height:a,background:"currentColor"}})]})}),(0,Fp.jsx)("img",{src:n,alt:"TrustDose",className:"\r absolute left-20 top-1/2 -translate-y-1/2\r block w-auto\r h-[200px] md:h-[180px] lg:h-[200px]\r object-contain select-none pointer-events-none\r ",draggable:"false"})]})})}function lN(){return(0,Fp.jsx)("footer",{className:"py-6 bg-white border-t",children:(0,Fp.jsxs)("div",{className:"mx-auto max-w-6xl px-6 text-center text-sm text-gray-500",children:["\xa9 ",(new Date).getFullYear()," TrustDose \u2014 All Rights Reserved."]})})}const cN=Ot("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),uN=Ot("file-plus-2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M3 15h6",key:"4e2qda"}],["path",{d:"M6 12v6",key:"1u72j0"}]]),hN=Ot("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),dN=Ot("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),fN=["providerId"],pN=["uid","auth","stsTokenManager"],mN=["providerId","signInMethod"];function gN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yN=gN,vN=new Dm("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),bN=new $m("@firebase/auth");function wN(e){if(bN.logLevel<=Km.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];bN.error("Auth (".concat(ry,"): ").concat(e),...n)}}function xN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw SN(e,...n)}function EN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return SN(e,...n)}function AN(e,t,n){const r=h(h({},yN()),{},{[t]:n});return new Dm("auth","Firebase",r).create(t,{appName:e.name})}function kN(e){return AN(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function SN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return vN.create(e,...n)}function CN(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw SN(t,...r)}}function TN(e){const t="INTERNAL ASSERTION FAILED: "+e;throw wN(t),new Error(t)}function NN(e,t){e||TN(t)}function IN(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function PN(){return"http:"===_N()||"https:"===_N()}function _N(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function RN(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(PN()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class DN{constructor(e,t){this.shortDelay=e,this.longDelay=t,NN(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nm())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return RN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ON(e,t){NN(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class jN{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void TN("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void TN("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void TN("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const LN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},MN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],FN=new DN(3e4,6e4);function BN(e,t){return e.tenantId&&!t.tenantId?h(h({},t),{},{tenantId:e.tenantId}):t}async function UN(e,t,n,r){return zN(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=Mm(h({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=h({method:t,headers:o},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&Am(e.emulatorConfig.host)&&(l.credentials="include"),jN.fetch()(await HN(e,e.config.apiHost,n,a),l)})}async function zN(e,t,n){e._canInitEmulator=!1;const r=h(h({},LN),t);try{const t=new qN(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw WN(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw WN(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw WN(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw WN(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw AN(e,o,a);xN(e,o)}}catch(zR){if(zR instanceof Rm)throw zR;xN(e,"network-request-failed",{message:String(zR)})}}async function VN(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await UN(e,t,n,r,i);return"mfaPendingCredential"in s&&xN(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function HN(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),s=e,a=s.config.emulator?ON(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(MN.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(a).toString()}return a}function GN(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(EN(this.auth,"network-request-failed")),FN.get())})}}function WN(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=EN(e,t,r);return i.customData._tokenResponse=n,i}function QN(e){return void 0!==e&&void 0!==e.enterprise}class KN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return GN(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function JN(e,t){return UN(e,"GET","/v2/recaptchaConfig",BN(e,t))}async function YN(e,t){return UN(e,"POST","/v1/accounts:lookup",t)}function XN(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(zR){}}function ZN(e){return 1e3*Number(e)}function $N(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return wN("JWT malformed, contained fewer than 3 sections"),null;try{const e=gm(n);return e?JSON.parse(e):(wN("Failed to decode base64 JWT payload"),null)}catch(zR){return wN("Caught error parsing JWT payload as JSON",null===zR||void 0===zR?void 0:zR.toString()),null}}function eI(e){const t=$N(e);return CN(t,"internal-error"),CN("undefined"!==typeof t.exp,"internal-error"),CN("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function tI(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(zR){throw zR instanceof Rm&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(zR)&&e.auth.currentUser===e&&await e.auth.signOut(),zR}}class nI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(zR){return void((null===zR||void 0===zR?void 0:zR.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class rI{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=XN(this.lastLoginAt),this.creationTime=XN(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function iI(e){var t;const n=e.auth,r=await e.getIdToken(),i=await tI(e,YN(n,{idToken:r}));CN(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=null!==(t=s.providerUserInfo)&&void 0!==t&&t.length?sI(s.providerUserInfo):[],o=function(e,t){const n=e.filter(e=>!t.some(t=>t.providerId===e.providerId));return[...n,...t]}(e.providerData,a),l=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(null!==o&&void 0!==o&&o.length),u=!!l&&c,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new rI(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,h)}function sI(e){return e.map(e=>{let{providerId:t}=e,n=a(e,fN);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class aI{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){CN(e.idToken,"internal-error"),CN("undefined"!==typeof e.idToken,"internal-error"),CN("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):eI(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){CN(0!==e.length,"internal-error");const t=eI(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(CN(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await zN(e,{},async()=>{const n=Mm({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await HN(e,r,"/v1/token","key=".concat(i)),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:n};return e.emulatorConfig&&Am(e.emulatorConfig.host)&&(o.credentials="include"),jN.fetch()(s,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new aI;return n&&(CN("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(CN("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(CN("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new aI,this.toJSON())}_performRefresh(){return TN("not implemented")}}function oI(e,t){CN("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class lI{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,i=a(e,pN);this.providerId="firebase",this.proactiveRefresh=new nI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new rI(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await tI(this,this.stsTokenManager.getToken(this.auth,e));return CN(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Vm(e),r=await n.getIdToken(t),i=$N(r);CN(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:XN(ZN(i.auth_time)),issuedAtTime:XN(ZN(i.iat)),expirationTime:XN(ZN(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Vm(e);await iI(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(CN(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>h({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new lI(h(h({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){CN(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await iI(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ey(this.auth.app))return Promise.reject(kN(this.auth));const e=await this.getIdToken();return await tI(this,async function(e,t){return UN(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return h(h({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>h({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,y=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:b,emailVerified:w,isAnonymous:x,providerData:E,stsTokenManager:A}=t;CN(b&&A,e,"internal-error");const k=aI.fromJSON(this.name,A);CN("string"===typeof b,e,"internal-error"),oI(u,e.name),oI(d,e.name),CN("boolean"===typeof w,e,"internal-error"),CN("boolean"===typeof x,e,"internal-error"),oI(f,e.name),oI(p,e.name),oI(m,e.name),oI(g,e.name),oI(y,e.name),oI(v,e.name);const S=new lI({uid:b,auth:e,email:d,emailVerified:w,displayName:u,isAnonymous:x,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:k,createdAt:y,lastLoginAt:v});return E&&Array.isArray(E)&&(S.providerData=E.map(e=>h({},e))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new aI;r.updateFromServerResponse(t);const i=new lI({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await iI(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];CN(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?sI(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),a=new aI;a.updateFromIdToken(n);const o=new lI({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new rI(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(o,l),o}}const cI=new Map;function uI(e){NN(e instanceof Function,"Expected a class definition");let t=cI.get(e);return t?(NN(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,cI.set(e,t),t)}class hI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}hI.type="NONE";const dI=hI;function fI(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class pI{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=fI(this.userKey,r.apiKey,i),this.fullPersistenceKey=fI("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await YN(this.auth,{idToken:e}).catch(()=>{});return t?lI._fromGetAccountInfoResponse(this.auth,t,e):null}return lI._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new pI(uI(dI),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||uI(dI);const s=fI(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await YN(e,{idToken:t}).catch(()=>{});if(!r)break;n=await lI._fromGetAccountInfoResponse(e,r,t)}else n=lI._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(t){}})),new pI(i,e,n)):new pI(i,e,n)}}function mI(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(bI(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(gI(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(xI(t))return"Blackberry";if(EI(t))return"Webos";if(yI(t))return"Safari";if((t.includes("chrome/")||vI(t))&&!t.includes("edge/"))return"Chrome";if(wI(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function gI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nm();return/firefox\//i.test(e)}function yI(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nm()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nm();return/crios\//i.test(e)}function bI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nm();return/iemobile/i.test(e)}function wI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nm();return/android/i.test(e)}function xI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nm();return/blackberry/i.test(e)}function EI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nm();return/webos/i.test(e)}function AI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nm();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function kI(){return function(){const e=Nm();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function SI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nm();return AI(e)||wI(e)||EI(e)||xI(e)||/windows phone/i.test(e)||bI(e)}function CI(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=mI(Nm());break;case"Worker":t="".concat(mI(Nm()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(ry,"/").concat(r)}class TI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(zR){r(zR)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(zR){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===zR||void 0===zR?void 0:zR.message})}}}class NI{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class II{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _I(this),this.idTokenSubscription=new _I(this),this.beforeStateQueue=new TI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=uI(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await pI.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(zR){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await YN(this,{idToken:e}),n=await lI._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ey(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,s;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,a=null===(s=n)||void 0===s?void 0:s._redirectEventId,o=await this.tryRedirectSignIn(e);t&&t!==a||null===o||void 0===o||!o.user||(n=o.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(zR){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(zR))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return CN(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(zR){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await iI(e)}catch(zR){if((null===zR||void 0===zR?void 0:zR.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ey(this.app))return Promise.reject(kN(this));const t=e?Vm(e):null;return t&&CN(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&CN(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ey(this.app)?Promise.reject(kN(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ey(this.app)?Promise.reject(kN(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(uI(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return UN(e,"GET","/v2/passwordPolicy",BN(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new NI(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Dm("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return UN(e,"POST","/v2/accounts:revokeToken",BN(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&uI(e)||this._popupRedirectResolver;CN(t,this,"argument-error"),this.redirectPersistenceManager=await pI.create(this,[uI(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(CN(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return CN(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(ey(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(bN.logLevel<=Km.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];bN.warn("Auth (".concat(ry,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function PI(e){return Vm(e)}class _I{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Um(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return CN(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let RI={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DI(e){return RI.loadJS(e)}function OI(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class jI{constructor(){this.enterprise=new LI}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class LI{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const MI="NO_RECAPTCHA";class FI{constructor(e){this.type="recaptcha-enterprise",this.auth=PI(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;QN(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(MI)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new jI).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{JN(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new KN(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&QN(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=RI.recaptchaEnterpriseScript;0!==t.length&&(t+=i),DI(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function BI(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new FI(e);let a;if(i)a=MI;else try{a=await s.verify(n)}catch(l){a=await s.verify(n,!0)}const o=h({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function UI(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await BI(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await BI(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("PHONE_PROVIDER")){const i=await BI(e,t,n);return r(e,i).catch(async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await BI(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await BI(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function zI(e){const t=PI(e),n=await JN(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new KN(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new FI(t).verify()}}function VI(e,t,n){const r=PI(e);CN(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),s=HI(t),{host:a,port:o}=function(e){const t=HI(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:GI(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:GI(t)}}}(t),l=null===o?"":":".concat(o),c={url:"".concat(s,"//").concat(a).concat(l,"/")},u=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return CN(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void CN(jm(c,r.config.emulator)&&jm(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,Am(a)?(km("".concat(s,"//").concat(a).concat(l)),Tm("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function HI(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function GI(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class qI{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return TN("not implemented")}_getIdTokenResponse(e){return TN("not implemented")}_linkToIdToken(e,t){return TN("not implemented")}_getReauthenticationResolver(e){return TN("not implemented")}}async function WI(e,t){return UN(e,"POST","/v1/accounts:signUp",t)}async function QI(e,t){return VN(e,"POST","/v1/accounts:signInWithPassword",BN(e,t))}async function KI(e,t){return UN(e,"POST","/v1/accounts:sendOobCode",BN(e,t))}async function JI(e,t){return KI(e,t)}class YI extends qI{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new YI(e,t,"password")}static _fromEmailAndCode(e,t){return new YI(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return UI(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",QI,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return VN(e,"POST","/v1/accounts:signInWithEmailLink",BN(e,t))}(e,{email:this._email,oobCode:this._password});default:xN(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return UI(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",WI,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return VN(e,"POST","/v1/accounts:signInWithEmailLink",BN(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:xN(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function XI(e,t){return VN(e,"POST","/v1/accounts:signInWithIdp",BN(e,t))}class ZI extends qI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ZI(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):xN("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=a(t,mN);if(!n||!r)return null;const s=new ZI(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return XI(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,XI(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,XI(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Mm(t)}return e}}async function $I(e,t){return UN(e,"POST","/v1/accounts:sendVerificationCode",BN(e,t))}const eP={USER_NOT_FOUND:"user-not-found"};class tP extends qI{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new tP({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new tP({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return VN(e,"POST","/v1/accounts:signInWithPhoneNumber",BN(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await VN(e,"POST","/v1/accounts:signInWithPhoneNumber",BN(e,t));if(n.temporaryProof)throw WN(e,"account-exists-with-different-credential",n);return n}(e,h({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return VN(e,"POST","/v1/accounts:signInWithPhoneNumber",BN(e,h(h({},t),{},{operation:"REAUTH"})),eP)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new tP({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class nP{constructor(e){var t,n,r,i,s,a;const o=Fm(Bm(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);CN(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.lang)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=Fm(Bm(e)).link,n=t?Fm(Bm(t)).deep_link_id:null,r=Fm(Bm(e)).deep_link_id;return(r?Fm(Bm(r)).link:null)||r||n||t||e}(e);try{return new nP(t)}catch(n){return null}}}class rP{constructor(){this.providerId=rP.PROVIDER_ID}static credential(e,t){return YI._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=nP.parseLink(t);return CN(n,"argument-error"),YI._fromEmailAndCode(e,n.code,n.tenantId)}}rP.PROVIDER_ID="password",rP.EMAIL_PASSWORD_SIGN_IN_METHOD="password",rP.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class iP{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class sP extends iP{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class aP extends sP{constructor(){super("facebook.com")}static credential(e){return ZI._fromParams({providerId:aP.PROVIDER_ID,signInMethod:aP.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return aP.credentialFromTaggedObject(e)}static credentialFromError(e){return aP.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return aP.credential(t.oauthAccessToken)}catch(n){return null}}}aP.FACEBOOK_SIGN_IN_METHOD="facebook.com",aP.PROVIDER_ID="facebook.com";class oP extends sP{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ZI._fromParams({providerId:oP.PROVIDER_ID,signInMethod:oP.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return oP.credentialFromTaggedObject(e)}static credentialFromError(e){return oP.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return oP.credential(n,r)}catch(i){return null}}}oP.GOOGLE_SIGN_IN_METHOD="google.com",oP.PROVIDER_ID="google.com";class lP extends sP{constructor(){super("github.com")}static credential(e){return ZI._fromParams({providerId:lP.PROVIDER_ID,signInMethod:lP.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lP.credentialFromTaggedObject(e)}static credentialFromError(e){return lP.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return lP.credential(t.oauthAccessToken)}catch(n){return null}}}lP.GITHUB_SIGN_IN_METHOD="github.com",lP.PROVIDER_ID="github.com";class cP extends sP{constructor(){super("twitter.com")}static credential(e,t){return ZI._fromParams({providerId:cP.PROVIDER_ID,signInMethod:cP.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return cP.credentialFromTaggedObject(e)}static credentialFromError(e){return cP.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return cP.credential(n,r)}catch(i){return null}}}cP.TWITTER_SIGN_IN_METHOD="twitter.com",cP.PROVIDER_ID="twitter.com";class uP{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await lI._fromIdTokenResponse(e,n,r),s=hP(n);return new uP({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=hP(n);return new uP({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function hP(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class dP extends Rm{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,dP.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new dP(e,t,n,r)}}function fP(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw dP._fromErrorAndOperation(e,n,t,r);throw n})}async function pP(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await tI(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return uP._forOperation(e,"link",r)}async function mP(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(ey(r.app))return Promise.reject(kN(r));const i="reauthenticate";try{const s=await tI(e,fP(r,i,t,e),n);CN(s.idToken,r,"internal-error");const a=$N(s.idToken);CN(a,r,"internal-error");const{sub:o}=a;return CN(e.uid===o,r,"user-mismatch"),uP._forOperation(e,i,s)}catch(zR){throw(null===zR||void 0===zR?void 0:zR.code)==="auth/".concat("user-not-found")&&xN(r,"user-mismatch"),zR}}async function gP(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ey(e.app))return Promise.reject(kN(e));const r="signIn",i=await fP(e,r,t),s=await uP._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function yP(e,t){return gP(PI(e),t)}function vP(e,t,n){var r;CN((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),CN("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),CN("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(CN(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(CN(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function bP(e,t){return UN(e,"POST","/v2/accounts/mfaEnrollment:start",BN(e,t))}new WeakMap;const wP="__sak";class xP{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(wP,"1"),this.storage.removeItem(wP),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class EP extends xP{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=SI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);kI()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}EP.type="LOCAL";const AP=EP;function kP(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function SP(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class CP{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=SP(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return kP(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=SP(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=SP(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=kP(n);const i=setInterval(()=>{const e=kP(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}CP.type="COOKIE";class TP extends xP{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}TP.type="SESSION";const NP=TP;class IP{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new IP(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(null===s||void 0===s||!s.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function PP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}IP.receivers=[];class _P{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((a,o)=>{const l=PP("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function RP(){return window}function DP(){return"undefined"!==typeof RP().WorkerGlobalScope&&"function"===typeof RP().importScripts}const OP="firebaseLocalStorageDb",jP="firebaseLocalStorage",LP="fbase_key";class MP{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function FP(e,t){return e.transaction([jP],t?"readwrite":"readonly").objectStore(jP)}function BP(){const e=indexedDB.open(OP,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(jP,{keyPath:LP})}catch(zR){n(zR)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(jP)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(OP);return new MP(e).toPromise()}(),t(await BP()))})})}async function UP(e,t,n){const r=FP(e,!0).put({[LP]:t,value:n});return new MP(r).toPromise()}function zP(e,t){const n=FP(e,!0).delete(t);return new MP(n).toPromise()}class VP{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await BP()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(zR){if(t++>3)throw zR;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return DP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=IP._getInstance(DP()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new _P(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await BP();return await UP(e,wP,"1"),await zP(e,wP),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>UP(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=FP(e,!1).get(t),r=await new MP(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>zP(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=FP(e,!1).getAll();return new MP(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}VP.type="LOCAL";const HP=VP;function GP(e,t){return UN(e,"POST","/v2/accounts/mfaSignIn:start",BN(e,t))}OI("rcb"),new DN(3e4,6e4);const qP="recaptcha";async function WP(e,t,n){if(!e._getRecaptchaConfig())try{await zI(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){CN("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=UI(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===MI){CN((null===n||void 0===n?void 0:n.type)===qP,e,"argument-error");return bP(e,await QP(e,t,n))}return bP(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;CN("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;CN(s,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=UI(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===MI){CN((null===n||void 0===n?void 0:n.type)===qP,e,"argument-error");return GP(e,await QP(e,t,n))}return GP(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=UI(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===MI){CN((null===n||void 0===n?void 0:n.type)===qP,e,"argument-error");return $I(e,await QP(e,t,n))}return $I(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function QP(e,t,n){CN(n.type===qP,e,"argument-error");const r=await n.verify();CN("string"===typeof r,e,"argument-error");const i=h({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class KP{constructor(e){this.providerId=KP.PROVIDER_ID,this.auth=PI(e)}verifyPhoneNumber(e,t){return WP(this.auth,e,Vm(t))}static credential(e,t){return tP._fromVerification(e,t)}static credentialFromResult(e){const t=e;return KP.credentialFromTaggedObject(t)}static credentialFromError(e){return KP.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?tP._fromTokenResponse(n,r):null}}function JP(e,t){return t?uI(t):(CN(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}KP.PROVIDER_ID="phone",KP.PHONE_SIGN_IN_METHOD="phone";class YP extends qI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return XI(e,this._buildIdpRequest())}_linkToIdToken(e,t){return XI(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return XI(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function XP(e){return gP(e.auth,new YP(e),e.bypassAuthState)}function ZP(e){const{auth:t,user:n}=e;return CN(n,t,"internal-error"),mP(n,new YP(e),e.bypassAuthState)}async function $P(e){const{auth:t,user:n}=e;return CN(n,t,"internal-error"),pP(n,new YP(e),e.bypassAuthState)}class e_{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(zR){this.reject(zR)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(zR){this.reject(zR)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XP;case"linkViaPopup":case"linkViaRedirect":return $P;case"reauthViaPopup":case"reauthViaRedirect":return ZP;default:xN(this.auth,"internal-error")}}resolve(e){NN(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){NN(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const t_=new DN(2e3,1e4);class n_ extends e_{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,n_.currentPopupAction&&n_.currentPopupAction.cancel(),n_.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return CN(e,this.auth,"internal-error"),e}async onExecution(){NN(1===this.filter.length,"Popup operations only handle one event");const e=PP();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(EN(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(EN(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n_.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(EN(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,t_.get())};e()}}n_.currentPopupAction=null;const r_=new Map;class i_ extends e_{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=r_.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=o_(t),r=a_(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(zR){e=()=>Promise.reject(zR)}r_.set(this.auth._key(),e)}return this.bypassAuthState||r_.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function s_(e,t){r_.set(e._key(),t)}function a_(e){return uI(e._redirectPersistence)}function o_(e){return fI("pendingRedirect",e.config.apiKey,e.name)}async function l_(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ey(e.app))return Promise.reject(kN(e));const r=PI(e),i=JP(r,t),s=new i_(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class c_{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return h_(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!h_(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(EN(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(u_(e))}saveEventToCache(e){this.cachedEventUids.add(u_(e)),this.lastProcessedEventTime=Date.now()}}function u_(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function h_(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const d_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,f_=/^https?/;async function p_(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return UN(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(m_(r))return}catch(n){}xN(e,"unauthorized-domain")}function m_(e){const t=IN(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!f_.test(n))return!1;if(d_.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const g_=new DN(3e4,6e4);function y_(){const e=RP().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function v_(e){return new Promise((t,n)=>{var r,i;function s(){y_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{y_(),n(EN(e,"network-request-failed"))},timeout:g_.get()})}if(null!==(r=RP().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=RP().gapi)||void 0===i||!i.load){const t=OI("iframefcb");return RP()[t]=()=>{gapi.load?s():n(EN(e,"network-request-failed"))},DI("".concat(RI.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}s()}}).catch(e=>{throw b_=null,e})}let b_=null;const w_=new DN(5e3,15e3),x_={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},E_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function A_(e){const t=e.config;CN(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?ON(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:ry},i=E_.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(Mm(r).slice(1))}async function k_(e){const t=await function(e){return b_=b_||v_(e),b_}(e),n=RP().gapi;return CN(n,e,"internal-error"),t.open({where:document.body,url:A_(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:x_,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=EN(e,"network-request-failed"),s=RP().setTimeout(()=>{r(i)},w_.get());function a(){RP().clearTimeout(s),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const S_={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class C_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(zR){}}}function T_(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=h(h({},S_),{},{width:r.toString(),height:i.toString(),top:s,left:a}),c=Nm().toLowerCase();n&&(o=vI(c)?"_blank":n),gI(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return AI(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nm())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new C_(null);const d=window.open(t||"",o,u);CN(d,e,"popup-blocked");try{d.focus()}catch(zR){}return new C_(d)}const N_="__/auth/handler",I_="emulator/auth/handler",P_=encodeURIComponent("fac");async function __(e,t,n,r,i,s){CN(e.config.authDomain,e,"auth-domain-config-required"),CN(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ry,eventId:i};if(t instanceof iP){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof sP){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(P_,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(N_);return ON(t,I_)}(e),"?").concat(Mm(o).slice(1)).concat(c)}const R_="webStorageSupport";const D_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=NP,this._completeRedirectFn=l_,this._overrideRedirectResult=s_}async _openPopup(e,t,n,r){var i;NN(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return T_(e,await __(e,t,n,IN(),r),PP())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){RP().location.href=e}(await __(e,t,n,IN(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(NN(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await k_(e),n=new c_(e);return t.register("authEvent",t=>{CN(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(R_,{type:R_},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[R_];void 0!==i&&t(!!i),xN(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=p_(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return SI()||yI()||AI()}};var O_="@firebase/auth",j_="1.11.0";class L_{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){CN(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const M_=xm("authIdTokenMaxAge")||300;let F_=null;function B_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sy();const t=$g(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=$g(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(jm(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;xN(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:D_,persistence:[HP,AP,NP]}),r=xm("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>M_)return;const r=null===t||void 0===t?void 0:t.token;F_!==r&&(F_=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){Vm(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){Vm(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=bm("auth");return s&&VI(n,"http://".concat(s)),n}var U_;RI={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=EN("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},U_="Browser",Zg(new Hm("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;CN(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:U_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CI(U_)},c=new II(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(uI);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Zg(new Hm("auth-internal",e=>(e=>new L_(e))(PI(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),ay(O_,j_,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(U_)),ay(O_,j_,"esm2020");const z_="#B08CC1",V_="#4A2C59";function H_(e,t){for(const n of t){const t=null===e||void 0===e?void 0:e[n];if(null!=t&&""!==String(t).trim())return String(t).trim()}return""}function G_(e){const t=String(e||"").trim();if(/\s/.test(t))return{ok:!1,reason:"No spaces allowed."};if(/[\u0660-\u0669\u06f0-\u06f9]/.test(t))return{ok:!1,reason:"English digits only (0-9)."};if(!/^\+?[0-9]+$/.test(t))return{ok:!1,reason:"Digits 0-9 only (and optional leading +)."};if(/^05\d{8}$/.test(t)){const e=t.slice(2);return{ok:!0,normalized:"+9665".concat(e)}}return/^\+9665\d{8}$/.test(t)?{ok:!0,normalized:t}:{ok:!1,reason:"Must start with 05 or +9665 followed by 8 digits."}}function q_(){const e=fe(),t=ge(),n=e.pathname.includes("/patient"),r=e.pathname.startsWith("/doctor")||e.pathname.startsWith("/prescriptions"),[s,a]=(0,i.useState)(!1),[o,l]=(0,i.useState)(!1),[c,u]=(0,i.useState)(null),[d,f]=(0,i.useState)(null);return(0,i.useEffect)(()=>{r&&(async()=>{const e=localStorage.getItem("userRole"),t=localStorage.getItem("userId");if("doctor"!==e||!t)return u(null),f(null),a(!1),l(!1),void sessionStorage.removeItem("td_doctor");try{const e=YC(cC(xT,"doctors"),ZC("DoctorID","==",String(t)),tT(1)),r=await pT(e);if(!r.empty){const e=r.docs[0],i=(n=e.data())?{name:H_(n,["name"]),healthFacility:H_(n,["healthFacility"]),speciality:H_(n,["speciality"]),licenseNumber:H_(n,["licenseNumber"]),DoctorID:H_(n,["DoctorID"]),phone:H_(n,["phone"]),email:H_(n,["email"])}:null;return u(i),f(e.id),void sessionStorage.setItem("td_doctor",JSON.stringify({DoctorID:(null===i||void 0===i?void 0:i.DoctorID)||String(t),name:(null===i||void 0===i?void 0:i.name)||"",phone:(null===i||void 0===i?void 0:i.phone)||"",email:(null===i||void 0===i?void 0:i.email)||"",healthFacility:(null===i||void 0===i?void 0:i.healthFacility)||"",speciality:(null===i||void 0===i?void 0:i.speciality)||""}))}u(null),f(null),sessionStorage.removeItem("td_doctor")}catch(zR){console.error("Load doctor by DoctorID failed:",zR),u(null),f(null),sessionStorage.removeItem("td_doctor")}var n})()},[r]),(0,Fp.jsxs)("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[(0,Fp.jsx)(oN,{hideMenu:n,onMenuClick:()=>{r&&d&&a(!0)}}),(0,Fp.jsx)("div",{className:"flex-1",children:(0,Fp.jsx)(je,{})}),(0,Fp.jsx)(lN,{}),r&&d&&(0,Fp.jsxs)(Fp.Fragment,{children:[(0,Fp.jsx)("div",{onClick:()=>a(!1),className:"fixed inset-0 z-40 bg-black/40 transition-opacity ".concat(s?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none")}),(0,Fp.jsxs)("aside",{className:"fixed top-0 left-0 z-50 h-full w-[290px] shadow-2xl",style:{transform:s?"translateX(0)":"translateX(-100%)",transition:"transform 180ms ease",background:"linear-gradient(180deg, rgba(176,140,193,0.95) 0%, rgba(146,137,186,0.95) 45%, rgba(82,185,196,0.92) 100%)"},children:[(0,Fp.jsxs)("div",{className:"flex items-center justify-between px-4 py-4",children:[(0,Fp.jsx)("img",{src:"/Images/TrustDose_logo.png",alt:"TrustDose",className:"h-7 w-auto"}),(0,Fp.jsx)("button",{onClick:()=>a(!1),className:"h-9 w-9 grid place-items-center rounded-lg hover:bg-white/20 text-white","aria-label":"Close sidebar",children:(0,Fp.jsx)(cN,{size:18})})]}),(0,Fp.jsxs)("nav",{className:"px-3",children:[(0,Fp.jsxs)(W_,{active:e.pathname.startsWith("/doctor"),onClick:()=>{t("/doctor"),a(!1)},children:[(0,Fp.jsx)(uN,{size:18}),(0,Fp.jsx)("span",{children:"Create Prescription"})]}),(0,Fp.jsxs)(W_,{onClick:()=>{l(!0),a(!1)},children:[(0,Fp.jsx)(hN,{size:18}),(0,Fp.jsx)("span",{children:"My Account"})]}),(0,Fp.jsxs)(W_,{onClick:function(){localStorage.removeItem("userRole"),localStorage.removeItem("userId"),sessionStorage.removeItem("td_patient"),sessionStorage.removeItem("td_doctor"),t("/auth")},variant:"ghost",children:[(0,Fp.jsx)(dN,{size:18}),(0,Fp.jsx)("span",{children:"Sign out"})]})]})]})]}),o&&d&&(0,Fp.jsx)(Q_,{doctor:c,doctorDocId:d,onClose:()=>l(!1),onSaved:e=>u(t=>h(h({},t),e))})]})}function W_(e){let{children:t,onClick:n,active:r=!1,variant:i="solid"}=e;const s=r?"bg-white text-[#5B3A70]":"ghost"===i?"text\u767d/90 hover:bg-white/10".replace("\u767d","white"):"bg-white/25 text-white hover:bg-white/35";return(0,Fp.jsx)("button",{onClick:n,className:"".concat("w-full mb-3 inline-flex items-center gap-3 px-3 py-3 rounded-xl font-medium transition-colors"," ").concat(s),children:t})}function Q_(e){let{doctor:t,doctorDocId:n,onClose:r,onSaved:s}=e;const[a,o]=(0,i.useState)((null===t||void 0===t?void 0:t.phone)||""),[l,c]=(0,i.useState)({ok:!1,reason:"",normalized:""}),[u,h]=(0,i.useState)(!1),[d,f]=(0,i.useState)("");(0,i.useEffect)(()=>c(G_(a)),[a]);const p=l.ok&&!u;const[m,g]=(0,i.useState)(""),[y,v]=(0,i.useState)(""),[b,w]=(0,i.useState)(!1),x=!(null===t||void 0===t||!t.email);return(0,Fp.jsxs)(Fp.Fragment,{children:[(0,Fp.jsx)("div",{className:"fixed inset-0 bg-black/40 z-50",onClick:r}),(0,Fp.jsx)("div",{className:"fixed inset-0 z-50 grid place-items-center px-4",children:(0,Fp.jsxs)("div",{className:"w-full max-w-md rounded-2xl bg-white shadow-xl border p-5",children:[(0,Fp.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Fp.jsx)("h3",{className:"text-lg font-semibold",style:{color:V_},children:"My Account"}),(0,Fp.jsx)("button",{onClick:r,className:"h-8 w-8 grid place-items-center rounded-lg hover:bg-gray-100","aria-label":"Close",children:"\u2715"})]}),(0,Fp.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,Fp.jsx)(K_,{label:"Name",value:(null===t||void 0===t?void 0:t.name)||"\u2014"}),(0,Fp.jsx)(K_,{label:"Health Facility",value:(null===t||void 0===t?void 0:t.healthFacility)||"\u2014"}),(0,Fp.jsx)(K_,{label:"Speciality",value:((null===t||void 0===t?void 0:t.speciality)||"\u2014").trim()}),(0,Fp.jsx)(K_,{label:"Doctor ID",value:(null===t||void 0===t?void 0:t.DoctorID)||"\u2014"}),(0,Fp.jsx)(K_,{label:"License No.",value:(null===t||void 0===t?void 0:t.licenseNumber)||"\u2014"}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsxs)("label",{className:"block text-sm text-gray-700 mb-1",children:["Phone ",(0,Fp.jsx)("span",{className:"text-rose-600",children:"*"})]}),(0,Fp.jsx)("input",{value:a,onChange:e=>o(e.target.value),placeholder:"05xxxxxxxx or +9665xxxxxxxx (no spaces)",inputMode:"tel",pattern:"[+0-9]*",dir:"ltr",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:border-transparent",style:{outlineColor:z_},onKeyDown:e=>{(" "===e.key||/[\u0660-\u0669\u06f0-\u06f9]/.test(e.key))&&e.preventDefault()}}),(0,Fp.jsxs)("div",{style:{marginTop:6,fontSize:12},children:[!a&&(0,Fp.jsx)("span",{style:{color:"#888"},children:"Enter phone starting with 05 or +9665"}),a&&!l.ok&&(0,Fp.jsx)("span",{style:{color:"#b91c1c"},children:l.reason})]})]}),(0,Fp.jsxs)("div",{className:"mt-3",children:[(0,Fp.jsx)("label",{className:"block text-sm text-gray-700 mb-1",children:"Email"}),x?(0,Fp.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Fp.jsx)("span",{className:"font-medium text-gray-800",children:t.email}),(0,Fp.jsx)("span",{className:"text-[12px] px-2 py-0.5 rounded-full border",style:{background:"#F1F8F5",color:"#166534",borderColor:"#BBE5C8"},children:"Verified"})]}):(0,Fp.jsxs)(Fp.Fragment,{children:[(0,Fp.jsxs)("div",{className:"flex gap-2",children:[(0,Fp.jsx)("input",{className:"flex-1 px-3 py-2 border rounded-lg focus:ring-2 focus:border-transparent",style:{outlineColor:z_},placeholder:"name@example.com",value:m,onChange:e=>g(e.target.value),inputMode:"email"}),(0,Fp.jsx)("button",{onClick:async function(){try{v("");const e=String(m||"").trim().toLowerCase();if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))return void v("\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062f\u062e\u0627\u0644 \u0628\u0631\u064a\u062f \u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u0635\u0627\u0644\u062d.");const t=window.location.origin,r=new URLSearchParams({col:"doctors",doc:String(n||""),e:e,redirect:"/doctor"}),i={url:"".concat(t,"/auth-email?").concat(r.toString()),handleCodeInApp:!0};console.log("\ud83d\udce7 Sending verification link to:",i.url),w(!0),await async function(e,t,n){const r=PI(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){CN(t.handleCodeInApp,r,"argument-error"),t&&vP(r,e,t)}(i,n),await UI(r,i,"getOobCode",JI,"EMAIL_PASSWORD_PROVIDER")}(B_(),e,i),localStorage.setItem("td_email_pending",JSON.stringify({email:e,ts:Date.now()})),v("\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0631\u0627\u0628\u0637 \u0627\u0644\u062a\u062d\u0642\u0642 \u0625\u0644\u0649 \u0628\u0631\u064a\u062f\u0643. \u0627\u0641\u062a\u062d\u064a\u0647 \u062b\u0645 \u0627\u0631\u062c\u0639\u064a \u0644\u0644\u062a\u0637\u0628\u064a\u0642.")}catch(zR){console.error("Firebase:",zR.code,zR.message),v("Firebase: ".concat((null===zR||void 0===zR?void 0:zR.code)||(null===zR||void 0===zR?void 0:zR.message)||"\u062a\u0639\u0630\u0631 \u0625\u0631\u0633\u0627\u0644 \u0631\u0627\u0628\u0637 \u0627\u0644\u062a\u062d\u0642\u0642."))}finally{w(!1)}},disabled:b,className:"px-3 py-2 rounded-lg text-white disabled:opacity-50",style:{background:z_},children:b?"Sending...":"Send Verify"})]}),!!y&&(0,Fp.jsx)("div",{className:"mt-2 text-sm",style:{color:y.includes("Firebase")?"#991B1B":"#166534"},children:y})]})]}),!!d&&(0,Fp.jsx)("div",{className:"text-sm",children:d})]}),(0,Fp.jsxs)("div",{className:"mt-4 flex items-center justify-end gap-2",children:[(0,Fp.jsx)("button",{onClick:r,className:"px-4 py-2 rounded-lg border",children:"Cancel"}),(0,Fp.jsx)("button",{onClick:async function(){const e=G_(a);if(e.ok)if(n)try{h(!0),f("");const t={phone:e.normalized,updatedAt:new Date,phoneLocal:vT()};await mT(uC(xT,"doctors",n),t),null===s||void 0===s||s({phone:t.phone}),f("Saved \u2713"),setTimeout(()=>null===r||void 0===r?void 0:r(),600)}catch(zR){f((null===zR||void 0===zR?void 0:zR.message)||"Failed to save.")}finally{h(!1)}else f("Doctor record not found.");else f(e.reason||"Invalid phone.")},disabled:!p,className:"px-4 py-2 rounded-lg text-white disabled:opacity-50",style:{background:z_},children:u?"Saving...":"Save"})]})]})})]})}function K_(e){let{label:t,value:n}=e;return(0,Fp.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fp.jsx)("span",{className:"text-gray-500",children:t}),(0,Fp.jsx)("span",{className:"font-medium text-gray-800 text-right",children:n})]})}const J_="#4A2C59";function Y_(e,t){for(const n of t){const t=null===e||void 0===e?void 0:e[n];if(null!=t&&""!==String(t).trim())return String(t).trim()}return""}function X_(e){if(!e)return null;const t=Y_(e,["fullName","name","fullname"]),n=Y_(e,["nationalId","nationalID","nid","NID"]),r=Y_(e,["phone","mobile","contact"]),i=Y_(e,["locationDistrict","district"]);let s=Y_(e,["gender","sex"]);if(s){const e=s.trim().toLowerCase();"f"===e||"female"===e||"\u0623\u0646\u062b\u0649"===e||"\u0627\u0646\u062b\u0649"===e?s="Female":"m"!==e&&"male"!==e&&"\u0630\u0643\u0631"!==e||(s="Male")}return{fullName:t,nationalId:n,phone:r,gender:s,location:i}}function Z_(){const e=fe(),t=ge(),n=e.pathname.startsWith("/patient"),[r,s]=(0,i.useState)(!1),[a,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)(null),[u,h]=(0,i.useState)(null);return(0,i.useEffect)(()=>{(async()=>{const e=function(){try{const e=new URLSearchParams(window.location.search).get("id");if(e&&String(e).trim())return String(e).trim()}catch(n){}const e=localStorage.getItem("userRole"),t=localStorage.getItem("userId");if("patient"===e&&t)return String(t).trim();try{const e=JSON.parse(sessionStorage.getItem("td_patient")||"null");if(null!==e&&void 0!==e&&e.nid)return String(e.nid).trim()}catch(r){}return null}();if(!e)return c(null),void h(null);try{const t=await dT(uC(xT,"patients",String(e)));if(t.exists())return c(X_(t.data())),void h(t.id)}catch(t){}try{const t=YC(cC(xT,"patients"),ZC("nationalId","==",String(e)),tT(1)),n=await pT(t);if(!n.empty){const e=n.docs[0];return c(X_(e.data())),void h(e.id)}}catch(n){}try{const t=YC(cC(xT,"patients"),ZC("nationalID","==",String(e)),tT(1)),n=await pT(t);if(!n.empty){const e=n.docs[0];return c(X_(e.data())),void h(e.id)}}catch(r){}c(null),h(null)})()},[]),(0,Fp.jsxs)("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[(0,Fp.jsx)(oN,{hideMenu:!1,onMenuClick:()=>{n&&u&&s(!0)}}),(0,Fp.jsx)("div",{className:"flex-1",children:(0,Fp.jsx)(je,{})}),(0,Fp.jsx)(lN,{}),n&&u&&(0,Fp.jsxs)(Fp.Fragment,{children:[(0,Fp.jsx)("div",{onClick:()=>s(!1),className:"fixed inset-0 z-40 bg-black/40 transition-opacity ".concat(r?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none")}),(0,Fp.jsxs)("aside",{className:"fixed top-0 left-0 z-50 h-full w-[290px] shadow-2xl",style:{transform:r?"translateX(0)":"translateX(-100%)",transition:"transform 180ms ease",background:"linear-gradient(180deg, rgba(176,140,193,0.95) 0%, rgba(146,137,186,0.95) 45%, rgba(82,185,196,0.92) 100%)"},children:[(0,Fp.jsxs)("div",{className:"flex items-center justify-between px-4 py-4",children:[(0,Fp.jsx)("img",{src:"/Images/TrustDose_logo.png",alt:"TrustDose",className:"h-7 w-auto"}),(0,Fp.jsx)("button",{onClick:()=>s(!1),className:"h-9 w-9 grid place-items-center rounded-lg hover:bg-white/20 text-white","aria-label":"Close sidebar",children:(0,Fp.jsx)(cN,{size:18})})]}),(0,Fp.jsxs)("nav",{className:"px-3",children:[(0,Fp.jsxs)($_,{onClick:()=>{o(!0),s(!1)},children:[(0,Fp.jsx)(hN,{size:18}),(0,Fp.jsx)("span",{children:"My Profile"})]}),(0,Fp.jsxs)($_,{onClick:function(){localStorage.removeItem("userRole"),localStorage.removeItem("userId"),sessionStorage.removeItem("td_patient"),t("/auth")},variant:"ghost",children:[(0,Fp.jsx)(dN,{size:18}),(0,Fp.jsx)("span",{children:"Sign out"})]})]})]})]}),a&&(0,Fp.jsx)(eR,{patient:l,onClose:()=>o(!1)})]})}function $_(e){let{children:t,onClick:n,active:r=!1,variant:i="solid"}=e;const s=r?"bg-white text-[#5B3A70]":"ghost"===i?"text-white/90 hover:bg-white/10":"bg-white/25 text-white hover:bg-white/35";return(0,Fp.jsx)("button",{onClick:n,className:"".concat("w-full mb-3 inline-flex items-center gap-3 px-3 py-3 rounded-xl font-medium transition-colors"," ").concat(s),children:t})}function eR(e){let{patient:t,onClose:n}=e;const r={fullName:(null===t||void 0===t?void 0:t.fullName)||"\u2014",nationalId:(null===t||void 0===t?void 0:t.nationalId)||"\u2014",phone:(null===t||void 0===t?void 0:t.phone)||"\u2014",gender:(null===t||void 0===t?void 0:t.gender)||"\u2014",location:(null===t||void 0===t?void 0:t.location)||"\u2014"};return(0,Fp.jsxs)(Fp.Fragment,{children:[(0,Fp.jsx)("div",{className:"fixed inset-0 bg-black/40 z-50",onClick:n}),(0,Fp.jsx)("div",{className:"fixed inset-0 z-50 grid place-items-center px-4",children:(0,Fp.jsxs)("div",{className:"w-full max-w-md rounded-2xl bg-white shadow-xl border p-5",children:[(0,Fp.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Fp.jsx)("h3",{className:"text-lg font-semibold",style:{color:J_},children:"My Profile"}),(0,Fp.jsx)("button",{onClick:n,className:"h-8 w-8 grid place-items-center rounded-lg hover:bg-gray-100","aria-label":"Close",children:"\u2715"})]}),(0,Fp.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,Fp.jsx)(tR,{label:"Full Name",value:r.fullName}),(0,Fp.jsx)(tR,{label:"National ID",value:r.nationalId}),(0,Fp.jsx)(tR,{label:"Phone",value:r.phone}),(0,Fp.jsx)(tR,{label:"Gender",value:r.gender}),(0,Fp.jsx)(tR,{label:"Location",value:r.location})]}),(0,Fp.jsx)("div",{className:"mt-4 flex items-center justify-end",children:(0,Fp.jsx)("button",{onClick:n,className:"px-4 py-2 rounded-lg border",children:"Close"})})]})})]})}function tR(e){let{label:t,value:n}=e;return(0,Fp.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fp.jsx)("span",{className:"text-gray-500",children:t}),(0,Fp.jsx)("span",{className:"font-medium text-gray-800 text-right",children:n})]})}const nR={"0x4F5b09D9940a1fF83463De89BD25C216fBd86E5C":{name:"Khalid Altamimi",facility:"Dr. Sulaiman Al Habib Hospital"}},rR=e=>/^\d{10,12}$/.test(String(e||"").trim());async function iR(e,t){const n=new Map;let r="";try{const i=cC(xT,"prescriptions"),s=await async function(e){const t=(new TextEncoder).encode(String(null!==e&&void 0!==e?e:"")),n=await crypto.subtle.digest("SHA-256",t),r=[...new Uint8Array(n)].map(e=>e.toString(16).padStart(2,"0")).join("");return"0x"+r}(t),a=s.replace(/^0x/i,""),o=[YC(i,ZC("patientNationalIdHash","==",s),tT(50)),YC(i,ZC("patientNationalIdHash","==",a),tT(50)),YC(i,ZC("patientNationalId","==",String(t)),tT(50)),YC(i,ZC("patientNationalID","==",String(t)),tT(50)),YC(i,ZC("nationalId","==",String(t)),tT(50)),YC(i,ZC("nationalID","==",String(t)),tT(50)),YC(i,ZC("patientId","==",String(e)),tT(50)),YC(i,ZC("patientDocId","==",String(e)),tT(50)),YC(i,ZC("patientRef","==",String(e)),tT(50))];for(const e of o)try{const t=await pT(e);t.empty||t.docs.forEach(e=>n.set(e.id,h({id:e.id},e.data())))}catch(zR){r=(null===zR||void 0===zR?void 0:zR.message)||String(zR)}}catch(zR){r=(null===zR||void 0===zR?void 0:zR.message)||String(zR),console.error("RX fetch failed:",zR)}const i=Array.from(n.values()).sort((e,t)=>{var n,r,i,s;return((null===(n=t.createdAt)||void 0===n||null===(r=n.toMillis)||void 0===r?void 0:r.call(n))||0)-((null===(i=e.createdAt)||void 0===i||null===(s=i.toMillis)||void 0===s?void 0:s.call(i))||0)});return{items:i,blocked:!1,error:r}}const sR={ink:"#334155",sub:"#64748b",soft:"#F5F3FF",primary:"#B08CC1",successBg:"#F0FDF4",successText:"#166534",successBorder:"#BBE5C8",dangerBg:"#FEF2F2",dangerText:"#991B1B",dangerBorder:"#FECACA"},aR=e=>{const t=String(e||"");return t.length<3?"":"*"+t.slice(-3)};function oR(e){let{label:t,value:n}=e;return(0,Fp.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"170px 1fr",alignItems:"center",gap:12},children:[(0,Fp.jsx)("div",{style:{color:"#6b7280"},children:t}),(0,Fp.jsx)("div",{style:{fontWeight:600,wordBreak:"break-word"},children:null!==n&&void 0!==n?n:"-"})]})}function lR(e){let{name:t}=e;return(0,Fp.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:16},children:[(0,Fp.jsx)("img",{src:"/Images/TrustDose-pill.png",alt:"TrustDose pill",style:{width:28,height:28,objectFit:"contain"}}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsxs)("div",{style:{fontSize:22,fontWeight:800,color:sR.ink},children:["Welcome, ",t||"there"]}),(0,Fp.jsx)("div",{style:{color:sR.sub,marginTop:2},children:"Wishing you good health."})]})]})}function cR(){const[e,t]=(0,i.useState)(null),[n,r]=(0,i.useState)(!0),[s,a]=(0,i.useState)(""),[o,l]=(0,i.useState)(null),[c,u]=(0,i.useState)({items:[],blocked:!1,error:""}),[d,f]=(0,i.useState)({});(0,i.useEffect)(()=>{const e=function(){try{const e=new URLSearchParams(window.location.search).get("id");if(rR(e))return e}catch(r){}const e=localStorage.getItem("TD_PATIENT_NID");if(rR(e))return e;const t=localStorage.getItem("userRole"),n=localStorage.getItem("userId");return"patient"===t&&rR(n)?n:null}();if(!e)return a("No saved patient session. Please log in first."),void r(!1);t(e)},[]),(0,i.useEffect)(()=>{e&&(async()=>{r(!0),a("");try{const t=await async function(e){try{const t=uC(xT,"patients",String(e)),n=await dT(t);if(n.exists())return{id:t.id,data:n.data()}}catch(t){}try{const t=uC(xT,"patients","Ph_".concat(e)),n=await dT(t);if(n.exists())return{id:t.id,data:n.data()}}catch(n){}try{const t=cC(xT,"patients"),n=[YC(t,ZC("nationalID","==",String(e)),tT(1)),YC(t,ZC("nationalId","==",String(e)),tT(1))];for(const e of n){const t=await pT(e);if(!t.empty){const e=t.docs[0];return{id:e.id,data:e.data()}}}}catch(r){}return null}(e);if(!t)throw new Error("Patient not found. Please log in again.");const n=await iR(t.id,e);n.items=await async function(e){const t=[];for(const n of e){let e=n.doctorName||n.doctorFullName||n.prescriberName||n.createdByName||n.practitionerName||n.practitionerFullName||"",r=n.facilityName||n.facility||n.clinicName||n.hospitalName||n.locationName||n.pharmacyName||n.facility&&n.facility.name||"";if((!e||!r)&&n.doctorId){const t=nR[String(n.doctorId)];t&&(e||(e=t.name||""),r||(r=t.facility||""))}t.push(h(h({},n),{},{_doctorName:e||"\u2014",_facilityName:r||"\u2014"}))}return t}(n.items),l(t.data),u(n)}catch(zR){a((null===zR||void 0===zR?void 0:zR.message)||String(zR))}finally{r(!1)}})()},[e]);const p=(0,i.useMemo)(()=>(null===o||void 0===o?void 0:o.name)||"-",[o]);return(0,Fp.jsx)("div",{style:{minHeight:"100vh",background:"#f8fafc",padding:20},children:(0,Fp.jsxs)("div",{style:{maxWidth:900,margin:"0 auto"},children:[n&&(0,Fp.jsx)("div",{children:"Loading..."}),!n&&s&&(0,Fp.jsx)("div",{style:{color:"red"},children:s}),!n&&!s&&(0,Fp.jsxs)(Fp.Fragment,{children:[(0,Fp.jsx)(lR,{name:p}),(0,Fp.jsx)("h2",{style:{fontSize:20,fontWeight:700,marginBottom:16},children:"Prescriptions"}),!c.items.length&&(0,Fp.jsxs)("div",{style:{color:"#6b7280",fontSize:14,marginBottom:8},children:["No prescriptions found for this patient.",c.error?" (".concat(c.error,")"):""]}),c.items.map(e=>{var t;const n=(e=>null!==e&&void 0!==e&&e.dispensed?"Dispensed":"Not Dispensed")(e),r=(e=>{try{const t=null!==e&&void 0!==e&&e.toDate?e.toDate():new Date(e);if(!isNaN(t))return t.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(t){}return"\u2014"})(e.createdAt),i=(e=>{try{const t=null!==e&&void 0!==e&&e.toDate?e.toDate():new Date(e);if(!isNaN(t)){const e=t.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}),n=t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return"".concat(e," - ").concat(n)}}catch(t){}return"\u2014"})(e.createdAt),s=!!d[e.id],a=e._facilityName||"\u2014",o=e._doctorName||"\u2014",l=e.medicineLabel||e.medicineName||"Prescription",c=e.prescriptionID||e.prescriptionId||e.rxNumber||e.prescriptionNumber||e.id,u="Dispensed"===n?{bg:sR.successBg,text:sR.successText,border:sR.successBorder}:{bg:sR.dangerBg,text:sR.dangerText,border:sR.dangerBorder};return(0,Fp.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:16,overflow:"hidden",background:"#fff",marginBottom:18},children:[(0,Fp.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 16px",background:"#ffffff",borderBottom:"1px solid #e5e7eb",borderTopLeftRadius:16,borderTopRightRadius:16},children:[(0,Fp.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,Fp.jsx)("img",{src:"/Images/TrustDose_logo.png",alt:"TrustDose Logo",style:{height:100,objectFit:"contain"}}),(0,Fp.jsx)("div",{style:{background:"#ffffff",color:"#000000",borderRadius:999,padding:"10px 16px",fontWeight:700,border:"none",boxShadow:"none"},children:"Medical Prescription"})]}),(0,Fp.jsxs)("div",{style:{fontSize:14,fontWeight:700,background:"#ffffff",color:"#000000",padding:"8px 14px",borderRadius:8,border:"none",boxShadow:"none"},children:["Date issued: ",(0,Fp.jsx)("span",{children:r})]})]}),(0,Fp.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr auto",gap:12,padding:16,alignItems:"center",borderBottom:s?"1px solid #e5e7eb":"none"},children:[(0,Fp.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,flexWrap:"wrap"},children:[(0,Fp.jsx)("div",{style:{background:u.bg,color:u.text,border:"1px solid ".concat(u.border),padding:"4px 10px",borderRadius:999,fontSize:12,fontWeight:700},children:n}),(0,Fp.jsxs)("div",{style:{color:sR.sub,fontSize:14},children:["Prescription No.:"," ",(0,Fp.jsx)("span",{style:{color:sR.ink,fontWeight:700},children:c})]})]}),(0,Fp.jsx)("button",{onClick:()=>(e=>f(t=>h(h({},t),{},{[e]:!t[e]})))(e.id),style:{background:sR.primary,color:"white",border:"none",padding:"8px 14px",borderRadius:10,fontWeight:700,cursor:"pointer"},children:s?"Hide details":"View details"})]}),s&&(0,Fp.jsxs)("div",{style:{display:"grid",gap:12,padding:16,background:"#fff"},children:[(0,Fp.jsx)("div",{style:{fontWeight:700,color:"#374151",marginBottom:4},children:"Prescription Details"}),(0,Fp.jsx)(oR,{label:"Patient Name",value:p}),(0,Fp.jsx)(oR,{label:"National ID",value:aR(e.patientNationalID||e.nationalID)}),(0,Fp.jsx)(oR,{label:"Facility",value:a}),(0,Fp.jsx)(oR,{label:"Doctor Name",value:o}),(0,Fp.jsx)(oR,{label:"Date & Time",value:i}),(0,Fp.jsxs)("div",{style:{marginTop:10,paddingTop:10,borderTop:"1px dashed #e5e7eb",display:"grid",gap:6},children:[(0,Fp.jsxs)("div",{style:{fontWeight:600,color:"#374151",marginBottom:6},children:["Medicine Name: ",(0,Fp.jsx)("span",{style:{fontWeight:700},children:l})]}),(0,Fp.jsx)(oR,{label:"Dosage",value:e.dosage||e.dose||"\u2014"}),(0,Fp.jsx)(oR,{label:"Frequency",value:e.frequency||e.timesPerDay||"\u2014"}),(0,Fp.jsx)(oR,{label:"Duration",value:null!==(t=e.durationDays)&&void 0!==t?t:"\u2014"}),e.sensitivity&&(0,Fp.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,Fp.jsx)("div",{style:{color:"#6b7280",width:170},children:"Sensitivity"}),(0,Fp.jsx)("div",{style:{fontSize:13,padding:"4px 10px",borderRadius:999,fontWeight:700,border:"1px solid",borderColor:"Sensitive"===e.sensitivity?sR.dangerBorder:sR.successBorder,background:"Sensitive"===e.sensitivity?sR.dangerBg:sR.successBg,color:"Sensitive"===e.sensitivity?sR.dangerText:sR.successText},children:"Sensitive"===e.sensitivity?"Sensitive - (Delivery)":"Non-Sensitive - (Pickup)"})]}),e.notes&&(0,Fp.jsx)(oR,{label:"Notes",value:e.notes})]})]})]},e.id)})]})]})})}const uR="#B08CC1",hR="#0f172a";function dR(){const{state:e}=fe(),t=ge(),n=sessionStorage.getItem("td_patient"),r=n?JSON.parse(n):null,s=(null===e||void 0===e?void 0:e.patientId)||(null===r||void 0===r?void 0:r.id)||"",a=(null===e||void 0===e?void 0:e.patientName)||(null===r||void 0===r?void 0:r.name)||"",[o,l]=(0,i.useState)([]),[c,u]=(0,i.useState)(!0),[d,f]=(0,i.useState)("");(0,i.useEffect)(()=>{s?(async()=>{u(!0);try{const e="0x"+await async function(e){const t=new TextEncoder,n=await crypto.subtle.digest("SHA-256",t.encode(e));return[...new Uint8Array(n)].map(e=>e.toString(16).padStart(2,"0")).join("")}(String(s)),t=YC(cC(xT,"prescriptions"),ZC("patientNationalIdHash","==",e)),n=(await pT(t)).docs.map(e=>{var t,n;const r=e.data(),i=(null===(t=r.createdAt)||void 0===t||null===(n=t.toDate)||void 0===n?void 0:n.call(t))||null;return h(h({id:e.id},r),{},{createdAtTS:i})});n.sort((e,t)=>{var n,r,i,s;return((null===(n=t.createdAtTS)||void 0===n||null===(r=n.getTime)||void 0===r?void 0:r.call(n))||0)-((null===(i=e.createdAtTS)||void 0===i||null===(s=i.getTime)||void 0===s?void 0:s.call(i))||0)}),l(n)}finally{u(!1)}})():t("/doctor")},[s,t]);const p=(0,i.useMemo)(()=>o.filter(e=>{const t=(e.medicineLabel||e.medicineName||"").toLowerCase();return!d||t.includes(d.toLowerCase())}),[o,d]);return(0,Fp.jsxs)("main",{className:"mx-auto w-full max-w-6xl px-3 md:px-5 py-5",children:[(0,Fp.jsxs)("div",{className:"mb-4",children:[(0,Fp.jsxs)("h1",{className:"text-xl md:text-2xl font-semibold",style:{color:hR},children:["Prescriptions ",a?"for ".concat(a):""]}),(0,Fp.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,Fp.jsx)("input",{className:"flex-1 px-4 py-3 border rounded-xl text-base",placeholder:"Filter by medicine name\u2026",value:d,onChange:e=>f(e.target.value)}),(0,Fp.jsx)("button",{className:"px-5 py-3 rounded-xl text-white text-sm",style:{background:uR},onClick:()=>t(-1),children:"\u2190 Back"})]})]}),c?(0,Fp.jsx)("div",{className:"text-gray-500 text-sm",children:"Loading\u2026"}):0===p.length?(0,Fp.jsx)("div",{className:"text-gray-500 text-sm",children:"No prescriptions found."}):(0,Fp.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:p.map(e=>{const t=e.doctorName?"Dr. ".concat(e.doctorName):function(e){if(!e)return"\u2014";const t=String(e);return t.length>10?"".concat(t.slice(0,6),"\u2026").concat(t.slice(-4)):t}(e.doctorId),n=e.doctorFacility?" \u2014 ".concat(e.doctorFacility):"";return(0,Fp.jsx)("div",{className:"p-3 md:p-4 border rounded-xl bg-white shadow-sm",children:(0,Fp.jsxs)("div",{className:"flex justify-between items-start gap-3",children:[(0,Fp.jsxs)("div",{className:"min-w-0",children:[(0,Fp.jsx)("div",{className:"text-lg md:text-xl font-semibold text-slate-800 truncate",children:e.medicineLabel||e.medicineName||"\u2014"}),(0,Fp.jsxs)("div",{className:"text-[13px] md:text-sm text-slate-600 mt-1",children:["Prescribed by ",t,n]}),(0,Fp.jsxs)("div",{className:"text-[13px] md:text-sm text-slate-600 mt-1",children:[e.dosage||"\u2014"," \u2022 ",e.frequency||"\u2014"," \u2022 ",e.durationDays||e.duration||"\u2014"]}),(0,Fp.jsxs)("div",{className:"text-[13px] md:text-sm text-slate-700 mt-2",children:["Medical Condition: ",e.medicalCondition||e.reason||"\u2014"]}),e.notes&&(0,Fp.jsx)("div",{className:"text-[12px] md:text-sm text-slate-500 mt-1 italic line-clamp-2",children:e.notes})]}),(0,Fp.jsx)("div",{className:"text-right shrink-0",children:(0,Fp.jsx)("div",{className:"text-[12px] md:text-xs text-gray-500",children:e.createdAtTS?e.createdAtTS.toLocaleString():"\u2014"})})]})},e.id)})})]})}const fR=Ot("package-check",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),pR=Ot("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),mR="#B08CC1",gR="#4A2C59";function yR(e,t){for(const n of t){const t=null===e||void 0===e?void 0:e[n];if(null!=t&&""!==String(t).trim())return String(t).trim()}return""}function vR(e){return e?{name:yR(e,["name"]),pharmacyName:yR(e,["pharmacyName","name"]),PharmacyID:yR(e,["PharmacyID"]),phone:yR(e,["phone"]),licenseNumber:yR(e,["licenseNumber"]),crNumber:yR(e,["crNumber"]),BranchID:yR(e,["BranchID"]),contact:yR(e,["contact"]),address:yR(e,["address"]),location:yR(e,["location"])}:null}function bR(e){const t=String(e||"").trim();if(/\s/.test(t))return{ok:!1,reason:"No spaces allowed."};if(/[\u0660-\u0669\u06f0-\u06f9]/.test(t))return{ok:!1,reason:"English digits only (0-9)."};if(!/^\+?[0-9]+$/.test(t))return{ok:!1,reason:"Digits 0-9 only (and optional leading +)."};if(/^05\d{8}$/.test(t)){const e=t.slice(2);return{ok:!0,normalized:"+9665".concat(e)}}return/^\+9665\d{8}$/.test(t)?{ok:!0,normalized:t}:{ok:!1,reason:"Must start with 05 or +9665 followed by 8 digits."}}function wR(){const e=fe(),t=ge(),n=e.pathname.startsWith("/pharmacy"),[r,s]=(0,i.useState)(!1),[a,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)(null),[u,d]=(0,i.useState)(null);(0,i.useEffect)(()=>{n&&(async()=>{const e=localStorage.getItem("userRole"),t=localStorage.getItem("userId");if("pharmacy"!==e||!t)return c(null),d(null),s(!1),void o(!1);try{const e=await dT(uC(xT,"pharmacies",String(t)));if(e.exists())return c(vR(e.data())),void d(e.id)}catch(n){}try{const e=await pT(YC(cC(xT,"pharmacies"),ZC("PharmacyID","==",String(t)),tT(1)));if(!e.empty){const t=e.docs[0];return c(vR(t.data())),void d(t.id)}}catch(r){}c(null),d(null)})()},[n]);const f="/pharmacy"===e.pathname||"/pharmacy/"===e.pathname||e.pathname.startsWith("/pharmacy/pickup"),p=e.pathname.startsWith("/pharmacy/delivery"),m=e.pathname.startsWith("/pharmacy/pending");return(0,Fp.jsxs)("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[(0,Fp.jsx)(oN,{hideMenu:!1,onMenuClick:()=>s(!0)}),(0,Fp.jsx)("div",{className:"flex-1",children:(0,Fp.jsx)(je,{})}),(0,Fp.jsx)(lN,{}),n&&(0,Fp.jsxs)(Fp.Fragment,{children:[(0,Fp.jsx)("div",{onClick:()=>s(!1),className:"fixed inset-0 z-40 bg-black/40 transition-opacity ".concat(r?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none")}),(0,Fp.jsxs)("aside",{className:"fixed top-0 left-0 z-50 h-full w-[290px] shadow-2xl",style:{transform:r?"translateX(0)":"translateX(-100%)",transition:"transform 180ms ease",background:"linear-gradient(180deg, rgba(176,140,193,0.95) 0%, rgba(146,137,186,0.95) 45%, rgba(82,185,196,0.92) 100%)"},children:[(0,Fp.jsxs)("div",{className:"flex items-center justify-between px-4 py-4",children:[(0,Fp.jsx)("img",{src:"/Images/TrustDose_logo.png",alt:"TrustDose",className:"h-7 w-auto"}),(0,Fp.jsx)("button",{onClick:()=>s(!1),className:"h-9 w-9 grid place-items-center rounded-lg hover:bg-white/20 text-white","aria-label":"Close sidebar",children:(0,Fp.jsx)(cN,{size:18})})]}),(0,Fp.jsxs)("nav",{className:"px-3",children:[(0,Fp.jsxs)(xR,{active:f,onClick:()=>{t("/pharmacy"),s(!1)},children:[(0,Fp.jsx)(HT,{size:18}),(0,Fp.jsx)("span",{children:"Pick Up Orders"})]}),(0,Fp.jsxs)(xR,{active:p,onClick:()=>{t("/pharmacy/delivery"),s(!1)},children:[(0,Fp.jsx)(fR,{size:18}),(0,Fp.jsx)("span",{children:"Delivery Orders"})]}),(0,Fp.jsxs)(xR,{active:m,onClick:()=>{t("/pharmacy/pending"),s(!1)},children:[(0,Fp.jsx)(pR,{size:18}),(0,Fp.jsx)("span",{children:"Pending Orders"})]}),(0,Fp.jsxs)(xR,{onClick:()=>{u&&(o(!0),s(!1))},variant:u?"solid":"disabled",children:[(0,Fp.jsx)(hN,{size:18}),(0,Fp.jsx)("span",{children:"My Account"})]}),(0,Fp.jsxs)(xR,{onClick:function(){localStorage.removeItem("userRole"),localStorage.removeItem("userId"),sessionStorage.removeItem("td_patient"),t("/auth")},variant:"ghost",children:[(0,Fp.jsx)(dN,{size:18}),(0,Fp.jsx)("span",{children:"Sign out"})]})]})]})]}),a&&u&&(0,Fp.jsx)(ER,{pharmacy:l,pharmacyDocId:u,onClose:()=>o(!1),onSaved:e=>c(t=>h(h({},t),e))})]})}function xR(e){let{children:t,onClick:n,active:r=!1,variant:i="solid"}=e;const s="disabled"===i?"opacity-50 cursor-not-allowed bg-white/25 text-white":r?"bg-white text-[#5B3A70]":"ghost"===i?"text-white/90 hover:bg-white/10":"bg-white/25 text-white hover:bg-white/35";return(0,Fp.jsx)("button",{onClick:n,className:"".concat("w-full mb-3 inline-flex items-center gap-3 px-3 py-3 rounded-xl font-medium transition-colors"," ").concat(s),disabled:"disabled"===i,children:t})}function ER(e){let{pharmacy:t,pharmacyDocId:n,onClose:r,onSaved:s}=e;const[a,o]=(0,i.useState)((null===t||void 0===t?void 0:t.phone)||""),[l,c]=(0,i.useState)({ok:!1,reason:"",normalized:""}),[u,h]=(0,i.useState)(!1),[d,f]=(0,i.useState)("");(0,i.useEffect)(()=>c(bR(a)),[a]);const p=l.ok&&!u;return(0,Fp.jsxs)(Fp.Fragment,{children:[(0,Fp.jsx)("div",{className:"fixed inset-0 bg-black/40 z-50",onClick:r}),(0,Fp.jsx)("div",{className:"fixed inset-0 z-50 grid place-items-center px-4",children:(0,Fp.jsxs)("div",{className:"w-full max-w-md rounded-2xl bg-white shadow-xl border p-5",children:[(0,Fp.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Fp.jsx)("h3",{className:"text-lg font-semibold",style:{color:gR},children:"My Account"}),(0,Fp.jsx)("button",{onClick:r,className:"h-8 w-8 grid place-items-center rounded-lg hover:bg-gray-100","aria-label":"Close",children:"\u2715"})]}),(0,Fp.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,Fp.jsx)(AR,{label:"Pharmacy",value:(null===t||void 0===t?void 0:t.pharmacyName)||(null===t||void 0===t?void 0:t.name)||"\u2014"}),(0,Fp.jsx)(AR,{label:"Pharmacy ID",value:(null===t||void 0===t?void 0:t.BranchID)||"\u2014"}),(0,Fp.jsx)(AR,{label:"Address",value:(null===t||void 0===t?void 0:t.address)||"\u2014"}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsxs)("label",{className:"block text-sm text-gray-700 mb-1",children:["Phone ",(0,Fp.jsx)("span",{className:"text-rose-600",children:"*"})]}),(0,Fp.jsx)("input",{value:a,onChange:e=>o(e.target.value),placeholder:"05xxxxxxxx \u0623\u0648 +9665xxxxxxxx",inputMode:"tel",pattern:"[+0-9]*",dir:"ltr",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:border-transparent",style:{outlineColor:mR},onKeyDown:e=>{(" "===e.key||/[\u0660-\u0669\u06f0-\u06f9]/.test(e.key))&&e.preventDefault()}}),(0,Fp.jsxs)("div",{style:{marginTop:6,fontSize:12},children:[!a&&(0,Fp.jsx)("span",{style:{color:"#888"},children:"Enter phone starting with 05 or +9665"}),a&&!l.ok&&(0,Fp.jsx)("span",{style:{color:"#b91c1c"},children:l.reason})]})]}),!!d&&(0,Fp.jsx)("div",{className:"text-sm",children:d})]}),(0,Fp.jsxs)("div",{className:"mt-4 flex items-center justify-end gap-2",children:[(0,Fp.jsx)("button",{onClick:r,className:"px-4 py-2 rounded-lg border",children:"Cancel"}),(0,Fp.jsx)("button",{onClick:async function(){const e=bR(a);if(!e.ok)return f(e.reason||"Invalid phone.");if(!n)return f("Pharmacy record not found.");try{h(!0),f("");const t={phone:e.normalized,updatedAt:new Date,phoneLocal:vT()};await mT(uC(xT,"pharmacies",n),t),null===s||void 0===s||s({phone:t.phone}),f("Saved \u2713"),setTimeout(()=>null===r||void 0===r?void 0:r(),600)}catch(zR){f((null===zR||void 0===zR?void 0:zR.message)||"Failed to save.")}finally{h(!1)}},disabled:!p,className:"px-4 py-2 rounded-lg text-white disabled:opacity-50",style:{background:mR},children:u?"Saving...":"Save"})]})]})})]})}function AR(e){let{label:t,value:n}=e;return(0,Fp.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Fp.jsx)("span",{className:"text-gray-500",children:t}),(0,Fp.jsx)("span",{className:"font-medium text-gray-800 text-right",children:n})]})}const kR=JSON.parse('{"HV":[{"inputs":[{"internalType":"address","name":"_prescriptionAddress","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"uint256","name":"prescriptionId","type":"uint256"},{"indexed":true,"internalType":"address","name":"pharmacist","type":"address"},{"indexed":false,"internalType":"uint256","name":"timestamp","type":"uint256"}],"name":"Dispensed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":false,"internalType":"bool","name":"enabled","type":"bool"}],"name":"PharmacistUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"newAddress","type":"address"}],"name":"PrescriptionAddressUpdated","type":"event"},{"inputs":[],"name":"admin","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"dispenses","outputs":[{"internalType":"uint256","name":"prescriptionId","type":"uint256"},{"internalType":"address","name":"pharmacist","type":"address"},{"internalType":"uint256","name":"timestamp","type":"uint256"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"isDispensed","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"isPharmacist","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[],"name":"prescription","outputs":[{"internalType":"contract IPrescription","name":"","type":"address"}],"stateMutability":"view","type":"function","constant":true},{"inputs":[{"internalType":"address","name":"_newAddress","type":"address"}],"name":"setPrescriptionContract","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"bool","name":"enabled","type":"bool"}],"name":"setPharmacist","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_prescriptionId","type":"uint256"}],"name":"dispense","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_prescriptionId","type":"uint256"}],"name":"getDispenseInfo","outputs":[{"components":[{"internalType":"uint256","name":"prescriptionId","type":"uint256"},{"internalType":"address","name":"pharmacist","type":"address"},{"internalType":"uint256","name":"timestamp","type":"uint256"}],"internalType":"struct Dispense.DispenseRecord","name":"rec","type":"tuple"},{"internalType":"bool","name":"dispensed","type":"bool"}],"stateMutability":"view","type":"function","constant":true}]}'),SR="0x884FA1D4eEADF75A0f0A916aC88AfD11462e7f25";function CR(){return(new Date).toISOString()}function TR(e){if(!e)return"-";const t=String(e);return t.includes("T")?t.replace("T"," ").slice(0,16):t}function NR(e){if(!e)return"";let t="";for(const n of String(e)){const e=n.charCodeAt(0);e>=1632&&e<=1641?t+=String(e-1632):e>=1776&&e<=1785?t+=String(e-1776):e>=48&&e<=57&&(t+=n)}return t}function IR(e){if(e){if(e&&"object"===typeof e&&"function"===typeof e.toDate)try{return e.toDate().toISOString()}catch(t){return}return"string"===typeof e?e:void 0}}const PR=/[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/g,_R="#B08CC1",RR="#4A2C59",DR={background:"#fff",border:"1px solid #e6e9ee",borderRadius:12,boxShadow:"0 4px 10px rgba(0,0,0,.05)",padding:16},OR={height:36,padding:"0 14px",borderRadius:8,border:"1px solid #e6e9ee",background:"#fff",cursor:"pointer"};function jR(){const[e,t]=(0,i.useState)([{ref:"RX-001",patientId:"1001",patientName:"Salem",medicine:"Insulin",dose:"10u",timesPerDay:2,durationDays:30,createdAt:CR(),dispensed:!1,accepted:!1},{ref:"RX-002",patientId:"1002",patientName:"Maha",medicine:"Panadol",dose:"500mg",timesPerDay:3,durationDays:5,createdAt:CR(),dispensed:!1,accepted:!1},{ref:"RX-003",patientId:"1003",patientName:"Hassan",medicine:"Metformin",dose:"850mg",timesPerDay:1,durationDays:14,createdAt:CR(),dispensed:!1,accepted:!1}]),[n]=(0,i.useState)("Pick Up Orders"),[r,s]=(0,i.useState)(""),a=(0,i.useMemo)(()=>e.filter(e=>!e.dispensed&&!e.accepted),[e]),o=(0,i.useMemo)(()=>e.filter(e=>!e.dispensed&&e.accepted),[e]);function l(e){console.log("PharmacyApp notification:",e)}return(0,Fp.jsx)("div",{style:{minHeight:"100vh",background:"#f8fafc",color:RR,fontFamily:"Arial, sans-serif"},children:(0,Fp.jsx)("main",{style:{padding:24},children:(0,Fp.jsxs)("div",{className:"mx-auto w-full max-w-6xl px-4 md:px-6",children:["Pick Up Orders"===n&&(0,Fp.jsx)(LR,{setRxs:t,q:r,setQ:s,addNotification:l}),"Delivery Orders"===n&&(0,Fp.jsx)(MR,{rows:a,setRxs:t,addNotification:l}),"Pending Orders"===n&&(0,Fp.jsx)(FR,{rows:o,setRxs:t,addNotification:l})]})})})}function LR(e){let{setRxs:t,q:n,setQ:r,addNotification:s}=e;const[a,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)(!1),[u,d]=(0,i.useState)(""),[f,p]=(0,i.useState)([]),[m,g]=(0,i.useState)(""),[y,v]=(0,i.useState)(""),b=String(n||"").trim(),w=/^\d/.test(b),x=NR(b).replace(/\D/g,""),E=w?x.slice(0,10):"",A=w?"":b.toUpperCase(),k=e=>{if(null===e||void 0===e)return"-";const t=Number(e);if(Number.isFinite(t))return t>0?t:"-";const n=String(e).trim();return""===n||"0"===n?"-":n};function S(){var e,t,n,r,i;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const o=void 0!==s.nationalID&&null!==s.nationalID?String(s.nationalID).trim():"-",l=(e=>{const t=Number(e);return Number.isFinite(t)?t:void 0})(s.onchainId),c=null!==(e=null!==(t=s.doctorName)&&void 0!==t?t:null===(n=s.doctor)||void 0===n?void 0:n.name)&&void 0!==e?e:"-",u=s.doctorPhone||s.doctor_phone||s.phone||"-",h=null!==(r=null!==(i=s.frequency)&&void 0!==i?i:s.freq)&&void 0!==r?r:s.timesPerDay?"".concat(s.timesPerDay," times/day"):"-";return{ref:s.prescriptionID||a||"-",onchainId:l,patientId:o,patientName:s.patientName||"-",medicine:s.medicineName||s.medicine||"-",dose:s.dosage||s.dose||"-",timesPerDay:k(s.timesPerDay),durationDays:k(s.durationDays),createdAt:IR(s.createdAt)||CR(),status:s.status||"-",dispensed:!!s.dispensed,dispensedAt:IR(s.dispensedAt)||void 0,dispensedBy:s.dispensedBy||void 0,sensitivity:s.sensitivity||"-",doctorName:c,doctorPhone:u,frequency:h,_docId:a}}async function C(){if(o(!0),c(!0),d(""),p([]),g(""),w){const e=E.length>0&&("1"===E[0]||"2"===E[0]),t=10===E.length;if(!e||!t)return c(!1),void v(e?"Patient ID must be exactly 10 digits.":"Patient ID must start with 1 or 2.")}try{const e=cC(xT,"prescriptions");if(A){const t=await pT(YC(e,ZC("prescriptionID","==",A)));if(t.empty)p([]);else{const e=t.docs[0],n=S(e.data(),e.id);if(!("nonsensitive"===String(n.sensitivity||"").toLowerCase()))return d("This prescription is for a sensitive medication and cannot be dispensed ."),p([]),void c(!1);p([n])}return void c(!1)}const t=[pT(YC(e,ZC("nationalID","==",E),ZC("dispensed","==",!1),ZC("sensitivity","==","NonSensitive")))],n=Number(E);Number.isNaN(n)||t.push(pT(YC(e,ZC("nationalID","==",n),ZC("dispensed","==",!1),ZC("sensitivity","==","NonSensitive"))));const r=await Promise.all(t),i=new Set,s=[];for(const a of r)a&&!a.empty&&a.forEach(e=>{if(i.has(e.id))return;i.add(e.id);const t=S(e.data(),e.id);"NonSensitive"===t.sensitivity&&!1===t.dispensed&&Number.isFinite(t.onchainId)&&s.push(t)});if(0===s.length){const t=[pT(YC(e,ZC("nationalID","==",E)))];Number.isNaN(n)||t.push(pT(YC(e,ZC("nationalID","==",n))));const r=await Promise.all(t);r.some(e=>e&&!e.empty)&&g("No eligible pickup prescriptions. They may be sensitive, already dispensed, or missing on-chain id.")}p(s)}catch(zR){console.error(zR),d("Could not complete search. Check your internet or Firestore access."),p([])}finally{c(!1)}}function T(){r(""),o(!1),p([]),d(""),g(""),v("")}async function N(e){if(!e||!e._docId)return;if(e.dispensed)return void g("This prescription was already dispensed.");if("NonSensitive"!==e.sensitivity)return;if(!Number.isFinite(e.onchainId))return void d("On-chain id is missing for this prescription.");if(window.confirm("Confirm dispensing prescription ".concat(e.ref," for patient ").concat(e.patientName||"","?")))try{var t;c(!0),d(""),g("");const n=await async function(){if(!window.ethereum)throw new Error("MetaMask not detected.");await window.ethereum.request({method:"eth_requestAccounts"});const e=new Lp(window.ethereum),t=await e.getNetwork();return[1337n,5777n,31337n].includes(t.chainId)||console.warn("\u26a0 Unexpected chainId =",t.chainId.toString()),e.getSigner()}(),r=await n.getAddress(),i=new El(SR,WT.HV,n),a=new El("0xC346f14ECf5Eeb5d1c4043400A86a05305A56770",kR.HV,n),o=await a.prescription();if((null===o||void 0===o||null===(t=o.toLowerCase)||void 0===t?void 0:t.call(o))!==SR.toLowerCase())return d("Dispense contract is linked to a different Prescription address."),void c(!1);if(!await a.isPharmacist(r))return d("Your wallet is not enabled as a pharmacist on-chain (Not pharmacist)."),void c(!1);if(!await i.isValid(e.onchainId))return d("Prescription is expired or inactive on-chain."),void c(!1);const l=await a.dispense(e.onchainId),u=await l.wait(),f=(null===u||void 0===u?void 0:u.hash)||l.hash,m=uC(xT,"prescriptions",e._docId);await mT(m,{dispensed:!0,dispensedAt:bT(),dispensedBy:r,dispenseTx:f}),p(t=>t.map(t=>t._docId===e._docId?h(h({},t),{},{dispensed:!0,dispensedAt:(new Date).toISOString(),dispensedBy:r,dispenseTx:f}):t)),s("Prescription ".concat(e.ref," dispensed on-chain \u2713"))}catch(zR){console.error(zR),d(function(e){var t,n,r;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"On-chain dispense failed.";return(null===e||void 0===e?void 0:e.shortMessage)||(null===e||void 0===e?void 0:e.reason)||(null===e||void 0===e||null===(t=e.info)||void 0===t||null===(n=t.error)||void 0===n?void 0:n.message)||(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.message)||(null===e||void 0===e?void 0:e.message)||i}(zR))}finally{c(!1)}}return(0,Fp.jsxs)("section",{style:{display:"grid",gap:20},children:[(0,Fp.jsxs)("section",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[(0,Fp.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[(0,Fp.jsx)(jt,{size:20,style:{color:_R}}),(0,Fp.jsx)("span",{style:{color:RR},children:"Search Prescriptions"})]}),(0,Fp.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,Fp.jsxs)("div",{className:"flex-1 relative",children:[(0,Fp.jsx)("input",{className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:border-transparent transition-all",style:{outlineColor:_R},placeholder:"Enter Patient ID (10 digits, starts with 1 or 2) or Prescription ID",value:n,maxLength:50,onChange:e=>function(e){const t=String(e).replace(PR,"");if(/^\d/.test(t)){const e=NR(t).replace(/\D/g,"").slice(0,10);r(e),e.length&&"1"!==e[0]&&"2"!==e[0]?v("Patient ID must start with 1 or 2."):v("")}else r(t),v("");o(!1),p([]),d(""),g("")}(e.target.value),onKeyDown:e=>{"Enter"===e.key&&C()},inputMode:"numeric"}),!!n&&(0,Fp.jsx)("button",{type:"button",onClick:T,className:"absolute right-3 top-1/2 -translate-y-1/2 hover:opacity-80",style:{color:RR},"aria-label":"Clear",children:"\u2715"})]}),(0,Fp.jsx)("button",{type:"button",onClick:C,className:"px-6 py-3 text-white rounded-xl transition-colors flex items-center gap-2 font-medium disabled:opacity-60",style:{backgroundColor:_R},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#9F76B4",onMouseLeave:e=>e.currentTarget.style.backgroundColor=_R,disabled:l||!n.trim(),children:l?"Searching...":(0,Fp.jsxs)(Fp.Fragment,{children:[(0,Fp.jsx)(jt,{size:18})," Search"]})})]}),(!!n||f.length>0)&&(0,Fp.jsx)("div",{className:"flex justify-end mt-2",children:(0,Fp.jsx)("button",{onClick:T,className:"px-6 py-3 rounded-xl font-semibold",style:{background:"#F3F4F6",color:"#374151"},children:"Clear Search"})}),(!!u||!!m||!!y)&&(0,Fp.jsx)("div",{className:"mt-3 text-red-600 font-medium",children:y||m||u})]}),a&&!l&&0===f.length&&!u&&!m&&(0,Fp.jsx)("div",{className:"text-gray-600",children:"No matching prescriptions found."}),f.length>0&&(0,Fp.jsx)("section",{style:{display:"grid",gap:12},children:f.map(e=>{const t="NonSensitive"===e.sensitivity&&!1===e.dispensed&&Number.isFinite(e.onchainId);return(0,Fp.jsxs)("div",{style:DR,children:[(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("b",{children:"Prescription:"})," ",e.ref]}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("b",{children:"National ID:"})," ",e.patientId]}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("b",{children:"Patient:"})," ",e.patientName]}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("b",{children:"Doctor:"})," ",e.doctorName||"-"]}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("b",{children:"Phone:"})," ",e.doctorPhone||"-"]}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("b",{children:"Frequency:"})," ",e.frequency||"-"]}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("b",{children:"Medicine:"})," ",e.medicine]}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("b",{children:"Dosage:"})," ",e.dose]}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("b",{children:"Duration:"})," ",e.durationDays]}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("b",{children:"Created:"})," ",TR(e.createdAt)]}),(0,Fp.jsxs)("div",{children:[(0,Fp.jsx)("b",{children:"Sensitivity:"})," ",e.sensitivity]}),(0,Fp.jsx)("div",{style:{marginTop:8},children:(0,Fp.jsx)("button",{onClick:()=>N(e),style:h(h({},OR),{},{background:e.dispensed?"#d1fae5":"#fff"}),disabled:!t,title:e.dispensed?"Prescription already dispensed":Number.isFinite(e.onchainId)?"NonSensitive"!==e.sensitivity?"Sensitive: pickup not allowed":"":"Missing on-chain id",children:e.dispensed?"\u2713 Dispensed":t?"Confirm & Dispense":"Not eligible"})})]},e._docId)})})]})}function MR(e){let{rows:t=[],setRxs:n,addNotification:r}=e;return(0,Fp.jsxs)("section",{style:{display:"grid",gap:12},children:[(0,Fp.jsx)("h1",{children:"Delivery Orders"}),t.map(e=>(0,Fp.jsxs)("div",{style:DR,children:[(0,Fp.jsx)("div",{children:(0,Fp.jsxs)("b",{children:["Prescription ",e.ref]})}),(0,Fp.jsxs)("div",{children:["Patient: ",e.patientName," (",e.patientId,")"]}),(0,Fp.jsxs)("div",{children:["Medicine: ",e.medicine]}),(0,Fp.jsxs)("div",{children:["Dose: ",e.dose]}),(0,Fp.jsxs)("div",{children:["Times/Day: ",e.timesPerDay]}),(0,Fp.jsxs)("div",{children:["Duration: ",e.durationDays," days"]}),(0,Fp.jsxs)("div",{children:["Created: ",TR(e.createdAt)]}),e.acceptedAt&&(0,Fp.jsxs)("div",{children:["Accepted At: ",TR(e.acceptedAt)]}),(0,Fp.jsx)("div",{style:{marginTop:8},children:(0,Fp.jsx)("button",{onClick:()=>{return t=e.ref,n(e=>e.map(e=>e.ref===t?h(h({},e),{},{accepted:!0,acceptedAt:CR()}):e)),void r("Prescription ".concat(t," accepted for delivery"));var t},style:h(h({},OR),{},{background:e.accepted?"#d1fae5":"#fff"}),disabled:e.accepted,children:e.accepted?"\u2713 Accepted":"Accept"})})]},e.ref))]})}function FR(e){let{rows:t=[],setRxs:n,addNotification:r}=e;return(0,Fp.jsxs)("section",{style:{display:"grid",gap:12},children:[(0,Fp.jsx)("h1",{children:"Pending Orders"}),t.map(e=>(0,Fp.jsxs)("div",{style:DR,children:[(0,Fp.jsx)("div",{children:(0,Fp.jsxs)("b",{children:["Prescription ",e.ref]})}),(0,Fp.jsxs)("div",{children:["Patient: ",e.patientName," (",e.patientId,")"]}),(0,Fp.jsxs)("div",{children:["Medicine: ",e.medicine]}),(0,Fp.jsxs)("div",{children:["Dose: ",e.dose]}),(0,Fp.jsxs)("div",{children:["Times/Day: ",e.timesPerDay]}),(0,Fp.jsxs)("div",{children:["Duration: ",e.durationDays," days"]}),(0,Fp.jsxs)("div",{children:["Accepted At: ",TR(e.acceptedAt)]}),e.contactedAt&&(0,Fp.jsxs)("div",{children:["Contacted At: ",TR(e.contactedAt)]}),(0,Fp.jsxs)("div",{style:{display:"flex",gap:8,marginTop:8},children:[(0,Fp.jsx)("button",{onClick:()=>{return t=e.ref,n(e=>e.map(e=>e.ref===t?h(h({},e),{},{accepted:!1,acceptedAt:void 0}):e)),void r({type:"cancel",ref:t,text:"Prescription ".concat(t," cancelled")});var t},style:h({},OR),children:"Cancel"}),(0,Fp.jsx)("button",{onClick:()=>{return t=e.ref,n(e=>e.map(e=>e.ref===t?h(h({},e),{},{contactedAt:CR()}):e)),void r("Prescription ".concat(t," contacted logistics"));var t},style:h(h({},OR),{},{background:e.contactedAt?"#d1fae5":"#fff"}),disabled:!!e.contactedAt,children:e.contactedAt?"\u2713 Contacted":"Contact"})]})]},e.ref))]})}function BR(){const e=ge(),[t]=kt(),[n,r]=(0,i.useState)("\ud83d\udd04 Verifying your email..."),[s,a]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{(async()=>{try{const n=B_(),i=window.location.href;console.log("\ud83d\udce7 Email verification started"),console.log("\ud83d\udd17 Current URL:",i);const s=t.get("col")||"doctors",o=t.get("doc")||"",l=t.get("e")||"",c=t.get("redirect")||"/doctor";if(console.log("\ud83d\udccb Parameters:",{col:s,documentId:o,email:l,redirect:c}),!function(e,t){const n=nP.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(0,i))return console.error("\u274c Invalid email link"),r("\u274c Invalid or expired email link"),void a(!0);if(!l||!o)return console.error("\u274c Missing params"),r("\u274c Missing information in link"),void a(!0);r("\ud83d\udd10 Authenticating..."),console.log("\ud83d\udd10 Signing in with email link..."),await async function(e,t,n){if(ey(e.app))return Promise.reject(kN(e));const r=Vm(e),i=rP.credentialWithLink(t,n||IN());return CN(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),yP(r,i)}(n,l,i),console.log("\u2705 Sign in successful"),r("\ud83d\udcbe Saving email to profile..."),console.log("\ud83d\udcbe Updating Firestore..."),await mT(uC(xT,s,o),{email:l,emailVerifiedAt:bT()}),console.log("\u2705 Firestore updated"),await function(e){return Vm(e).signOut()}(n),console.log("\ud83d\udeaa Signed out from temp auth"),localStorage.removeItem("td_email_pending"),r("\u2705 Email verified successfully!"),console.log("\ud83c\udf89 Verification complete! Redirecting..."),setTimeout(()=>{e(c,{replace:!0})},1500)}catch(zR){console.error("\ud83d\udca5 Verification error:",zR),a(!0),"auth/invalid-action-code"===zR.code?r("\u274c This link has expired or was already used"):"auth/invalid-email"===zR.code?r("\u274c Invalid email address"):"auth/network-request-failed"===zR.code?r("\u274c Network error. Check your connection"):r("\u274c Error: ".concat((null===zR||void 0===zR?void 0:zR.message)||"Failed to verify email"))}})()},[t,e]),(0,Fp.jsx)("div",{className:"min-h-screen grid place-items-center",style:{background:"linear-gradient(135deg, #f5f3ff 0%, #eff6ff 100%)"},children:(0,Fp.jsx)("div",{className:"max-w-md w-full mx-4",children:(0,Fp.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center border border-gray-100",children:[(0,Fp.jsx)("div",{className:"mb-6",children:(0,Fp.jsx)("img",{src:"/Images/TrustDose_logo.png",alt:"TrustDose",className:"h-16 mx-auto",onError:e=>{e.target.style.display="none"}})}),(0,Fp.jsx)("div",{className:"text-lg font-medium mb-2 ".concat(s?"text-red-600":n.includes("\u2705")?"text-green-600":"text-gray-700"),children:n}),!s&&!n.includes("\u2705")&&(0,Fp.jsx)("div",{className:"mt-4",children:(0,Fp.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-purple-600 border-r-transparent"})}),s&&(0,Fp.jsx)("button",{onClick:()=>e("/doctor",{replace:!0}),className:"mt-6 px-6 py-3 rounded-lg text-white font-medium transition-all hover:scale-105",style:{background:"#B08CC1"},children:"Return to Dashboard"})]})})})}function UR(){return(0,Fp.jsxs)(vt,{children:[(0,Fp.jsxs)("nav",{style:{padding:12,borderBottom:"1px solid #eee",display:"flex",gap:12},children:[(0,Fp.jsx)(wt,{to:"/auth",children:"Login"}),(0,Fp.jsx)(wt,{to:"/admin",children:"Admin"}),(0,Fp.jsx)(wt,{to:"/doctor-home",children:"DoctorHome"}),(0,Fp.jsx)(wt,{to:"/doctor",children:"Doctor"}),(0,Fp.jsx)(wt,{to:"/pharmacy",children:"Pharmacy"}),(0,Fp.jsx)(wt,{to:"/patient",children:"Patient"})]}),(0,Fp.jsxs)(Fe,{children:[(0,Fp.jsx)(Le,{path:"/",element:(0,Fp.jsx)(Oe,{to:"/auth",replace:!0})}),(0,Fp.jsx)(Le,{path:"/auth",element:(0,Fp.jsx)(UT,{})}),(0,Fp.jsx)(Le,{path:"/auth-email",element:(0,Fp.jsx)(BR,{})}),(0,Fp.jsx)(Le,{path:"/admin",element:(0,Fp.jsx)(sm,{})}),(0,Fp.jsx)(Le,{path:"/doctor-home",element:(0,Fp.jsx)(om,{})}),(0,Fp.jsxs)(Le,{element:(0,Fp.jsx)(q_,{}),children:[(0,Fp.jsx)(Le,{path:"/doctor",element:(0,Fp.jsx)(tN,{})}),(0,Fp.jsx)(Le,{path:"/prescriptions",element:(0,Fp.jsx)(dR,{})})]}),(0,Fp.jsxs)(Le,{path:"/patient",element:(0,Fp.jsx)(Z_,{}),children:[(0,Fp.jsx)(Le,{index:!0,element:(0,Fp.jsx)(cR,{})}),(0,Fp.jsx)(Le,{path:"prescriptions",element:(0,Fp.jsx)(dR,{})})]}),(0,Fp.jsx)(Le,{path:"/pharmacy",element:(0,Fp.jsx)(wR,{}),children:(0,Fp.jsx)(Le,{index:!0,element:(0,Fp.jsx)(jR,{})})}),(0,Fp.jsx)(Le,{path:"*",element:(0,Fp.jsx)("div",{style:{padding:24},children:"Page not found"})})]})]})}s.createRoot(document.getElementById("root")).render((0,Fp.jsx)(i.StrictMode,{children:(0,Fp.jsx)(UR,{})}))})();
//# sourceMappingURL=main.3801359b.js.map